(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8792],{1076:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{$L:()=>rt,$g:()=>en,A4:()=>X,Am:()=>Cn,As:()=>ft,Bd:()=>j,Cv:()=>un,FA:()=>Y,Fy:()=>nt,HN:()=>$n,Hk:()=>G,I9:()=>Qt,Im:()=>ye,K3:()=>Ze,KA:()=>Je,Ku:()=>ta,Ll:()=>D,OE:()=>is,T9:()=>Ne,Uj:()=>ot,XA:()=>ze,ZQ:()=>P,bD:()=>qt,cY:()=>ke,dI:()=>yi,eX:()=>R,g:()=>le,gR:()=>Ae,gz:()=>Nn,hp:()=>ur,jZ:()=>O,kH:()=>Et,kj:()=>Wi,lT:()=>et,lV:()=>re,nr:()=>Te,oD:()=>Zr,od:()=>Gi,qc:()=>jt,sr:()=>ee,tD:()=>Gr,u:()=>ne,vA:()=>Fe,yw:()=>ue,zW:()=>L,zw:()=>we});const y={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Fe=function(B,M){if(!B)throw G(M)},G=function(B){return new Error("Firebase Database ("+y.SDK_VERSION+") INTERNAL ASSERT FAILED: "+B)},We=function(B){const M=[];let $=0;for(let Ce=0;Ce<B.length;Ce++){let K=B.charCodeAt(Ce);K<128?M[$++]=K:K<2048?(M[$++]=K>>6|192,M[$++]=63&K|128):55296==(64512&K)&&Ce+1<B.length&&56320==(64512&B.charCodeAt(Ce+1))?(K=65536+((1023&K)<<10)+(1023&B.charCodeAt(++Ce)),M[$++]=K>>18|240,M[$++]=K>>12&63|128,M[$++]=K>>6&63|128,M[$++]=63&K|128):(M[$++]=K>>12|224,M[$++]=K>>6&63|128,M[$++]=63&K|128)}return M},Ze={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,M){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=M?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let K=0;K<B.length;K+=3){const ut=B[K],bt=K+1<B.length,Ot=bt?B[K+1]:0,ai=K+2<B.length,_t=ai?B[K+2]:0;let Se=(15&Ot)<<2|_t>>6,li=63&_t;ai||(li=64,bt||(Se=64)),Ce.push($[ut>>2],$[(3&ut)<<4|Ot>>4],$[Se],$[li])}return Ce.join("")},encodeString(B,M){return this.HAS_NATIVE_SUPPORT&&!M?btoa(B):this.encodeByteArray(We(B),M)},decodeString(B,M){return this.HAS_NATIVE_SUPPORT&&!M?atob(B):function(B){const M=[];let $=0,Ce=0;for(;$<B.length;){const K=B[$++];if(K<128)M[Ce++]=String.fromCharCode(K);else if(K>191&&K<224){const ut=B[$++];M[Ce++]=String.fromCharCode((31&K)<<6|63&ut)}else if(K>239&&K<365){const ai=((7&K)<<18|(63&B[$++])<<12|(63&B[$++])<<6|63&B[$++])-65536;M[Ce++]=String.fromCharCode(55296+(ai>>10)),M[Ce++]=String.fromCharCode(56320+(1023&ai))}else{const ut=B[$++],bt=B[$++];M[Ce++]=String.fromCharCode((15&K)<<12|(63&ut)<<6|63&bt)}}return M.join("")}(this.decodeStringToByteArray(B,M))},decodeStringToByteArray(B,M){this.init_();const $=M?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let K=0;K<B.length;){const ut=$[B.charAt(K++)],Ot=K<B.length?$[B.charAt(K)]:0;++K;const _t=K<B.length?$[B.charAt(K)]:64;++K;const on=K<B.length?$[B.charAt(K)]:64;if(++K,null==ut||null==Ot||null==_t||null==on)throw new q;Ce.push(ut<<2|Ot>>4),64!==_t&&(Ce.push(Ot<<4&240|_t>>2),64!==on&&Ce.push(_t<<6&192|on))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class q extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Je=function(B){const M=We(B);return Ze.encodeByteArray(M,!0)},ot=function(B){return Je(B).replace(/\./g,"")},ne=function(B){try{return Ze.decodeString(B,!0)}catch(M){console.error("base64Decode failed: ",M)}return null};function X(B){return we(void 0,B)}function we(B,M){if(!(M instanceof Object))return M;switch(M.constructor){case Date:return new Date(M.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return M}for(const $ in M)!M.hasOwnProperty($)||!de($)||(B[$]=we(B[$],M[$]));return B}function de(B){return"__proto__"!==B}const Q=()=>{try{return function Ie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const M=B&&ne(B[1]);return M&&JSON.parse(M)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},Ne=()=>{var B;return null===(B=Q())||void 0===B?void 0:B.config},ze=B=>{var M;return null===(M=Q())||void 0===M?void 0:M[`_${B}`]};class ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((M,$)=>{this.resolve=M,this.reject=$})}wrapCallback(M){return($,Ce)=>{$?this.reject($):this.resolve(Ce),"function"==typeof M&&(this.promise.catch(()=>{}),1===M.length?M($):M($,Ce))}}}function nt(B,M){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=M||"demo-project",K=B.iat||0,ut=B.sub||B.user_id;if(!ut)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const bt=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:K,exp:K+3600,auth_time:K,sub:ut,user_id:ut,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ot(JSON.stringify({alg:"none",type:"JWT"})),ot(JSON.stringify(bt)),""].join(".")}function P(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function O(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(P())}function D(){var B;const M=null===(B=Q())||void 0===B?void 0:B.forceEnvironment;if("node"===M)return!0;if("browser"===M)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function j(){return"object"==typeof self&&self.self===self}function ee(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function re(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function et(){const B=P();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function en(){return!0===y.NODE_CLIENT||!0===y.NODE_ADMIN}function Te(){return!D()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L(){try{return"object"==typeof indexedDB}catch{return!1}}function R(){return new Promise((B,M)=>{try{let $=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(Ce);K.onsuccess=()=>{K.result.close(),$||self.indexedDB.deleteDatabase(Ce),B(!0)},K.onupgradeneeded=()=>{$=!1},K.onerror=()=>{var ut;M((null===(ut=K.error)||void 0===ut?void 0:ut.message)||"")}}catch($){M($)}})}class le extends Error{constructor(M,$,Ce){super($),this.code=M,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,le.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Y.prototype.create)}}class Y{constructor(M,$,Ce){this.service=M,this.serviceName=$,this.errors=Ce}create(M,...$){const Ce=$[0]||{},K=`${this.service}/${M}`,ut=this.errors[M],bt=ut?function Xe(B,M){return B.replace(dt,($,Ce)=>{const K=M[Ce];return null!=K?String(K):`<${Ce}?>`})}(ut,Ce):"Error";return new le(K,`${this.serviceName}: ${bt} (${K}).`,Ce)}}const dt=/\{\$([^}]+)}/g;function rt(B){return JSON.parse(B)}function ft(B){return JSON.stringify(B)}const Bt=function(B){let M={},$={},Ce={},K="";try{const ut=B.split(".");M=rt(ne(ut[0])||""),$=rt(ne(ut[1])||""),K=ut[2],Ce=$.d||{},delete $.d}catch{}return{header:M,claims:$,data:Ce,signature:K}},un=function(B){const $=Bt(B).claims;return!!$&&"object"==typeof $&&$.hasOwnProperty("iat")},jt=function(B){const M=Bt(B).claims;return"object"==typeof M&&!0===M.admin};function Ae(B,M){return Object.prototype.hasOwnProperty.call(B,M)}function ue(B,M){if(Object.prototype.hasOwnProperty.call(B,M))return B[M]}function ye(B){for(const M in B)if(Object.prototype.hasOwnProperty.call(B,M))return!1;return!0}function Et(B,M,$){const Ce={};for(const K in B)Object.prototype.hasOwnProperty.call(B,K)&&(Ce[K]=M.call($,B[K],K,B));return Ce}function qt(B,M){if(B===M)return!0;const $=Object.keys(B),Ce=Object.keys(M);for(const K of $){if(!Ce.includes(K))return!1;const ut=B[K],bt=M[K];if(gn(ut)&&gn(bt)){if(!qt(ut,bt))return!1}else if(ut!==bt)return!1}for(const K of Ce)if(!$.includes(K))return!1;return!0}function gn(B){return null!==B&&"object"==typeof B}function Cn(B){const M=[];for(const[$,Ce]of Object.entries(B))Array.isArray(Ce)?Ce.forEach(K=>{M.push(encodeURIComponent($)+"="+encodeURIComponent(K))}):M.push(encodeURIComponent($)+"="+encodeURIComponent(Ce));return M.length?"&"+M.join("&"):""}function Qt(B){const M={};return B.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[K,ut]=Ce.split("=");M[decodeURIComponent(K)]=decodeURIComponent(ut)}}),M}function ur(B){const M=B.indexOf("?");if(!M)return"";const $=B.indexOf("#",M);return B.substring(M,$>0?$:void 0)}class Nn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let M=1;M<this.blockSize;++M)this.pad_[M]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(M,$){$||($=0);const Ce=this.W_;if("string"==typeof M)for(let on=0;on<16;on++)Ce[on]=M.charCodeAt($)<<24|M.charCodeAt($+1)<<16|M.charCodeAt($+2)<<8|M.charCodeAt($+3),$+=4;else for(let on=0;on<16;on++)Ce[on]=M[$]<<24|M[$+1]<<16|M[$+2]<<8|M[$+3],$+=4;for(let on=16;on<80;on++){const Se=Ce[on-3]^Ce[on-8]^Ce[on-14]^Ce[on-16];Ce[on]=4294967295&(Se<<1|Se>>>31)}let _t,Vr,K=this.chain_[0],ut=this.chain_[1],bt=this.chain_[2],Ot=this.chain_[3],ai=this.chain_[4];for(let on=0;on<80;on++){on<40?on<20?(_t=Ot^ut&(bt^Ot),Vr=1518500249):(_t=ut^bt^Ot,Vr=1859775393):on<60?(_t=ut&bt|Ot&(ut|bt),Vr=2400959708):(_t=ut^bt^Ot,Vr=3395469782);const Se=(K<<5|K>>>27)+_t+ai+Vr+Ce[on]&4294967295;ai=Ot,Ot=bt,bt=4294967295&(ut<<30|ut>>>2),ut=K,K=Se}this.chain_[0]=this.chain_[0]+K&4294967295,this.chain_[1]=this.chain_[1]+ut&4294967295,this.chain_[2]=this.chain_[2]+bt&4294967295,this.chain_[3]=this.chain_[3]+Ot&4294967295,this.chain_[4]=this.chain_[4]+ai&4294967295}update(M,$){if(null==M)return;void 0===$&&($=M.length);const Ce=$-this.blockSize;let K=0;const ut=this.buf_;let bt=this.inbuf_;for(;K<$;){if(0===bt)for(;K<=Ce;)this.compress_(M,K),K+=this.blockSize;if("string"==typeof M){for(;K<$;)if(ut[bt]=M.charCodeAt(K),++bt,++K,bt===this.blockSize){this.compress_(ut),bt=0;break}}else for(;K<$;)if(ut[bt]=M[K],++bt,++K,bt===this.blockSize){this.compress_(ut),bt=0;break}}this.inbuf_=bt,this.total_+=$}digest(){const M=[];let $=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let K=this.blockSize-1;K>=56;K--)this.buf_[K]=255&$,$/=256;this.compress_(this.buf_);let Ce=0;for(let K=0;K<5;K++)for(let ut=24;ut>=0;ut-=8)M[Ce]=this.chain_[K]>>ut&255,++Ce;return M}}function Gr(B,M){const $=new Ai(B,M);return $.subscribe.bind($)}class Ai{constructor(M,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{M(this)}).catch(Ce=>{this.error(Ce)})}next(M){this.forEachObserver($=>{$.next(M)})}error(M){this.forEachObserver($=>{$.error(M)}),this.close(M)}complete(){this.forEachObserver(M=>{M.complete()}),this.close()}subscribe(M,$,Ce){let K;if(void 0===M&&void 0===$&&void 0===Ce)throw new Error("Missing Observer.");K=function io(B,M){if("object"!=typeof B||null===B)return!1;for(const $ of M)if($ in B&&"function"==typeof B[$])return!0;return!1}(M,["next","error","complete"])?M:{next:M,error:$,complete:Ce},void 0===K.next&&(K.next=Di),void 0===K.error&&(K.error=Di),void 0===K.complete&&(K.complete=Di);const ut=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),ut}unsubscribeOne(M){void 0===this.observers||void 0===this.observers[M]||(delete this.observers[M],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(M){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,M)}sendOne(M,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[M])try{$(this.observers[M])}catch(Ce){typeof console<"u"&&console.error&&console.error(Ce)}})}close(M){this.finalized||(this.finalized=!0,void 0!==M&&(this.finalError=M),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Di(){}const Gi=function(B,M,$,Ce){let K;if(Ce<M?K="at least "+M:Ce>$&&(K=0===$?"none":"no more than "+$),K)throw new Error(B+" failed: Was called with "+Ce+(1===Ce?" argument.":" arguments.")+" Expects "+K+".")};function yi(B,M){return`${B} failed: ${M} argument `}function Zr(B,M,$,Ce){if((!Ce||$)&&"function"!=typeof $)throw new Error(yi(B,M)+"must be a valid function.")}function $n(B,M,$,Ce){if((!Ce||$)&&("object"!=typeof $||null===$))throw new Error(yi(B,M)+"must be a valid context object.")}const Wi=function(B){const M=[];let $=0;for(let Ce=0;Ce<B.length;Ce++){let K=B.charCodeAt(Ce);if(K>=55296&&K<=56319){const ut=K-55296;Ce++,Fe(Ce<B.length,"Surrogate pair missing trail surrogate."),K=65536+(ut<<10)+(B.charCodeAt(Ce)-56320)}K<128?M[$++]=K:K<2048?(M[$++]=K>>6|192,M[$++]=63&K|128):K<65536?(M[$++]=K>>12|224,M[$++]=K>>6&63|128,M[$++]=63&K|128):(M[$++]=K>>18|240,M[$++]=K>>12&63|128,M[$++]=K>>6&63|128,M[$++]=63&K|128)}return M},is=function(B){let M=0;for(let $=0;$<B.length;$++){const Ce=B.charCodeAt($);Ce<128?M++:Ce<2048?M+=2:Ce>=55296&&Ce<=56319?(M+=4,$++):M+=3}return M};function ta(B){return B&&B._delegate?B._delegate:B}},1656:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{c:()=>G,r:()=>X});const G=(P,O)=>{P.componentOnReady?P.componentOnReady().then(D=>O(D)):X(()=>O(P))},X=P=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(P):"function"==typeof requestAnimationFrame?requestAnimationFrame(P):setTimeout(P)},6031:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{L:()=>y,a:()=>Fe,b:()=>G,c:()=>We,d:()=>Pt,g:()=>P});const y="ionViewWillEnter",Fe="ionViewDidEnter",G="ionViewWillLeave",We="ionViewDidLeave",Pt="ionViewWillUnload",P=O=>O.classList.contains("ion-page")?O:O.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||O},3503:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{c:()=>Pe});var y=ce(8476),Fe=ce(5638);let G;const Pt=J=>J.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ze=J=>(void 0===G&&(G=void 0===J.style.animationName&&void 0!==J.style.webkitAnimationName?"-webkit-":""),G),q=(J,Q,Z)=>{const Oe=Q.startsWith("animation")?Ze(J):"";J.style.setProperty(Oe+Q,Z)},Je=(J,Q)=>{const Z=Q.startsWith("animation")?Ze(J):"";J.style.removeProperty(Z+Q)},X=[],be=(J=[],Q)=>{if(void 0!==Q){const Z=Array.isArray(Q)?Q:[Q];return[...J,...Z]}return J},Pe=J=>{let Q,Z,Oe,Ne,ze,ke,j,L,R,N,W,dt,rt,nt=[],P=[],O=[],D=!1,ee={},re=[],pe=[],et={},Dt=0,en=!1,Te=!1,le=!0,Y=!1,Xe=!0,ft=!1;const Bt=J,pn=[],wt=[],un=[],jt=[],Ae=[],ue=[],ye=[],Et=[],qt=[],gn=[],tn=[],Cn="function"==typeof AnimationEffect||void 0!==y.w&&"function"==typeof y.w.AnimationEffect,Qt="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Cn,Nn=()=>tn,Di=(he,I)=>{const b=I.findIndex(V=>V.c===he);b>-1&&I.splice(b,1)},yi=(he,I)=>((null!=I&&I.oneTimeCallback?wt:pn).push({c:he,o:I}),rt),Zr=()=>{if(Qt)tn.forEach(he=>{he.cancel()}),tn.length=0;else{const he=jt.slice();(0,Fe.r)(()=>{he.forEach(I=>{Je(I,"animation-name"),Je(I,"animation-duration"),Je(I,"animation-timing-function"),Je(I,"animation-iteration-count"),Je(I,"animation-delay"),Je(I,"animation-play-state"),Je(I,"animation-fill-mode"),Je(I,"animation-direction")})})}},$n=()=>{ue.forEach(he=>{null!=he&&he.parentNode&&he.parentNode.removeChild(he)}),ue.length=0},M=()=>void 0!==ze?ze:j?j.getFill():"both",$=()=>void 0!==R?R:void 0!==ke?ke:j?j.getDirection():"normal",Ce=()=>en?"linear":void 0!==Oe?Oe:j?j.getEasing():"linear",K=()=>Te?0:void 0!==N?N:void 0!==Z?Z:j?j.getDuration():0,ut=()=>void 0!==Ne?Ne:j?j.getIterations():1,bt=()=>void 0!==W?W:void 0!==Q?Q:j?j.getDelay():0,Ft=()=>{0!==Dt&&(Dt--,0===Dt&&((()=>{as(),qt.forEach(z=>z()),gn.forEach(z=>z());const he=le?1:0,I=re,b=pe,V=et;jt.forEach(z=>{const ie=z.classList;I.forEach(ge=>ie.add(ge)),b.forEach(ge=>ie.remove(ge));for(const ge in V)V.hasOwnProperty(ge)&&q(z,ge,V[ge])}),N=void 0,R=void 0,W=void 0,pn.forEach(z=>z.c(he,rt)),wt.forEach(z=>z.c(he,rt)),wt.length=0,Xe=!0,le&&(Y=!0),le=!0})(),j&&j.animationFinish()))},an=(he=!0)=>{$n();const I=(J=>(J.forEach(Q=>{for(const Z in Q)if(Q.hasOwnProperty(Z)){const Oe=Q[Z];if("easing"===Z)Q["animation-timing-function"]=Oe,delete Q[Z];else{const Ne=Pt(Z);Ne!==Z&&(Q[Ne]=Oe,delete Q[Z])}}}),J))(nt);jt.forEach(b=>{if(I.length>0){const V=((J=[])=>J.map(Q=>{const Z=Q.offset,Oe=[];for(const Ne in Q)Q.hasOwnProperty(Ne)&&"offset"!==Ne&&Oe.push(`${Ne}: ${Q[Ne]};`);return`${100*Z}% { ${Oe.join(" ")} }`}).join(" "))(I);dt=void 0!==J?J:(J=>{let Q=X.indexOf(J);return Q<0&&(Q=X.push(J)-1),`ion-animation-${Q}`})(V);const z=((J,Q,Z)=>{var Oe;const Ne=(J=>{const Q=void 0!==J.getRootNode?J.getRootNode():J;return Q.head||Q})(Z),ze=Ze(Z),ke=Ne.querySelector("#"+J);if(ke)return ke;const nt=(null!==(Oe=Z.ownerDocument)&&void 0!==Oe?Oe:document).createElement("style");return nt.id=J,nt.textContent=`@${ze}keyframes ${J} { ${Q} } @${ze}keyframes ${J}-alt { ${Q} }`,Ne.appendChild(nt),nt})(dt,V,b);ue.push(z),q(b,"animation-duration",`${K()}ms`),q(b,"animation-timing-function",Ce()),q(b,"animation-delay",`${bt()}ms`),q(b,"animation-fill-mode",M()),q(b,"animation-direction",$());const ie=ut()===1/0?"infinite":ut().toString();q(b,"animation-iteration-count",ie),q(b,"animation-play-state","paused"),he&&q(b,"animation-name",`${z.id}-alt`),(0,Fe.r)(()=>{q(b,"animation-name",z.id||null)})}})},jn=(he=!0)=>{(()=>{ye.forEach(V=>V()),Et.forEach(V=>V());const he=P,I=O,b=ee;jt.forEach(V=>{const z=V.classList;he.forEach(ie=>z.add(ie)),I.forEach(ie=>z.remove(ie));for(const ie in b)b.hasOwnProperty(ie)&&q(V,ie,b[ie])})})(),nt.length>0&&(Qt?(jt.forEach(he=>{const I=he.animate(nt,{id:Bt,delay:bt(),duration:K(),easing:Ce(),iterations:ut(),fill:M(),direction:$()});I.pause(),tn.push(I)}),tn.length>0&&(tn[0].onfinish=()=>{Ft()})):an(he)),D=!0},Xn=he=>{if(he=Math.min(Math.max(he,0),.9999),Qt)tn.forEach(I=>{I.currentTime=I.effect.getComputedTiming().delay+K()*he,I.pause()});else{const I=`-${K()*he}ms`;jt.forEach(b=>{nt.length>0&&(q(b,"animation-delay",I),q(b,"animation-play-state","paused"))})}},ss=he=>{tn.forEach(I=>{I.effect.updateTiming({delay:bt(),duration:K(),easing:Ce(),iterations:ut(),fill:M(),direction:$()})}),void 0!==he&&Xn(he)},bn=(he=!0,I)=>{(0,Fe.r)(()=>{jt.forEach(b=>{q(b,"animation-name",dt||null),q(b,"animation-duration",`${K()}ms`),q(b,"animation-timing-function",Ce()),q(b,"animation-delay",void 0!==I?`-${I*K()}ms`:`${bt()}ms`),q(b,"animation-fill-mode",M()||null),q(b,"animation-direction",$()||null);const V=ut()===1/0?"infinite":ut().toString();q(b,"animation-iteration-count",V),he&&q(b,"animation-name",`${dt}-alt`),(0,Fe.r)(()=>{q(b,"animation-name",dt||null)})})})},ci=(he=!1,I=!0,b)=>(he&&Ae.forEach(V=>{V.update(he,I,b)}),Qt?ss(b):bn(I,b),rt),Kt=()=>{D&&(Qt?tn.forEach(he=>{he.pause()}):jt.forEach(he=>{q(he,"animation-play-state","paused")}),ft=!0)},Du=()=>{L=void 0,Ft()},as=()=>{L&&clearTimeout(L)},oc=he=>new Promise(I=>{null!=he&&he.sync&&(Te=!0,yi(()=>Te=!1,{oneTimeCallback:!0})),D||jn(),Y&&(Qt?(Xn(0),ss()):bn(),Y=!1),Xe&&(Dt=Ae.length+1,Xe=!1);const b=()=>{Di(V,wt),I()},V=()=>{Di(b,un),I()};yi(V,{oneTimeCallback:!0}),((he,I)=>{un.push({c:he,o:{oneTimeCallback:!0}})})(b),Ae.forEach(z=>{z.play()}),Qt?(tn.forEach(he=>{he.play()}),(0===nt.length||0===jt.length)&&Ft()):(()=>{if(as(),(0,Fe.r)(()=>{jt.forEach(he=>{nt.length>0&&q(he,"animation-play-state","running")})}),0===nt.length||0===jt.length)Ft();else{const he=bt()||0,I=K()||0,b=ut()||1;isFinite(b)&&(L=setTimeout(Du,he+I*b+100)),((J,Q)=>{let Z;const Oe={passive:!0},ze=ke=>{J===ke.target&&(Z&&Z(),as(),(0,Fe.r)(()=>{jt.forEach(he=>{Je(he,"animation-duration"),Je(he,"animation-delay"),Je(he,"animation-play-state")}),(0,Fe.r)(Ft)}))};J&&(J.addEventListener("webkitAnimationEnd",ze,Oe),J.addEventListener("animationend",ze,Oe),Z=()=>{J.removeEventListener("webkitAnimationEnd",ze,Oe),J.removeEventListener("animationend",ze,Oe)})})(jt[0])}})(),ft=!1}),Il=(he,I)=>{const b=nt[0];return void 0===b||void 0!==b.offset&&0!==b.offset?nt=[{offset:0,[he]:I},...nt]:b[he]=I,rt};return rt={parentAnimation:j,elements:jt,childAnimations:Ae,id:Bt,animationFinish:Ft,from:Il,to:(he,I)=>{const b=nt[nt.length-1];return void 0===b||void 0!==b.offset&&1!==b.offset?nt=[...nt,{offset:1,[he]:I}]:b[he]=I,rt},fromTo:(he,I,b)=>Il(he,I).to(he,b),parent:he=>(j=he,rt),play:oc,pause:()=>(Ae.forEach(he=>{he.pause()}),Kt(),rt),stop:()=>{Ae.forEach(he=>{he.stop()}),D&&(Zr(),D=!1),en=!1,Te=!1,Xe=!0,R=void 0,N=void 0,W=void 0,Dt=0,Y=!1,le=!0,ft=!1,un.forEach(he=>he.c(0,rt)),un.length=0},destroy:he=>(Ae.forEach(I=>{I.destroy(he)}),(he=>{Zr(),he&&$n()})(he),jt.length=0,Ae.length=0,nt.length=0,pn.length=0,wt.length=0,D=!1,Xe=!0,rt),keyframes:he=>{const I=nt!==he;return nt=he,I&&(he=>{Qt?Nn().forEach(I=>{const b=I.effect;if(b.setKeyframes)b.setKeyframes(he);else{const V=new KeyframeEffect(b.target,he,b.getTiming());I.effect=V}}):an()})(nt),rt},addAnimation:he=>{if(null!=he)if(Array.isArray(he))for(const I of he)I.parent(rt),Ae.push(I);else he.parent(rt),Ae.push(he);return rt},addElement:he=>{if(null!=he)if(1===he.nodeType)jt.push(he);else if(he.length>=0)for(let I=0;I<he.length;I++)jt.push(he[I]);else console.error("Invalid addElement value");return rt},update:ci,fill:he=>(ze=he,ci(!0),rt),direction:he=>(ke=he,ci(!0),rt),iterations:he=>(Ne=he,ci(!0),rt),duration:he=>(!Qt&&0===he&&(he=1),Z=he,ci(!0),rt),easing:he=>(Oe=he,ci(!0),rt),delay:he=>(Q=he,ci(!0),rt),getWebAnimations:Nn,getKeyframes:()=>nt,getFill:M,getDirection:$,getDelay:bt,getIterations:ut,getEasing:Ce,getDuration:K,afterAddRead:he=>(qt.push(he),rt),afterAddWrite:he=>(gn.push(he),rt),afterClearStyles:(he=[])=>{for(const I of he)et[I]="";return rt},afterStyles:(he={})=>(et=he,rt),afterRemoveClass:he=>(pe=be(pe,he),rt),afterAddClass:he=>(re=be(re,he),rt),beforeAddRead:he=>(ye.push(he),rt),beforeAddWrite:he=>(Et.push(he),rt),beforeClearStyles:(he=[])=>{for(const I of he)ee[I]="";return rt},beforeStyles:(he={})=>(ee=he,rt),beforeRemoveClass:he=>(O=be(O,he),rt),beforeAddClass:he=>(P=be(P,he),rt),onFinish:yi,isRunning:()=>0!==Dt&&!ft,progressStart:(he=!1,I)=>(Ae.forEach(b=>{b.progressStart(he,I)}),Kt(),en=he,D||jn(),ci(!1,!0,I),rt),progressStep:he=>(Ae.forEach(I=>{I.progressStep(he)}),Xn(he),rt),progressEnd:(he,I,b)=>(en=!1,Ae.forEach(V=>{V.progressEnd(he,I,b)}),void 0!==b&&(N=b),Y=!1,le=!0,0===he?(R="reverse"===$()?"normal":"reverse","reverse"===R&&(le=!1),Qt?(ci(),Xn(1-I)):(W=(1-I)*K()*-1,ci(!1,!1))):1===he&&(Qt?(ci(),Xn(I)):(W=I*K()*-1,ci(!1,!1))),void 0!==he&&!j&&oc(),rt)}}},464:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{E:()=>ne,a:()=>y,s:()=>Je});const y=X=>{try{if(X instanceof q)return X.value;if(!We()||"string"!=typeof X||""===X)return X;if(X.includes("onload="))return"";const we=document.createDocumentFragment(),de=document.createElement("div");we.appendChild(de),de.innerHTML=X,Ze.forEach(J=>{const Q=we.querySelectorAll(J);for(let Z=Q.length-1;Z>=0;Z--){const Oe=Q[Z];Oe.parentNode?Oe.parentNode.removeChild(Oe):we.removeChild(Oe);const Ne=G(Oe);for(let ze=0;ze<Ne.length;ze++)Fe(Ne[ze])}});const Ie=G(we);for(let J=0;J<Ie.length;J++)Fe(Ie[J]);const be=document.createElement("div");be.appendChild(we);const Pe=be.querySelector("div");return null!==Pe?Pe.innerHTML:be.innerHTML}catch(we){return console.error(we),""}},Fe=X=>{if(X.nodeType&&1!==X.nodeType)return;if(typeof NamedNodeMap<"u"&&!(X.attributes instanceof NamedNodeMap))return void X.remove();for(let de=X.attributes.length-1;de>=0;de--){const Ie=X.attributes.item(de),be=Ie.name;if(!Pt.includes(be.toLowerCase())){X.removeAttribute(be);continue}const Pe=Ie.value,J=X[be];(null!=Pe&&Pe.toLowerCase().includes("javascript:")||null!=J&&J.toLowerCase().includes("javascript:"))&&X.removeAttribute(be)}const we=G(X);for(let de=0;de<we.length;de++)Fe(we[de])},G=X=>null!=X.children?X.children:X.childNodes,We=()=>{var X;const we=window,de=null===(X=null==we?void 0:we.Ionic)||void 0===X?void 0:X.config;return!de||(de.get?de.get("sanitizerEnabled",!0):!0===de.sanitizerEnabled||void 0===de.sanitizerEnabled)},Pt=["class","id","href","src","name","slot"],Ze=["script","style","iframe","meta","link","object","embed"];class q{constructor(we){this.value=we}}const Je=X=>{const we=window,de=we.Ionic;if(!de||!de.config||"Object"===de.config.constructor.name)return we.Ionic=we.Ionic||{},we.Ionic.config=Object.assign(Object.assign({},we.Ionic.config),X),we.Ionic.config},ne=!1},5938:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{C:()=>Pt,a:()=>G,d:()=>We});var y=ce(467),Fe=ce(5638);const G=function(){var Ze=(0,y.A)(function*(q,Je,ot,ne,X,we){var de;if(q)return q.attachViewToDom(Je,ot,X,ne);if(!(we||"string"==typeof ot||ot instanceof HTMLElement))throw new Error("framework delegate is missing");const Ie="string"==typeof ot?null===(de=Je.ownerDocument)||void 0===de?void 0:de.createElement(ot):ot;return ne&&ne.forEach(be=>Ie.classList.add(be)),X&&Object.assign(Ie,X),Je.appendChild(Ie),yield new Promise(be=>(0,Fe.c)(Ie,be)),Ie});return function(Je,ot,ne,X,we,de){return Ze.apply(this,arguments)}}(),We=(Ze,q)=>{if(q){if(Ze)return Ze.removeViewFromDom(q.parentElement,q);q.remove()}return Promise.resolve()},Pt=()=>{let Ze,q;return{attachViewToDom:function(){var ne=(0,y.A)(function*(X,we,de={},Ie=[]){var be,Pe;let J;if(Ze=X,we){const Z="string"==typeof we?null===(be=Ze.ownerDocument)||void 0===be?void 0:be.createElement(we):we;Ie.forEach(Oe=>Z.classList.add(Oe)),Object.assign(Z,de),Ze.appendChild(Z),J=Z,yield new Promise(Oe=>(0,Fe.c)(Z,Oe))}else if(Ze.children.length>0&&("ION-MODAL"===Ze.tagName||"ION-POPOVER"===Ze.tagName)&&!(J=Ze.children[0]).classList.contains("ion-delegate-host")){const Oe=null===(Pe=Ze.ownerDocument)||void 0===Pe?void 0:Pe.createElement("div");Oe.classList.add("ion-delegate-host"),Ie.forEach(Ne=>Oe.classList.add(Ne)),Oe.append(...Ze.children),Ze.appendChild(Oe),J=Oe}const Q=document.querySelector("ion-app")||document.body;return q=document.createComment("ionic teleport"),Ze.parentNode.insertBefore(q,Ze),Q.appendChild(Ze),null!=J?J:Ze});return function(we,de){return ne.apply(this,arguments)}}(),removeViewFromDom:()=>(Ze&&q&&(q.parentNode.insertBefore(Ze,q),q.remove()),Promise.resolve())}}},8221:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{G:()=>Pt});class Fe{constructor(q,Je,ot,ne,X){this.id=Je,this.name=ot,this.disableScroll=X,this.priority=1e6*ne+Je,this.ctrl=q}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const q=this.ctrl.capture(this.name,this.id,this.priority);return q&&this.disableScroll&&this.ctrl.disableScroll(this.id),q}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class G{constructor(q,Je,ot,ne){this.id=Je,this.disable=ot,this.disableScroll=ne,this.ctrl=q}block(){if(this.ctrl){if(this.disable)for(const q of this.disable)this.ctrl.disableGesture(q,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const q of this.disable)this.ctrl.enableGesture(q,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const We="backdrop-no-scroll",Pt=new class y{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(q){var Je;return new Fe(this,this.newID(),q.name,null!==(Je=q.priority)&&void 0!==Je?Je:0,!!q.disableScroll)}createBlocker(q={}){return new G(this,this.newID(),q.disable,!!q.disableScroll)}start(q,Je,ot){return this.canStart(q)?(this.requestedStart.set(Je,ot),!0):(this.requestedStart.delete(Je),!1)}capture(q,Je,ot){if(!this.start(q,Je,ot))return!1;const ne=this.requestedStart;let X=-1e4;if(ne.forEach(we=>{X=Math.max(X,we)}),X===ot){this.capturedId=Je,ne.clear();const we=new CustomEvent("ionGestureCaptured",{detail:{gestureName:q}});return document.dispatchEvent(we),!0}return ne.delete(Je),!1}release(q){this.requestedStart.delete(q),this.capturedId===q&&(this.capturedId=void 0)}disableGesture(q,Je){let ot=this.disabledGestures.get(q);void 0===ot&&(ot=new Set,this.disabledGestures.set(q,ot)),ot.add(Je)}enableGesture(q,Je){const ot=this.disabledGestures.get(q);void 0!==ot&&ot.delete(Je)}disableScroll(q){this.disabledScroll.add(q),1===this.disabledScroll.size&&document.body.classList.add(We)}enableScroll(q){this.disabledScroll.delete(q),0===this.disabledScroll.size&&document.body.classList.remove(We)}canStart(q){return!(void 0!==this.capturedId||this.isDisabled(q))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(q){const Je=this.disabledGestures.get(q);return!!(Je&&Je.size>0)}newID(){return this.gestureId++,this.gestureId}}},9457:(zn,Vt,ce)=>{"use strict";ce.r(Vt),ce.d(Vt,{MENU_BACK_BUTTON_PRIORITY:()=>ot,OVERLAY_BACK_BUTTON_PRIORITY:()=>Je,blockHardwareBackButton:()=>Ze,shouldUseCloseWatcher:()=>Pt,startHardwareBackButton:()=>q});var y=ce(467),Fe=ce(8476),G=ce(8436);ce(9081);const Pt=()=>G.c.get("experimentalCloseWatcher",!1)&&void 0!==Fe.w&&"CloseWatcher"in Fe.w,Ze=()=>{document.addEventListener("backbutton",()=>{})},q=()=>{const ne=document;let X=!1;const we=()=>{if(X)return;let de=0,Ie=[];const be=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Q,Z){Ie.push({priority:Q,handler:Z,id:de++})}}});ne.dispatchEvent(be);const Pe=function(){var Q=(0,y.A)(function*(Z){try{if(null!=Z&&Z.handler){const Oe=Z.handler(J);null!=Oe&&(yield Oe)}}catch(Oe){console.error(Oe)}});return function(Oe){return Q.apply(this,arguments)}}(),J=()=>{if(Ie.length>0){let Q={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Ie.forEach(Z=>{Z.priority>=Q.priority&&(Q=Z)}),X=!0,Ie=Ie.filter(Z=>Z.id!==Q.id),Pe(Q).then(()=>X=!1)}};J()};if(Pt()){let de;const Ie=()=>{null==de||de.destroy(),de=new Fe.w.CloseWatcher,de.onclose=()=>{we(),Ie()}};Ie()}else ne.addEventListener("backbutton",we)},Je=100,ot=99},5638:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{a:()=>Je,b:()=>ot,c:()=>G,d:()=>Pe,e:()=>be,f:()=>Ie,g:()=>ne,h:()=>de,i:()=>q,j:()=>ze,k:()=>Pt,l:()=>J,m:()=>We,n:()=>we,o:()=>Q,p:()=>Ne,q:()=>ke,r:()=>X,s:()=>nt,t:()=>y,u:()=>Z,v:()=>Oe});const y=(P,O=0)=>new Promise(D=>{Fe(P,O,D)}),Fe=(P,O=0,D)=>{let j,ee;const re={passive:!0},et=()=>{j&&j()},Dt=en=>{(void 0===en||P===en.target)&&(et(),D(en))};return P&&(P.addEventListener("webkitTransitionEnd",Dt,re),P.addEventListener("transitionend",Dt,re),ee=setTimeout(Dt,O+500),j=()=>{void 0!==ee&&(clearTimeout(ee),ee=void 0),P.removeEventListener("webkitTransitionEnd",Dt,re),P.removeEventListener("transitionend",Dt,re)}),et},G=(P,O)=>{P.componentOnReady?P.componentOnReady().then(D=>O(D)):X(()=>O(P))},We=P=>void 0!==P.componentOnReady,Pt=(P,O=[])=>{const D={};return O.forEach(j=>{P.hasAttribute(j)&&(null!==P.getAttribute(j)&&(D[j]=P.getAttribute(j)),P.removeAttribute(j))}),D},Ze=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],q=(P,O)=>{let D=Ze;return O&&O.length>0&&(D=D.filter(j=>!O.includes(j))),Pt(P,D)},Je=(P,O,D,j)=>{var ee;if(typeof window<"u"){const re=window,pe=null===(ee=null==re?void 0:re.Ionic)||void 0===ee?void 0:ee.config;if(pe){const et=pe.get("_ael");if(et)return et(P,O,D,j);if(pe._ael)return pe._ael(P,O,D,j)}}return P.addEventListener(O,D,j)},ot=(P,O,D,j)=>{var ee;if(typeof window<"u"){const re=window,pe=null===(ee=null==re?void 0:re.Ionic)||void 0===ee?void 0:ee.config;if(pe){const et=pe.get("_rel");if(et)return et(P,O,D,j);if(pe._rel)return pe._rel(P,O,D,j)}}return P.removeEventListener(O,D,j)},ne=(P,O=P)=>P.shadowRoot||O,X=P=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(P):"function"==typeof requestAnimationFrame?requestAnimationFrame(P):setTimeout(P),we=P=>!!P.shadowRoot&&!!P.attachShadow,de=P=>{const O=P.closest("ion-item");return O?O.querySelector("ion-label"):null},Ie=P=>{if(P.focus(),P.classList.contains("ion-focusable")){const O=P.closest("ion-app");O&&O.setFocus([P])}},be=(P,O)=>{let D;const j=P.getAttribute("aria-labelledby"),ee=P.id;let re=null!==j&&""!==j.trim()?j:O+"-lbl",pe=null!==j&&""!==j.trim()?document.getElementById(j):de(P);return pe?(null===j&&(pe.id=re),D=pe.textContent,pe.setAttribute("aria-hidden","true")):""!==ee.trim()&&(pe=document.querySelector(`label[for="${ee}"]`),pe&&(""!==pe.id?re=pe.id:pe.id=re=`${ee}-lbl`,D=pe.textContent)),{label:pe,labelId:re,labelText:D}},Pe=(P,O,D,j,ee)=>{if(P||we(O)){let re=O.querySelector("input.aux-input");re||(re=O.ownerDocument.createElement("input"),re.type="hidden",re.classList.add("aux-input"),O.appendChild(re)),re.disabled=ee,re.name=D,re.value=j||""}},J=(P,O,D)=>Math.max(P,Math.min(O,D)),Q=(P,O)=>{if(!P){const D="ASSERT: "+O;throw console.error(D),new Error(D)}},Z=P=>P.timeStamp||Date.now(),Oe=P=>{if(P){const O=P.changedTouches;if(O&&O.length>0){const D=O[0];return{x:D.clientX,y:D.clientY}}if(void 0!==P.pageX)return{x:P.pageX,y:P.pageY}}return{x:0,y:0}},Ne=P=>{const O="rtl"===document.dir;switch(P){case"start":return O;case"end":return!O;default:throw new Error(`"${P}" is not a valid value for [side]. Use "start" or "end" instead.`)}},ze=(P,O)=>{const D=P._original||P;return{_original:P,emit:ke(D.emit.bind(D),O)}},ke=(P,O=0)=>{let D;return(...j)=>{clearTimeout(D),D=setTimeout(P,O,...j)}},nt=(P,O)=>{if(null!=P||(P={}),null!=O||(O={}),P===O)return!0;const D=Object.keys(P);if(D.length!==Object.keys(O).length)return!1;for(const j of D)if(!(j in O)||P[j]!==O[j])return!1;return!0}},405:(zn,Vt,ce)=>{"use strict";ce.r(Vt),ce.d(Vt,{GESTURE_CONTROLLER:()=>y.G,createGesture:()=>ot});var y=ce(8221);const Fe=(de,Ie,be,Pe)=>{const J=G(de)?{capture:!!Pe.capture,passive:!!Pe.passive}:!!Pe.capture;let Q,Z;return de.__zone_symbol__addEventListener?(Q="__zone_symbol__addEventListener",Z="__zone_symbol__removeEventListener"):(Q="addEventListener",Z="removeEventListener"),de[Q](Ie,be,J),()=>{de[Z](Ie,be,J)}},G=de=>{if(void 0===We)try{const Ie=Object.defineProperty({},"passive",{get:()=>{We=!0}});de.addEventListener("optsTest",()=>{},Ie)}catch{We=!1}return!!We};let We;const q=de=>de instanceof Document?de:de.ownerDocument,ot=de=>{let Ie=!1,be=!1,Pe=!0,J=!1;const Q=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},de),Z=Q.canStart,Oe=Q.onWillStart,Ne=Q.onStart,ze=Q.onEnd,ke=Q.notCaptured,nt=Q.onMove,P=Q.threshold,O=Q.passive,D=Q.blurOnStart,j={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},ee=((de,Ie,be)=>{const Pe=be*(Math.PI/180),J="x"===de,Q=Math.cos(Pe),Z=Ie*Ie;let Oe=0,Ne=0,ze=!1,ke=0;return{start(nt,P){Oe=nt,Ne=P,ke=0,ze=!0},detect(nt,P){if(!ze)return!1;const O=nt-Oe,D=P-Ne,j=O*O+D*D;if(j<Z)return!1;const ee=Math.sqrt(j),re=(J?O:D)/ee;return ke=re>Q?1:re<-Q?-1:0,ze=!1,!0},isGesture:()=>0!==ke,getDirection:()=>ke}})(Q.direction,Q.threshold,Q.maxAngle),re=y.G.createGesture({name:de.gestureName,priority:de.gesturePriority,disableScroll:de.disableScroll}),Dt=()=>{Ie&&(J=!1,nt&&nt(j))},en=()=>!!re.capture()&&(Ie=!0,Pe=!1,j.startX=j.currentX,j.startY=j.currentY,j.startTime=j.currentTime,Oe?Oe(j).then(L):L(),!0),L=()=>{D&&(()=>{if(typeof document<"u"){const Y=document.activeElement;null!=Y&&Y.blur&&Y.blur()}})(),Ne&&Ne(j),Pe=!0},R=()=>{Ie=!1,be=!1,J=!1,Pe=!0,re.release()},N=Y=>{const Xe=Ie,dt=Pe;if(R(),dt){if(ne(j,Y),Xe)return void(ze&&ze(j));ke&&ke(j)}},W=((de,Ie,be,Pe,J)=>{let Q,Z,Oe,Ne,ze,ke,nt,P=0;const O=Te=>{P=Date.now()+2e3,Ie(Te)&&(!Z&&be&&(Z=Fe(de,"touchmove",be,J)),Oe||(Oe=Fe(Te.target,"touchend",j,J)),Ne||(Ne=Fe(Te.target,"touchcancel",j,J)))},D=Te=>{P>Date.now()||Ie(Te)&&(!ke&&be&&(ke=Fe(q(de),"mousemove",be,J)),nt||(nt=Fe(q(de),"mouseup",ee,J)))},j=Te=>{re(),Pe&&Pe(Te)},ee=Te=>{pe(),Pe&&Pe(Te)},re=()=>{Z&&Z(),Oe&&Oe(),Ne&&Ne(),Z=Oe=Ne=void 0},pe=()=>{ke&&ke(),nt&&nt(),ke=nt=void 0},et=()=>{re(),pe()},Dt=(Te=!0)=>{Te?(Q||(Q=Fe(de,"touchstart",O,J)),ze||(ze=Fe(de,"mousedown",D,J))):(Q&&Q(),ze&&ze(),Q=ze=void 0,et())};return{enable:Dt,stop:et,destroy:()=>{Dt(!1),Pe=be=Ie=void 0}}})(Q.el,Y=>{const Xe=we(Y);return!(be||!Pe||(X(Y,j),j.startX=j.currentX,j.startY=j.currentY,j.startTime=j.currentTime=Xe,j.velocityX=j.velocityY=j.deltaX=j.deltaY=0,j.event=Y,Z&&!1===Z(j))||(re.release(),!re.start()))&&(be=!0,0===P?en():(ee.start(j.startX,j.startY),!0))},Y=>{Ie?!J&&Pe&&(J=!0,ne(j,Y),requestAnimationFrame(Dt)):(ne(j,Y),ee.detect(j.currentX,j.currentY)&&(!ee.isGesture()||!en())&&le())},N,{capture:!1,passive:O}),le=()=>{R(),W.stop(),ke&&ke(j)};return{enable(Y=!0){Y||(Ie&&N(void 0),R()),W.enable(Y)},destroy(){re.destroy(),W.destroy()}}},ne=(de,Ie)=>{if(!Ie)return;const be=de.currentX,Pe=de.currentY,J=de.currentTime;X(Ie,de);const Q=de.currentX,Z=de.currentY,Ne=(de.currentTime=we(Ie))-J;if(Ne>0&&Ne<100){const ke=(Z-Pe)/Ne;de.velocityX=(Q-be)/Ne*.7+.3*de.velocityX,de.velocityY=.7*ke+.3*de.velocityY}de.deltaX=Q-de.startX,de.deltaY=Z-de.startY,de.event=Ie},X=(de,Ie)=>{let be=0,Pe=0;if(de){const J=de.changedTouches;if(J&&J.length>0){const Q=J[0];be=Q.clientX,Pe=Q.clientY}else void 0!==de.pageX&&(be=de.pageX,Pe=de.pageY)}Ie.currentX=be,Ie.currentY=Pe},we=de=>de.timeStamp||Date.now()},7818:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{m:()=>de});var y=ce(467),Fe=ce(8476),G=ce(9457),We=ce(4929),Pt=ce(5638),Ze=ce(8436),q=ce(3503);const Je=Ie=>(0,q.c)().duration(Ie?400:300),ot=Ie=>{let be,Pe;const J=Ie.width+8,Q=(0,q.c)(),Z=(0,q.c)();Ie.isEndSide?(be=J+"px",Pe="0px"):(be=-J+"px",Pe="0px"),Q.addElement(Ie.menuInnerEl).fromTo("transform",`translateX(${be})`,`translateX(${Pe})`);const Ne="ios"===(0,Ze.b)(Ie),ze=Ne?.2:.25;return Z.addElement(Ie.backdropEl).fromTo("opacity",.01,ze),Je(Ne).addAnimation([Q,Z])},ne=Ie=>{let be,Pe;const J=(0,Ze.b)(Ie),Q=Ie.width;Ie.isEndSide?(be=-Q+"px",Pe=Q+"px"):(be=Q+"px",Pe=-Q+"px");const Z=(0,q.c)().addElement(Ie.menuInnerEl).fromTo("transform",`translateX(${Pe})`,"translateX(0px)"),Oe=(0,q.c)().addElement(Ie.contentEl).fromTo("transform","translateX(0px)",`translateX(${be})`),Ne=(0,q.c)().addElement(Ie.backdropEl).fromTo("opacity",.01,.32);return Je("ios"===J).addAnimation([Z,Oe,Ne])},X=Ie=>{const be=(0,Ze.b)(Ie),Pe=Ie.width*(Ie.isEndSide?-1:1)+"px",J=(0,q.c)().addElement(Ie.contentEl).fromTo("transform","translateX(0px)",`translateX(${Pe})`);return Je("ios"===be).addAnimation(J)},de=(()=>{const Ie=new Map,be=[],Pe=function(){var R=(0,y.A)(function*(N){const W=yield ke(N,!0);return!!W&&W.open()});return function(W){return R.apply(this,arguments)}}(),J=function(){var R=(0,y.A)(function*(N){const W=yield void 0!==N?ke(N,!0):nt();return void 0!==W&&W.close()});return function(W){return R.apply(this,arguments)}}(),Q=function(){var R=(0,y.A)(function*(N){const W=yield ke(N,!0);return!!W&&W.toggle()});return function(W){return R.apply(this,arguments)}}(),Z=function(){var R=(0,y.A)(function*(N,W){const le=yield ke(W);return le&&(le.disabled=!N),le});return function(W,le){return R.apply(this,arguments)}}(),Oe=function(){var R=(0,y.A)(function*(N,W){const le=yield ke(W);return le&&(le.swipeGesture=N),le});return function(W,le){return R.apply(this,arguments)}}(),Ne=function(){var R=(0,y.A)(function*(N){if(null!=N){const W=yield ke(N);return void 0!==W&&W.isOpen()}return void 0!==(yield nt())});return function(W){return R.apply(this,arguments)}}(),ze=function(){var R=(0,y.A)(function*(N){const W=yield ke(N);return!!W&&!W.disabled});return function(W){return R.apply(this,arguments)}}(),ke=function(){var R=(0,y.A)(function*(N,W=!1){if(yield L(),"start"===N||"end"===N){const Y=be.filter(dt=>dt.side===N&&!dt.disabled);if(Y.length>=1)return Y.length>1&&W&&(0,We.p)(`menuController queried for a menu on the "${N}" side, but ${Y.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,Y.map(dt=>dt.el)),Y[0].el;const Xe=be.filter(dt=>dt.side===N);if(Xe.length>=1)return Xe.length>1&&W&&(0,We.p)(`menuController queried for a menu on the "${N}" side, but ${Xe.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,Xe.map(dt=>dt.el)),Xe[0].el}else if(null!=N)return Te(Y=>Y.menuId===N);return Te(Y=>!Y.disabled)||(be.length>0?be[0].el:void 0)});return function(W){return R.apply(this,arguments)}}(),nt=function(){var R=(0,y.A)(function*(){return yield L(),et()});return function(){return R.apply(this,arguments)}}(),P=function(){var R=(0,y.A)(function*(){return yield L(),Dt()});return function(){return R.apply(this,arguments)}}(),O=function(){var R=(0,y.A)(function*(){return yield L(),en()});return function(){return R.apply(this,arguments)}}(),D=(R,N)=>{Ie.set(R,N)},re=function(){var R=(0,y.A)(function*(N,W,le){if(en())return!1;if(W){const Y=yield nt();Y&&N.el!==Y&&(yield Y.setOpen(!1,!1))}return N._setOpen(W,le)});return function(W,le,Y){return R.apply(this,arguments)}}(),et=()=>Te(R=>R._isOpen),Dt=()=>be.map(R=>R.el),en=()=>be.some(R=>R.isAnimating),Te=R=>{const N=be.find(R);if(void 0!==N)return N.el},L=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(R=>new Promise(N=>(0,Pt.c)(R,N))));return D("reveal",X),D("push",ne),D("overlay",ot),null==Fe.d||Fe.d.addEventListener("ionBackButton",R=>{const N=et();N&&R.detail.register(G.MENU_BACK_BUTTON_PRIORITY,()=>N.close())}),{registerAnimation:D,get:ke,getMenus:P,getOpen:nt,isEnabled:ze,swipeGesture:Oe,isAnimating:O,isOpen:Ne,enable:Z,toggle:Q,close:J,open:Pe,_getOpenSync:et,_createAnimation:(R,N)=>{const W=Ie.get(R);if(!W)throw new Error("animation not registered");return W(N)},_register:R=>{be.indexOf(R)<0&&be.push(R)},_unregister:R=>{const N=be.indexOf(R);N>-1&&be.splice(N,1)},_setOpen:re}})()},1497:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{b:()=>Ze,c:()=>q,d:()=>Je,e:()=>P,g:()=>j,l:()=>ke,s:()=>O,t:()=>X,w:()=>nt});var y=ce(467),Fe=ce(9081),G=ce(5638);const Ze="ionViewWillLeave",q="ionViewDidLeave",Je="ionViewWillUnload",X=ee=>new Promise((re,pe)=>{(0,Fe.w)(()=>{we(ee),de(ee).then(et=>{et.animation&&et.animation.destroy(),Ie(ee),re(et)},et=>{Ie(ee),pe(et)})})}),we=ee=>{const re=ee.enteringEl,pe=ee.leavingEl;D(re,pe,ee.direction),ee.showGoBack?re.classList.add("can-go-back"):re.classList.remove("can-go-back"),O(re,!1),re.style.setProperty("pointer-events","none"),pe&&(O(pe,!1),pe.style.setProperty("pointer-events","none"))},de=function(){var ee=(0,y.A)(function*(re){const pe=yield be(re);return pe&&Fe.B.isBrowser?Pe(pe,re):J(re)});return function(pe){return ee.apply(this,arguments)}}(),Ie=ee=>{const re=ee.enteringEl,pe=ee.leavingEl;re.classList.remove("ion-page-invisible"),re.style.removeProperty("pointer-events"),void 0!==pe&&(pe.classList.remove("ion-page-invisible"),pe.style.removeProperty("pointer-events"))},be=function(){var ee=(0,y.A)(function*(re){return re.leavingEl&&re.animated&&0!==re.duration?re.animationBuilder?re.animationBuilder:"ios"===re.mode?(yield Promise.resolve().then(ce.bind(ce,2604))).iosTransitionAnimation:(yield Promise.resolve().then(ce.bind(ce,3003))).mdTransitionAnimation:void 0});return function(pe){return ee.apply(this,arguments)}}(),Pe=function(){var ee=(0,y.A)(function*(re,pe){yield Q(pe,!0);const et=re(pe.baseEl,pe);Ne(pe.enteringEl,pe.leavingEl);const Dt=yield Oe(et,pe);return pe.progressCallback&&pe.progressCallback(void 0),Dt&&ze(pe.enteringEl,pe.leavingEl),{hasCompleted:Dt,animation:et}});return function(pe,et){return ee.apply(this,arguments)}}(),J=function(){var ee=(0,y.A)(function*(re){const pe=re.enteringEl,et=re.leavingEl;return yield Q(re,!1),Ne(pe,et),ze(pe,et),{hasCompleted:!0}});return function(pe){return ee.apply(this,arguments)}}(),Q=function(){var ee=(0,y.A)(function*(re,pe){(void 0!==re.deepWait?re.deepWait:pe)&&(yield Promise.all([P(re.enteringEl),P(re.leavingEl)])),yield Z(re.viewIsReady,re.enteringEl)});return function(pe,et){return ee.apply(this,arguments)}}(),Z=function(){var ee=(0,y.A)(function*(re,pe){re&&(yield re(pe))});return function(pe,et){return ee.apply(this,arguments)}}(),Oe=(ee,re)=>{const pe=re.progressCallback,et=new Promise(Dt=>{ee.onFinish(en=>Dt(1===en))});return pe?(ee.progressStart(!0),pe(ee)):ee.play(),et},Ne=(ee,re)=>{ke(re,Ze),ke(ee,"ionViewWillEnter")},ze=(ee,re)=>{ke(ee,"ionViewDidEnter"),ke(re,q)},ke=(ee,re)=>{if(ee){const pe=new CustomEvent(re,{bubbles:!1,cancelable:!1});ee.dispatchEvent(pe)}},nt=()=>new Promise(ee=>(0,G.r)(()=>(0,G.r)(()=>ee()))),P=function(){var ee=(0,y.A)(function*(re){const pe=re;if(pe){if(null!=pe.componentOnReady){if(null!=(yield pe.componentOnReady()))return}else if(null!=pe.__registerHost)return void(yield new Promise(Dt=>(0,G.r)(Dt)));yield Promise.all(Array.from(pe.children).map(P))}});return function(pe){return ee.apply(this,arguments)}}(),O=(ee,re)=>{re?(ee.setAttribute("aria-hidden","true"),ee.classList.add("ion-page-hidden")):(ee.hidden=!1,ee.removeAttribute("aria-hidden"),ee.classList.remove("ion-page-hidden"))},D=(ee,re,pe)=>{void 0!==ee&&(ee.style.zIndex="back"===pe?"99":"101"),void 0!==re&&(re.style.zIndex="100")},j=ee=>ee.classList.contains("ion-page")?ee:ee.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||ee},4929:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{a:()=>Fe,b:()=>G,p:()=>y});const y=(We,...Pt)=>console.warn(`[Ionic Warning]: ${We}`,...Pt),Fe=(We,...Pt)=>console.error(`[Ionic Error]: ${We}`,...Pt),G=(We,...Pt)=>console.error(`<${We.tagName.toLowerCase()}> must be used inside ${Pt.join(" or ")}.`)},8476:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{d:()=>Fe,w:()=>y});const y=typeof window<"u"?window:void 0,Fe=typeof document<"u"?document:void 0},9081:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{B:()=>we,H:()=>en,a:()=>Ln,b:()=>qi,c:()=>dt,d:()=>pn,e:()=>oh,f:()=>Bt,g:()=>rt,h:()=>et,i:()=>M,j:()=>de,r:()=>an,w:()=>he});var y=ce(467);let We,Pt,Ze,q=!1,Je=!1,ot=!1,ne=!1,X=!1;const we={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},de=I=>{const b=new URL(I,Kt.$resourcesUrl$);return b.origin!==mn.location.origin?b.href:b.pathname},Oe="s-id",Ne="sty-id",nt="slot-fb{display:contents}slot-fb[hidden]{display:none}",P="http://www.w3.org/1999/xlink",O={},re=I=>"object"==(I=typeof I)||"function"===I;function pe(I){var b,V,z;return null!==(z=null===(V=null===(b=I.head)||void 0===b?void 0:b.querySelector('meta[name="csp-nonce"]'))||void 0===V?void 0:V.getAttribute("content"))&&void 0!==z?z:void 0}const et=(I,b,...V)=>{let z=null,ie=null,ge=null,Re=!1,fe=!1;const Qe=[],qe=St=>{for(let Nt=0;Nt<St.length;Nt++)z=St[Nt],Array.isArray(z)?qe(z):null!=z&&"boolean"!=typeof z&&((Re="function"!=typeof I&&!re(z))&&(z=String(z)),Re&&fe?Qe[Qe.length-1].$text$+=z:Qe.push(Re?Dt(null,z):z),fe=Re)};if(qe(V),b){b.key&&(ie=b.key),b.name&&(ge=b.name);{const St=b.className||b.class;St&&(b.class="object"!=typeof St?St:Object.keys(St).filter(Nt=>St[Nt]).join(" "))}}if("function"==typeof I)return I(null===b?{}:b,Qe,L);const st=Dt(I,null);return st.$attrs$=b,Qe.length>0&&(st.$children$=Qe),st.$key$=ie,st.$name$=ge,st},Dt=(I,b)=>({$flags$:0,$tag$:I,$text$:b,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),en={},L={forEach:(I,b)=>I.map(R).forEach(b),map:(I,b)=>I.map(R).map(b).map(N)},R=I=>({vattrs:I.$attrs$,vchildren:I.$children$,vkey:I.$key$,vname:I.$name$,vtag:I.$tag$,vtext:I.$text$}),N=I=>{if("function"==typeof I.vtag){const V=Object.assign({},I.vattrs);return I.vkey&&(V.key=I.vkey),I.vname&&(V.name=I.vname),et(I.vtag,V,...I.vchildren||[])}const b=Dt(I.vtag,I.vtext);return b.$attrs$=I.vattrs,b.$children$=I.vchildren,b.$key$=I.vkey,b.$name$=I.vname,b},le=(I,b,V,z,ie,ge,Re)=>{let fe,Qe,qe,st;if(1===ge.nodeType){for(fe=ge.getAttribute("c-id"),fe&&(Qe=fe.split("."),(Qe[0]===Re||"0"===Qe[0])&&(qe={$flags$:0,$hostId$:Qe[0],$nodeId$:Qe[1],$depth$:Qe[2],$index$:Qe[3],$tag$:ge.tagName.toLowerCase(),$elm$:ge,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},b.push(qe),ge.removeAttribute("c-id"),I.$children$||(I.$children$=[]),I.$children$[qe.$index$]=qe,I=qe,z&&"0"===qe.$depth$&&(z[qe.$index$]=qe.$elm$))),st=ge.childNodes.length-1;st>=0;st--)le(I,b,V,z,ie,ge.childNodes[st],Re);if(ge.shadowRoot)for(st=ge.shadowRoot.childNodes.length-1;st>=0;st--)le(I,b,V,z,ie,ge.shadowRoot.childNodes[st],Re)}else if(8===ge.nodeType)Qe=ge.nodeValue.split("."),(Qe[1]===Re||"0"===Qe[1])&&(fe=Qe[0],qe={$flags$:0,$hostId$:Qe[1],$nodeId$:Qe[2],$depth$:Qe[3],$index$:Qe[4],$elm$:ge,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===fe?(qe.$elm$=ge.nextSibling,qe.$elm$&&3===qe.$elm$.nodeType&&(qe.$text$=qe.$elm$.textContent,b.push(qe),ge.remove(),I.$children$||(I.$children$=[]),I.$children$[qe.$index$]=qe,z&&"0"===qe.$depth$&&(z[qe.$index$]=qe.$elm$))):qe.$hostId$===Re&&("s"===fe?(qe.$tag$="slot",ge["s-sn"]=Qe[5]?qe.$name$=Qe[5]:"",ge["s-sr"]=!0,z&&(qe.$elm$=br.createElement(qe.$tag$),qe.$name$&&qe.$elm$.setAttribute("name",qe.$name$),ge.parentNode.insertBefore(qe.$elm$,ge),ge.remove(),"0"===qe.$depth$&&(z[qe.$index$]=qe.$elm$)),V.push(qe),I.$children$||(I.$children$=[]),I.$children$[qe.$index$]=qe):"r"===fe&&(z?ge.remove():(ie["s-cr"]=ge,ge["s-cn"]=!0))));else if(I&&"style"===I.$tag$){const St=Dt(null,ge.textContent);St.$elm$=ge,St.$index$="0",I.$children$=[St]}},Y=(I,b)=>{if(1===I.nodeType){let V=0;for(;V<I.childNodes.length;V++)Y(I.childNodes[V],b);if(I.shadowRoot)for(V=0;V<I.shadowRoot.childNodes.length;V++)Y(I.shadowRoot.childNodes[V],b)}else if(8===I.nodeType){const V=I.nodeValue.split(".");"o"===V[0]&&(b.set(V[1]+"."+V[2],I),I.nodeValue="",I["s-en"]=V[3])}},dt=I=>vl.push(I),rt=I=>Ft(I).$modeName$,Bt=I=>Ft(I).$hostElement$,pn=(I,b,V)=>{const z=Bt(I);return{emit:ie=>wt(z,b,{bubbles:!!(4&V),composed:!!(2&V),cancelable:!!(1&V),detail:ie})}},wt=(I,b,V)=>{const z=Kt.ce(b,V);return I.dispatchEvent(z),z},un=new WeakMap,jt=(I,b,V)=>{let z=ci.get(I);Gt&&V?(z=z||new CSSStyleSheet,"string"==typeof z?z=b:z.replaceSync(b)):z=b,ci.set(I,z)},Ae=(I,b,V)=>{var z;const ie=ye(b,V),ge=ci.get(ie);if(I=11===I.nodeType?I:br,ge)if("string"==typeof ge){let fe,Re=un.get(I=I.head||I);if(Re||un.set(I,Re=new Set),!Re.has(ie)){if(I.host&&(fe=I.querySelector(`[${Ne}="${ie}"]`)))fe.innerHTML=ge;else{fe=br.createElement("style"),fe.innerHTML=ge;const Qe=null!==(z=Kt.$nonce$)&&void 0!==z?z:pe(br);null!=Qe&&fe.setAttribute("nonce",Qe),I.insertBefore(fe,I.querySelector("link"))}4&b.$flags$&&(fe.innerHTML+=nt),Re&&Re.add(ie)}}else I.adoptedStyleSheets.includes(ge)||(I.adoptedStyleSheets=[...I.adoptedStyleSheets,ge]);return ie},ye=(I,b)=>"sc-"+(b&&32&I.$flags$?I.$tagName$+"-"+b:I.$tagName$),Et=I=>I.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),qt=(I,b,V,z,ie,ge)=>{if(V!==z){let Re=jn(I,b),fe=b.toLowerCase();if("class"===b){const Qe=I.classList,qe=tn(V),st=tn(z);Qe.remove(...qe.filter(St=>St&&!st.includes(St))),Qe.add(...st.filter(St=>St&&!qe.includes(St)))}else if("style"===b){for(const Qe in V)(!z||null==z[Qe])&&(Qe.includes("-")?I.style.removeProperty(Qe):I.style[Qe]="");for(const Qe in z)(!V||z[Qe]!==V[Qe])&&(Qe.includes("-")?I.style.setProperty(Qe,z[Qe]):I.style[Qe]=z[Qe])}else if("key"!==b)if("ref"===b)z&&z(I);else if(Re||"o"!==b[0]||"n"!==b[1]){const Qe=re(z);if((Re||Qe&&null!==z)&&!ie)try{if(I.tagName.includes("-"))I[b]=z;else{const st=null==z?"":z;"list"===b?Re=!1:(null==V||I[b]!=st)&&(I[b]=st)}}catch{}let qe=!1;fe!==(fe=fe.replace(/^xlink\:?/,""))&&(b=fe,qe=!0),null==z||!1===z?(!1!==z||""===I.getAttribute(b))&&(qe?I.removeAttributeNS(P,b):I.removeAttribute(b)):(!Re||4&ge||ie)&&!Qe&&(z=!0===z?"":z,qe?I.setAttributeNS(P,b,z):I.setAttribute(b,z))}else if(b="-"===b[2]?b.slice(3):jn(mn,fe)?fe.slice(2):fe[2]+b.slice(3),V||z){const Qe=b.endsWith(Cn);b=b.replace(Qt,""),V&&Kt.rel(I,b,V,Qe),z&&Kt.ael(I,b,z,Qe)}}},gn=/\s/,tn=I=>I?I.split(gn):[],Cn="Capture",Qt=new RegExp(Cn+"$"),ur=(I,b,V,z)=>{const ie=11===b.$elm$.nodeType&&b.$elm$.host?b.$elm$.host:b.$elm$,ge=I&&I.$attrs$||O,Re=b.$attrs$||O;for(z in ge)z in Re||qt(ie,z,ge[z],void 0,V,b.$flags$);for(z in Re)qt(ie,z,ge[z],Re[z],V,b.$flags$)},Nn=(I,b,V,z)=>{const ie=b.$children$[V];let Re,fe,Qe,ge=0;if(q||(ot=!0,"slot"===ie.$tag$&&(We&&z.classList.add(We+"-s"),ie.$flags$|=ie.$children$?2:1)),null!==ie.$text$)Re=ie.$elm$=br.createTextNode(ie.$text$);else if(1&ie.$flags$)Re=ie.$elm$=br.createTextNode("");else{if(ne||(ne="svg"===ie.$tag$),Re=ie.$elm$=br.createElementNS(ne?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&ie.$flags$?"slot-fb":ie.$tag$),ne&&"foreignObject"===ie.$tag$&&(ne=!1),ur(null,ie,ne),(I=>null!=I)(We)&&Re["s-si"]!==We&&Re.classList.add(Re["s-si"]=We),ie.$children$)for(ge=0;ge<ie.$children$.length;++ge)fe=Nn(I,ie,ge,Re),fe&&Re.appendChild(fe);"svg"===ie.$tag$?ne=!1:"foreignObject"===Re.tagName&&(ne=!0)}return Re["s-hn"]=Ze,3&ie.$flags$&&(Re["s-sr"]=!0,Re["s-cr"]=Pt,Re["s-sn"]=ie.$name$||"",Qe=I&&I.$children$&&I.$children$[V],Qe&&Qe.$tag$===ie.$tag$&&I.$elm$&&Gr(I.$elm$,!1)),Re},Gr=(I,b)=>{Kt.$flags$|=1;const V=I.childNodes;for(let z=V.length-1;z>=0;z--){const ie=V[z];ie["s-hn"]!==Ze&&ie["s-ol"]&&(yi(ie).insertBefore(ie,Gi(ie)),ie["s-ol"].remove(),ie["s-ol"]=void 0,ie["s-sh"]=void 0,ot=!0),b&&Gr(ie,b)}Kt.$flags$&=-2},Ai=(I,b,V,z,ie,ge)=>{let fe,Re=I["s-cr"]&&I["s-cr"].parentNode||I;for(Re.shadowRoot&&Re.tagName===Ze&&(Re=Re.shadowRoot);ie<=ge;++ie)z[ie]&&(fe=Nn(null,V,ie,I),fe&&(z[ie].$elm$=fe,Re.insertBefore(fe,Gi(b))))},Lr=(I,b,V)=>{for(let z=b;z<=V;++z){const ie=I[z];if(ie){const ge=ie.$elm$;os(ie),ge&&(Je=!0,ge["s-ol"]?ge["s-ol"].remove():Gr(ge,!0),ge.remove())}}},Di=(I,b,V=!1)=>I.$tag$===b.$tag$&&("slot"===I.$tag$?I.$name$===b.$name$:!!V||I.$key$===b.$key$),Gi=I=>I&&I["s-ol"]||I,yi=I=>(I["s-ol"]?I["s-ol"]:I).parentNode,si=(I,b,V=!1)=>{const z=b.$elm$=I.$elm$,ie=I.$children$,ge=b.$children$,Re=b.$tag$,fe=b.$text$;let Qe;null===fe?(ne="svg"===Re||"foreignObject"!==Re&&ne,"slot"===Re&&!q||ur(I,b,ne),null!==ie&&null!==ge?((I,b,V,z,ie=!1)=>{let On,er,ge=0,Re=0,fe=0,Qe=0,qe=b.length-1,st=b[0],St=b[qe],Nt=z.length-1,je=z[0],ir=z[Nt];for(;ge<=qe&&Re<=Nt;)if(null==st)st=b[++ge];else if(null==St)St=b[--qe];else if(null==je)je=z[++Re];else if(null==ir)ir=z[--Nt];else if(Di(st,je,ie))si(st,je,ie),st=b[++ge],je=z[++Re];else if(Di(St,ir,ie))si(St,ir,ie),St=b[--qe],ir=z[--Nt];else if(Di(st,ir,ie))("slot"===st.$tag$||"slot"===ir.$tag$)&&Gr(st.$elm$.parentNode,!1),si(st,ir,ie),I.insertBefore(st.$elm$,St.$elm$.nextSibling),st=b[++ge],ir=z[--Nt];else if(Di(St,je,ie))("slot"===st.$tag$||"slot"===ir.$tag$)&&Gr(St.$elm$.parentNode,!1),si(St,je,ie),I.insertBefore(St.$elm$,st.$elm$),St=b[--qe],je=z[++Re];else{for(fe=-1,Qe=ge;Qe<=qe;++Qe)if(b[Qe]&&null!==b[Qe].$key$&&b[Qe].$key$===je.$key$){fe=Qe;break}fe>=0?(er=b[fe],er.$tag$!==je.$tag$?On=Nn(b&&b[Re],V,fe,I):(si(er,je,ie),b[fe]=void 0,On=er.$elm$),je=z[++Re]):(On=Nn(b&&b[Re],V,Re,I),je=z[++Re]),On&&yi(st.$elm$).insertBefore(On,Gi(st.$elm$))}ge>qe?Ai(I,null==z[Nt+1]?null:z[Nt+1].$elm$,V,z,Re,Nt):Re>Nt&&Lr(b,ge,qe)})(z,ie,b,ge,V):null!==ge?(null!==I.$text$&&(z.textContent=""),Ai(z,null,b,ge,0,ge.length-1)):null!==ie&&Lr(ie,0,ie.length-1),ne&&"svg"===Re&&(ne=!1)):(Qe=z["s-cr"])?Qe.parentNode.textContent=fe:I.$text$!==fe&&(z.data=fe)},Zr=I=>{const b=I.childNodes;for(const V of b)if(1===V.nodeType){if(V["s-sr"]){const z=V["s-sn"];V.hidden=!1;for(const ie of b)if(ie!==V)if(ie["s-hn"]!==V["s-hn"]||""!==z){if(1===ie.nodeType&&(z===ie.getAttribute("slot")||z===ie["s-sn"])){V.hidden=!0;break}}else if(1===ie.nodeType||3===ie.nodeType&&""!==ie.textContent.trim()){V.hidden=!0;break}}Zr(V)}},$n=[],Wi=I=>{let b,V,z;for(const ie of I.childNodes){if(ie["s-sr"]&&(b=ie["s-cr"])&&b.parentNode){V=b.parentNode.childNodes;const ge=ie["s-sn"];for(z=V.length-1;z>=0;z--)if(b=V[z],!b["s-cn"]&&!b["s-nr"]&&b["s-hn"]!==ie["s-hn"])if(is(b,ge)){let Re=$n.find(fe=>fe.$nodeToRelocate$===b);Je=!0,b["s-sn"]=b["s-sn"]||ge,Re?(Re.$nodeToRelocate$["s-sh"]=ie["s-hn"],Re.$slotRefNode$=ie):(b["s-sh"]=ie["s-hn"],$n.push({$slotRefNode$:ie,$nodeToRelocate$:b})),b["s-sr"]&&$n.map(fe=>{is(fe.$nodeToRelocate$,b["s-sn"])&&(Re=$n.find(Qe=>Qe.$nodeToRelocate$===b),Re&&!fe.$slotRefNode$&&(fe.$slotRefNode$=Re.$slotRefNode$))})}else $n.some(Re=>Re.$nodeToRelocate$===b)||$n.push({$nodeToRelocate$:b})}1===ie.nodeType&&Wi(ie)}},is=(I,b)=>1===I.nodeType?null===I.getAttribute("slot")&&""===b||I.getAttribute("slot")===b:I["s-sn"]===b||""===b,os=I=>{I.$attrs$&&I.$attrs$.ref&&I.$attrs$.ref(null),I.$children$&&I.$children$.map(os)},Si=(I,b)=>{b&&!I.$onRenderResolve$&&b["s-p"]&&b["s-p"].push(new Promise(V=>I.$onRenderResolve$=V))},Cr=(I,b)=>{if(I.$flags$|=16,!(4&I.$flags$))return Si(I,I.$ancestorComponent$),he(()=>Bo(I,b));I.$flags$|=512},Bo=(I,b)=>{const z=I.$lazyInstance$;let ie;return b&&(I.$flags$|=256,I.$queuedListeners$&&(I.$queuedListeners$.map(([ge,Re])=>Ce(z,ge,Re)),I.$queuedListeners$=void 0),ie=Ce(z,"componentWillLoad")),ie=$o(ie,()=>Ce(z,"componentWillRender")),$o(ie,()=>Ps(I,z,b))},$o=(I,b)=>Un(I)?I.then(b):b(),Un=I=>I instanceof Promise||I&&I.then&&"function"==typeof I.then,Ps=function(){var I=(0,y.A)(function*(b,V,z){var ie;const ge=b.$hostElement$,fe=ge["s-rc"];z&&(I=>{const b=I.$cmpMeta$,V=I.$hostElement$,z=b.$flags$,ge=Ae(V.shadowRoot?V.shadowRoot:V.getRootNode(),b,I.$modeName$);10&z&&(V["s-sc"]=ge,V.classList.add(ge+"-h"),2&z&&V.classList.add(ge+"-s"))})(b);ta(b,V,ge,z),fe&&(fe.map(qe=>qe()),ge["s-rc"]=void 0);{const qe=null!==(ie=ge["s-p"])&&void 0!==ie?ie:[],st=()=>B(b);0===qe.length?st():(Promise.all(qe).then(st),b.$flags$|=4,qe.length=0)}});return function(V,z,ie){return I.apply(this,arguments)}}(),ta=(I,b,V,z)=>{try{b=b.render&&b.render(),I.$flags$&=-17,I.$flags$|=2,((I,b,V=!1)=>{var z,ie,ge,Re;const fe=I.$hostElement$,Qe=I.$cmpMeta$,qe=I.$vnode$||Dt(null,null),st=(I=>I&&I.$tag$===en)(b)?b:et(null,null,b);if(Ze=fe.tagName,Qe.$attrsToReflect$&&(st.$attrs$=st.$attrs$||{},Qe.$attrsToReflect$.map(([St,Nt])=>st.$attrs$[Nt]=fe[St])),V&&st.$attrs$)for(const St of Object.keys(st.$attrs$))fe.hasAttribute(St)&&!["key","ref","style","class"].includes(St)&&(st.$attrs$[St]=fe[St]);if(st.$tag$=null,st.$flags$|=4,I.$vnode$=st,st.$elm$=qe.$elm$=fe.shadowRoot||fe,We=fe["s-sc"],q=!!(1&Qe.$flags$),Pt=fe["s-cr"],Je=!1,si(qe,st,V),Kt.$flags$|=1,ot){Wi(st.$elm$);for(const St of $n){const Nt=St.$nodeToRelocate$;if(!Nt["s-ol"]){const je=br.createTextNode("");je["s-nr"]=Nt,Nt.parentNode.insertBefore(Nt["s-ol"]=je,Nt)}}for(const St of $n){const Nt=St.$nodeToRelocate$,je=St.$slotRefNode$;if(je){const ir=je.parentNode;let On=je.nextSibling;{let er=null===(z=Nt["s-ol"])||void 0===z?void 0:z.previousSibling;for(;er;){let di=null!==(ie=er["s-nr"])&&void 0!==ie?ie:null;if(di&&di["s-sn"]===Nt["s-sn"]&&ir===di.parentNode&&(di=di.nextSibling,!di||!di["s-nr"])){On=di;break}er=er.previousSibling}}(!On&&ir!==Nt.parentNode||Nt.nextSibling!==On)&&Nt!==On&&(!Nt["s-hn"]&&Nt["s-ol"]&&(Nt["s-hn"]=Nt["s-ol"].parentNode.nodeName),ir.insertBefore(Nt,On),1===Nt.nodeType&&(Nt.hidden=null!==(ge=Nt["s-ih"])&&void 0!==ge&&ge))}else 1===Nt.nodeType&&(V&&(Nt["s-ih"]=null!==(Re=Nt.hidden)&&void 0!==Re&&Re),Nt.hidden=!0)}}Je&&Zr(st.$elm$),Kt.$flags$&=-2,$n.length=0,Pt=void 0})(I,b,z)}catch(ie){Xn(ie,I.$hostElement$)}return null},B=I=>{const V=I.$hostElement$,ie=I.$lazyInstance$,ge=I.$ancestorComponent$;Ce(ie,"componentDidRender"),64&I.$flags$?Ce(ie,"componentDidUpdate"):(I.$flags$|=64,K(V),Ce(ie,"componentDidLoad"),I.$onReadyResolve$(V),ge||$()),I.$onInstanceResolve$(V),I.$onRenderResolve$&&(I.$onRenderResolve$(),I.$onRenderResolve$=void 0),512&I.$flags$&&yo(()=>Cr(I,!1)),I.$flags$&=-517},M=I=>{{const b=Ft(I),V=b.$hostElement$.isConnected;return V&&2==(18&b.$flags$)&&Cr(b,!1),V}},$=I=>{K(br.documentElement),yo(()=>wt(mn,"appload",{detail:{namespace:"ionic"}}))},Ce=(I,b,V)=>{if(I&&I[b])try{return I[b](V)}catch(z){Xn(z)}},K=I=>I.classList.add("hydrated"),Ot=(I,b,V)=>{var z;const ie=I.prototype;if(b.$members$){I.watchers&&(b.$watchers$=I.watchers);const ge=Object.entries(b.$members$);if(ge.map(([Re,[fe]])=>{31&fe||2&V&&32&fe?Object.defineProperty(ie,Re,{get(){return((I,b)=>Ft(this).$instanceValues$.get(b))(0,Re)},set(Qe){((I,b,V,z)=>{const ie=Ft(I),ge=ie.$hostElement$,Re=ie.$instanceValues$.get(b),fe=ie.$flags$,Qe=ie.$lazyInstance$;V=((I,b)=>null==I||re(I)?I:4&b?"false"!==I&&(""===I||!!I):2&b?parseFloat(I):1&b?String(I):I)(V,z.$members$[b][0]);const qe=Number.isNaN(Re)&&Number.isNaN(V);if((!(8&fe)||void 0===Re)&&V!==Re&&!qe&&(ie.$instanceValues$.set(b,V),Qe)){if(z.$watchers$&&128&fe){const St=z.$watchers$[b];St&&St.map(Nt=>{try{Qe[Nt](V,Re,b)}catch(je){Xn(je,ge)}})}2==(18&fe)&&Cr(ie,!1)}})(this,Re,Qe,b)},configurable:!0,enumerable:!0}):1&V&&64&fe&&Object.defineProperty(ie,Re,{value(...Qe){var qe;const st=Ft(this);return null===(qe=null==st?void 0:st.$onInstancePromise$)||void 0===qe?void 0:qe.then(()=>{var St;return null===(St=st.$lazyInstance$)||void 0===St?void 0:St[Re](...Qe)})}})}),1&V){const Re=new Map;ie.attributeChangedCallback=function(fe,Qe,qe){Kt.jmp(()=>{var st;const St=Re.get(fe);if(this.hasOwnProperty(St))qe=this[St],delete this[St];else{if(ie.hasOwnProperty(St)&&"number"==typeof this[St]&&this[St]==qe)return;if(null==St){const Nt=Ft(this),je=null==Nt?void 0:Nt.$flags$;if(je&&!(8&je)&&128&je&&qe!==Qe){const ir=Nt.$lazyInstance$,On=null===(st=b.$watchers$)||void 0===st?void 0:st[fe];null==On||On.forEach(er=>{null!=ir[er]&&ir[er].call(ir,qe,Qe,fe)})}return}}this[St]=(null!==qe||"boolean"!=typeof this[St])&&qe})},I.observedAttributes=Array.from(new Set([...Object.keys(null!==(z=b.$watchers$)&&void 0!==z?z:{}),...ge.filter(([fe,Qe])=>15&Qe[0]).map(([fe,Qe])=>{var qe;const st=Qe[1]||fe;return Re.set(st,fe),512&Qe[0]&&(null===(qe=b.$attrsToReflect$)||void 0===qe||qe.push([fe,st])),st})]))}}return I},ai=function(){var I=(0,y.A)(function*(b,V,z,ie){let ge;if(!(32&V.$flags$)){if(V.$flags$|=32,z.$lazyBundleId$){if(ge=bn(z),ge.then){const st=()=>{};ge=yield ge,st()}ge.isProxied||(z.$watchers$=ge.watchers,Ot(ge,z,2),ge.isProxied=!0);const qe=()=>{};V.$flags$|=8;try{new ge(V)}catch(st){Xn(st)}V.$flags$&=-9,V.$flags$|=128,qe(),_t(V.$lazyInstance$)}else ge=b.constructor,customElements.whenDefined(z.$tagName$).then(()=>V.$flags$|=128);if(ge.style){let qe=ge.style;"string"!=typeof qe&&(qe=qe[V.$modeName$=(I=>vl.map(b=>b(I)).find(b=>!!b))(b)]);const st=ye(z,V.$modeName$);if(!ci.has(st)){const St=()=>{};jt(st,qe,!!(1&z.$flags$)),St()}}}const Re=V.$ancestorComponent$,fe=()=>Cr(V,!0);Re&&Re["s-rc"]?Re["s-rc"].push(fe):fe()});return function(V,z,ie,ge){return I.apply(this,arguments)}}(),_t=I=>{Ce(I,"connectedCallback")},on=I=>{const b=I["s-cr"]=br.createComment("");b["s-cn"]=!0,I.insertBefore(b,I.firstChild)},Se=I=>{Ce(I,"disconnectedCallback")},li=function(){var I=(0,y.A)(function*(b){if(!(1&Kt.$flags$)){const V=Ft(b);V.$rmListeners$&&(V.$rmListeners$.map(z=>z()),V.$rmListeners$=void 0),null!=V&&V.$lazyInstance$?Se(V.$lazyInstance$):null!=V&&V.$onReadyPromise$&&V.$onReadyPromise$.then(()=>Se(V.$lazyInstance$))}});return function(V){return I.apply(this,arguments)}}(),qi=(I,b={})=>{var V;const ie=[],ge=b.exclude||[],Re=mn.customElements,fe=br.head,Qe=fe.querySelector("meta[charset]"),qe=br.createElement("style"),st=[],St=br.querySelectorAll(`[${Ne}]`);let Nt,je=!0,ir=0;for(Object.assign(Kt,b),Kt.$resourcesUrl$=new URL(b.resourcesUrl||"./",br.baseURI).href,Kt.$flags$|=2;ir<St.length;ir++)jt(St[ir].getAttribute(Ne),Et(St[ir].innerHTML),!0);let On=!1;if(I.map(er=>{er[1].map(di=>{var ka;const Io={$flags$:di[0],$tagName$:di[1],$members$:di[2],$listeners$:di[3]};4&Io.$flags$&&(On=!0),Io.$members$=di[2],Io.$listeners$=di[3],Io.$attrsToReflect$=[],Io.$watchers$=null!==(ka=di[4])&&void 0!==ka?ka:{};const ls=Io.$tagName$,sc=class extends HTMLElement{constructor(Ns){super(Ns),fr(Ns=this,Io),1&Io.$flags$&&Ns.attachShadow({mode:"open",delegatesFocus:!!(16&Io.$flags$)})}connectedCallback(){Nt&&(clearTimeout(Nt),Nt=null),je?st.push(this):Kt.jmp(()=>(I=>{if(!(1&Kt.$flags$)){const b=Ft(I),V=b.$cmpMeta$,z=()=>{};if(1&b.$flags$)xs(I,b,V.$listeners$),null!=b&&b.$lazyInstance$?_t(b.$lazyInstance$):null!=b&&b.$onReadyPromise$&&b.$onReadyPromise$.then(()=>_t(b.$lazyInstance$));else{let ie;if(b.$flags$|=1,ie=I.getAttribute(Oe),ie){if(1&V.$flags$){const ge=Ae(I.shadowRoot,V,I.getAttribute("s-mode"));I.classList.remove(ge+"-h",ge+"-s")}((I,b,V,z)=>{const ge=I.shadowRoot,Re=[],Qe=ge?[]:null,qe=z.$vnode$=Dt(b,null);Kt.$orgLocNodes$||Y(br.body,Kt.$orgLocNodes$=new Map),I[Oe]=V,I.removeAttribute(Oe),le(qe,Re,[],Qe,I,I,V),Re.map(st=>{const St=st.$hostId$+"."+st.$nodeId$,Nt=Kt.$orgLocNodes$.get(St),je=st.$elm$;Nt&&Du&&""===Nt["s-en"]&&Nt.parentNode.insertBefore(je,Nt.nextSibling),ge||(je["s-hn"]=b,Nt&&(je["s-ol"]=Nt,je["s-ol"]["s-nr"]=je)),Kt.$orgLocNodes$.delete(St)}),ge&&Qe.map(st=>{st&&ge.appendChild(st)})})(I,V.$tagName$,ie,b)}ie||12&V.$flags$&&on(I);{let ge=I;for(;ge=ge.parentNode||ge.host;)if(1===ge.nodeType&&ge.hasAttribute("s-id")&&ge["s-p"]||ge["s-p"]){Si(b,b.$ancestorComponent$=ge);break}}V.$members$&&Object.entries(V.$members$).map(([ge,[Re]])=>{if(31&Re&&I.hasOwnProperty(ge)){const fe=I[ge];delete I[ge],I[ge]=fe}}),ai(I,b,V)}z()}})(this))}disconnectedCallback(){Kt.jmp(()=>li(this))}componentOnReady(){return Ft(this).$onReadyPromise$}};Io.$lazyBundleId$=er[0],!ge.includes(ls)&&!Re.get(ls)&&(ie.push(ls),Re.define(ls,Ot(sc,Io,1)))})}),ie.length>0&&(On&&(qe.textContent+=nt),qe.textContent+=ie+"{visibility:hidden}.hydrated{visibility:inherit}",qe.innerHTML.length)){qe.setAttribute("data-styles","");const er=null!==(V=Kt.$nonce$)&&void 0!==V?V:pe(br);null!=er&&qe.setAttribute("nonce",er),fe.insertBefore(qe,Qe?Qe.nextSibling:fe.firstChild)}je=!1,st.length?st.map(er=>er.connectedCallback()):Kt.jmp(()=>Nt=setTimeout($,30))},xs=(I,b,V,z)=>{V&&V.map(([ie,ge,Re])=>{const fe=se(I,ie),Qe=Ee(b,Re),qe=Le(ie);Kt.ael(fe,ge,Qe,qe),(b.$rmListeners$=b.$rmListeners$||[]).push(()=>Kt.rel(fe,ge,Qe,qe))})},Ee=(I,b)=>V=>{try{256&I.$flags$?I.$lazyInstance$[b](V):(I.$queuedListeners$=I.$queuedListeners$||[]).push([b,V])}catch(z){Xn(z)}},se=(I,b)=>4&b?br:8&b?mn:16&b?br.body:I,Le=I=>as?{passive:!!(1&I),capture:!!(2&I)}:!!(2&I),Ht=new WeakMap,Ft=I=>Ht.get(I),an=(I,b)=>Ht.set(b.$lazyInstance$=I,b),fr=(I,b)=>{const V={$flags$:0,$hostElement$:I,$cmpMeta$:b,$instanceValues$:new Map};return V.$onInstancePromise$=new Promise(z=>V.$onInstanceResolve$=z),V.$onReadyPromise$=new Promise(z=>V.$onReadyResolve$=z),I["s-p"]=[],I["s-rc"]=[],xs(I,V,b.$listeners$),Ht.set(I,V)},jn=(I,b)=>b in I,Xn=(I,b)=>(0,console.error)(I,b),ss=new Map,bn=(I,b,V)=>{const z=I.$tagName$.replace(/-/g,"_"),ie=I.$lazyBundleId$,ge=ss.get(ie);return ge?ge[z]:ce(8996)(`./${ie}.entry.js`).then(Re=>(ss.set(ie,Re),Re[z]),Xn)},ci=new Map,vl=[],mn=typeof window<"u"?window:{},br=mn.document||{head:{}},Kt={$flags$:0,$resourcesUrl$:"",jmp:I=>I(),raf:I=>requestAnimationFrame(I),ael:(I,b,V,z)=>I.addEventListener(b,V,z),rel:(I,b,V,z)=>I.removeEventListener(b,V,z),ce:(I,b)=>new CustomEvent(I,b)},Ln=I=>{Object.assign(Kt,I)},Du=!0,as=(()=>{let I=!1;try{br.addEventListener("e",null,Object.defineProperty({},"passive",{get(){I=!0}}))}catch{}return I})(),Gt=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),Ms=[],ui=[],oc=(I,b)=>V=>{I.push(V),X||(X=!0,b&&4&Kt.$flags$?yo(Il):Kt.raf(Il))},yl=I=>{for(let b=0;b<I.length;b++)try{I[b](performance.now())}catch(V){Xn(V)}I.length=0},Il=()=>{yl(Ms),yl(ui),(X=Ms.length>0)&&Kt.raf(Il)},yo=I=>Promise.resolve(void 0).then(I),oh=oc(Ms,!1),he=oc(ui,!0)},8436:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{a:()=>X,b:()=>Dt,c:()=>G,i:()=>en});var y=ce(9081);class Fe{constructor(){this.m=new Map}reset(L){this.m=new Map(Object.entries(L))}get(L,R){const N=this.m.get(L);return void 0!==N?N:R}getBoolean(L,R=!1){const N=this.m.get(L);return void 0===N?R:"string"==typeof N?"true"===N:!!N}getNumber(L,R){const N=parseFloat(this.m.get(L));return isNaN(N)?void 0!==R?R:NaN:N}set(L,R){this.m.set(L,R)}}const G=new Fe,ot="ionic-persist-config",X=(Te,L)=>("string"==typeof Te&&(L=Te,Te=void 0),(Te=>we(Te))(Te).includes(L)),we=(Te=window)=>{if(typeof Te>"u")return[];Te.Ionic=Te.Ionic||{};let L=Te.Ionic.platforms;return null==L&&(L=Te.Ionic.platforms=de(Te),L.forEach(R=>Te.document.documentElement.classList.add(`plt-${R}`))),L},de=Te=>{const L=G.get("platform");return Object.keys(pe).filter(R=>{const N=null==L?void 0:L[R];return"function"==typeof N?N(Te):pe[R](Te)})},be=Te=>!!(ee(Te,/iPad/i)||ee(Te,/Macintosh/i)&&ze(Te)),Q=Te=>ee(Te,/android|sink/i),ze=Te=>re(Te,"(any-pointer:coarse)"),nt=Te=>P(Te)||O(Te),P=Te=>!!(Te.cordova||Te.phonegap||Te.PhoneGap),O=Te=>{const L=Te.Capacitor;return!(null==L||!L.isNative)},ee=(Te,L)=>L.test(Te.navigator.userAgent),re=(Te,L)=>{var R;return null===(R=Te.matchMedia)||void 0===R?void 0:R.call(Te,L).matches},pe={ipad:be,iphone:Te=>ee(Te,/iPhone/i),ios:Te=>ee(Te,/iPhone|iPod/i)||be(Te),android:Q,phablet:Te=>{const L=Te.innerWidth,R=Te.innerHeight,N=Math.min(L,R),W=Math.max(L,R);return N>390&&N<520&&W>620&&W<800},tablet:Te=>{const L=Te.innerWidth,R=Te.innerHeight,N=Math.min(L,R),W=Math.max(L,R);return be(Te)||(Te=>Q(Te)&&!ee(Te,/mobile/i))(Te)||N>460&&N<820&&W>780&&W<1400},cordova:P,capacitor:O,electron:Te=>ee(Te,/electron/i),pwa:Te=>{var L;return!!(null!==(L=Te.matchMedia)&&void 0!==L&&L.call(Te,"(display-mode: standalone)").matches||Te.navigator.standalone)},mobile:ze,mobileweb:Te=>ze(Te)&&!nt(Te),desktop:Te=>!ze(Te),hybrid:nt};let et;const Dt=Te=>Te&&(0,y.g)(Te)||et,en=(Te={})=>{if(typeof window>"u")return;const L=window.document,R=window,N=R.Ionic=R.Ionic||{},W={};Te._ael&&(W.ael=Te._ael),Te._rel&&(W.rel=Te._rel),Te._ce&&(W.ce=Te._ce),(0,y.a)(W);const le=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Te=>{try{const L=Te.sessionStorage.getItem(ot);return null!==L?JSON.parse(L):{}}catch{return{}}})(R)),{persistConfig:!1}),N.config),(Te=>{const L={};return Te.location.search.slice(1).split("&").map(R=>R.split("=")).map(([R,N])=>[decodeURIComponent(R),decodeURIComponent(N)]).filter(([R])=>((Te,L)=>Te.substr(0,L.length)===L)(R,"ionic:")).map(([R,N])=>[R.slice(6),N]).forEach(([R,N])=>{L[R]=N}),L})(R)),Te);G.reset(le),G.getBoolean("persistConfig")&&((Te,L)=>{try{Te.sessionStorage.setItem(ot,JSON.stringify(L))}catch{return}})(R,le),we(R),N.config=G,N.mode=et=G.get("mode",L.documentElement.getAttribute("mode")||(X(R,"ios")?"ios":"md")),G.set("mode",et),L.documentElement.setAttribute("mode",et),L.documentElement.classList.add(et),G.getBoolean("_testing")&&G.set("animated",!1);const Y=dt=>{var rt;return null===(rt=dt.tagName)||void 0===rt?void 0:rt.startsWith("ION-")},Xe=dt=>["ios","md"].includes(dt);(0,y.c)(dt=>{for(;dt;){const rt=dt.mode||dt.getAttribute("mode");if(rt){if(Xe(rt))return rt;Y(dt)&&console.warn('Invalid ionic mode: "'+rt+'", expected: "ios" or "md"')}dt=dt.parentElement}return et})}},2604:(zn,Vt,ce)=>{"use strict";ce.r(Vt),ce.d(Vt,{iosTransitionAnimation:()=>de,shadow:()=>q});var y=ce(3503),Fe=ce(1497);ce(8476),ce(9081);const Ze=be=>document.querySelector(`${be}.ion-cloned-element`),q=be=>be.shadowRoot||be,Je=be=>{const Pe="ION-TABS"===be.tagName?be:be.querySelector("ion-tabs"),J="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Pe){const Q=Pe.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Q?Q.querySelector(J):null}return be.querySelector(J)},ot=(be,Pe)=>{const J="ION-TABS"===be.tagName?be:be.querySelector("ion-tabs");let Q=[];if(null!=J){const Z=J.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Z&&(Q=Z.querySelectorAll("ion-buttons"))}else Q=be.querySelectorAll("ion-buttons");for(const Z of Q){const Oe=Z.closest("ion-header"),Ne=Oe&&!Oe.classList.contains("header-collapse-condense-inactive"),ze=Z.querySelector("ion-back-button"),ke=Z.classList.contains("buttons-collapse");if(null!==ze&&("start"===Z.slot||""===Z.slot)&&(ke&&Ne&&Pe||!ke))return ze}return null},X=(be,Pe,J,Q,Z,Oe,Ne,ze,ke)=>{var nt,P;const O=Pe?`calc(100% - ${Z.right+4}px)`:Z.left-4+"px",D=Pe?"right":"left",j=Pe?"left":"right",ee=Pe?"right":"left",re=(null===(nt=Oe.textContent)||void 0===nt?void 0:nt.trim())===(null===(P=ze.textContent)||void 0===P?void 0:P.trim()),et=(ke.height-Ie)/Ne.height,Dt=re?`scale(${ke.width/Ne.width}, ${et})`:`scale(${et})`,en="scale(1)",L=q(Q).querySelector("ion-icon").getBoundingClientRect(),R=Pe?L.width/2-(L.right-Z.right)+"px":Z.left-L.width/2+"px",N=Pe?`-${window.innerWidth-Z.right}px`:`${Z.left}px`,W=`${ke.top}px`,le=`${Z.top}px`,dt=J?[{offset:0,transform:`translate3d(${N}, ${le}, 0)`},{offset:1,transform:`translate3d(${R}, ${W}, 0)`}]:[{offset:0,transform:`translate3d(${R}, ${W}, 0)`},{offset:1,transform:`translate3d(${N}, ${le}, 0)`}],Bt=J?[{offset:0,opacity:1,transform:en},{offset:1,opacity:0,transform:Dt}]:[{offset:0,opacity:0,transform:Dt},{offset:1,opacity:1,transform:en}],un=J?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],jt=(0,y.c)(),Ae=(0,y.c)(),ue=(0,y.c)(),ye=Ze("ion-back-button"),Et=q(ye).querySelector(".button-text"),qt=q(ye).querySelector("ion-icon");ye.text=Q.text,ye.mode=Q.mode,ye.icon=Q.icon,ye.color=Q.color,ye.disabled=Q.disabled,ye.style.setProperty("display","block"),ye.style.setProperty("position","fixed"),Ae.addElement(qt),jt.addElement(Et),ue.addElement(ye),ue.beforeStyles({position:"absolute",top:"0px",[ee]:"0px"}).keyframes(dt),jt.beforeStyles({"transform-origin":`${D} top`}).beforeAddWrite(()=>{Q.style.setProperty("display","none"),ye.style.setProperty(D,O)}).afterAddWrite(()=>{Q.style.setProperty("display",""),ye.style.setProperty("display","none"),ye.style.removeProperty(D)}).keyframes(Bt),Ae.beforeStyles({"transform-origin":`${j} center`}).keyframes(un),be.addAnimation([jt,Ae,ue])},we=(be,Pe,J,Q,Z,Oe,Ne,ze)=>{var ke,nt;const P=Pe?"right":"left",O=Pe?`calc(100% - ${Z.right}px)`:`${Z.left}px`,j=`${Z.top}px`,re=Pe?`-${window.innerWidth-ze.right-8}px`:ze.x-8+"px",et=ze.y-2+"px",Dt=(null===(ke=Ne.textContent)||void 0===ke?void 0:ke.trim())===(null===(nt=Q.textContent)||void 0===nt?void 0:nt.trim()),Te=ze.height/(Oe.height-Ie),L="scale(1)",R=Dt?`scale(${ze.width/Oe.width}, ${Te})`:`scale(${Te})`,le=J?[{offset:0,opacity:0,transform:`translate3d(${re}, ${et}, 0) ${R}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${j}, 0) ${L}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${j}, 0) ${L}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${re}, ${et}, 0) ${R}`}],Y=Ze("ion-title"),Xe=(0,y.c)();Y.innerText=Q.innerText,Y.size=Q.size,Y.color=Q.color,Xe.addElement(Y),Xe.beforeStyles({"transform-origin":`${P} top`,height:`${Z.height}px`,display:"",position:"relative",[P]:O}).beforeAddWrite(()=>{Q.style.setProperty("opacity","0")}).afterAddWrite(()=>{Q.style.setProperty("opacity",""),Y.style.setProperty("display","none")}).keyframes(le),be.addAnimation(Xe)},de=(be,Pe)=>{var J;try{const Q="cubic-bezier(0.32,0.72,0,1)",Z="opacity",Oe="transform",Ne="0%",ke="rtl"===be.ownerDocument.dir,nt=ke?"-99.5%":"99.5%",P=ke?"33%":"-33%",O=Pe.enteringEl,D=Pe.leavingEl,j="back"===Pe.direction,ee=O.querySelector(":scope > ion-content"),re=O.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),pe=O.querySelectorAll(":scope > ion-header > ion-toolbar"),et=(0,y.c)(),Dt=(0,y.c)();if(et.addElement(O).duration((null!==(J=Pe.duration)&&void 0!==J?J:0)||540).easing(Pe.easing||Q).fill("both").beforeRemoveClass("ion-page-invisible"),D&&null!=be){const R=(0,y.c)();R.addElement(be),et.addAnimation(R)}if(ee||0!==pe.length||0!==re.length?(Dt.addElement(ee),Dt.addElement(re)):Dt.addElement(O.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),et.addAnimation(Dt),j?Dt.beforeClearStyles([Z]).fromTo("transform",`translateX(${P})`,`translateX(${Ne})`).fromTo(Z,.8,1):Dt.beforeClearStyles([Z]).fromTo("transform",`translateX(${nt})`,`translateX(${Ne})`),ee){const R=q(ee).querySelector(".transition-effect");if(R){const N=R.querySelector(".transition-cover"),W=R.querySelector(".transition-shadow"),le=(0,y.c)(),Y=(0,y.c)(),Xe=(0,y.c)();le.addElement(R).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Y.addElement(N).beforeClearStyles([Z]).fromTo(Z,0,.1),Xe.addElement(W).beforeClearStyles([Z]).fromTo(Z,.03,.7),le.addAnimation([Y,Xe]),Dt.addAnimation([le])}}const en=O.querySelector("ion-header.header-collapse-condense"),{forward:Te,backward:L}=((be,Pe,J,Q,Z)=>{const Oe=ot(Q,J),Ne=Je(Z),ze=Je(Q),ke=ot(Z,J),nt=null!==Oe&&null!==Ne&&!J,P=null!==ze&&null!==ke&&J;if(nt){const O=Ne.getBoundingClientRect(),D=Oe.getBoundingClientRect(),j=q(Oe).querySelector(".button-text"),ee=j.getBoundingClientRect(),pe=q(Ne).querySelector(".toolbar-title").getBoundingClientRect();we(be,Pe,J,Ne,O,pe,j,ee),X(be,Pe,J,Oe,D,j,ee,Ne,pe)}else if(P){const O=ze.getBoundingClientRect(),D=ke.getBoundingClientRect(),j=q(ke).querySelector(".button-text"),ee=j.getBoundingClientRect(),pe=q(ze).querySelector(".toolbar-title").getBoundingClientRect();we(be,Pe,J,ze,O,pe,j,ee),X(be,Pe,J,ke,D,j,ee,ze,pe)}return{forward:nt,backward:P}})(et,ke,j,O,D);if(pe.forEach(R=>{const N=(0,y.c)();N.addElement(R),et.addAnimation(N);const W=(0,y.c)();W.addElement(R.querySelector("ion-title"));const le=(0,y.c)(),Y=Array.from(R.querySelectorAll("ion-buttons,[menuToggle]")),Xe=R.closest("ion-header"),dt=null==Xe?void 0:Xe.classList.contains("header-collapse-condense-inactive");let rt;rt=Y.filter(j?un=>{const jt=un.classList.contains("buttons-collapse");return jt&&!dt||!jt}:un=>!un.classList.contains("buttons-collapse")),le.addElement(rt);const ft=(0,y.c)();ft.addElement(R.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Bt=(0,y.c)();Bt.addElement(q(R).querySelector(".toolbar-background"));const pn=(0,y.c)(),wt=R.querySelector("ion-back-button");if(wt&&pn.addElement(wt),N.addAnimation([W,le,ft,Bt,pn]),le.fromTo(Z,.01,1),ft.fromTo(Z,.01,1),j)dt||W.fromTo("transform",`translateX(${P})`,`translateX(${Ne})`).fromTo(Z,.01,1),ft.fromTo("transform",`translateX(${P})`,`translateX(${Ne})`),pn.fromTo(Z,.01,1);else if(en||W.fromTo("transform",`translateX(${nt})`,`translateX(${Ne})`).fromTo(Z,.01,1),ft.fromTo("transform",`translateX(${nt})`,`translateX(${Ne})`),Bt.beforeClearStyles([Z,"transform"]),(null==Xe?void 0:Xe.translucent)?Bt.fromTo("transform",ke?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Bt.fromTo(Z,.01,"var(--opacity)"),Te||pn.fromTo(Z,.01,1),wt&&!Te){const jt=(0,y.c)();jt.addElement(q(wt).querySelector(".button-text")).fromTo("transform",ke?"translateX(-100px)":"translateX(100px)","translateX(0px)"),N.addAnimation(jt)}}),D){const R=(0,y.c)(),N=D.querySelector(":scope > ion-content"),W=D.querySelectorAll(":scope > ion-header > ion-toolbar"),le=D.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(N||0!==W.length||0!==le.length?(R.addElement(N),R.addElement(le)):R.addElement(D.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),et.addAnimation(R),j){R.beforeClearStyles([Z]).fromTo("transform",`translateX(${Ne})`,ke?"translateX(-100%)":"translateX(100%)");const Y=(0,Fe.g)(D);et.afterAddWrite(()=>{"normal"===et.getDirection()&&Y.style.setProperty("display","none")})}else R.fromTo("transform",`translateX(${Ne})`,`translateX(${P})`).fromTo(Z,1,.8);if(N){const Y=q(N).querySelector(".transition-effect");if(Y){const Xe=Y.querySelector(".transition-cover"),dt=Y.querySelector(".transition-shadow"),rt=(0,y.c)(),ft=(0,y.c)(),Bt=(0,y.c)();rt.addElement(Y).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),ft.addElement(Xe).beforeClearStyles([Z]).fromTo(Z,.1,0),Bt.addElement(dt).beforeClearStyles([Z]).fromTo(Z,.7,.03),rt.addAnimation([ft,Bt]),R.addAnimation([rt])}}W.forEach(Y=>{const Xe=(0,y.c)();Xe.addElement(Y);const dt=(0,y.c)();dt.addElement(Y.querySelector("ion-title"));const rt=(0,y.c)(),ft=Y.querySelectorAll("ion-buttons,[menuToggle]"),Bt=Y.closest("ion-header"),pn=null==Bt?void 0:Bt.classList.contains("header-collapse-condense-inactive"),wt=Array.from(ft).filter(Et=>{const qt=Et.classList.contains("buttons-collapse");return qt&&!pn||!qt});rt.addElement(wt);const un=(0,y.c)(),jt=Y.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");jt.length>0&&un.addElement(jt);const Ae=(0,y.c)();Ae.addElement(q(Y).querySelector(".toolbar-background"));const ue=(0,y.c)(),ye=Y.querySelector("ion-back-button");if(ye&&ue.addElement(ye),Xe.addAnimation([dt,rt,un,ue,Ae]),et.addAnimation(Xe),ue.fromTo(Z,.99,0),rt.fromTo(Z,.99,0),un.fromTo(Z,.99,0),j){if(pn||dt.fromTo("transform",`translateX(${Ne})`,ke?"translateX(-100%)":"translateX(100%)").fromTo(Z,.99,0),un.fromTo("transform",`translateX(${Ne})`,ke?"translateX(-100%)":"translateX(100%)"),Ae.beforeClearStyles([Z,"transform"]),(null==Bt?void 0:Bt.translucent)?Ae.fromTo("transform","translateX(0px)",ke?"translateX(-100%)":"translateX(100%)"):Ae.fromTo(Z,"var(--opacity)",0),ye&&!L){const qt=(0,y.c)();qt.addElement(q(ye).querySelector(".button-text")).fromTo("transform",`translateX(${Ne})`,`translateX(${(ke?-124:124)+"px"})`),Xe.addAnimation(qt)}}else pn||dt.fromTo("transform",`translateX(${Ne})`,`translateX(${P})`).fromTo(Z,.99,0).afterClearStyles([Oe,Z]),un.fromTo("transform",`translateX(${Ne})`,`translateX(${P})`).afterClearStyles([Oe,Z]),ue.afterClearStyles([Z]),dt.afterClearStyles([Z]),rt.afterClearStyles([Z])})}return et}catch(Q){throw Q}},Ie=10},3003:(zn,Vt,ce)=>{"use strict";ce.r(Vt),ce.d(Vt,{mdTransitionAnimation:()=>Pt});var y=ce(3503),Fe=ce(1497);ce(8476),ce(9081);const Pt=(Ze,q)=>{var Je,ot,ne;const X="40px",de="back"===q.direction,be=q.leavingEl,Pe=(0,Fe.g)(q.enteringEl),J=Pe.querySelector("ion-toolbar"),Q=(0,y.c)();if(Q.addElement(Pe).fill("both").beforeRemoveClass("ion-page-invisible"),de?Q.duration((null!==(Je=q.duration)&&void 0!==Je?Je:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Q.duration((null!==(ot=q.duration)&&void 0!==ot?ot:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform",`translateY(${X})`,"translateY(0px)").fromTo("opacity",.01,1),J){const Z=(0,y.c)();Z.addElement(J),Q.addAnimation(Z)}if(be&&de){Q.duration((null!==(ne=q.duration)&&void 0!==ne?ne:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const Z=(0,y.c)();Z.addElement((0,Fe.g)(be)).onFinish(Oe=>{1===Oe&&Z.elements.length>0&&Z.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)",`translateY(${X})`).fromTo("opacity",1,0),Q.addAnimation(Z)}return Q}},4133:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{B:()=>rt,G:()=>ft,O:()=>Bt,a:()=>we,b:()=>de,c:()=>J,d:()=>pn,e:()=>wt,f:()=>en,g:()=>L,h:()=>W,i:()=>Y,j:()=>Z,k:()=>Oe,m:()=>be,n:()=>nt,o:()=>et,s:()=>dt});var y=ce(467),Fe=ce(8476),G=ce(9457),We=ce(8436),Pt=ce(5938),Ze=ce(5638),q=ce(4929);let Je=0,ot=0;const ne=new WeakMap,X=Ae=>({create:ue=>Ne(Ae,ue),dismiss:(ue,ye,Et)=>ee(document,ue,ye,Ae,Et),getTop:()=>(0,y.A)(function*(){return et(document,Ae)})()}),we=X("ion-alert"),de=X("ion-action-sheet"),be=X("ion-modal"),J=X("ion-popover"),Z=Ae=>{typeof document<"u"&&j(document);const ue=Je++;Ae.overlayIndex=ue},Oe=Ae=>(Ae.hasAttribute("id")||(Ae.id="ion-overlay-"+ ++ot),Ae.id),Ne=(Ae,ue)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Ae).then(()=>{const ye=document.createElement(Ae);return ye.classList.add("overlay-hidden"),Object.assign(ye,Object.assign(Object.assign({},ue),{hasController:!0})),R(document).appendChild(ye),new Promise(Et=>(0,Ze.c)(ye,Et))}):Promise.resolve(),ze='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',nt=(Ae,ue)=>{const ye=Ae.querySelector(ze);O(ye,ue)},P=(Ae,ue)=>{const ye=Array.from(Ae.querySelectorAll(ze));O(ye.length>0?ye[ye.length-1]:null,ue)},O=(Ae,ue)=>{let ye=Ae;const Et=null==Ae?void 0:Ae.shadowRoot;Et&&(ye=Et.querySelector(ze)||Ae),ye?(0,Ze.f)(ye):ue.focus()},j=Ae=>{0===Je&&(Je=1,Ae.addEventListener("focus",ue=>{((Ae,ue)=>{const ye=et(ue,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Et=Ae.target;ye&&Et&&!ye.classList.contains("ion-disable-focus-trap")&&(ye.shadowRoot?(()=>{if(ye.contains(Et))ye.lastFocus=Et;else if("ION-TOAST"===Et.tagName)O(ye.lastFocus,ye);else{const tn=ye.lastFocus;nt(ye,ye),tn===ue.activeElement&&P(ye,ye),ye.lastFocus=ue.activeElement}})():(()=>{if(ye===Et)ye.lastFocus=void 0;else if("ION-TOAST"===Et.tagName)O(ye.lastFocus,ye);else{const tn=(0,Ze.g)(ye);if(!tn.contains(Et))return;const Cn=tn.querySelector(".ion-overlay-wrapper");if(!Cn)return;if(Cn.contains(Et)||Et===tn.querySelector("ion-backdrop"))ye.lastFocus=Et;else{const Qt=ye.lastFocus;nt(Cn,ye),Qt===ue.activeElement&&P(Cn,ye),ye.lastFocus=ue.activeElement}}})())})(ue,Ae)},!0),Ae.addEventListener("ionBackButton",ue=>{const ye=et(Ae);null!=ye&&ye.backdropDismiss&&ue.detail.register(G.OVERLAY_BACK_BUTTON_PRIORITY,()=>{ye.dismiss(void 0,rt)})}),(0,G.shouldUseCloseWatcher)()||Ae.addEventListener("keydown",ue=>{if("Escape"===ue.key){const ye=et(Ae);null!=ye&&ye.backdropDismiss&&ye.dismiss(void 0,rt)}}))},ee=(Ae,ue,ye,Et,qt)=>{const gn=et(Ae,Et,qt);return gn?gn.dismiss(ue,ye):Promise.reject("overlay does not exist")},pe=(Ae,ue)=>((Ae,ue)=>(void 0===ue&&(ue="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Ae.querySelectorAll(ue)).filter(ye=>ye.overlayIndex>0)))(Ae,ue).filter(ye=>!(Ae=>Ae.classList.contains("overlay-hidden"))(ye)),et=(Ae,ue,ye)=>{const Et=pe(Ae,ue);return void 0===ye?Et[Et.length-1]:Et.find(qt=>qt.id===ye)},Dt=(Ae=!1)=>{const ye=R(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");ye&&(Ae?ye.setAttribute("aria-hidden","true"):ye.removeAttribute("aria-hidden"))},en=function(){var Ae=(0,y.A)(function*(ue,ye,Et,qt,gn){var tn,Cn;if(ue.presented)return;Dt(!0),un(ue.el),ue.presented=!0,ue.willPresent.emit(),null===(tn=ue.willPresentShorthand)||void 0===tn||tn.emit();const Qt=(0,We.b)(ue),ur=ue.enterAnimation?ue.enterAnimation:We.c.get(ye,"ios"===Qt?Et:qt);(yield N(ue,ur,ue.el,gn))&&(ue.didPresent.emit(),null===(Cn=ue.didPresentShorthand)||void 0===Cn||Cn.emit()),"ION-TOAST"!==ue.el.tagName&&Te(ue.el),ue.keyboardClose&&(null===document.activeElement||!ue.el.contains(document.activeElement))&&ue.el.focus(),ue.el.removeAttribute("aria-hidden")});return function(ye,Et,qt,gn,tn){return Ae.apply(this,arguments)}}(),Te=function(){var Ae=(0,y.A)(function*(ue){let ye=document.activeElement;if(!ye)return;const Et=null==ye?void 0:ye.shadowRoot;Et&&(ye=Et.querySelector(ze)||ye),yield ue.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&ye.focus()});return function(ye){return Ae.apply(this,arguments)}}(),L=function(){var Ae=(0,y.A)(function*(ue,ye,Et,qt,gn,tn,Cn){var Qt,ur;if(!ue.presented)return!1;void 0!==Fe.d&&1===pe(Fe.d).length&&Dt(!1),ue.presented=!1;try{ue.el.style.setProperty("pointer-events","none"),ue.willDismiss.emit({data:ye,role:Et}),null===(Qt=ue.willDismissShorthand)||void 0===Qt||Qt.emit({data:ye,role:Et});const Nn=(0,We.b)(ue),Gr=ue.leaveAnimation?ue.leaveAnimation:We.c.get(qt,"ios"===Nn?gn:tn);Et!==ft&&(yield N(ue,Gr,ue.el,Cn)),ue.didDismiss.emit({data:ye,role:Et}),null===(ur=ue.didDismissShorthand)||void 0===ur||ur.emit({data:ye,role:Et}),(ne.get(ue)||[]).forEach(Lr=>Lr.destroy()),ne.delete(ue),ue.el.classList.add("overlay-hidden"),ue.el.style.removeProperty("pointer-events"),void 0!==ue.el.lastFocus&&(ue.el.lastFocus=void 0)}catch(Nn){console.error(Nn)}return ue.el.remove(),jt(),!0});return function(ye,Et,qt,gn,tn,Cn,Qt){return Ae.apply(this,arguments)}}(),R=Ae=>Ae.querySelector("ion-app")||Ae.body,N=function(){var Ae=(0,y.A)(function*(ue,ye,Et,qt){Et.classList.remove("overlay-hidden");const tn=ye(ue.el,qt);(!ue.animated||!We.c.getBoolean("animated",!0))&&tn.duration(0),ue.keyboardClose&&tn.beforeAddWrite(()=>{const Qt=Et.ownerDocument.activeElement;null!=Qt&&Qt.matches("input,ion-input, ion-textarea")&&Qt.blur()});const Cn=ne.get(ue)||[];return ne.set(ue,[...Cn,tn]),yield tn.play(),!0});return function(ye,Et,qt,gn){return Ae.apply(this,arguments)}}(),W=(Ae,ue)=>{let ye;const Et=new Promise(qt=>ye=qt);return le(Ae,ue,qt=>{ye(qt.detail)}),Et},le=(Ae,ue,ye)=>{const Et=qt=>{(0,Ze.b)(Ae,ue,Et),ye(qt)};(0,Ze.a)(Ae,ue,Et)},Y=Ae=>"cancel"===Ae||Ae===rt,Xe=Ae=>Ae(),dt=(Ae,ue)=>{if("function"==typeof Ae)return We.c.get("_zoneGate",Xe)(()=>{try{return Ae(ue)}catch(Et){throw Et}})},rt="backdrop",ft="gesture",Bt=39,pn=Ae=>{let ye,ue=!1;const Et=(0,Pt.C)(),qt=(Cn=!1)=>{if(ye&&!Cn)return{delegate:ye,inline:ue};const{el:Qt,hasController:ur,delegate:Nn}=Ae;return ue=null!==Qt.parentNode&&!ur,ye=ue?Nn||Et:Nn,{inline:ue,delegate:ye}};return{attachViewToDom:function(){var Cn=(0,y.A)(function*(Qt){const{delegate:ur}=qt(!0);if(ur)return yield ur.attachViewToDom(Ae.el,Qt);const{hasController:Nn}=Ae;if(Nn&&void 0!==Qt)throw new Error("framework delegate is missing");return null});return function(ur){return Cn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:Cn}=qt();Cn&&void 0!==Ae.el&&Cn.removeViewFromDom(Ae.el.parentElement,Ae.el)}}},wt=()=>{let Ae;const ue=()=>{Ae&&(Ae(),Ae=void 0)};return{addClickListener:(Et,qt)=>{ue();const gn=void 0!==qt?document.getElementById(qt):null;gn?Ae=((Cn,Qt)=>{const ur=()=>{Qt.present()};return Cn.addEventListener("click",ur),()=>{Cn.removeEventListener("click",ur)}})(gn,Et):(0,q.p)(`A trigger element with the ID "${qt}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,Et)},removeClickListener:ue}},un=Ae=>{var ue;if(void 0===Fe.d)return;const ye=pe(Fe.d);for(let Et=ye.length-1;Et>=0;Et--){const qt=ye[Et],gn=null!==(ue=ye[Et+1])&&void 0!==ue?ue:Ae;(gn.hasAttribute("aria-hidden")||"ION-TOAST"!==gn.tagName)&&qt.setAttribute("aria-hidden","true")}},jt=()=>{if(void 0===Fe.d)return;const Ae=pe(Fe.d);for(let ue=Ae.length-1;ue>=0;ue--){const ye=Ae[ue];if(ye.removeAttribute("aria-hidden"),"ION-TOAST"!==ye.tagName)break}}},3635:(zn,Vt,ce)=>{"use strict";var y=ce(467);let G=null,Pt=1;const Ze=Symbol("SIGNAL");function q(t){const e=G;return G=t,e}function Ie(t){if((!nt(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Pt)){if(!t.producerMustRecompute(t)&&!Oe(t))return t.dirty=!1,void(t.lastCleanEpoch=Pt);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Pt}}function Oe(t){P(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Ie(n),r!==n.version))return!0}return!1}function ke(t,e){if(function O(t){var e,n;null!==(e=t.liveConsumerNode)&&void 0!==e||(t.liveConsumerNode=[]),null!==(n=t.liveConsumerIndexOfThis)&&void 0!==n||(t.liveConsumerIndexOfThis=[])}(t),P(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)ke(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];P(i),i.producerIndexOfThis[r]=e}}function nt(t){var e,n;return t.consumerIsAlwaysLive||(null!==(e=null==t||null===(n=t.liveConsumerNode)||void 0===n?void 0:n.length)&&void 0!==e?e:0)>0}function P(t){var e,n,r;null!==(e=t.producerNode)&&void 0!==e||(t.producerNode=[]),null!==(n=t.producerIndexOfThis)&&void 0!==n||(t.producerIndexOfThis=[]),null!==(r=t.producerLastReadVersion)&&void 0!==r||(t.producerLastReadVersion=[])}let Dt=null;function wt(t){return"function"==typeof t}function un(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const jt=un(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ae(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ue{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(wt(r))try{r()}catch(o){e=o instanceof jt?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{qt(o)}catch(s){e=null!=e?e:[],s instanceof jt?e=[...e,...s.errors]:e.push(s)}}if(e)throw new jt(e)}}add(e){var n;if(e&&e!==this)if(this.closed)qt(e);else{if(e instanceof ue){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ae(n,e)}remove(e){const{_finalizers:n}=this;n&&Ae(n,e),e instanceof ue&&e._removeParent(this)}}ue.EMPTY=(()=>{const t=new ue;return t.closed=!0,t})();const ye=ue.EMPTY;function Et(t){return t instanceof ue||t&&"closed"in t&&wt(t.remove)&&wt(t.add)&&wt(t.unsubscribe)}function qt(t){wt(t)?t():t.unsubscribe()}const gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},tn={setTimeout(t,e,...n){const{delegate:r}=tn;return null!=r&&r.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=tn;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Cn(t){tn.setTimeout(()=>{const{onUnhandledError:e}=gn;if(!e)throw t;e(t)})}function Qt(){}const ur=Ai("C",void 0,void 0);function Ai(t,e,n){return{kind:t,value:e,error:n}}let Lr=null;function io(t){if(gn.useDeprecatedSynchronousErrorHandling){const e=!Lr;if(e&&(Lr={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Lr;if(Lr=null,n)throw r}}else t()}class Gi extends ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Et(e)&&e.add(this)):this.destination=Rs}static create(e,n,r){return new $n(e,n,r)}next(e){this.isStopped?os(function Gr(t){return Ai("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?os(function Nn(t){return Ai("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?os(ur,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const yi=Function.prototype.bind;function si(t,e){return yi.call(t,e)}class Zr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Wi(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Wi(r)}else Wi(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Wi(n)}}}class $n extends Gi{constructor(e,n,r){let i;if(super(),wt(e)||!e)i={next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0};else{let o;this&&gn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&si(e.next,o),error:e.error&&si(e.error,o),complete:e.complete&&si(e.complete,o)}):i=e}this.destination=new Zr(i)}}function Wi(t){gn.useDeprecatedSynchronousErrorHandling?function Di(t){gn.useDeprecatedSynchronousErrorHandling&&Lr&&(Lr.errorThrown=!0,Lr.error=t)}(t):Cn(t)}function os(t,e){const{onStoppedNotification:n}=gn;n&&tn.setTimeout(()=>n(t,e))}const Rs={closed:!0,next:Qt,error:function is(t){throw t},complete:Qt},Si="function"==typeof Symbol&&Symbol.observable||"@@observable";function Cr(t){return t}function $o(t){return 0===t.length?Cr:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Un=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function B(t){return t&&t instanceof Gi||function ta(t){return t&&wt(t.next)&&wt(t.error)&&wt(t.complete)}(t)&&Et(t)}(n)?n:new $n(n,r,i);return io(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Ps(r))((i,o)=>{const s=new $n({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Si](){return this}pipe(...n){return $o(n)(this)}toPromise(n){return new(n=Ps(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Ps(t){var e;return null!==(e=null!=t?t:gn.Promise)&&void 0!==e?e:Promise}const M=un(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let $=(()=>{class t extends Un{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Ce(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new M}next(n){io(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){io(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){io(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?ye:(this.currentObservers=null,o.push(n),new ue(()=>{this.currentObservers=null,Ae(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Un;return n.source=this,n}}return t.create=(e,n)=>new Ce(e,n),t})();class Ce extends ${constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:ye}}class K extends ${constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function ut(t){return wt(null==t?void 0:t.lift)}function bt(t){return e=>{if(ut(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ot(t,e,n,r,i){return new ai(t,e,n,r,i)}class ai extends Gi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function _t(t,e){return bt((n,r)=>{let i=0;n.subscribe(Ot(r,o=>{r.next(t.call(e,o,i++))}))})}const on="https://g.co/ng/security#xss";class Se extends Error{constructor(e,n){super(function li(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function vt(t){return{toString:t}.toString()}const Ft="__parameters__";function Xn(t,e,n){return vt(()=>{const r=function jn(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(l,c,h){const p=l.hasOwnProperty(Ft)?l[Ft]:Object.defineProperty(l,Ft,{value:[]})[Ft];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const bn=globalThis;function mn(t){for(let e in t)if(t[e]===mn)return e;throw Error("Could not find renamed property on target object.")}function br(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Kt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Kt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Ln(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const as=mn({__forward_ref__:mn});function kn(t){return t.__forward_ref__=kn,t.toString=function(){return Kt(this())},t}function Gt(t){return Ms(t)?t():t}function Ms(t){return"function"==typeof t&&t.hasOwnProperty(as)&&t.__forward_ref__===kn}function je(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function On(t){return{providers:t.providers||[],imports:t.imports||[]}}function er(t){return ka(t,sc)||ka(t,Su)}function ka(t,e){return t.hasOwnProperty(e)?t[e]:null}function ls(t){return t&&(t.hasOwnProperty(Ns)||t.hasOwnProperty(yg))?t[Ns]:null}const sc=mn({\u0275prov:mn}),Ns=mn({\u0275inj:mn}),Su=mn({ngInjectableDef:mn}),yg=mn({ngInjectorDef:mn});class lt{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=je({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Pu(t){return t&&!!t.\u0275providers}const na=mn({\u0275cmp:mn}),cs=mn({\u0275dir:mn}),xu=mn({\u0275pipe:mn}),Ly=mn({\u0275mod:mn}),hi=mn({\u0275fac:mn}),Mu=mn({__NG_ELEMENT_ID__:mn}),ah=mn({__NG_ENV_ID__:mn});function Zt(t){return"string"==typeof t?t:null==t?"":String(t)}function ra(t,e){throw new Se(-201,!1)}var vn=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(vn||{});let Ag;function ac(){return Ag}function Eo(t){const e=Ag;return Ag=t,e}function lh(t,e,n){const r=er(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&vn.Optional?null:void 0!==e?e:void ra()}const ks={},ch="__NG_DI_FLAG__",ku="ngTempTokenPath",vb=/\n/gm,By="__source";let ia;function oa(t){const e=ia;return ia=t,e}function Dg(t,e=vn.Default){if(void 0===ia)throw new Se(-203,!1);return null===ia?lh(t,void 0,e):ia.get(t,e&vn.Optional?null:void 0,e)}function Ve(t,e=vn.Default){return(ac()||Dg)(Gt(t),e)}function Be(t,e=vn.Default){return Ve(t,cc(e))}function cc(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function uc(t){const e=[];for(let n=0;n<t.length;n++){const r=Gt(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Se(900,!1);let i,o=vn.Default;for(let s=0;s<r.length;s++){const a=r[s],l=Uy(a);"number"==typeof l?-1===l?i=a.token:o|=l:i=a}e.push(Ve(i,o))}else e.push(Ve(r))}return e}function dc(t,e){return t[ch]=e,t.prototype[ch]=e,t}function Uy(t){return t[ch]}const El=dc(Xn("Optional"),8),hc=dc(Xn("SkipSelf"),4);function sa(t,e){return t.hasOwnProperty(hi)?t[hi]:null}function aa(t,e){t.forEach(n=>Array.isArray(n)?aa(n,e):e(n))}function dh(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ou(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function wo(t,e,n){let r=Os(t,e);return r>=0?t[1|r]=n:(r=~r,function Gy(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Fu(t,e){const n=Os(t,e);if(n>=0)return t[1|n]}function Os(t,e){return function fh(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const Co={},Tn=[],la=new lt(""),Ky=new lt("",-1),Lu=new lt("");class ph{get(e,n=ks){if(n===ks){const r=new Error(`NullInjectorError: No provider for ${Kt(e)}!`);throw r.name="NullInjectorError",r}return n}}var pc=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(pc||{}),us=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(us||{}),tr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(tr||{});function Qy(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Vu(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];gh(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function Yy(t){return 3===t||4===t||6===t}function gh(t){return 64===t.charCodeAt(0)}function Bu(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||mh(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function mh(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const Xy="ng-template";function Ib(t,e,n,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==Qy(e[i+1].toLowerCase(),n,0))return!0}else if($u(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===n)return!0}return!1}function $u(t){return 4===t.type&&t.value!==Xy}function Eb(t,e,n){return e===(4!==t.type||n?t.value:Xy)}function wb(t,e,n){let r=4;const i=t.attrs,o=null!==i?function xg(t){for(let e=0;e<t.length;e++)if(Yy(t[e]))return e;return t.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!Eb(t,l,n)||""===l&&1===e.length){if(bo(r))return!1;s=!0}}else if(8&r){if(null===i||!Ib(t,i,l,n)){if(bo(r))return!1;s=!0}}else{const c=e[++a],h=Cb(l,i,$u(t),n);if(-1===h){if(bo(r))return!1;s=!0;continue}if(""!==c){let p;if(p=h>o?"":i[h+1].toLowerCase(),2&r&&c!==p){if(bo(r))return!1;s=!0}}}}else{if(!s&&!bo(r)&&!bo(l))return!1;if(s&&bo(l))continue;s=!1,r=l|1&r}}return bo(r)||s}function bo(t){return!(1&t)}function Cb(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function Tb(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function _h(t,e,n=!1){for(let r=0;r<e.length;r++)if(wb(t,e[r],n))return!0;return!1}function Mg(t,e){e:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function Zy(t,e){return t?":not("+e.trim()+")":e}function Ng(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!bo(s)&&(e+=Zy(o,i),i=""),r=s,o=o||!bo(r);n++}return""!==i&&(e+=Zy(o,i)),e}function Ke(t){return vt(()=>{var e;const n=Jy(t),r={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===pc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:null!==(e=t.signals)&&void 0!==e&&e,data:t.data||{},encapsulation:t.encapsulation||us.Emulated,styles:t.styles||Tn,_:null,schemas:t.schemas||null,tView:null,id:""};eI(r);const i=t.dependencies;return r.directiveDefs=Lg(i,!1),r.pipeDefs=Lg(i,!0),r.id=function nN(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(r),r})}function Og(t){return nn(t)||Wr(t)}function Db(t){return null!==t}function Uo(t){return vt(()=>({type:t.type,bootstrap:t.bootstrap||Tn,declarations:t.declarations||Tn,imports:t.imports||Tn,exports:t.exports||Tn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Fg(t,e){if(null==t)return Co;const n={};for(const i in t)if(t.hasOwnProperty(i)){const o=t[i];let s,a,l=tr.None;var r;Array.isArray(o)?(l=o[0],s=o[1],a=null!==(r=o[2])&&void 0!==r?r:s):(s=o,a=o),e?(n[s]=l!==tr.None?[i,l]:i,e[s]=a):n[s]=i}return n}function xt(t){return vt(()=>{const e=Jy(t);return eI(e),e})}function oo(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function nn(t){return t[na]||null}function Wr(t){return t[cs]||null}function Ii(t){return t[xu]||null}function Pi(t,e){const n=t[Ly]||null;if(!n&&!0===e)throw new Error(`Type ${Kt(t)} does not have '\u0275mod' property.`);return n}function Jy(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Co,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Tn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Fg(t.inputs,e),outputs:Fg(t.outputs),debugInfo:null}}function eI(t){var e;null===(e=t.features)||void 0===e||e.forEach(n=>n(t))}function Lg(t,e){if(!t)return null;const n=e?Ii:Og;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(Db)}function Sb(...t){return{\u0275providers:Vg(0,t),\u0275fromNgModule:!0}}function Vg(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return aa(e,s=>{const a=s;Bg(a,o,[],r)&&(i||(i=[]),i.push(a))}),void 0!==i&&Rb(i,o),n}function Rb(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];tI(i,o=>{e(o,r)})}}function Bg(t,e,n,r){if(!(t=Gt(t)))return!1;let i=null,o=ls(t);const s=!o&&nn(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const l=t.ngModule;if(o=ls(l),!o)return!1;i=l}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)Bg(c,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{aa(o.imports,h=>{Bg(h,e,n,r)&&(c||(c=[]),c.push(h))})}finally{}void 0!==c&&Rb(c,e)}if(!a){const c=sa(i)||(()=>new i);e({provide:i,useFactory:c,deps:Tn},i),e({provide:Lu,useValue:i,multi:!0},i),e({provide:la,useValue:()=>Ve(i),multi:!0},i)}const l=o.providers;if(null!=l&&!a){const c=t;tI(l,h=>{e(h,c)})}}}return i!==t&&void 0!==t.providers}function tI(t,e){for(let n of t)Pu(n)&&(n=n.\u0275providers),Array.isArray(n)?tI(n,e):e(n)}const rN=mn({provide:String,useValue:mn});function nI(t){return null!==t&&"object"==typeof t&&rN in t}function ca(t){return"function"==typeof t}const $g=new lt(""),yh={},iN={};let Ug;function Ih(){return void 0===Ug&&(Ug=new ph),Ug}class qr{}class Va extends qr{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,oI(e,s=>this.processProvider(s)),this.records.set(Ky,mc(void 0,this)),i.has("environment")&&this.records.set(qr,mc(void 0,this));const o=this.records.get($g);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Lu,Tn,vn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=q(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),q(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=oa(this),r=Eo(void 0);try{return e()}finally{oa(n),Eo(r)}}get(e,n=ks,r=vn.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ah))return e[ah](this);r=cc(r);const o=oa(this),s=Eo(void 0);try{if(!(r&vn.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function wh(t){return"function"==typeof t||"object"==typeof t&&t instanceof lt}(e)&&er(e);l=c&&this.injectableDefInScope(c)?mc(jg(e),yh):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&vn.Self?Ih():this.parent).get(e,n=r&vn.Optional&&n===ks?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[ku]=a[ku]||[]).unshift(Kt(e)),o)throw a;return function yb(t,e,n,r){const i=t[ku];throw e[By]&&i.unshift(e[By]),t.message=function Rg(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Kt(e);if(Array.isArray(e))i=e.map(Kt).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Kt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(vb,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[ku]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Eo(s),oa(o)}}resolveInjectorInitializers(){const e=q(null),n=oa(this),r=Eo(void 0);try{const o=this.get(la,Tn,vn.Self);for(const s of o)s()}finally{oa(n),Eo(r),q(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Kt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(e){let n=ca(e=Gt(e))?e:Gt(e&&e.provide);const r=function rI(t){return nI(t)?mc(void 0,t.useValue):mc(iI(t),yh)}(e);if(!ca(e)&&!0===e.multi){let i=this.records.get(n);i||(i=mc(void 0,yh,!0),i.factory=()=>uc(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){const r=q(null);try{return n.value===yh&&(n.value=iN,n.value=n.factory()),"object"==typeof n.value&&n.value&&function oN(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{q(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Gt(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function jg(t){const e=er(t),n=null!==e?e.factory:sa(t);if(null!==n)return n;if(t instanceof lt)throw new Se(204,!1);if(t instanceof Function)return function Eh(t){if(t.length>0)throw new Se(204,!1);const n=function Io(t){return t&&(t[sc]||t[Su])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Se(204,!1)}function iI(t,e,n){let r;if(ca(t)){const i=Gt(t);return sa(i)||jg(i)}if(nI(t))r=()=>Gt(t.useValue);else if(function La(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...uc(t.deps||[]));else if(function vh(t){return!(!t||!t.useExisting)}(t))r=()=>Ve(Gt(t.useExisting));else{const i=Gt(t&&(t.useClass||t.provide));if(!function xb(t){return!!t.deps}(t))return sa(i)||jg(i);r=()=>new i(...uc(t.deps))}return r}function mc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function oI(t,e){for(const n of t)Array.isArray(n)?oI(n,e):n&&Pu(n)?oI(n.\u0275providers,e):e(n)}function xi(t,e){t instanceof Va&&t.assertNotDestroyed();const r=oa(t),i=Eo(void 0);try{return e()}finally{oa(r),Eo(i)}}function sI(){return void 0!==ac()||null!=function $y(){return ia}()}const pr=0,it=1,$t=2,Tr=3,ds=4,fi=5,so=6,_c=7,or=8,Mi=9,Ni=10,Yt=11,Uu=12,cI=13,vc=14,Ar=15,Ba=16,yc=17,Ls=18,ju=19,Ah=20,$a=21,Hu=22,Tl=23,Jt=25,Dh=1,Vs=7,Ua=9,Br=10;var Gu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Gu||{});function ki(t){return Array.isArray(t)&&"object"==typeof t[Dh]}function pi(t){return Array.isArray(t)&&!0===t[Dh]}function Hg(t){return!!(4&t.flags)}function ua(t){return t.componentOffset>-1}function Al(t){return!(1&~t.flags)}function To(t){return!!t.template}function zg(t){return!!(512&t[$t])}class Bb{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ph(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}function Ki(){return qg}function qg(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ub),$b}function $b(){const t=yI(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Co)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Ub(t,e,n,r,i){const o=this.declaredInputs[r],s=yI(t)||function jb(t,e){return t[xh]=e}(t,{previous:Co,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new Bb(c&&c.currentValue,n,l===Co),Ph(t,e,i,n)}Ki.ngInherit=!0;const xh="__ngSimpleChanges__";function yI(t){return t[xh]||null}const Bs=function(t,e,n){};let Nh=!1;function Gn(t){for(;Array.isArray(t);)t=t[pr];return t}function Qu(t,e){return Gn(e[t])}function Oi(t,e){return Gn(e[t.index])}function Ec(t,e){return t.data[e]}function ao(t,e){const n=e[t];return ki(n)?n:n[pr]}function Qg(t){return!(128&~t[$t])}function $s(t,e){return null==e?null:t[e]}function Oh(t){t[yc]=0}function Gb(t){1024&t[$t]||(t[$t]|=1024,Qg(t)&&ja(t))}function Fh(t){var e;return!!(9216&t[$t]||null!==(e=t[Tl])&&void 0!==e&&e.dirty)}function Yg(t){var e;if(null===(e=t[Ni].changeDetectionScheduler)||void 0===e||e.notify(1),Fh(t))ja(t);else if(64&t[$t])if(function kh(){return Nh}())t[$t]|=1024,ja(t);else{var n;null===(n=t[Ni].changeDetectionScheduler)||void 0===n||n.notify()}}function ja(t){var e;null===(e=t[Ni].changeDetectionScheduler)||void 0===e||e.notify();let n=Dl(t);for(;null!==n&&!(8192&n[$t])&&(n[$t]|=8192,Qg(n));)n=Dl(n)}function Lh(t,e){if(!(256&~t[$t]))throw new Se(911,!1);null===t[$a]&&(t[$a]=[]),t[$a].push(e)}function Dl(t){const e=t[Tr];return pi(e)?e[Tr]:e}const Xt={lFrame:kI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function TI(){return Xt.bindingsEnabled}function Cc(){return null!==Xt.skipHydrationRootTNode}function De(){return Xt.lFrame.lView}function yn(){return Xt.lFrame.tView}function hs(t){return Xt.lFrame.contextLView=t,t[or]}function fs(t){return Xt.lFrame.contextLView=null,t}function Vn(){let t=Vh();for(;null!==t&&64===t.type;)t=t.parent;return t}function Vh(){return Xt.lFrame.currentTNode}function jo(t,e){const n=Xt.lFrame;n.currentTNode=t,n.isParent=e}function Jg(){return Xt.lFrame.isParent}function Bh(){Xt.lFrame.isParent=!1}function co(){return Xt.lFrame.bindingIndex++}function Zb(t,e){const n=Xt.lFrame;n.bindingIndex=n.bindingRootIndex=t,tm(e)}function tm(t){Xt.lFrame.currentDirectiveIndex=t}function Uh(t){Xt.lFrame.currentQueryIndex=t}function pN(t){const e=t[it];return 2===e.type?e.declTNode:1===e.type?t[fi]:null}function MI(t,e,n){if(n&vn.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&vn.Host||(i=pN(o),null===i||(o=o[vc],10&i.type))););if(null===i)return!1;e=i,t=o}const r=Xt.lFrame=NI();return r.currentTNode=e,r.lView=t,!0}function ha(t){const e=NI(),n=t[it];Xt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function NI(){const t=Xt.lFrame,e=null===t?null:t.child;return null===e?kI(t):e}function kI(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function jh(){const t=Xt.lFrame;return Xt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const OI=jh;function Xu(){const t=jh();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Fi(){return Xt.lFrame.selectedIndex}function fa(t){Xt.lFrame.selectedIndex=t}function sr(){const t=Xt.lFrame;return Ec(t.tView,t.selectedIndex)}let LI=!0;function Zu(){return LI}function gs(t){LI=t}function Hh(t,e){for(let c=e.directiveStart,h=e.directiveEnd;c<h;c++){const m=t.data[c].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:T,ngAfterViewChecked:S,ngOnDestroy:U}=m;var n,r,i,o,s,a,l;_&&(null!==(n=t.contentHooks)&&void 0!==n?n:t.contentHooks=[]).push(-c,_),w&&((null!==(r=t.contentHooks)&&void 0!==r?r:t.contentHooks=[]).push(c,w),(null!==(i=t.contentCheckHooks)&&void 0!==i?i:t.contentCheckHooks=[]).push(c,w)),T&&(null!==(o=t.viewHooks)&&void 0!==o?o:t.viewHooks=[]).push(-c,T),S&&((null!==(s=t.viewHooks)&&void 0!==s?s:t.viewHooks=[]).push(c,S),(null!==(a=t.viewCheckHooks)&&void 0!==a?a:t.viewCheckHooks=[]).push(c,S)),null!=U&&(null!==(l=t.destroyHooks)&&void 0!==l?l:t.destroyHooks=[]).push(c,U)}}function zh(t,e,n){VI(t,e,3,n)}function bc(t,e,n,r){(3&t[$t])===n&&VI(t,e,n,r)}function Ju(t,e){let n=t[$t];(3&n)===e&&(n&=16383,n+=1,t[$t]=n)}function VI(t,e,n,r){const o=null!=r?r:-1,s=e.length-1;let a=0;for(let l=void 0!==r?65535&t[yc]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(t[yc]+=65536),(a<o||-1==o)&&(Gh(t,n,e,l),t[yc]=(4294901760&t[yc])+l+2),l++}function BI(t,e){Bs(4,t,e);const n=q(null);try{e.call(t)}finally{q(n),Bs(5,t,e)}}function Gh(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[$t]>>14<t[yc]>>16&&(3&t[$t])===e&&(t[$t]+=16384,BI(a,o)):BI(a,o)}const Tc=-1;class ed{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function om(t){return t!==Tc}function Ac(t){return 32767&t}function td(t,e){let n=function lT(t){return t>>16}(t),r=e;for(;n>0;)r=r[vc],n--;return r}let sm=!0;function Kh(t){const e=sm;return sm=t,e}const Qh=255,Yh=5;let $I=0;const js={};function Xh(t,e){const n=Dc(t,e);if(-1!==n)return n;const r=e[it];r.firstCreatePass&&(t.injectorIndex=e.length,Qi(r.data,t),Qi(e,null),Qi(r.blueprint,null));const i=nd(t,e),o=t.injectorIndex;if(om(i)){const s=Ac(i),a=td(i,e),l=a[it].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function Qi(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Dc(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function nd(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=hm(i),null===r)return Tc;if(n++,i=i[vc],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Tc}function lm(t,e,n){!function am(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Mu)&&(r=n[Mu]),null==r&&(r=n[Mu]=$I++);const i=r&Qh;e.data[t+(i>>Yh)]|=1<<i}(t,e,n)}function Zh(t,e,n){if(n&vn.Optional||void 0!==t)return t;ra()}function UI(t,e,n,r){if(n&vn.Optional&&void 0===r&&(r=null),!(n&(vn.Self|vn.Host))){const i=t[Mi],o=Eo(void 0);try{return i?i.get(e,r,n&vn.Optional):lh(e,r,n&vn.Optional)}finally{Eo(o)}}return Zh(r,0,n)}function um(t,e,n,r=vn.Default,i){if(null!==t){if(2048&e[$t]&&!(r&vn.Self)){const s=function zI(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[$t]&&!(512&s[$t]);){const a=jI(o,s,n,r|vn.Self,js);if(a!==js)return a;let l=o.parent;if(!l){const c=s[Ah];if(c){const h=c.get(n,js,r);if(h!==js)return h}l=hm(s),s=s[vc]}o=l}return i}(t,e,n,r,js);if(s!==js)return s}const o=jI(t,e,n,r,js);if(o!==js)return o}return UI(e,n,r,i)}function jI(t,e,n,r,i){const o=function uT(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Mu)?t[Mu]:void 0;return"number"==typeof e?e>=0?e&Qh:dT:e}(n);if("function"==typeof o){if(!MI(e,t,r))return r&vn.Host?Zh(i,0,r):UI(e,n,r,i);try{let s;if(s=o(r),null!=s||r&vn.Optional)return s;ra()}finally{OI()}}else if("number"==typeof o){let s=null,a=Dc(t,e),l=Tc,c=r&vn.Host?e[Ar][fi]:null;for((-1===a||r&vn.SkipSelf)&&(l=-1===a?nd(t,e):e[a+8],l!==Tc&&dm(r,!1)?(s=e[it],a=Ac(l),e=td(l,e)):a=-1);-1!==a;){const h=e[it];if(HI(o,a,h.data)){const p=Ha(a,e,n,s,r,c);if(p!==js)return p}l=e[a+8],l!==Tc&&dm(r,e[it].data[a+8]===c)&&HI(o,a,e)?(s=h,a=Ac(l),e=td(l,e)):a=-1}}return i}function Ha(t,e,n,r,i,o){const s=e[it],a=s.data[t+8],h=function rd(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,l=t.directiveStart,h=o>>20,m=i?a+h:t.directiveEnd;for(let _=r?a:a+h;_<m;_++){const w=s[_];if(_<l&&n===w||_>=l&&w.type===n)return _}if(i){const _=s[l];if(_&&To(_)&&_.type===n)return l}return null}(a,s,n,null==r?ua(a)&&sm:r!=s&&!!(3&a.type),i&vn.Host&&o===a);return null!==h?Sl(e,s,h,a):js}function Sl(t,e,n,r){let i=t[n];const o=e.data;if(function iT(t){return t instanceof ed}(i)){const s=i;s.resolving&&function _b(t,e){throw e&&e.join(" > "),new Se(-200,t)}(function Pn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Zt(t)}(o[n]));const a=Kh(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?Eo(s.injectImpl):null;MI(t,r,vn.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function im(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){var s,a;const p=qg(e);(null!==(s=n.preOrderHooks)&&void 0!==s?s:n.preOrderHooks=[]).push(t,p),(null!==(a=n.preOrderCheckHooks)&&void 0!==a?a:n.preOrderCheckHooks=[]).push(t,p)}var l,c,h;i&&(null!==(l=n.preOrderHooks)&&void 0!==l?l:n.preOrderHooks=[]).push(0-t,i),o&&((null!==(c=n.preOrderHooks)&&void 0!==c?c:n.preOrderHooks=[]).push(t,o),(null!==(h=n.preOrderCheckHooks)&&void 0!==h?h:n.preOrderCheckHooks=[]).push(t,o))}(n,o[n],e)}finally{null!==c&&Eo(c),Kh(a),s.resolving=!1,OI()}}return i}function HI(t,e,n){return!!(n[e+(t>>Yh)]&1<<t)}function dm(t,e){return!(t&vn.Self||t&vn.Host&&e)}class $r{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return um(this._tNode,this._lView,e,cc(r),n)}}function dT(){return new $r(Vn(),De())}function xn(t){return vt(()=>{const e=t.prototype.constructor,n=e[hi]||Rl(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[hi]||Rl(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Rl(t){return Ms(t)?()=>{const e=Rl(Gt(t));return e&&e()}:sa(t)}function hm(t){const e=t[it],n=e.type;return 2===n?e.declTNode:1===n?t[fi]:null}function pa(t){return function cm(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(Yy(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(Vn(),t)}function pt(t,e=null,n=null,r){const i=Rt(t,e,n,r);return i.resolveInjectorInitializers(),i}function Rt(t,e=null,n=null,r,i=new Set){const o=[n||Tn,Sb(t)];return r=r||("object"==typeof t?void 0:Kt(t)),new Va(o,e||Ih(),r||null,i)}let tt=(()=>{var t;class e{static create(r,i){if(Array.isArray(r))return pt({name:""},i,r,"");{var o;const s=null!==(o=r.name)&&void 0!==o?o:"";return pt({name:s},r.parent,r.providers,s)}}}return(t=e).THROW_IF_NOT_FOUND=ks,t.NULL=new ph,t.\u0275prov=je({token:t,providedIn:"any",factory:()=>Ve(Ky)}),t.__NG_ELEMENT_ID__=-1,e})();function ef(t){return t.ngOriginalError}class zo{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ef(e);for(;n&&ef(n);)n=ef(n);return n||null}}const mm=new lt("",{providedIn:"root",factory:()=>Be(zo).handleError.bind(void 0)});let Pl=(()=>{var t;class e{}return(t=e).__NG_ELEMENT_ID__=qI,t.__NG_ENV_ID__=n=>n,e})();class _m extends Pl{constructor(e){super(),this._lView=e}onDestroy(e){return Lh(this._lView,e),()=>function Xg(t,e){if(null===t[$a])return;const n=t[$a].indexOf(e);-1!==n&&t[$a].splice(n,1)}(this._lView,e)}}function qI(){return new _m(De())}function vW(){return tf(Vn(),De())}function tf(t,e){return new He(Oi(t,e))}let He=(()=>{class e{constructor(r){this.nativeElement=r}}return e.__NG_ELEMENT_ID__=vW,e})();function fT(t){return e=>{setTimeout(t,void 0,e)}}const ar=class yW extends ${constructor(e=!1){var n;super(),this.destroyRef=void 0,this.__isAsync=e,sI()&&(this.destroyRef=null!==(n=Be(Pl,{optional:!0}))&&void 0!==n?n:void 0)}emit(e){const n=q(null);try{super.next(e)}finally{q(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){var a,l,c;const p=e;i=null===(a=p.next)||void 0===a?void 0:a.bind(p),o=null===(l=p.error)||void 0===l?void 0:l.bind(p),s=null===(c=p.complete)||void 0===c?void 0:c.bind(p)}this.__isAsync&&(o=fT(o),i&&(i=fT(i)),s&&(s=fT(s)));const h=super.subscribe({next:i,error:o,complete:s});return e instanceof ue&&e.add(h),h}};function YI(t){return!(128&~t.flags)}const gT=new Map;let wW=0;const _T="__ngContext__";function uo(t,e){ki(e)?(t[_T]=e[ju],function bW(t){gT.set(t[ju],t)}(e)):t[_T]=e}function SN(t){return PN(t[Uu])}function RN(t){return PN(t[ds])}function PN(t){for(;null!==t&&!pi(t);)t=t[ds];return t}let vT;const JI=new lt("",{providedIn:"root",factory:()=>jW}),jW="ng",VN=new lt(""),ga=new lt("",{providedIn:"platform",factory:()=>"unknown"}),BN=new lt("",{providedIn:"root",factory:()=>{var t;return(null===(t=function Sc(){if(void 0!==vT)return vT;if(typeof document<"u")return document;throw new Se(210,!1)}().body)||void 0===t||null===(t=t.querySelector("[ngCspNonce]"))||void 0===t?void 0:t.getAttribute("ngCspNonce"))||null}});let $N=()=>null;function CT(t,e,n=!1){return $N(t,e,n)}const GN=new lt("",{providedIn:"root",factory:()=>!1});let lE;function QN(t){var e;return(null===(e=function ST(){if(void 0===lE&&(lE=null,bn.trustedTypes))try{lE=bn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return lE}())||void 0===e?void 0:e.createScriptURL(t))||t}class YN{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${on})`}}function Rc(t){return t instanceof YN?t.changingThisBreaksApplicationSecurity:t}function Am(t,e){const n=function aq(t){return t instanceof YN&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${on})`)}return n===e}const dq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var lf=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(lf||{});function ma(t){const e=Sm();return e?e.sanitize(lf.URL,t)||"":Am(t,"URL")?Rc(t):function RT(t){return(t=String(t)).match(dq)?t:"unsafe:"+t}(Zt(t))}function ok(t){const e=Sm();if(e)return QN(e.sanitize(lf.RESOURCE_URL,t)||"");if(Am(t,"ResourceURL"))return QN(Rc(t));throw new Se(904,!1)}function Sm(){const t=De();return t&&t[Ni].sanitizer}function ms(t){return t instanceof Function?t():t}var xc=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(xc||{});let FT;function LT(t,e){return FT(t,e)}function uf(t,e,n,r,i){if(null!=r){let o,s=!1;pi(r)?o=r:ki(r)&&(s=!0,r=r[pr]);const a=Gn(r);0===t&&null!==n?null==i?vk(e,n,a):id(e,n,a,i||null,!0):1===t&&null!==n?id(e,n,a,i||null,!0):2===t?function xm(t,e,n){const r=pE(t,e);r&&function Kq(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function Xq(t,e,n,r,i){const o=n[Vs];o!==Gn(n)&&uf(e,t,r,o,i);for(let a=Br;a<n.length;a++){const l=n[a];mE(l[it],l,t,e,r,o)}}(e,t,o,n,i)}}function hE(t,e,n){return t.createElement(e,n)}function gk(t,e){var n;null===(n=e[Ni].changeDetectionScheduler)||void 0===n||n.notify(1),mE(t,e,e[Yt],2,null,null)}function mk(t,e){const n=t[Ua],r=n.indexOf(e);n.splice(r,1)}function Rm(t,e){if(t.length<=Br)return;const n=Br+e,r=t[n];if(r){const i=r[Ba];null!==i&&i!==t&&mk(i,r),e>0&&(t[n-1][ds]=r[ds]);const o=Ou(t,Br+e);!function Uq(t,e){gk(t,e),e[pr]=null,e[fi]=null}(r[it],r);const s=o[Ls];null!==s&&s.detachView(o[it]),r[Tr]=null,r[ds]=null,r[$t]&=-129}return r}function fE(t,e){if(!(256&e[$t])){const n=e[Yt];n.destroyNode&&mE(t,e,n,3,null,null),function Hq(t){let e=t[Uu];if(!e)return $T(t[it],t);for(;e;){let n=null;if(ki(e))n=e[Uu];else{const r=e[Br];r&&(n=r)}if(!n){for(;e&&!e[ds]&&e!==t;)ki(e)&&$T(e[it],e),e=e[Tr];null===e&&(e=t),ki(e)&&$T(e[it],e),n=e&&e[ds]}e=n}}(e)}}function $T(t,e){if(256&e[$t])return;const n=q(null);try{e[$t]&=-129,e[$t]|=256,e[Tl]&&function Ne(t){if(P(t),nt(t))for(let e=0;e<t.producerNode.length;e++)ke(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(e[Tl]),function qq(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof ed)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],l=o[s+1];Bs(4,a,l);try{l.call(a)}finally{Bs(5,a,l)}}else{Bs(4,i,o);try{o.call(i)}finally{Bs(5,i,o)}}}}}(t,e),function Wq(t,e){const n=t.cleanup,r=e[_c];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[_c]=null);const i=e[$a];if(null!==i){e[$a]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,e),1===e[it].type&&e[Yt].destroy();const r=e[Ba];if(null!==r&&pi(e[Tr])){r!==e[Tr]&&mk(r,e);const i=e[Ls];null!==i&&i.detachView(t)}!function TW(t){gT.delete(t[ju])}(e)}finally{q(n)}}function UT(t,e,n){return function _k(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[pr];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===us.None||o===us.Emulated)return null}return Oi(r,n)}}(t,e.parent,n)}function id(t,e,n,r,i){t.insertBefore(e,n,r,i)}function vk(t,e,n){t.appendChild(e,n)}function yk(t,e,n,r,i){null!==r?id(t,e,n,r,i):vk(t,e,n)}function pE(t,e){return t.parentNode(e)}function Ik(t,e,n){return wk(t,e,n)}let jT,wk=function Ek(t,e,n){return 40&t.type?Oi(t,n):null};function gE(t,e,n,r){const i=UT(t,r,e),o=e[Yt],a=Ik(r.parent||e[fi],r,e);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)yk(o,i,n[l],a,!1);else yk(o,i,n,a,!1);void 0!==jT&&jT(o,r,e,n,i)}function Pm(t,e){if(null!==e){const n=e.type;if(3&n)return Oi(e,t);if(4&n)return HT(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Pm(t,r);{const i=t[e.index];return pi(i)?HT(-1,i):Gn(i)}}if(32&n)return LT(e,t)()||Gn(t[e.index]);{const r=bk(t,e);return null!==r?Array.isArray(r)?r[0]:Pm(Dl(t[Ar]),r):Pm(t,e.next)}}return null}function bk(t,e){return null!==e?t[Ar][fi].projection[e.projection]:null}function HT(t,e){const n=Br+t+1;if(n<e.length){const r=e[n],i=r[it].firstChild;if(null!==i)return Pm(r,i)}return e[Vs]}function zT(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],l=n.type;if(s&&0===e&&(a&&uo(Gn(a),r),n.flags|=2),32&~n.flags)if(8&l)zT(t,e,n.child,r,i,o,!1),uf(e,t,i,a,o);else if(32&l){const c=LT(n,r);let h;for(;h=c();)uf(e,t,i,h,o);uf(e,t,i,a,o)}else 16&l?Ak(t,e,r,n,i,o):uf(e,t,i,a,o);n=s?n.projectionNext:n.next}}function mE(t,e,n,r,i,o){zT(n,r,t.firstChild,e,i,o,!1)}function Ak(t,e,n,r,i,o){const s=n[Ar],l=s[fi].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)uf(e,t,i,l[c],o);else{let c=l;const h=s[Tr];YI(r)&&(c.flags|=128),zT(t,e,c,h,i,o,!0)}}function Dk(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Sk(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&Vu(t,e,r),null!==i&&Dk(t,e,i),null!==o&&function Jq(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}const ln={};function zt(t=1){Rk(yn(),De(),Fi()+t,!1)}function Rk(t,e,n,r){if(!r)if(3&~e[$t]){const o=t.preOrderHooks;null!==o&&bc(e,o,0,n)}else{const o=t.preOrderCheckHooks;null!==o&&zh(e,o,n)}fa(n)}function E(t,e=vn.Default){const n=De();return null===n?Ve(t,e):um(Vn(),n,Gt(t),e)}function xk(t,e,n,r,i,o){const s=q(null);try{let a=null;i&tr.SignalBased&&(a=e[r][Ze]),null!==a&&void 0!==a.transformFn&&(o=a.transformFn(o)),i&tr.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),null!==t.setInput?t.setInput(e,a,o,n,r):Ph(e,a,r,o)}finally{q(s)}}function _E(t,e,n,r,i,o,s,a,l,c,h){const p=e.blueprint.slice();return p[pr]=i,p[$t]=204|r,(null!==c||t&&2048&t[$t])&&(p[$t]|=2048),Oh(p),p[Tr]=p[vc]=t,p[or]=n,p[Ni]=s||t&&t[Ni],p[Yt]=a||t&&t[Yt],p[Mi]=l||t&&t[Mi]||null,p[fi]=o,p[ju]=function CW(){return wW++}(),p[so]=h,p[Ah]=c,p[Ar]=2==e.type?t[Ar]:p,p}function df(t,e,n,r,i){let o=t.data[e];if(null===o)o=function GT(t,e,n,r,i){const o=Vh(),s=Jg(),l=t.data[e]=function a9(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Cc()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l,l.prev=o)),l}(t,e,n,r,i),function PI(){return Xt.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Yu(){const t=Xt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return jo(o,!0),o}function Mm(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Mk(t,e,n,r,i){const o=Fi(),s=2&r;try{fa(-1),s&&e.length>Jt&&Rk(t,e,Jt,!1),Bs(s?2:0,i),n(r,i)}finally{fa(o),Bs(s?3:1,i)}}function WT(t,e,n){if(Hg(e)){const r=q(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{q(r)}}}function qT(t,e,n){TI()&&(function p9(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;ua(n)&&function E9(t,e,n){const r=Oi(e,t),i=Nk(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=vE(t,_E(t,i,null,s,r,e,null,t[Ni].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Xh(n,e),uo(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const l=t.data[a],c=Sl(e,t,a,n);uo(c,e),null!==s&&w9(0,a-i,c,l,0,s),To(l)&&(ao(n.index,e)[or]=Sl(e,t,a,n))}}(t,e,n,Oi(n,e)),!(64&~n.flags)&&Vk(t,e,n))}function KT(t,e,n=Oi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Nk(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=QT(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function QT(t,e,n,r,i,o,s,a,l,c,h){const p=Jt+r,m=p+i,_=function t9(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ln);return n}(p,m),w="function"==typeof c?c():c;return _[it]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:w,incompleteFirstPass:!1,ssrId:h}}let kk=()=>null;function Ok(t,e,n,r,i){for(let s in e){var o;if(!e.hasOwnProperty(s))continue;const a=e[s];if(void 0===a)continue;null!==(o=r)&&void 0!==o||(r={});let l,c=tr.None;Array.isArray(a)?(l=a[0],c=a[1]):l=a;let h=s;if(null!==i){if(!i.hasOwnProperty(s))continue;h=i[s]}0===t?Fk(r,n,h,l,c):Fk(r,n,h,l)}return r}function Fk(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],void 0!==i&&o.push(i)}function Wo(t,e,n,r,i,o,s,a){const l=Oi(e,n);let h,c=e.inputs;!a&&null!=c&&(h=c[r])?(eA(t,n,h,r,i),ua(e)&&function u9(t,e){const n=ao(e,t);16&n[$t]||(n[$t]|=64)}(n,e.index)):3&e.type&&(r=function c9(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(l,r,i))}function YT(t,e,n,r){if(TI()){const i=null===r?null:{"":-1},o=function m9(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const a=n[s];if(_h(e,a.selectors,!1))if(r||(r=[]),To(a))if(null!==a.findHostDirectiveDefs){const l=[];i=i||new Map,a.findHostDirectiveDefs(a,l,i),r.unshift(...l,a),XT(t,e,l.length)}else r.unshift(a),XT(t,e,0);else{var o;i=i||new Map,null===(o=a.findHostDirectiveDefs)||void 0===o||o.call(a,a,r,i),r.push(a)}}return null===r?null:[r,i]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&Lk(t,e,n,s,i,a),i&&function _9(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new Se(-301,!1);r.push(e[i],o)}}}(n,r,i)}n.mergedAttrs=Bu(n.mergedAttrs,n.attrs)}function Lk(t,e,n,r,i,o){for(let p=0;p<r.length;p++)lm(Xh(n,e),t,r[p].type);!function y9(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let p=0;p<r.length;p++){const m=r[p];m.providersResolver&&m.providersResolver(m)}let s=!1,a=!1,l=Mm(t,e,r.length,null);for(let p=0;p<r.length;p++){const m=r[p];n.mergedAttrs=Bu(n.mergedAttrs,m.hostAttrs),I9(t,n,e,l,m),v9(l,m,i),null!==m.contentQueries&&(n.flags|=4),(null!==m.hostBindings||null!==m.hostAttrs||0!==m.hostVars)&&(n.flags|=64);const _=m.type.prototype;var c,h;!s&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((null!==(c=t.preOrderHooks)&&void 0!==c?c:t.preOrderHooks=[]).push(n.index),s=!0),a||!_.ngOnChanges&&!_.ngDoCheck||((null!==(h=t.preOrderCheckHooks)&&void 0!==h?h:t.preOrderCheckHooks=[]).push(n.index),a=!0),l++}!function l9(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let l=null,c=null;for(let h=e.directiveStart;h<i;h++){const p=o[h],m=n?n.get(p):null,w=m?m.outputs:null;l=Ok(0,p.inputs,h,l,m?m.inputs:null),c=Ok(1,p.outputs,h,c,w);const T=null===l||null===s||$u(e)?null:C9(l,h,s);a.push(T)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(t,n,o)}function Vk(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function Jb(){return Xt.lFrame.currentDirectiveIndex}();try{fa(o);for(let a=r;a<i;a++){const l=t.data[a],c=e[a];tm(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&g9(l,c)}}finally{fa(-1),tm(s)}}function g9(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function XT(t,e,n){var r;e.componentOffset=n,(null!==(r=t.components)&&void 0!==r?r:t.components=[]).push(e.index)}function v9(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;To(e)&&(n[""]=t)}}function I9(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=sa(i.type)),s=new ed(o,To(i),E);t.blueprint[r]=s,n[r]=s,function h9(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function f9(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Mm(t,n,i.hostVars,ln),i)}function Ga(t,e,n,r,i,o){const s=Oi(t,e);!function ZT(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?Zt(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[Yt],s,o,t.value,n,r,i)}function w9(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)xk(r,n,s[a++],s[a++],s[a++],s[a++])}function C9(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Bk(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function $k(t,e){const n=t.contentQueries;if(null!==n){const r=q(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=t.data[s];Uh(n[i]),a.contentQueries(2,e[s],s)}}}finally{q(r)}}}function vE(t,e){return t[Uu]?t[cI][ds]=e:t[Uu]=e,t[cI]=e,e}function JT(t,e,n){Uh(0);const r=q(null);try{e(t,n)}finally{q(r)}}function yE(t,e){const n=t[Mi],r=n?n.get(zo,null):null;r&&r.handleError(e)}function eA(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=n[o++];xk(t.data[s],e[s],r,a,l,i)}}function b9(t,e){const n=ao(e,t),r=n[it];!function T9(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[pr];null!==i&&null===n[so]&&(n[so]=CT(i,n[Mi])),tA(r,n,n[or])}function tA(t,e,n){ha(e);try{var r;const i=t.viewQuery;null!==i&&JT(1,i,n);const o=t.template;null!==o&&Mk(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),null===(r=e[Ls])||void 0===r||r.finishViewCreation(t),t.staticContentQueries&&$k(t,e),t.staticViewQueries&&JT(2,t.viewQuery,n);const s=t.components;null!==s&&function A9(t,e){for(let n=0;n<e.length;n++)b9(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[$t]&=-5,Xu()}}function hf(t,e){return!e||null===e.firstChild||YI(t)}function km(t,e,n,r=!0){const i=e[it];if(function zq(t,e,n,r){const i=Br+r,o=n.length;r>0&&(n[i-1][ds]=e),r<o-Br?(e[ds]=n[i],dh(n,Br+r,e)):(n.push(e),e[ds]=null),e[Tr]=n;const s=e[Ba];null!==s&&n!==s&&function Gq(t,e){const n=t[Ua];e[Ar]!==e[Tr][Tr][Ar]&&(t[$t]|=Gu.HasTransplantedViews),null===n?t[Ua]=[e]:n.push(e)}(s,e);const a=e[Ls];null!==a&&a.insertView(t),Yg(e),e[$t]|=128}(i,e,t,n),r){const s=HT(n,t),a=e[Yt],l=pE(a,t[Vs]);null!==l&&function jq(t,e,n,r,i,o){r[pr]=i,r[fi]=e,mE(t,r,n,1,i,o)}(i,t[fi],a,e,l,s)}const o=e[so];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function Om(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];null!==o&&r.push(Gn(o)),pi(o)&&Gk(o,r);const s=n.type;if(8&s)Om(t,e,n.child,r);else if(32&s){const a=LT(n,e);let l;for(;l=a();)r.push(l)}else if(16&s){const a=bk(e,n);if(Array.isArray(a))r.push(...a);else{const l=Dl(e[Ar]);Om(l[it],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Gk(t,e){for(let n=Br;n<t.length;n++){const r=t[n],i=r[it].firstChild;null!==i&&Om(r[it],r,i,e)}t[Vs]!==t[pr]&&e.push(t[Vs])}let Wk=[];const P9={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ja(t.lView)},consumerOnSignalRead(){this.lView[Tl]=this}},qk=100;function IE(t,e=!0,n=0){const r=t[Ni],i=r.rendererFactory;var s;null===(s=i.begin)||void 0===s||s.call(i);try{!function x9(t,e){rA(t,e);let n=0;for(;Fh(t);){if(n===qk)throw new Se(103,!1);n++,rA(t,1)}}(t,n)}catch(c){throw e&&yE(t,c),c}finally{var a,l;null===(a=i.end)||void 0===a||a.call(i),null===(l=r.inlineEffectRunner)||void 0===l||l.flush()}}function M9(t,e,n,r){var i;const o=e[$t];if(!(256&~o))return;null===(i=e[Ni].inlineEffectRunner)||void 0===i||i.flush(),ha(e);let a=null,l=null;(function N9(t){return 2!==t.type})(t)&&(l=function D9(t){var e;return null!==(e=t[Tl])&&void 0!==e?e:function S9(t){var e;const n=null!==(e=Wk.pop())&&void 0!==e?e:Object.create(P9);return n.lView=t,n}(t)}(e),a=function Q(t){return t&&(t.nextProducerIndex=0),q(t)}(l));try{Oh(e),function em(t){return Xt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Mk(t,e,n,2,r);const c=!(3&~o);if(c){const m=t.preOrderCheckHooks;null!==m&&zh(e,m,null)}else{const m=t.preOrderHooks;null!==m&&bc(e,m,0,null),Ju(e,0)}if(function k9(t){for(let e=SN(t);null!==e;e=RN(e)){if(!(e[$t]&Gu.HasTransplantedViews))continue;const n=e[Ua];for(let r=0;r<n.length;r++){Gb(n[r])}}}(e),Kk(e,0),null!==t.contentQueries&&$k(t,e),c){const m=t.contentCheckHooks;null!==m&&zh(e,m)}else{const m=t.contentHooks;null!==m&&bc(e,m,1),Ju(e,1)}!function e9(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)fa(~i);else{const o=i,s=n[++r],a=n[++r];Zb(s,o),a(2,e[o])}}}finally{fa(-1)}}(t,e);const h=t.components;null!==h&&Yk(e,h,0);const p=t.viewQuery;if(null!==p&&JT(2,p,r),c){const m=t.viewCheckHooks;null!==m&&zh(e,m)}else{const m=t.viewHooks;null!==m&&bc(e,m,2),Ju(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Hu]){for(const m of e[Hu])m();e[Hu]=null}e[$t]&=-73}catch(c){throw ja(e),c}finally{null!==l&&(function Z(t,e){if(q(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(nt(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)ke(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(l,a),function R9(t){t.lView[Tl]!==t&&(t.lView=null,Wk.push(t))}(l)),Xu()}}function Kk(t,e){for(let n=SN(t);null!==n;n=RN(n))for(let r=Br;r<n.length;r++)Qk(n[r],e)}function O9(t,e,n){Qk(ao(e,t),n)}function Qk(t,e){Qg(t)&&rA(t,e)}function rA(t,e){const r=t[it],i=t[$t],o=t[Tl];let s=!!(0===e&&16&i);if(s||(s=!!(64&i&&0===e)),s||(s=!!(1024&i)),s||(s=!(null==o||!o.dirty||!Oe(o))),o&&(o.dirty=!1),t[$t]&=-9217,s)M9(r,t,r.template,t[or]);else if(8192&i){Kk(t,1);const a=r.components;null!==a&&Yk(t,a,1)}}function Yk(t,e,n){for(let r=0;r<e.length;r++)O9(t,e[r],n)}function Fm(t){var e;for(null===(e=t[Ni].changeDetectionScheduler)||void 0===e||e.notify();t;){t[$t]|=64;const n=Dl(t);if(zg(t)&&!n)return t;t=n}return null}class Lm{get rootNodes(){const e=this._lView,n=e[it];return Om(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[or]}set context(e){this._lView[or]=e}get destroyed(){return!(256&~this._lView[$t])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Tr];if(pi(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Rm(e,r),Ou(n,r))}this._attachedToViewContainer=!1}fE(this._lView[it],this._lView)}onDestroy(e){Lh(this._lView,e)}markForCheck(){Fm(this._cdRefInjectingView||this._lView)}detach(){this._lView[$t]&=-129}reattach(){Yg(this._lView),this._lView[$t]|=128}detectChanges(){this._lView[$t]|=1024,IE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,gk(this._lView[it],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=e,Yg(this._lView)}}let _a=(()=>{class e{}return e.__NG_ELEMENT_ID__=V9,e})();const F9=_a,L9=class extends F9{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){var e;return(null===(e=this._declarationTContainer.tView)||void 0===e?void 0:e.ssrId)||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function Nm(t,e,n,r){const i=q(null);try{var o,s,a;const l=e.tView,p=_E(t,l,n,4096&t[$t]?4096:16,null,e,null,null,null!==(o=null==r?void 0:r.injector)&&void 0!==o?o:null,null!==(s=null==r?void 0:r.embeddedViewInjector)&&void 0!==s?s:null,null!==(a=null==r?void 0:r.dehydratedView)&&void 0!==a?a:null);p[Ba]=t[e.index];const _=t[Ls];return null!==_&&(p[Ls]=_.createEmbeddedView(l)),tA(l,p,n),p}finally{q(i)}}(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Lm(i)}};function V9(){return function EE(t,e){return 4&t.type?new L9(e,t,tf(t,e)):null}(Vn(),De())}class cA{}class l8{}class rO{}class u8{resolveComponentFactory(e){throw function c8(t){const e=Error(`No component factory found for ${Kt(t)}.`);return e.ngComponent=t,e}(e)}}let AE=(()=>{class e{}return e.NULL=new u8,e})();class oO{}let Nl=(()=>{class e{constructor(){this.destroyNode=null}}return e.__NG_ELEMENT_ID__=()=>function d8(){const t=De(),n=ao(Vn().index,t);return(ki(n)?n:t)[Yt]}(),e})(),h8=(()=>{var t;class e{}return(t=e).\u0275prov=je({token:t,providedIn:"root",factory:()=>null}),e})();const uA={},sO=new Set;function Wa(t){var e,n;sO.has(t)||(sO.add(t),null===(e=performance)||void 0===e||null===(n=e.mark)||void 0===n||n.call(e,"mark_feature_usage",{detail:{feature:t}}))}function aO(...t){}class xe{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ar(!1),this.onMicrotaskEmpty=new ar(!1),this.onStable=new ar(!1),this.onError=new ar(!1),typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function f8(){const t="function"==typeof bn.requestAnimationFrame;let e=bn[t?"requestAnimationFrame":"setTimeout"],n=bn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function m8(t){const e=()=>{!function g8(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(bn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,hA(t),t.isCheckStableRunning=!0,dA(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),hA(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function _8(t){var e;return!(!Array.isArray(t)||1!==t.length)&&!0===(null===(e=t[0].data)||void 0===e?void 0:e.__ignore_ng_zone__)}(a))return n.invokeTask(i,o,s,a);try{return lO(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),cO(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return lO(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),cO(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,hA(t),dA(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xe.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(xe.isInAngularZone())throw new Se(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,p8,aO,aO);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const p8={};function dA(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function hA(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function lO(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function cO(t){t._nesting--,dA(t)}class uO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ar,this.onMicrotaskEmpty=new ar,this.onStable=new ar,this.onError=new ar}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}var od=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(od||{});const dO={destroy(){}};function hO(t,e){var n,r,i;!e&&function Ch(t){if(!sI())throw new Se(-203,!1)}();const o=null!==(n=null==e?void 0:e.injector)&&void 0!==n?n:Be(tt);if(!function Pc(t){return"browser"===(null!=t?t:Be(tt)).get(ga)}(o))return dO;Wa("NgAfterNextRender");const s=o.get(jm),a=null!==(r=s.handler)&&void 0!==r?r:s.handler=new pO,l=null!==(i=null==e?void 0:e.phase)&&void 0!==i?i:od.MixedReadWrite,c=()=>{a.unregister(p),h()},h=o.get(Pl).onDestroy(c),p=xi(o,()=>new fO(l,()=>{c(),t()}));return a.register(p),{destroy:c}}class fO{constructor(e,n){var r;this.phase=e,this.callbackFn=n,this.zone=Be(xe),this.errorHandler=Be(zo,{optional:!0}),null===(r=Be(cA,{optional:!0}))||void 0===r||r.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){var e;null===(e=this.errorHandler)||void 0===e||e.handleError(n)}}}class pO{constructor(){this.executingCallbacks=!1,this.buckets={[od.EarlyRead]:new Set,[od.Write]:new Set,[od.MixedReadWrite]:new Set,[od.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const n of e)n.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let jm=(()=>{var t;class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){var r;this.executeInternalCallbacks(),null===(r=this.handler)||void 0===r||r.execute()}executeInternalCallbacks(){const r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of r)i()}ngOnDestroy(){var r;null===(r=this.handler)||void 0===r||r.destroy(),this.handler=null,this.internalCallbacks.length=0}}return(t=e).\u0275prov=je({token:t,providedIn:"root",factory:()=>new t}),e})();function SE(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Ln(i,a):2==o&&(r=Ln(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}class _O extends AE{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=nn(e);return new Gm(n,this.ngModule)}}function vO(t){const e=[];for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n];void 0!==r&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}class C8{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=cc(r);const i=this.injector.get(e,uA,r);return i!==uA||n===uA?i:this.parentInjector.get(e,n,r)}}class Gm extends rO{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=vO(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return vO(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Ab(t){return t.map(Ng).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){const o=q(null);try{var a;let l=(i=i||this.ngModule)instanceof qr?i:null===(a=i)||void 0===a?void 0:a.injector;l&&null!==this.componentDef.getStandaloneInjector&&(l=this.componentDef.getStandaloneInjector(l)||l);const c=l?new C8(e,l):e,h=c.get(oO,null);if(null===h)throw new Se(407,!1);const p=c.get(h8,null),w={rendererFactory:h,sanitizer:p,inlineEffectRunner:null,afterRenderEventManager:c.get(jm,null),changeDetectionScheduler:c.get(cA,null)},T=h.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",U=r?function n9(t,e,n,r){const o=r.get(GN,!1)||n===us.ShadowDom,s=t.selectRootElement(e,o);return function r9(t){kk(t)}(s),s}(T,r,this.componentDef.encapsulation,c):hE(T,S,function w8(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(S));let H=512;this.componentDef.signals?H|=4096:this.componentDef.onPush||(H|=16);let me=null;null!==U&&(me=CT(U,c,!0));const ve=QT(0,null,null,1,0,null,null,null,null,null,null),Ye=_E(null,ve,null,H,null,null,w,T,c,null,me);let At,_n;ha(Ye);try{const Bn=this.componentDef;let rs,vg=null;Bn.findHostDirectiveDefs?(rs=[],vg=new Map,Bn.findHostDirectiveDefs(Bn,rs,vg),rs.push(Bn)):rs=[Bn];const kIe=function T8(t,e){const n=t[it],r=Jt;return t[r]=e,df(n,r,2,"#host",null)}(Ye,U),OIe=function A8(t,e,n,r,i,o,s){const a=i[it];!function D8(t,e,n,r){for(const i of t)e.mergedAttrs=Bu(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(SE(e,e.mergedAttrs,!0),null!==n&&Sk(r,n,e))}(r,t,e,s);let l=null;null!==e&&(l=CT(e,i[Mi]));const c=o.rendererFactory.createRenderer(e,n);let h=16;n.signals?h=4096:n.onPush&&(h=64);const p=_E(i,Nk(n),null,h,i[t.index],t,o,c,null,null,l);return a.firstCreatePass&&XT(a,t,r.length-1),vE(i,p),i[t.index]=p}(kIe,U,Bn,rs,Ye,w,T);_n=Ec(ve,Jt),U&&function R8(t,e,n,r){if(r)Vu(t,n,["ng-version","17.3.1"]);else{const{attrs:i,classes:o}=function kg(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!bo(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Vu(t,n,i),o&&o.length>0&&Dk(t,n,o.join(" "))}}(T,Bn,U,r),void 0!==n&&function P8(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(_n,this.ngContentSelectors,n),At=function S8(t,e,n,r,i,o){const s=Vn(),a=i[it],l=Oi(s,i);Lk(a,i,s,n,null,r);for(let h=0;h<n.length;h++)uo(Sl(i,a,s.directiveStart+h,s),i);Vk(a,i,s),l&&uo(l,i);const c=Sl(i,a,s.directiveStart+s.componentOffset,s);if(t[or]=i[or]=c,null!==o)for(const h of o)h(c,e);return WT(a,s,i),c}(OIe,Bn,rs,vg,Ye,[x8]),tA(ve,Ye,null)}finally{Xu()}return new b8(this.componentType,At,tf(_n,Ye),Ye,_n)}finally{q(o)}}}class b8 extends l8{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Lm(i,void 0,!1),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){var o;if(null!==(o=this.previousInputValues)&&void 0!==o||(this.previousInputValues=new Map),this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;eA(s[it],s,i,e,n),this.previousInputValues.set(e,n),Fm(ao(this._tNode.index,s))}}get injector(){return new $r(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function x8(){const t=Vn();Hh(De()[it],t)}let Hs=(()=>{class e{}return e.__NG_ELEMENT_ID__=M8,e})();function M8(){return function EO(t,e){let n;const r=e[t.index];return pi(r)?n=r:(n=Bk(r,e,null,t),e[t.index]=n,vE(e,n)),wO(n,e,t,r),new yO(n,t,e)}(Vn(),De())}const N8=Hs,yO=class extends N8{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return tf(this._hostTNode,this._hostLView)}get injector(){return new $r(this._hostTNode,this._hostLView)}get parentInjector(){const e=nd(this._hostTNode,this._hostLView);if(om(e)){const n=td(e,this._hostLView),r=Ac(e);return new $r(n[it].data[r+8],n)}return new $r(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=IO(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Br}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,hf(this._hostTNode,null)),a}createComponent(e,n,r,i,o){var s,l;const c=e&&!function wl(t){return"function"==typeof t}(e);let h;if(c)h=n;else{const U=n||{};h=U.index,r=U.injector,i=U.projectableNodes,o=U.environmentInjector||U.ngModuleRef}const p=c?e:new Gm(nn(e)),m=r||this.parentInjector;if(!o&&null==p.ngModule){const H=(c?m:this.parentInjector).get(qr,null);H&&(o=H)}const _=nn(null!==(s=p.componentType)&&void 0!==s?s:{}),w=(null==_?void 0:_.id,null),T=null!==(l=null==w?void 0:w.firstChild)&&void 0!==l?l:null,S=p.create(m,i,T,o);return this.insertImpl(S.hostView,h,hf(this._hostTNode,w)),S}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function zb(t){return pi(t[Tr])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const l=i[Tr],c=new yO(l,l[fi],l[Tr]);c.detach(c.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;return km(s,i,o,r),e.attachToViewContainerRef(),dh(mA(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=IO(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Rm(this._lContainer,n);r&&(Ou(mA(this._lContainer),n),fE(r[it],r))}detach(e){const n=this._adjustIndex(e,-1),r=Rm(this._lContainer,n);return r&&null!=Ou(mA(this._lContainer),n)?new Lm(r):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function IO(t){return t[8]}function mA(t){return t[8]||(t[8]=[])}let wO=function bO(t,e,n,r){if(t[Vs])return;let i;i=8&n.type?Gn(r):function k8(t,e){const n=t[Yt],r=n.createComment(""),i=Oi(e,t);return id(n,pE(n,i),r,function Qq(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Vs]=i},_A=()=>!1;function kO(t){return function MO(t){return"function"==typeof t&&void 0!==t[Ze]}(t)&&"function"==typeof t.set}function cn(t){let e=function GO(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(To(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Se(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=PE(t.inputs),s.inputTransforms=PE(t.inputTransforms),s.declaredInputs=PE(t.declaredInputs),s.outputs=PE(t.outputs);const a=i.hostBindings;a&&i7(t,a);const l=i.viewQuery,c=i.contentQueries;if(l&&n7(t,l),c&&r7(t,c),e7(t,i),br(t.outputs,i.outputs),To(i)&&i.data.animation){const h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===cn&&(n=!1)}}e=Object.getPrototypeOf(e)}!function t7(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Bu(i.hostAttrs,n=Bu(n,i.hostAttrs))}}(r)}function e7(t,e){for(const r in e.inputs){if(!e.inputs.hasOwnProperty(r)||t.inputs.hasOwnProperty(r))continue;const i=e.inputs[r];if(void 0!==i&&(t.inputs[r]=i,t.declaredInputs[r]=e.declaredInputs[r],null!==e.inputTransforms)){var n;const o=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(o))continue;null!==(n=t.inputTransforms)&&void 0!==n||(t.inputTransforms={}),t.inputTransforms[o]=e.inputTransforms[o]}}}function PE(t){return t===Co?{}:t===Tn?[]:t}function n7(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function r7(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function i7(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function QO(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}class sd{}class YO{}class AA extends sd{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _O(this);const i=Pi(e);this._bootstrapComponents=ms(i.bootstrap),this._r3Injector=Rt(e,n,[{provide:sd,useValue:this},{provide:AE,useValue:this.componentFactoryResolver},...r],Kt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class DA extends YO{constructor(e){super(),this.moduleType=e}create(e){return new AA(this.moduleType,e,[])}}class XO extends sd{constructor(e){super(),this.componentFactoryResolver=new _O(this),this.instance=null;const n=new Va([...e.providers,{provide:sd,useValue:this},{provide:AE,useValue:this.componentFactoryResolver}],e.parent||Ih(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function xE(t,e,n=null){return new XO({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let gf=(()=>{var t;class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new K(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function NE(t){return!!function SA(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function ti(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Mr(t,e,n,r,i,o,s,a){const l=De(),c=yn(),h=t+Jt,p=c.firstCreatePass?function _7(t,e,n,r,i,o,s,a,l){const c=e.consts,h=df(e,t,4,s||null,$s(c,a));YT(e,n,h,$s(c,l)),Hh(e,h);const p=h.tView=QT(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}(h,c,l,e,n,r,i,o,s):c.data[h];jo(p,!1);const m=ZO(c,l,p,t);Zu()&&gE(c,l,m,p),uo(m,l);const _=Bk(m,l,m,p);return l[h]=_,vE(l,_),function CO(t,e,n){return _A(t,e,n)}(_,p,l),Al(p)&&qT(c,l,p),null!=s&&KT(l,p,a),Mr}let ZO=function JO(t,e,n,r){return gs(!0),e[Yt].createComment("")};function Gs(t,e,n,r){const i=De();return ti(i,co(),e)&&(yn(),Ga(sr(),i,t,e,n,r)),Gs}function Cf(t,e,n,r){return ti(t,co(),n)?e+Zt(n)+r:ln}function $E(t,e){return t<<17|e<<2}function Oc(t){return t>>17&32767}function VA(t){return 2|t}function cd(t){return(131068&t)>>2}function BA(t,e){return-131069&t|e<<2}function $A(t){return 1|t}function PF(t,e,n,r){const i=t[n+1],o=null===e;let s=r?Oc(i):cd(i),a=!1;for(;0!==s&&(!1===a||o);){const c=t[s+1];tK(t[s],e)&&(a=!0,t[s+1]=r?$A(c):VA(c)),s=r?Oc(c):cd(c)}a&&(t[n+1]=r?VA(i):$A(i))}function tK(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Os(t,e)>=0}function Zn(t,e,n){const r=De();return ti(r,co(),e)&&Wo(yn(),sr(),r,t,e,r[Yt],n,!1),Zn}function UA(t,e,n,r,i){const s=i?"class":"style";eA(t,n,e.inputs[s],s,r)}function UE(t,e){return function va(t,e,n,r){const i=De(),o=yn(),s=function Us(t){const e=Xt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);o.firstUpdatePass&&function BF(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Fi()],s=function VF(t,e){return e>=t.expandoStartIndex}(t,n);(function HF(t,e){return!!(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function uK(t,e,n,r){const i=function nm(t){const e=Xt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Zm(n=jA(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=jA(i,t,e,n,r),null===o){let l=function dK(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==cd(r))return t[Oc(r)]}(t,e,r);void 0!==l&&Array.isArray(l)&&(l=jA(null,t,e,l[1],r),l=Zm(l,e.attrs,r),function hK(t,e,n,r){t[Oc(n?e.classBindings:e.styleBindings)]=r}(t,e,r,l))}else o=function fK(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Zm(r,t[o].hostAttrs,n);return Zm(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function J7(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Oc(s),l=cd(s);t[r]=n;let h,c=!1;if(Array.isArray(n)?(h=n[1],(null===h||Os(n,h)>0)&&(c=!0)):h=n,i)if(0!==l){const m=Oc(t[a+1]);t[r+1]=$E(m,a),0!==m&&(t[m+1]=BA(t[m+1],r)),t[a+1]=function X7(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=$E(a,0),0!==a&&(t[a+1]=BA(t[a+1],r)),a=r;else t[r+1]=$E(l,0),0===a?a=r:t[l+1]=BA(t[l+1],r),l=r;c&&(t[r+1]=VA(t[r+1])),PF(t,h,r,!0),PF(t,h,r,!1),function eK(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&Os(o,e)>=0&&(n[r+1]=$A(n[r+1]))}(e,h,t,r,o),s=$E(a,l),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==ln&&ti(i,s,e)&&function UF(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const l=t.data,c=l[a+1],h=function Z7(t){return!(1&~t)}(c)?jF(l,e,n,i,cd(c),s):void 0;jE(h)||(jE(o)||function Y7(t){return!(2&~t)}(c)&&(o=jF(l,null,n,i,a,s)),function Zq(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:xc.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=xc.Important),t.setStyle(n,r,i,o))}}(r,s,Qu(Fi(),n),i,o))}(o,o.data[Fi()],i,i[Yt],t,i[s+1]=function _K(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Kt(Rc(t)))),t}(e,n),r,s)}(t,e,null,!0),UE}function jA(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Zm(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Zm(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),wo(t,s,!!n||e[++o]))}return void 0===t?null:t}function jF(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const l=t[i],c=Array.isArray(l),h=c?l[1]:l,p=null===h;let m=n[i+1];m===ln&&(m=p?Tn:void 0);let _=p?Fu(m,r):h===r?m:void 0;if(c&&!jE(_)&&(_=Fu(l,r)),jE(_)&&(a=_,s))return a;const w=t[i+1];i=s?Oc(w):cd(w)}if(null!==e){let l=o?e.residualClasses:e.residualStyles;null!=l&&(a=Fu(l,r))}return a}function jE(t){return void 0!==t}function x(t,e,n,r){const i=De(),o=yn(),s=Jt+t,a=i[Yt],l=o.firstCreatePass?function $K(t,e,n,r,i,o){const s=e.consts,l=df(e,t,2,r,$s(s,i));return YT(e,n,l,$s(s,o)),null!==l.attrs&&SE(l,l.attrs,!1),null!==l.mergedAttrs&&SE(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,o,i,e,n,r):o.data[s],c=qF(o,i,l,a,e,t);i[s]=c;const h=Al(l);return jo(l,!0),Sk(a,c,l),!function Km(t){return!(32&~t.flags)}(l)&&Zu()&&gE(o,i,c,l),0===function Wb(){return Xt.lFrame.elementDepthCount}()&&uo(c,i),function qb(){Xt.lFrame.elementDepthCount++}(),h&&(qT(o,i,l),WT(o,l,i)),null!==r&&KT(i,l),x}function k(){let t=Vn();Jg()?Bh():(t=t.parent,jo(t,!1));const e=t;(function Kb(t){return Xt.skipHydrationRootTNode===t})(e)&&function Xb(){Xt.skipHydrationRootTNode=null}(),function Zg(){Xt.lFrame.elementDepthCount--}();const n=yn();return n.firstCreatePass&&(Hh(n,t),Hg(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function sT(t){return!!(8&t.flags)}(e)&&UA(n,e,De(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function aT(t){return!!(16&t.flags)}(e)&&UA(n,e,De(),e.stylesWithoutHost,!1),k}function $e(t,e,n,r){return x(t,e,n,r),k(),$e}let qF=(t,e,n,r,i,o)=>(gs(!0),hE(r,i,function FI(){return Xt.lFrame.currentNamespace}()));function Mf(){return De()}const kf="en-US";let JF=kf;function kt(t,e,n,r){const i=De(),o=yn(),s=Vn();return XA(o,i,i[Yt],s,t,e,r),kt}function XA(t,e,n,r,i,o,s){const a=Al(r),c=t.firstCreatePass&&function jk(t){return t.cleanup||(t.cleanup=[])}(t),h=e[or],p=function Uk(t){return t[_c]||(t[_c]=[])}(e);let m=!0;if(3&r.type||s){const T=Oi(r,e),S=s?s(T):T,U=p.length,H=s?ve=>s(Gn(ve[r.index])):r.index;let me=null;if(!s&&a&&(me=function zQ(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[_c],l=i[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==me)(me.__ngLastListenerFn__||me).__ngNextListenerFn__=o,me.__ngLastListenerFn__=o,m=!1;else{o=DL(r,e,h,o,!1);const ve=n.listen(S,i,o);p.push(o,ve),c&&c.push(i,H,U,U+1)}}else o=DL(r,e,h,o,!1);const _=r.outputs;let w;if(m&&null!==_&&(w=_[i])){const T=w.length;if(T)for(let S=0;S<T;S+=2){const Ye=e[w[S]][w[S+1]].subscribe(o),At=p.length;p.push(o,Ye),c&&c.push(i,r.index,At,-(At+1))}}}function AL(t,e,n,r){const i=q(null);try{return Bs(6,e,n),!1!==n(r)}catch(o){return yE(t,o),!1}finally{Bs(7,e,n),q(i)}}function DL(t,e,n,r,i){return function o(s){if(s===Function)return r;Fm(t.componentOffset>-1?ao(t.index,e):e);let l=AL(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)l=AL(e,n,c,s)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&s.preventDefault(),l}}function gi(t=1){return function eT(t){return(Xt.lFrame.contextLView=function CI(t,e){for(;t>0;)e=e[vc],t--;return e}(t,Xt.lFrame.contextLView))[or]}(t)}function GQ(t,e){let n=null;const r=function bb(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?_h(t,o,!0):Mg(r,o))return i}else n=i}return n}function Of(t,e,n){return KE(t,"",e,"",n),Of}function KE(t,e,n,r,i){const o=De(),s=Cf(o,e,n,r);return s!==ln&&Wo(yn(),sr(),o,t,s,o[Yt],i,!1),KE}function ae(t,e=""){const n=De(),r=yn(),i=t+Jt,o=r.firstCreatePass?df(r,i,1,e,null):r.data[i],s=GL(r,n,o,e,t);n[i]=s,Zu()&&gE(r,n,s,o),jo(o,!1)}let GL=(t,e,n,r,i)=>(gs(!0),function VT(t,e){return t.createText(e)}(e[Yt],r));function Ur(t){return Ko("",t,""),Ur}function Ko(t,e,n){const r=De(),i=Cf(r,t,e,n);return i!==ln&&function Ml(t,e,n){const r=Qu(e,t);!function pk(t,e,n){t.setValue(e,n)}(t[Yt],r,n)}(r,Fi(),i),Ko}function JA(t,e,n){kO(e)&&(e=e());const r=De();return ti(r,co(),e)&&Wo(yn(),sr(),r,t,e,r[Yt],n,!1),JA}function eD(t,e){const n=De(),r=yn(),i=Vn();return XA(r,n,n[Yt],i,t,e),eD}function tD(t,e,n,r,i){if(t=Gt(t),Array.isArray(t))for(let o=0;o<t.length;o++)tD(t[o],e,n,r,i);else{const o=yn(),s=De(),a=Vn();let l=ca(t)?t:Gt(t.provide);const c=iI(t),h=1048575&a.providerIndexes,p=a.directiveStart,m=a.providerIndexes>>20;if(ca(t)||!t.multi){const _=new ed(c,i,E),w=rD(l,e,i?h:h+m,p);-1===w?(lm(Xh(a,s),o,l),nD(o,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(_),s.push(_)):(n[w]=_,s[w]=_)}else{const _=rD(l,e,h+m,p),w=rD(l,e,h,h+m),S=w>=0&&n[w];if(i&&!S||!i&&!(_>=0&&n[_])){lm(Xh(a,s),o,l);const U=function dY(t,e,n,r,i){const o=new ed(t,n,E);return o.multi=[],o.index=e,o.componentProviders=0,tV(o,i,r&&!n),o}(i?uY:cY,n.length,i,r,c);!i&&S&&(n[w].providerFactory=U),nD(o,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(U),s.push(U)}else nD(o,t,_>-1?_:w,tV(n[i?w:_],c,!i&&r));!i&&r&&S&&n[w].componentProviders++}}}function nD(t,e,n,r){const i=ca(e),o=function Pb(t){return!!t.useClass}(e);if(i||o){const l=(o?Gt(e.useClass):e).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const h=c.indexOf(n);-1===h?c.push(n,[r,l]):c[h+1].push(r,l)}else c.push(n,l)}}}function tV(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function rD(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function cY(t,e,n,r){return iD(this.multi,[])}function uY(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Sl(n,n[it],this.providerFactory.index,r);o=a.slice(0,s),iD(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],iD(i,o);return o}function iD(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Wn(t,e=[]){return n=>{n.providersResolver=(r,i)=>function lY(t,e,n){const r=yn();if(r.firstCreatePass){const i=To(t);tD(n,r.data,r.blueprint,i,!0),tD(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}let hY=(()=>{var t;class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){const i=Vg(0,r.type),o=i.length>0?xE([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}}return(t=e).\u0275prov=je({token:t,providedIn:"environment",factory:()=>new t(Ve(qr))}),e})();function nV(t){Wa("NgStandalone"),t.getStandaloneInjector=e=>e.get(hY).getOrCreateStandaloneInjector(t)}function iV(t,e,n,r,i,o){const s=e+n;return ti(t,s,i)?function qa(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function o_(t,e){const n=t[e];return n===ln?void 0:n}(t,s+1)}function kl(t,e){const n=yn();let r;const i=t+Jt;var o;n.firstCreatePass?(r=function TY(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(null!==(o=n.destroyHooks)&&void 0!==o?o:n.destroyHooks=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=sa(r.type)),l=Eo(E);try{const c=Kh(!1),h=s();return Kh(c),function QQ(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,De(),i,h),h}finally{Eo(l)}}function Ol(t,e,n){const r=t+Jt,i=De(),o=function wc(t,e){return t[e]}(i,r);return function s_(t,e){return t[it].data[e].pure}(i,r)?iV(i,function lo(){const t=Xt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,o):o.transform(n)}class Bf{constructor(e){this.full=e;const n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}}const ZY=new Bf("17.3.1");let bV=(()=>{var t;class e{log(r){console.log(r)}warn(r){console.warn(r)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();const SV=new lt(""),ZE=new lt("");let fD,dD=(()=>{var t;class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,fD||(function bX(t){fD=t}(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(r)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(xe),Ve(hD),Ve(ZE))},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})(),hD=(()=>{var t;class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){var o,s;return null!==(o=null===(s=fD)||void 0===s?void 0:s.findTestabilityInTree(this,r,i))&&void 0!==o?o:null}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();function c_(t){return!!t&&"function"==typeof t.then}function RV(t){return!!t&&"function"==typeof t.subscribe}const JE=new lt("");let pD=(()=>{var t;class e{constructor(){var r;this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o}),this.appInits=null!==(r=Be(JE,{optional:!0}))&&void 0!==r?r:[]}runInitializers(){if(this.initialized)return;const r=[];for(const o of this.appInits){const s=o();if(c_(s))r.push(s);else if(RV(s)){const a=new Promise((l,c)=>{s.subscribe({complete:l,error:c})});r.push(a)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),0===r.length&&i(),this.initialized=!0}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const gD=new lt("");function MV(t,e){return Array.isArray(e)?e.reduce(MV,t):{...t,...e}}let Fl=(()=>{var t;class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Be(mm),this.afterRenderEffectManager=Be(jm),this.externalTestViews=new Set,this.beforeRender=new $,this.afterTick=new $,this.componentTypes=[],this.components=[],this.isStable=Be(gf).hasPendingTasks.pipe(_t(r=>!r)),this._injector=Be(qr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){const o=r instanceof rO;if(!this._injector.get(pD).done)throw!o&&function Fa(t){const e=nn(t)||Wr(t)||Ii(t);return null!==e&&e.standalone}(r),new Se(405,!1);let a;a=o?r:this._injector.get(AE).resolveComponentFactory(r),this.componentTypes.push(a.componentType);const l=function TX(t){return t.isBoundToModule}(a)?void 0:this._injector.get(sd),h=a.create(tt.NULL,[],i||a.selector,l),p=h.location.nativeElement,m=h.injector.get(SV,null);return null==m||m.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),e0(this.components,h),null==m||m.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Se(101,!1);const i=q(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,q(i)}}detectChangesInAttachedViews(r){let i=0;const o=this.afterRenderEffectManager;for(;;){if(i===qk)throw new Se(103,!1);if(r){const s=0===i;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:l}of this._views)DX(a,s,l)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>mD(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>mD(s))))break}}attachView(r){const i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){const i=r;e0(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);const i=this._injector.get(gD,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>e0(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Se(406,!1);const r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function e0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function DX(t,e,n){!e&&!mD(t)||function SX(t,e,n){let r;n?(r=0,t[$t]|=1024):r=64&t[$t]?0:1,IE(t,e,r)}(t,n,e)}function mD(t){return Fh(t)}class RX{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let NV=(()=>{var t;class e{compileModuleSync(r){return new DA(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const i=this.compileModuleSync(r),s=ms(Pi(r).declarations).reduce((a,l)=>{const c=nn(l);return c&&a.push(new Gm(c)),a},[]);return new RX(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),MX=(()=>{var t;class e{constructor(){this.zone=Be(xe),this.applicationRef=Be(Fl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var r;null===(r=this._onMicrotaskEmptySubscription)||void 0===r||r.unsubscribe()}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function NX(){const t=Be(xe),e=Be(zo);return n=>t.runOutsideAngular(()=>e.handleError(n))}let OX=(()=>{var t;class e{constructor(){this.subscription=new ue,this.initialized=!1,this.zone=Be(xe),this.pendingTasks=Be(gf)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{null!==r&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{var i;xe.assertInAngularZone(),null!==(i=r)&&void 0!==i||(r=this.pendingTasks.add())}))}ngOnDestroy(){this.subscription.unsubscribe()}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const Ll=new lt("",{providedIn:"root",factory:()=>Be(Ll,vn.Optional|vn.SkipSelf)||function FX(){return typeof $localize<"u"&&$localize.locale||kf}()}),_D=new lt("");let LV=(()=>{var t;class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){const o=function v8(t="zone.js",e){return"noop"===t?new uO:"zone.js"===t?new xe(e):t}(null==i?void 0:i.ngZone,function FV(t){var e,n;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(e=null==t?void 0:t.eventCoalescing)&&void 0!==e&&e,shouldCoalesceRunChangeDetection:null!==(n=null==t?void 0:t.runCoalescing)&&void 0!==n&&n}}({eventCoalescing:null==i?void 0:i.ngZoneEventCoalescing,runCoalescing:null==i?void 0:i.ngZoneRunCoalescing}));return o.run(()=>{const s=function d7(t,e,n){return new AA(t,e,n)}(r.moduleType,this.injector,function OV(t){return[{provide:xe,useFactory:t},{provide:la,multi:!0,useFactory:()=>{const e=Be(MX,{optional:!0});return()=>e.initialize()}},{provide:la,multi:!0,useFactory:()=>{const e=Be(OX);return()=>{e.initialize()}}},{provide:mm,useFactory:NX}]}(()=>o)),a=s.injector.get(zo,null);return o.runOutsideAngular(()=>{const l=o.onError.subscribe({next:c=>{a.handleError(c)}});s.onDestroy(()=>{e0(this._modules,s),l.unsubscribe()})}),function xV(t,e,n){try{const r=n();return c_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(a,o,()=>{const l=s.injector.get(pD);return l.runInitializers(),l.donePromise.then(()=>(function eL(t){"string"==typeof t&&(JF=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Ll,kf)||kf),this._moduleDoBootstrap(s),s))})})}bootstrapModule(r,i=[]){const o=MV({},i);return function xX(t,e,n){const r=new DA(n);return Promise.resolve(r)}(0,0,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){const i=r.injector.get(Fl);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else{if(!r.instance.ngDoBootstrap)throw new Se(-403,!1);r.instance.ngDoBootstrap(i)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const r=this._injector.get(_D,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(tt))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})(),Vc=null;const VV=new lt("");function BV(t,e,n=[]){const r=`Platform: ${e}`,i=new lt(r);return(o=[])=>{let s=vD();if(!s||s.injector.get(VV,!1)){const a=[...n,...o,{provide:i,useValue:!0}];t?t(a):function BX(t){if(Vc&&!Vc.get(VV,!1))throw new Se(400,!1);(function PV(){!function Te(t){Dt=t}(()=>{throw new Se(600,!1)})})(),Vc=t;const e=t.get(LV);(function UV(t){const e=t.get(VN,null);null==e||e.forEach(n=>n())})(t)}(function $V(t=[],e){return tt.create({name:e,providers:[{provide:$g,useValue:"platform"},{provide:_D,useValue:new Set([()=>Vc=null])},...t]})}(a,r))}return function $X(t){const e=vD();if(!e)throw new Se(401,!1);return e}()}}function vD(){var t,e;return null!==(t=null===(e=Vc)||void 0===e?void 0:e.get(LV))&&void 0!==t?t:null}let at=(()=>{class e{}return e.__NG_ELEMENT_ID__=jX,e})();function jX(t){return function HX(t,e,n){if(ua(t)&&!n){const r=ao(t.index,e);return new Lm(r,r)}return 47&t.type?new Lm(e[Ar],e):null}(Vn(),De(),!(16&~t))}class qV{constructor(){}supports(e){return NE(e)}create(e){return new KX(e)}}const qX=(t,e)=>e;class KX{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||qX}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<QV(r,i,o)?n:r,a=QV(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const c=a-i,h=l-i;if(c!=h){for(let m=0;m<c;m++){const _=m<o.length?o[m]:o[m]=0,w=_+m;h<=w&&w<c&&(o[m]=_+1)}o[s.previousIndex]=h-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!NE(e))throw new Se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function g7(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new QX(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new KV),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new KV),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class QX{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class YX{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class KV{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new YX,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function QV(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function XV(){return new CD([new qV])}let CD=(()=>{var t;class e{constructor(r){this.factories=r}static create(r,i){if(null!=i){const o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||XV()),deps:[[e,new hc,new El]]}}find(r){const i=this.factories.find(o=>o.supports(r));if(null!=i)return i;throw new Se(901,!1)}}return(t=e).\u0275prov=je({token:t,providedIn:"root",factory:XV}),e})();const tZ=BV(null,"core",[]);let nZ=(()=>{var t;class e{constructor(r){}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(Fl))},t.\u0275mod=Uo({type:t}),t.\u0275inj=On({}),e})();function Uf(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function I2(t){const e=q(null);try{return t()}finally{q(e)}}function E2(t){const e=nn(t);if(!e)return null;const n=new Gm(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}let AD=null;function Bc(){return AD}class BZ{}const Qo=new lt("");let DD=(()=>{var t;class e{historyGo(r){throw new Error("")}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>Be(UZ),providedIn:"platform"}),e})();const $Z=new lt("");let UZ=(()=>{var t;class e extends DD{constructor(){super(),this._doc=Be(Qo),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Bc().getBaseHref(this._doc)}onPopState(r){const i=Bc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){const i=Bc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>new t,providedIn:"platform"}),e})();function SD(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function w2(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Vl(t){return t&&"?"!==t[0]?"?"+t:t}let Ia=(()=>{var t;class e{historyGo(r){throw new Error("")}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>Be(b2),providedIn:"root"}),e})();const C2=new lt("");let b2=(()=>{var t;class e extends Ia{constructor(r,i){var o,s,a;super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=null!==(o=null!==(s=null!=i?i:this._platformLocation.getBaseHrefFromDOM())&&void 0!==s?s:null===(a=Be(Qo).location)||void 0===a?void 0:a.origin)&&void 0!==o?o:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return SD(this._baseHref,r)}path(r=!1){const i=this._platformLocation.pathname+Vl(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){const a=this.prepareExternalUrl(o+Vl(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){const a=this.prepareExternalUrl(o+Vl(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){var i,o;null===(i=(o=this._platformLocation).historyGo)||void 0===i||i.call(o,r)}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(DD),Ve(C2,8))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),T2=(()=>{var t;class e extends Ia{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){var i;const o=null!==(i=this._platformLocation.hash)&&void 0!==i?i:"#";return o.length>0?o.substring(1):o}prepareExternalUrl(r){const i=SD(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Vl(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Vl(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){var i,o;null===(i=(o=this._platformLocation).historyGo)||void 0===i||i.call(o,r)}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(DD),Ve(C2,8))},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})(),$c=(()=>{var t;class e{constructor(r){this._subject=new ar,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;const i=this._locationStrategy.getBaseHref();this._basePath=function zZ(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(w2(A2(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){var r;null===(r=this._urlChangeSubscription)||void 0===r||r.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Vl(i))}normalize(r){return e.stripTrailingSlash(function HZ(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,A2(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Vl(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Vl(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){var i,o;null===(i=(o=this._locationStrategy).historyGo)||void 0===i||i.call(o,r)}onUrlChange(r){var i;return this._urlChangeListeners.push(r),null!==(i=this._urlChangeSubscription)&&void 0!==i||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)})),()=>{const o=this._urlChangeListeners.indexOf(r);var s;this._urlChangeListeners.splice(o,1),0===this._urlChangeListeners.length&&(null===(s=this._urlChangeSubscription)||void 0===s||s.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}}return(t=e).normalizeQueryParams=Vl,t.joinWithSlash=SD,t.stripTrailingSlash=w2,t.\u0275fac=function(r){return new(r||t)(Ve(Ia))},t.\u0275prov=je({token:t,factory:()=>function jZ(){return new $c(Ve(Ia))}(),providedIn:"root"}),e})();function A2(t){return t.replace(/\/index.html$/,"")}class xJ{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let g_=(()=>{var t;class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;!this._differ&&r&&(this._differ=this._differs.find(r).create(this.ngForTrackBy))}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(null==o.previousIndex)i.createEmbeddedView(this._template,new xJ(o.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)i.remove(null===s?void 0:s);else if(null!==s){const l=i.get(s);i.move(l,a),L2(l,o)}});for(let o=0,s=i.length;o<s;o++){const l=i.get(o).context;l.index=o,l.count=s,l.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{L2(i.get(o.currentIndex),o)})}static ngTemplateContextGuard(r,i){return!0}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Hs),E(_a),E(CD))},t.\u0275dir=xt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function L2(t,e){t.context.$implicit=e.item}let hd=(()=>{var t;class e{constructor(r,i){this._viewContainer=r,this._context=new MJ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){V2("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){V2("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Hs),E(_a))},t.\u0275dir=xt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class MJ{constructor(){this.$implicit=null,this.ngIf=null}}function V2(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Kt(e)}'.`)}class VJ{createSubscription(e,n){return I2(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){I2(()=>e.unsubscribe())}}class BJ{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const $J=new BJ,UJ=new VJ;let m_=(()=>{var t;class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(c_(r))return $J;if(RV(r))return UJ;throw function wa(t,e){return new Se(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){var o;r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate)&&(null===(o=this._ref)||void 0===o||o.markForCheck())}}return(t=e).\u0275fac=function(r){return new(r||t)(E(at,16))},t.\u0275pipe=oo({name:"async",type:t,pure:!1,standalone:!0}),e})(),U2=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Uo({type:t}),t.\u0275inj=On({}),e})();const j2="browser";function I0(t){return"server"===t}let cee=(()=>{var t;class e{}return(t=e).\u0275prov=je({token:t,providedIn:"root",factory:()=>function lee(t){return t===j2}(Be(ga))?new uee(Be(Qo),window):new hee}),e})();class uee{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const n=function dee(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}}class hee{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class Uee extends BZ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class GD extends Uee{static makeCurrent(){!function VZ(t){var e;null!==(e=AD)&&void 0!==e||(AD=t)}(new GD)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function jee(){return y_=y_||document.querySelector("base"),y_?y_.getAttribute("href"):null}();return null==n?null:function Hee(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){y_=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function SJ(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let y_=null,Gee=(()=>{var t;class e{build(){return new XMLHttpRequest}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();const WD=new lt("");let X2=(()=>{var t;class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new Se(5101,!1);return this._eventNameToPlugin.set(r,i),i}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(WD),Ve(xe))},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();class Z2{constructor(e){this._doc=e}}const qD="ng-app-id";let J2=(()=>{var t;class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=I0(s),this.resetHostNodes()}addStyles(r){for(const i of r)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(r){for(const i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(const i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(const i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){var i;const o=this.styleRef;null===(i=o.get(r))||void 0===i||null===(i=i.elements)||void 0===i||i.forEach(s=>s.remove()),o.delete(r)}collectServerRenderedStyles(){var r;const i=null===(r=this.doc.head)||void 0===r?void 0:r.querySelectorAll(`style[${qD}="${this.appId}"]`);if(null!=i&&i.length){const o=new Map;return i.forEach(s=>{null!=s.textContent&&o.set(s.textContent,s)}),o}return null}changeUsageCount(r,i){const o=this.styleRef;if(o.has(r)){const s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){const o=this.styleNodesInDOM,s=null==o?void 0:o.get(i);if((null==s?void 0:s.parentNode)===r)return o.delete(i),s.removeAttribute(qD),s;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(qD,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){var o;const s=this.getStyleElement(r,i),a=this.styleRef,l=null===(o=a.get(i))||void 0===o?void 0:o.elements;l?l.push(s):a.set(i,{elements:[s],usage:1})}resetHostNodes(){const r=this.hostNodes;r.clear(),r.add(this.doc.head)}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(Qo),Ve(JI),Ve(BN,8),Ve(ga))},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();const KD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},QD=/%COMP%/g,Qee=new lt("",{providedIn:"root",factory:()=>!0});function tB(t,e){return e.map(n=>n.replace(QD,t))}let nB=(()=>{var t;class e{constructor(r,i,o,s,a,l,c,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=I0(l),this.defaultRenderer=new YD(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===us.ShadowDom&&(i={...i,encapsulation:us.Emulated});const o=this.getOrCreateRenderer(r,i);return o instanceof iB?o.applyToHost(r):o instanceof XD&&o.applyStyles(),o}getOrCreateRenderer(r,i){const o=this.rendererByCompId;let s=o.get(i.id);if(!s){const a=this.doc,l=this.ngZone,c=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case us.Emulated:s=new iB(c,h,i,this.appId,p,a,l,m);break;case us.ShadowDom:return new Jee(c,h,r,i,a,l,this.nonce,m);default:s=new XD(c,h,i,p,a,l,m)}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(X2),Ve(J2),Ve(JI),Ve(Qee),Ve(Qo),Ve(ga),Ve(xe),Ve(BN))},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();class YD{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(KD[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(rB(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(rB(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new Se(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=KD[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=KD[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(xc.DashCase|xc.Important)?e.style.setProperty(n,r,i&xc.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&xc.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=Bc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function rB(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Jee extends YD{constructor(e,n,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=tB(i.id,i.styles);for(const h of c){const p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class XD extends YD{constructor(e,n,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?tB(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class iB extends XD{constructor(e,n,r,i,o,s,a,l){const c=i+"-"+r.id;super(e,n,r,o,s,a,l,c),this.contentAttr=function Yee(t){return"_ngcontent-%COMP%".replace(QD,t)}(c),this.hostAttr=function Xee(t){return"_nghost-%COMP%".replace(QD,t)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let ete=(()=>{var t;class e extends Z2{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(Qo))},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();const oB=["alt","control","meta","shift"],tte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nte={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let rte=(()=>{var t;class e extends Z2{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,i,o){const s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bc().onAndCancel(r,s.domEventName,a))}static parseEventName(r){const i=r.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const s=e._normalizeKey(i.pop());let a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),oB.forEach(h=>{const p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=tte[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),oB.forEach(a=>{a!==o&&(0,nte[a])(r)&&(s+=a+".")}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(Qo))},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();const aB=[{provide:ga,useValue:j2},{provide:VN,useValue:function ite(){GD.makeCurrent()},multi:!0},{provide:Qo,useFactory:function ste(){return function UW(t){vT=t}(document),document},deps:[]}],ate=BV(tZ,"browser",aB),lte=new lt(""),lB=[{provide:ZE,useClass:class zee{addToWindow(e){bn.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Se(5103,!1);return o},bn.getAllAngularTestabilities=()=>e.getAllTestabilities(),bn.getAllAngularRootElements=()=>e.getAllRootElements(),bn.frameworkStabilizers||(bn.frameworkStabilizers=[]),bn.frameworkStabilizers.push(r=>{const i=bn.getAllAngularTestabilities();let o=i.length;const s=function(){o--,0==o&&r()};i.forEach(a=>{a.whenStable(s)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const i=e.getTestability(n);return null!=i?i:r?Bc().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}},deps:[]},{provide:SV,useClass:dD,deps:[xe,hD,ZE]},{provide:dD,useClass:dD,deps:[xe,hD,ZE]}],cB=[{provide:$g,useValue:"root"},{provide:zo,useFactory:function ote(){return new zo},deps:[]},{provide:WD,useClass:ete,multi:!0,deps:[Qo,xe,ga]},{provide:WD,useClass:rte,multi:!0,deps:[Qo]},nB,J2,X2,{provide:oO,useExisting:nB},{provide:class fee{},useClass:Gee,deps:[]},[]];let cte=(()=>{var t;class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:JI,useValue:r.appId}]}}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(lte,12))},t.\u0275mod=Uo({type:t}),t.\u0275inj=On({providers:[...cB,...lB],imports:[U2,nZ]}),e})(),ute=(()=>{var t;class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(Qo))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var ct=ce(1635);const ZD=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function fB(t){return wt(null==t?void 0:t.then)}function pB(t){return wt(t[Si])}function gB(t){return Symbol.asyncIterator&&wt(null==t?void 0:t[Symbol.asyncIterator])}function mB(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const _B=function pte(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function vB(t){return wt(null==t?void 0:t[_B])}function yB(t){return(0,ct.AQ)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,ct.N3)(n.read());if(i)return yield(0,ct.N3)(void 0);yield yield(0,ct.N3)(r)}}finally{n.releaseLock()}})}function IB(t){return wt(null==t?void 0:t.getReader)}function Yo(t){if(t instanceof Un)return t;if(null!=t){if(pB(t))return function gte(t){return new Un(e=>{const n=t[Si]();if(wt(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(ZD(t))return function mte(t){return new Un(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(fB(t))return function _te(t){return new Un(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Cn)})}(t);if(gB(t))return EB(t);if(vB(t))return function vte(t){return new Un(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(IB(t))return function yte(t){return EB(yB(t))}(t)}throw mB(t)}function EB(t){return new Un(e=>{(function Ite(t,e){var n,r,i,o;return(0,ct.sH)(this,void 0,void 0,function*(){try{for(n=(0,ct.xN)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Ul(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Uc(t,e=0){return bt((n,r)=>{n.subscribe(Ot(r,i=>Ul(r,t,()=>r.next(i),e),()=>Ul(r,t,()=>r.complete(),e),i=>Ul(r,t,()=>r.error(i),e)))})}function Hf(t,e=0){return bt((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function wB(t,e){if(!t)throw new Error("Iterable cannot be null");return new Un(n=>{Ul(n,e,()=>{const r=t[Symbol.asyncIterator]();Ul(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Qn(t,e){return e?function Ate(t,e){if(null!=t){if(pB(t))return function Ete(t,e){return Yo(t).pipe(Hf(e),Uc(e))}(t,e);if(ZD(t))return function Cte(t,e){return new Un(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(fB(t))return function wte(t,e){return Yo(t).pipe(Hf(e),Uc(e))}(t,e);if(gB(t))return wB(t,e);if(vB(t))return function bte(t,e){return new Un(n=>{let r;return Ul(n,e,()=>{r=t[_B](),Ul(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>wt(null==r?void 0:r.return)&&r.return()})}(t,e);if(IB(t))return function Tte(t,e){return wB(yB(t),e)}(t,e)}throw mB(t)}(t,e):Yo(t)}const{isArray:Dte}=Array,{getPrototypeOf:Ste,prototype:Rte,keys:Pte}=Object;function CB(t){if(1===t.length){const e=t[0];if(Dte(e))return{args:e,keys:null};if(function xte(t){return t&&"object"==typeof t&&Ste(t)===Rte}(e)){const n=Pte(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function JD(t){return t[t.length-1]}function bB(t){return wt(JD(t))?t.pop():void 0}function E_(t){return function Mte(t){return t&&wt(t.schedule)}(JD(t))?t.pop():void 0}const{isArray:kte}=Array;function eS(t){return _t(e=>function Ote(t,e){return kte(e)?t(...e):t(e)}(t,e))}function TB(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let AB=(()=>{var t;class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Nl),E(He))},t.\u0275dir=xt({type:t}),e})(),fd=(()=>{var t;class e extends AB{}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=xn(t)))(i||t)}})(),t.\u0275dir=xt({type:t,features:[cn]}),e})();const Ro=new lt(""),Vte={provide:Ro,useExisting:kn(()=>C0),multi:!0},$te=new lt("");let C0=(()=>{var t;class e extends AB{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Bte(){const t=Bc()?Bc().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(r){this.setProperty("value",null==r?"":r)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Nl),E(He),E($te,8))},t.\u0275dir=xt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&kt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Wn([Vte]),cn]}),e})();function jc(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}const Li=new lt(""),Hc=new lt("");function b0(t){return null}function LB(t){return null!=t}function VB(t){return c_(t)?Qn(t):t}function BB(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function $B(t,e){return e.map(n=>n(t))}function UB(t){return t.map(e=>function jte(t){return!t.validate}(e)?e:n=>e.validate(n))}function tS(t){return null!=t?function jB(t){if(!t)return null;const e=t.filter(LB);return 0==e.length?null:function(n){return BB($B(n,e))}}(UB(t)):null}function nS(t){return null!=t?function HB(t){if(!t)return null;const e=t.filter(LB);return 0==e.length?null:function(n){return function Fte(...t){const e=bB(t),{args:n,keys:r}=CB(t),i=new Un(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let h=0;h<s;h++){let p=!1;Yo(n[h]).subscribe(Ot(o,m=>{p||(p=!0,c--),a[h]=m},()=>l--,void 0,()=>{(!l||!p)&&(c||o.next(r?TB(r,a):a),o.complete())}))}});return e?i.pipe(eS(e)):i}($B(n,e).map(VB)).pipe(_t(BB))}}(UB(t)):null}function zB(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function rS(t){return t?Array.isArray(t)?t:[t]:[]}function T0(t,e){return Array.isArray(t)?t.includes(e):t===e}function qB(t,e){const n=rS(e);return rS(t).forEach(i=>{T0(n,i)||n.push(i)}),n}function KB(t,e){return rS(e).filter(n=>!T0(t,n))}class QB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=nS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Po extends QB{get formDirective(){return null}get path(){return null}}class jl extends QB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class YB{constructor(e){this._cd=e}get isTouched(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.touched)}get isUntouched(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.untouched)}get isPristine(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.pristine)}get isDirty(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.dirty)}get isValid(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.valid)}get isInvalid(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.invalid)}get isPending(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.pending)}get isSubmitted(){var e;return!(null===(e=this._cd)||void 0===e||!e.submitted)}}let XB=(()=>{var t;class e extends YB{constructor(r){super(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(E(jl,2))},t.\u0275dir=xt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&UE("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[cn]}),e})();const w_="VALID",D0="INVALID",zf="PENDING",C_="DISABLED";function S0(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class lS{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===w_}get invalid(){return this.status===D0}get pending(){return this.status==zf}get disabled(){return this.status===C_}get enabled(){return this.status!==C_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(qB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(KB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(KB(e,this._rawAsyncValidators))}hasValidator(e){return T0(this._rawValidators,e)}hasAsyncValidator(e){return T0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=zf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=C_,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=w_,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===w_||this.status===zf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?C_:w_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=zf,this._hasOwnPendingAsyncValidator=!0;const n=VB(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ar,this.statusChanges=new ar}_calculateStatus(){return this._allControlsDisabled()?C_:this.errors?D0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zf)?zf:this._anyControlsHaveStatus(D0)?D0:w_}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){S0(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function qte(t){return Array.isArray(t)?tS(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Kte(t){return Array.isArray(t)?nS(t):t||null}(this._rawAsyncValidators)}}const Gf=new lt("CallSetDisabledState",{providedIn:"root",factory:()=>R0}),R0="always";function b_(t,e,n=R0){var r,i;(function uS(t,e){const n=function GB(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(zB(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function WB(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(zB(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();M0(e._rawValidators,i),M0(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&(null===(r=(i=e.valueAccessor).setDisabledState)||void 0===r||r.call(i,t.disabled)),function Xte(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&t$(t,e)})}(t,e),function Jte(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Zte(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&t$(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function Yte(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function M0(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function t$(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function i$(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function o$(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}Promise.resolve();const s$=class extends lS{constructor(e=null,n,r){super(function sS(t){return(S0(t)?t.validators:t)||null}(n),function aS(t,e){return(S0(e)?e.asyncValidators:t)||null}(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),S0(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=o$(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){i$(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){i$(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){o$(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},ane={provide:jl,useExisting:kn(()=>gS)},c$=Promise.resolve();let gS=(()=>{var t;class e extends jl{constructor(r,i,o,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new s$,this._registered=!1,this.name="",this.update=new ar,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=function fS(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===C0?n=o:function nne(t){return Object.getPrototypeOf(t.constructor)===fd}(o)?r=o:i=o}),i||r||n||null}(0,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){const i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),function hS(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){b_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(r){c$.then(()=>{var i;this.control.setValue(r,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(r){const i=r.isDisabled.currentValue,o=0!==i&&Uf(i);c$.then(()=>{var s;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(r){return this._parent?function P0(t,e){return[...e.path,t]}(r,this._parent):[r]}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Po,9),E(Li,10),E(Hc,10),E(Ro,10),E(at,8),E(Gf,8))},t.\u0275dir=xt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[tr.None,"disabled","isDisabled"],model:[tr.None,"ngModel","model"],options:[tr.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Wn([ane]),cn,Ki]}),e})();const vne={provide:Ro,useExisting:kn(()=>yS),multi:!0};function _$(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let yS=(()=>{var t;class e extends fd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;const o=_$(this._getOptionId(r),r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){const i=function yne(t){return t.split(":")[0]}(r);return this._optionMap.has(i)?this._optionMap.get(i):r}}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=xn(t)))(i||t)}})(),t.\u0275dir=xt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&kt("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Wn([vne]),cn]}),e})(),IS=(()=>{var t;class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){null!=this._select&&(this._select._optionMap.set(this.id,r),this._setElementValue(_$(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return(t=e).\u0275fac=function(r){return new(r||t)(E(He),E(Nl),E(yS,9))},t.\u0275dir=xt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const Ine={provide:Ro,useExisting:kn(()=>ES),multi:!0};function v$(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let ES=(()=>{var t;class e extends fd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){let i;if(this.value=r,Array.isArray(r)){const o=r.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else i=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{const o=[],s=i.selectedOptions;if(void 0!==s){const a=s;for(let l=0;l<a.length;l++){const h=this._getOptionValue(a[l].value);o.push(h)}}else{const a=i.options;for(let l=0;l<a.length;l++){const c=a[l];if(c.selected){const h=this._getOptionValue(c.value);o.push(h)}}}this.value=o,r(o)}}_registerOption(r){const i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){const i=function Ene(t){return t.split(":")[0]}(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=xn(t)))(i||t)}})(),t.\u0275dir=xt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&kt("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Wn([Ine]),cn]}),e})(),wS=(()=>{var t;class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){null!=this._select&&(this._value=r,this._setElementValue(v$(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(v$(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return(t=e).\u0275fac=function(r){return new(r||t)(E(He),E(Nl),E(ES,9))},t.\u0275dir=xt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();function I$(t){return"number"==typeof t?t:parseFloat(t)}let pd=(()=>{var t;class e{constructor(){this._validator=b0}ngOnChanges(r){if(this.inputName in r){const i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):b0,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return null!=r}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275dir=xt({type:t,features:[Ki]}),e})();const wne={provide:Li,useExisting:kn(()=>CS),multi:!0};let CS=(()=>{var t;class e extends pd{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=r=>I$(r),this.createValidator=r=>function PB(t){return e=>{if(jc(e.value)||jc(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(r)}}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=xn(t)))(i||t)}})(),t.\u0275dir=xt({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Gs("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[Wn([wne]),cn]}),e})();const Cne={provide:Li,useExisting:kn(()=>bS),multi:!0};let bS=(()=>{var t;class e extends pd{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=r=>I$(r),this.createValidator=r=>function RB(t){return e=>{if(jc(e.value)||jc(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(r)}}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=xn(t)))(i||t)}})(),t.\u0275dir=xt({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Gs("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Wn([Cne]),cn]}),e})(),Pne=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Uo({type:t}),t.\u0275inj=On({}),e})(),Mne=(()=>{var t;class e{static withConfig(r){var i;return{ngModule:e,providers:[{provide:Gf,useValue:null!==(i=r.callSetDisabledState)&&void 0!==i?i:R0}]}}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Uo({type:t}),t.\u0275inj=On({imports:[Pne]}),e})();function Wt(...t){return Qn(t,E_(t))}function k0(...t){const e=E_(t),n=bB(t),{args:r,keys:i}=CB(t);if(0===r.length)return Qn([],e);const o=new Un(function kne(t,e,n=Cr){return r=>{A$(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let l=0;l<i;l++)A$(e,()=>{const c=Qn(t[l],e);let h=!1;c.subscribe(Ot(r,p=>{o[l]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>TB(i,s):Cr));return n?o.pipe(eS(n)):o}function A$(t,e,n){t?Ul(n,t,e):e()}const O0=un(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Yi(t,e,n=1/0){return wt(e)?Yi((r,i)=>_t((o,s)=>e(r,o,i,s))(Yo(t(r,i))),n):("number"==typeof e&&(n=e),bt((r,i)=>function One(t,e,n,r,i,o,s,a){const l=[];let c=0,h=0,p=!1;const m=()=>{p&&!l.length&&!c&&e.complete()},_=T=>c<r?w(T):l.push(T),w=T=>{o&&e.next(T),c++;let S=!1;Yo(n(T,h++)).subscribe(Ot(e,U=>{null==i||i(U),o?_(U):e.next(U)},()=>{S=!0},void 0,()=>{if(S)try{for(c--;l.length&&c<r;){const U=l.shift();s?Ul(e,s,()=>w(U)):w(U)}m()}catch(U){e.error(U)}}))};return t.subscribe(Ot(e,_,()=>{p=!0,m()})),()=>{null==a||a()}}(r,i,t,n)))}function Wf(t=1/0){return Yi(Cr,t)}function AS(...t){return function Fne(){return Wf(1)}()(Qn(t,E_(t)))}function D$(t){return new Un(e=>{Yo(t()).subscribe(e)})}function F0(t,e){const n=wt(t)?t:()=>t,r=i=>i.error(n());return new Un(e?i=>e.schedule(r,0,i):r)}const Ca=new Un(t=>t.complete());function DS(){return bt((t,e)=>{let n=null;t._refCount++;const r=Ot(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class S$ extends Un{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ut(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ue;const n=this.getSubject();e.add(this.source.subscribe(Ot(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ue.EMPTY)}return e}refCount(){return DS()(this)}}function jr(t,e){return bt((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(Ot(r,l=>{null==i||i.unsubscribe();let c=0;const h=o++;Yo(t(l,h)).subscribe(i=Ot(r,p=>r.next(e?e(l,p,h,c++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function qf(t){return t<=0?()=>Ca:bt((e,n)=>{let r=0;e.subscribe(Ot(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function L0(...t){const e=E_(t);return bt((n,r)=>{(e?AS(t,n,e):AS(t,n)).subscribe(r)})}function ys(t,e){return bt((n,r)=>{let i=0;n.subscribe(Ot(r,o=>t.call(e,o,i++)&&r.next(o)))})}function V0(t){return bt((e,n)=>{let r=!1;e.subscribe(Ot(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function R$(t=Vne){return bt((e,n)=>{let r=!1;e.subscribe(Ot(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Vne(){return new O0}function zc(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ys((i,o)=>t(i,o,r)):Cr,qf(1),n?V0(e):R$(()=>new O0))}function A_(t,e){return wt(e)?Yi(t,e,1):Yi(t,1)}function Xi(t,e,n){const r=wt(t)||e||n?{next:t,error:e,complete:n}:t;return r?bt((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Ot(o,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),o.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),o.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),o.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Cr}function gd(t){return bt((e,n)=>{let o,r=null,i=!1;r=e.subscribe(Ot(n,void 0,void 0,s=>{o=Yo(t(s,gd(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function B0(t,e){return bt(function Bne(t,e,n,r,i){return(o,s)=>{let a=n,l=e,c=0;o.subscribe(Ot(s,h=>{const p=c++;l=a?t(l,h,p):(a=!0,h),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}(t,e,arguments.length>=2,!0))}function SS(t){return t<=0?()=>Ca:bt((e,n)=>{let r=[];e.subscribe(Ot(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function RS(t){return bt((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const dn="primary",D_=Symbol("RouteTitle");class Hne{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Kf(t){return new Hne(t)}function zne(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ya(t,e){const n=t?PS(t):void 0,r=e?PS(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!P$(t[i],e[i]))return!1;return!0}function PS(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function P$(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function x$(t){return t.length>0?t[t.length-1]:null}function Gc(t){return function Nne(t){return!!t&&(t instanceof Un||wt(t.lift)&&wt(t.subscribe))}(t)?t:c_(t)?Qn(Promise.resolve(t)):Wt(t)}const Wne={exact:function k$(t,e,n){if(!md(t.segments,e.segments)||!$0(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!k$(t.children[r],e.children[r],n))return!1;return!0},subset:O$},M$={exact:function qne(t,e){return Ya(t,e)},subset:function Kne(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>P$(t[n],e[n]))},ignored:()=>!0};function N$(t,e,n){return Wne[n.paths](t.root,e.root,n.matrixParams)&&M$[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function O$(t,e,n){return F$(t,e,e.segments,n)}function F$(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!md(i,n)||e.hasChildren()||!$0(i,n,r))}if(t.segments.length===n.length){if(!md(t.segments,n)||!$0(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!O$(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(md(t.segments,i)&&$0(t.segments,i,r)&&t.children[dn])&&F$(t.children[dn],e,o,r)}}function $0(t,e,n){return e.every((r,i)=>M$[n](t[i].parameters,r.parameters))}class Qf{constructor(e=new lr([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){var e;return null!==(e=this._queryParamMap)&&void 0!==e||(this._queryParamMap=Kf(this.queryParams)),this._queryParamMap}toString(){return Xne.serialize(this)}}class lr{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return U0(this)}}class S_{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){var e;return null!==(e=this._parameterMap)&&void 0!==e||(this._parameterMap=Kf(this.parameters)),this._parameterMap}toString(){return B$(this)}}function md(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let _d=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>new xS,providedIn:"root"}),e})();class xS{parse(e){const n=new lre(e);return new Qf(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${R_(e.root,!0)}`,r=function ere(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${j0(n)}=${j0(i)}`).join("&"):`${j0(n)}=${j0(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function Zne(t){return encodeURI(t)}(e.fragment)}`:""}`}}const Xne=new xS;function U0(t){return t.segments.map(e=>B$(e)).join("/")}function R_(t,e){if(!t.hasChildren())return U0(t);if(e){const n=t.children[dn]?R_(t.children[dn],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==dn&&r.push(`${i}:${R_(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function Yne(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===dn&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==dn&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===dn?[R_(t.children[dn],!1)]:[`${i}:${R_(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[dn]?`${U0(t)}/${n[0]}`:`${U0(t)}/(${n.join("//")})`}}function L$(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function j0(t){return L$(t).replace(/%3B/gi,";")}function MS(t){return L$(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function H0(t){return decodeURIComponent(t)}function V$(t){return H0(t.replace(/\+/g,"%20"))}function B$(t){return`${MS(t.path)}${function Jne(t){return Object.entries(t).map(([e,n])=>`;${MS(e)}=${MS(n)}`).join("")}(t.parameters)}`}const tre=/^[^\/()?;#]+/;function NS(t){const e=t.match(tre);return e?e[0]:""}const nre=/^[^\/()?;=#]+/,ire=/^[^=?&#]+/,sre=/^[^&#]+/;class lre{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new lr([],{}):new lr([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[dn]=new lr(e,n)),r}parseSegment(){const e=NS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Se(4009,!1);return this.capture(e),new S_(H0(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function rre(t){const e=t.match(nre);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=NS(this.remaining);i&&(r=i,this.capture(r))}e[H0(n)]=H0(r)}parseQueryParam(e){const n=function ore(t){const e=t.match(ire);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function are(t){const e=t.match(sre);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=V$(n),o=V$(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=NS(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Se(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=dn);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[dn]:new lr([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Se(4011,!1)}}function $$(t){return t.segments.length>0?new lr([],{[dn]:t}):t}function U$(t){const e={};for(const[r,i]of Object.entries(t.children)){const o=U$(i);if(r===dn&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function cre(t){if(1===t.numberOfChildren&&t.children[dn]){const e=t.children[dn];return new lr(t.segments.concat(e.segments),e.children)}return t}(new lr(t.segments,e))}function Yf(t){return t instanceof Qf}function j$(t){var e;let n;const o=$$(function r(s){const a={};for(const c of s.children){const h=r(c);a[c.outlet]=h}const l=new lr(s.url,a);return s===t&&(n=l),l}(t.root));return null!==(e=n)&&void 0!==e?e:o}function H$(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return kS(i,i,i,n,r);const o=function dre(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new G$(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new G$(n,e,r)}(e);if(o.toRoot())return kS(i,i,new lr([],{}),n,r);const s=function hre(t,e,n){if(t.isAbsolute)return new G0(e,!0,0);if(!n)return new G0(e,!1,NaN);if(null===n.parent)return new G0(n,!0,0);const r=z0(t.commands[0])?0:1;return function fre(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Se(4005,!1);i=r.segments.length}return new G0(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?x_(s.segmentGroup,s.index,o.commands):W$(s.segmentGroup,s.index,o.commands);return kS(i,s.segmentGroup,a,n,r)}function z0(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function P_(t){return"object"==typeof t&&null!=t&&t.outlets}function kS(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`}),s=t===e?n:z$(t,e,n);const a=$$(U$(s));return new Qf(a,o,i)}function z$(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:z$(o,e,n)}),new lr(t.segments,r)}class G${constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&z0(r[0]))throw new Se(4003,!1);const i=r.find(P_);if(i&&i!==x$(r))throw new Se(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class G0{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function W$(t,e,n){var r;if(null!==(r=t)&&void 0!==r||(t=new lr([],{})),0===t.segments.length&&t.hasChildren())return x_(t,e,n);const i=function gre(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(P_(a))break;const l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!K$(l,c,s))return o;r+=2}else{if(!K$(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),o=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const s=new lr(t.segments.slice(0,i.pathIndex),{});return s.children[dn]=new lr(t.segments.slice(i.pathIndex),t.children),x_(s,0,o)}return i.match&&0===o.length?new lr(t.segments,{}):i.match&&!t.hasChildren()?OS(t,e,n):i.match?x_(t,0,o):OS(t,e,n)}function x_(t,e,n){if(0===n.length)return new lr(t.segments,{});{const r=function pre(t){return P_(t[0])?t[0].outlets:{[dn]:t}}(n),i={};if(Object.keys(r).some(o=>o!==dn)&&t.children[dn]&&1===t.numberOfChildren&&0===t.children[dn].segments.length){const o=x_(t.children[dn],e,n);return new lr(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=W$(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new lr(t.segments,i)}}function OS(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(P_(o)){const l=mre(o.outlets);return new lr(r,l)}if(0===i&&z0(n[0])){r.push(new S_(t.segments[e].path,q$(n[0]))),i++;continue}const s=P_(o)?o.outlets[dn]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&z0(a)?(r.push(new S_(s,q$(a))),i+=2):(r.push(new S_(s,{})),i++)}return new lr(r,{})}function mre(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=OS(new lr([],{}),0,r))}),e}function q$(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function K$(t,e,n){return t==n.path&&Ya(e,n.parameters)}const M_="imperative";var Mn=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Mn||{});class Xa{constructor(e,n){this.id=e,this.url=n}}class N_ extends Xa{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Mn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Hl extends Xa{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Mn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Is=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Is||{}),W0=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(W0||{});class Xf extends Xa{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Mn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Zf extends Xa{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Mn.NavigationSkipped}}class q0 extends Xa{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Mn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Q$ extends Xa{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Mn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _re extends Xa{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Mn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vre extends Xa{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Mn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yre extends Xa{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Mn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ire extends Xa{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Mn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ere{constructor(e){this.route=e,this.type=Mn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wre{constructor(e){this.route=e,this.type=Mn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Cre{constructor(e){this.snapshot=e,this.type=Mn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bre{constructor(e){this.snapshot=e,this.type=Mn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tre{constructor(e){this.snapshot=e,this.type=Mn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Are{constructor(e){this.snapshot=e,this.type=Mn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Y${constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Mn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class FS{}class LS{constructor(e){this.url=e}}class Dre{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new vd,this.attachRef=null}}let vd=(()=>{var t;class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){const o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){const i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Dre,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class X${constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=VS(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=VS(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=BS(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return BS(e,this._root).map(n=>n.value)}}function VS(t,e){if(t===e.value)return e;for(const n of e.children){const r=VS(t,n);if(r)return r}return null}function BS(t,e){if(t===e.value)return[e];for(const n of e.children){const r=BS(t,n);if(r.length)return r.unshift(e),r}return[]}class ba{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Jf(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class Z$ extends X${constructor(e,n){super(e),this.snapshot=n,jS(this,e)}toString(){return this.snapshot.toString()}}function J$(t){const e=function Sre(t){const o=new US([],{},{},"",{},dn,t,null,{});return new eU("",new ba(o,[]))}(t),n=new K([new S_("",{})]),r=new K({}),i=new K({}),o=new K({}),s=new K(""),a=new Ta(n,r,o,s,i,dn,t,e.root);return a.snapshot=e.root,new Z$(new ba(a,[]),e)}class Ta{constructor(e,n,r,i,o,s,a,l){var c,h;this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=null!==(c=null===(h=this.dataSubject)||void 0===h?void 0:h.pipe(_t(p=>p[D_])))&&void 0!==c?c:Wt(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var e;return null!==(e=this._paramMap)&&void 0!==e||(this._paramMap=this.params.pipe(_t(n=>Kf(n)))),this._paramMap}get queryParamMap(){var e;return null!==(e=this._queryParamMap)&&void 0!==e||(this._queryParamMap=this.queryParams.pipe(_t(n=>Kf(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $S(t,e,n="emptyOnly"){var r;let i;const{routeConfig:o}=t;var s;return i=null===e||"always"!==n&&""!==(null==o?void 0:o.path)&&(e.component||null!==(r=e.routeConfig)&&void 0!==r&&r.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...null!==(s=t._resolvedData)&&void 0!==s?s:{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...null==o?void 0:o.data,...t._resolvedData}},o&&nU(o)&&(i.resolve[D_]=o.title),i}class US{get title(){var e;return null===(e=this.data)||void 0===e?void 0:e[D_]}constructor(e,n,r,i,o,s,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var e;return null!==(e=this._paramMap)&&void 0!==e||(this._paramMap=Kf(this.params)),this._paramMap}get queryParamMap(){var e;return null!==(e=this._queryParamMap)&&void 0!==e||(this._queryParamMap=Kf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class eU extends X${constructor(e,n){super(n),this.url=e,jS(this,n)}toString(){return tU(this._root)}}function jS(t,e){e.value._routerState=t,e.children.forEach(n=>jS(t,n))}function tU(t){const e=t.children.length>0?` { ${t.children.map(tU).join(", ")} } `:"";return`${t.value}${e}`}function HS(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ya(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ya(e.params,n.params)||t.paramsSubject.next(n.params),function Gne(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ya(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Ya(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function zS(t,e){const n=Ya(t.params,e.params)&&function Qne(t,e){return md(t,e)&&t.every((n,r)=>Ya(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||zS(t.parent,e.parent))}function nU(t){return"string"==typeof t.title||null===t.title}let rU=(()=>{var t;class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=dn,this.activateEvents=new ar,this.deactivateEvents=new ar,this.attachEvents=new ar,this.detachEvents=new ar,this.parentContexts=Be(vd),this.location=Be(Hs),this.changeDetector=Be(at),this.environmentInjector=Be(qr),this.inputBinder=Be(K0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){const{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){var r;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(r=this.inputBinder)||void 0===r||r.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){var i;return(null===(i=this.parentContexts.getContext(r))||void 0===i?void 0:i.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const r=this.parentContexts.getContext(this.name);null!=r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Se(4012,!1);this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){var o;this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),null===(o=this.inputBinder)||void 0===o||o.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){var o;if(this.isActivated)throw new Se(4013,!1);this._activatedRoute=r;const s=this.location,l=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,h=new Rre(r,c,s.injector);this.activated=s.createComponent(l,{index:s.length,injector:h,environmentInjector:null!=i?i:this.environmentInjector}),this.changeDetector.markForCheck(),null===(o=this.inputBinder)||void 0===o||o.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275dir=xt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ki]}),e})();class Rre{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ta?this.route:e===vd?this.childContexts:this.parent.get(e,n)}}const K0=new lt("");let iU=(()=>{var t;class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){var i;null===(i=this.outletDataSubscriptions.get(r))||void 0===i||i.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){const{activatedRoute:i}=r,o=k0([i.queryParams,i.params,i.data]).pipe(jr(([s,a,l],c)=>(l={...s,...a,...l},0===c?Wt(l):Promise.resolve(l)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(r);const a=E2(i.component);if(a)for(const{templateName:l}of a.inputs)r.activatedComponentRef.setInput(l,s[l]);else this.unsubscribeFromRouteData(r)});this.outletDataSubscriptions.set(r,o)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();function k_(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function xre(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return k_(t,r,i);return k_(t,r)})}(t,e,n);return new ba(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>k_(t,a)),s}}const r=function Mre(t){return new Ta(new K(t.url),new K(t.params),new K(t.queryParams),new K(t.fragment),new K(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>k_(t,o));return new ba(r,i)}}const oU="ngNavigationCancelingError";function sU(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Yf(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=aU(!1,Is.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function aU(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[oU]=!0,n.cancellationCode=e,n}function lU(t){return!!t&&t[oU]}let cU=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Ke({type:t,selectors:[["ng-component"]],standalone:!0,features:[nV],decls:1,vars:0,template:function(r,i){1&r&&$e(0,"router-outlet")},dependencies:[rU],encapsulation:2}),e})();function GS(t){const e=t.children&&t.children.map(GS),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==dn&&(n.component=cU),n}function Za(t){return t.outlet||dn}function O_(t){var e;if(!t)return null;if(null!==(e=t.routeConfig)&&void 0!==e&&e._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const r=n.routeConfig;if(null!=r&&r._loadedInjector)return r._loadedInjector;if(null!=r&&r._injector)return r._injector}return null}class $re{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),HS(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Jf(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Jf(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Jf(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Jf(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Are(o.value.snapshot))}),e.children.length&&this.forwardEvent(new bre(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(HS(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),HS(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=O_(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class uU{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Q0{constructor(e,n){this.component=e,this.route=n}}function Ure(t,e,n){const r=t._root;return F_(r,e?e._root:null,n,[r.value])}function ep(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function di(t){return null!==er(t)}(t)?e.get(t):t:r}function F_(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Jf(e);return t.children.forEach(s=>{(function Hre(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function zre(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!md(t.url,e.url);case"pathParamsOrQueryParamsChange":return!md(t.url,e.url)||!Ya(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zS(t,e)||!Ya(t.queryParams,e.queryParams);default:return!zS(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new uU(r)):(o.data=s.data,o._resolvedData=s._resolvedData),F_(t,e,o.component?a?a.children:null:n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Q0(a.outlet.component,s))}else s&&L_(e,a,i),i.canActivateChecks.push(new uU(r)),F_(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>L_(a,n.getContext(s),i)),i}function L_(t,e,n){const r=Jf(t),i=t.value;Object.entries(r).forEach(([o,s])=>{L_(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new Q0(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function V_(t){return"function"==typeof t}function dU(t){return t instanceof O0||"EmptyError"===(null==t?void 0:t.name)}const Y0=Symbol("INITIAL_VALUE");function tp(){return jr(t=>k0(t.map(e=>e.pipe(qf(1),L0(Y0)))).pipe(_t(e=>{for(const n of e)if(!0!==n){if(n===Y0)return Y0;if(!1===n||n instanceof Qf)return n}return!0}),ys(e=>e!==Y0),qf(1)))}function hU(t){return function Bo(...t){return $o(t)}(Xi(e=>{if(Yf(e))throw sU(0,e)}),_t(e=>!0===e))}class WS{constructor(e){this.segmentGroup=e||null}}class qS extends Error{constructor(e){super(),this.urlTree=e}}function np(t){return F0(new WS(t))}class cie{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Wt(r);if(i.numberOfChildren>1||!i.children[dn])return F0(new Se(4e3,!1));i=i.children[dn]}}applyRedirectCommands(e,n,r){const i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new qS(i);return i}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new Qf(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new lr(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new Se(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const KS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uie(t,e,n,r,i){const o=QS(t,e,n);return o.matched?(r=function kre(t,e){var n;return t.providers&&!t._injector&&(t._injector=xE(t.providers,e,`Route: ${t.path}`)),null!==(n=t._injector)&&void 0!==n?n:e}(e,r),function sie(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?Wt(i.map(s=>{const a=ep(s,t);return Gc(function Yre(t){return t&&V_(t.canMatch)}(a)?a.canMatch(e,n):xi(t,()=>a(e,n)))})).pipe(tp(),hU()):Wt(!0)}(r,e,n).pipe(_t(s=>!0===s?o:{...KS}))):Wt(o)}function QS(t,e,n){var r,i;if("**"===e.path)return function die(t){return{matched:!0,parameters:t.length>0?x$(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...KS}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const s=(e.matcher||zne)(n,t,e);if(!s)return{...KS};const a={};Object.entries(null!==(r=s.posParams)&&void 0!==r?r:{}).forEach(([c,h])=>{a[c]=h.path});const l=s.consumed.length>0?{...a,...s.consumed[s.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:l,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function fU(t,e,n,r){return n.length>0&&function pie(t,e,n){return n.some(r=>X0(t,e,r)&&Za(r)!==dn)}(t,n,r)?{segmentGroup:new lr(e,fie(r,new lr(n,t.children))),slicedSegments:[]}:0===n.length&&function gie(t,e,n){return n.some(r=>X0(t,e,r))}(t,n,r)?{segmentGroup:new lr(t.segments,hie(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new lr(t.segments,t.children),slicedSegments:n}}function hie(t,e,n,r){const i={};for(const o of n)if(X0(t,e,o)&&!r[Za(o)]){const s=new lr([],{});i[Za(o)]=s}return{...r,...i}}function fie(t,e){const n={};n[dn]=e;for(const r of t)if(""===r.path&&Za(r)!==dn){const i=new lr([],{});n[Za(r)]=i}return n}function X0(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class vie{}class Eie{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new cie(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Se(4002,`'${e.segmentGroup}'`)}recognize(){const e=fU(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(_t(n=>{const r=new US([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},dn,this.rootComponentType,null,{}),i=new ba(r,n),o=new eU("",i),s=function ure(t,e,n=null,r=null){return H$(j$(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,dn).pipe(gd(r=>{if(r instanceof qS)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof WS?this.noMatchError(r):r}))}inheritParamsAndData(e,n){const r=e.value,i=$S(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(_t(o=>o instanceof ba?[o]:[]))}processChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Qn(i).pipe(A_(o=>{const s=r.children[o],a=function Vre(t,e){const n=t.filter(r=>Za(r)===e);return n.push(...t.filter(r=>Za(r)!==e)),n}(n,o);return this.processSegmentGroup(e,a,s,o)}),B0((o,s)=>(o.push(...s),o)),V0(null),function $ne(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ys((i,o)=>t(i,o,r)):Cr,SS(1),n?V0(e):R$(()=>new O0))}(),Yi(o=>{if(null===o)return np(r);const s=pU(o);return function wie(t){t.sort((e,n)=>e.value.outlet===dn?-1:n.value.outlet===dn?1:e.value.outlet.localeCompare(n.value.outlet))}(s),Wt(s)}))}processSegment(e,n,r,i,o,s){return Qn(n).pipe(A_(a=>{var l;return this.processSegmentAgainstRoute(null!==(l=a._injector)&&void 0!==l?l:e,n,a,r,i,o,s).pipe(gd(c=>{if(c instanceof WS)return Wt(null);throw c}))}),zc(a=>!!a),gd(a=>{if(dU(a))return function _ie(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?Wt(new vie):np(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return function mie(t,e,n,r){return!!(Za(t)===r||r!==dn&&X0(e,n,t))&&QS(e,t,n).matched}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):np(i):np(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){const{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:h}=QS(n,i,o);if(!a)return np(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const p=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,p).pipe(Yi(m=>this.processSegment(e,r,n,m.concat(h),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){const s=uie(n,r,i,e);return"**"===r.path&&(n.children={}),s.pipe(jr(a=>{var l;return a.matched?(e=null!==(l=r._injector)&&void 0!==l?l:e,this.getChildConfig(e,r,i).pipe(jr(({routes:c})=>{var h,p,m;const _=null!==(h=r._loadedInjector)&&void 0!==h?h:e,{consumedSegments:w,remainingSegments:T,parameters:S}=a,U=new US(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function bie(t){return t.data||{}}(r),Za(r),null!==(p=null!==(m=r.component)&&void 0!==m?m:r._loadedComponent)&&void 0!==p?p:null,r,function Tie(t){return t.resolve||{}}(r)),{segmentGroup:H,slicedSegments:me}=fU(n,w,T,c);if(0===me.length&&H.hasChildren())return this.processChildren(_,c,H).pipe(_t(Ye=>null===Ye?null:new ba(U,Ye)));if(0===c.length&&0===me.length)return Wt(new ba(U,[]));const ve=Za(r)===o;return this.processSegment(_,c,H,me,ve?dn:o,!0).pipe(_t(Ye=>new ba(U,Ye instanceof ba?[Ye]:[])))}))):np(n)}))}getChildConfig(e,n,r){return n.children?Wt({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?Wt({routes:n._loadedRoutes,injector:n._loadedInjector}):function oie(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?Wt(!0):Wt(i.map(s=>{const a=ep(s,t);return Gc(function Wre(t){return t&&V_(t.canLoad)}(a)?a.canLoad(e,n):xi(t,()=>a(e,n)))})).pipe(tp(),hU())}(e,n,r).pipe(Yi(i=>i?this.configLoader.loadChildren(e,n).pipe(Xi(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function lie(t){return F0(aU(!1,Is.GuardRejected))}())):Wt({routes:[],injector:e})}}function Cie(t){const e=t.value.routeConfig;return e&&""===e.path}function pU(t){const e=[],n=new Set;for(const r of t){if(!Cie(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=pU(r.children);e.push(new ba(r.value,i))}return e.filter(r=>!n.has(r))}function gU(t){const e=t.children.map(n=>gU(n)).flat();return[t,...e]}function YS(t){return jr(e=>{const n=t(e);return n?Qn(n).pipe(_t(()=>e)):Wt(e)})}let mU=(()=>{var t;class e{buildTitle(r){let i,o=r.root;for(;void 0!==o;){var s;i=null!==(s=this.getResolvedTitleForRoute(o))&&void 0!==s?s:i,o=o.children.find(a=>a.outlet===dn)}return i}getResolvedTitleForRoute(r){return r.data[D_]}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>Be(xie),providedIn:"root"}),e})(),xie=(()=>{var t;class e extends mU{constructor(r){super(),this.title=r}updateTitle(r){const i=this.buildTitle(r);void 0!==i&&this.title.setTitle(i)}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(ute))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const rp=new lt("",{providedIn:"root",factory:()=>({})}),ip=new lt("");let XS=(()=>{var t;class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Be(NV)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Wt(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=Gc(r.loadComponent()).pipe(_t(_U),Xi(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),RS(()=>{this.componentLoaders.delete(r)})),o=new S$(i,()=>new $).pipe(DS());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Wt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function Mie(t,e,n,r){return Gc(t.loadChildren()).pipe(_t(_U),Yi(i=>i instanceof YO||Array.isArray(i)?Wt(i):Qn(e.compileModuleAsync(i))),_t(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(ip,[],{optional:!0,self:!0}).flat()),{routes:s.map(GS),injector:o}}))}(i,this.compiler,r,this.onLoadEndListener).pipe(RS(()=>{this.childrenLoaders.delete(i)})),a=new S$(s,()=>new $).pipe(DS());return this.childrenLoaders.set(i,a),a}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function _U(t){return function Nie(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let ZS=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>Be(kie),providedIn:"root"}),e})(),kie=(()=>{var t;class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const vU=new lt(""),yU=new lt("");function Oie(t,e,n){const r=t.get(yU),i=t.get(Qo);return t.get(xe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o;const s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),function Fie(t){return new Promise(e=>{hO(e,{injector:t})})}(t))),{onViewTransitionCreated:l}=r;return l&&xi(t,()=>l({transition:a,from:e,to:n})),s})}let Z0=(()=>{var t;class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $,this.transitionAbortSubject=new $,this.configLoader=Be(XS),this.environmentInjector=Be(qr),this.urlSerializer=Be(_d),this.rootContexts=Be(vd),this.location=Be($c),this.inputBindingEnabled=null!==Be(K0,{optional:!0}),this.titleStrategy=Be(mU),this.options=Be(rp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Be(ZS),this.createViewTransition=Be(vU,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Wt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new wre(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new Ere(o))}complete(){var r;null===(r=this.transitions)||void 0===r||r.complete()}handleNavigationRequest(r){var i;const o=++this.navigationId;null===(i=this.transitions)||void 0===i||i.next({...this.transitions.value,...r,id:o})}setupNavigations(r,i,o){return this.transitions=new K({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:M_,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ys(s=>0!==s.id),_t(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),jr(s=>{let a=!1,l=!1;return Wt(s).pipe(jr(c=>{var h;if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Is.SupersededByNewNavigation),Ca;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const p=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=null!==(h=c.extras.onSameUrlNavigation)&&void 0!==h?h:r.onSameUrlNavigation;if(!p&&"reload"!==m){const _="";return this.events.next(new Zf(c.id,this.urlSerializer.serialize(c.rawUrl),_,W0.IgnoredSameUrlNavigation)),c.resolve(null),Ca}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Wt(c).pipe(jr(_=>{var w,T;const S=null===(w=this.transitions)||void 0===w?void 0:w.getValue();return this.events.next(new N_(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),S!==(null===(T=this.transitions)||void 0===T?void 0:T.getValue())?Ca:Promise.resolve(_)}),function Aie(t,e,n,r,i,o){return Yi(s=>function yie(t,e,n,r,i,o,s="emptyOnly"){return new Eie(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(_t(({state:a,tree:l})=>({...s,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Xi(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const w=new Q$(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(w)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:_,extractedUrl:w,source:T,restoredState:S,extras:U}=c,H=new N_(_,this.urlSerializer.serialize(w),T,S);this.events.next(H);const me=J$(this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:me,urlAfterRedirects:w,extras:{...U,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=w,Wt(s)}{const _="";return this.events.next(new Zf(c.id,this.urlSerializer.serialize(c.extractedUrl),_,W0.IgnoredByUrlHandlingStrategy)),c.resolve(null),Ca}}),Xi(c=>{const h=new _re(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),_t(c=>(this.currentTransition=s={...c,guards:Ure(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function Xre(t,e){return Yi(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Wt({...n,guardsResult:!0}):function Zre(t,e,n,r){return Qn(t).pipe(Yi(i=>function iie(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Wt(o.map(a=>{var l;const c=null!==(l=O_(e))&&void 0!==l?l:i,h=ep(a,c);return Gc(function Qre(t){return t&&V_(t.canDeactivate)}(h)?h.canDeactivate(t,e,n,r):xi(c,()=>h(t,e,n,r))).pipe(zc())})).pipe(tp()):Wt(!0)}(i.component,i.route,n,e,r)),zc(i=>!0!==i,!0))}(s,r,i,t).pipe(Yi(a=>a&&function Gre(t){return"boolean"==typeof t}(a)?function Jre(t,e,n,r){return Qn(e).pipe(A_(i=>AS(function tie(t,e){return null!==t&&e&&e(new Cre(t)),Wt(!0)}(i.route.parent,r),function eie(t,e){return null!==t&&e&&e(new Tre(t)),Wt(!0)}(i.route,r),function rie(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function jre(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>D$(()=>Wt(s.guards.map(l=>{var c;const h=null!==(c=O_(s.node))&&void 0!==c?c:n,p=ep(l,h);return Gc(function Kre(t){return t&&V_(t.canActivateChild)}(p)?p.canActivateChild(r,t):xi(h,()=>p(r,t))).pipe(zc())})).pipe(tp())));return Wt(o).pipe(tp())}(t,i.path,n),function nie(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Wt(!0);const i=r.map(o=>D$(()=>{var s;const a=null!==(s=O_(e))&&void 0!==s?s:n,l=ep(o,a);return Gc(function qre(t){return t&&V_(t.canActivate)}(l)?l.canActivate(e,t):xi(a,()=>l(e,t))).pipe(zc())}));return Wt(i).pipe(tp())}(t,i.route,n))),zc(i=>!0!==i,!0))}(r,o,t,e):Wt(a)),_t(a=>({...n,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),Xi(c=>{if(s.guardsResult=c.guardsResult,Yf(c.guardsResult))throw sU(0,c.guardsResult);const h=new vre(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),ys(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",Is.GuardRejected),!1)),YS(c=>{if(c.guards.canActivateChecks.length)return Wt(c).pipe(Xi(h=>{const p=new yre(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),jr(h=>{let p=!1;return Wt(h).pipe(function Die(t,e){return Yi(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Wt(n);const o=new Set(i.map(l=>l.route)),s=new Set;for(const l of o)if(!s.has(l))for(const c of gU(l))s.add(c);let a=0;return Qn(s).pipe(A_(l=>o.has(l)?function Sie(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==(null==i?void 0:i.title)&&!nU(i)&&(o[D_]=i.title),function Rie(t,e,n,r){const i=PS(t);if(0===i.length)return Wt({});const o={};return Qn(i).pipe(Yi(s=>function Pie(t,e,n,r){var i;const o=null!==(i=O_(e))&&void 0!==i?i:r,s=ep(t,o);return Gc(s.resolve?s.resolve(e,n):xi(o,()=>s(e,n)))}(t[s],e,n,r).pipe(zc(),Xi(a=>{o[s]=a}))),SS(1),function Une(t){return _t(()=>t)}(o),gd(s=>dU(s)?Ca:F0(s)))}(o,t,e,r).pipe(_t(s=>(t._resolvedData=s,t.data=$S(t,t.parent,n).resolve,null)))}(l,r,t,e):(l.data=$S(l,l.parent,t).resolve,Wt(void 0))),Xi(()=>a++),SS(1),Yi(l=>a===s.size?Wt(n):Ca))})}(this.paramsInheritanceStrategy,this.environmentInjector),Xi({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",Is.NoDataFromResolver)}}))}),Xi(h=>{const p=new Ire(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),YS(c=>{const h=p=>{var m;const _=[];null!==(m=p.routeConfig)&&void 0!==m&&m.loadComponent&&!p.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(p.routeConfig).pipe(Xi(w=>{p.component=w}),_t(()=>{})));for(const w of p.children)_.push(...h(w));return _};return k0(h(c.targetSnapshot.root)).pipe(V0(null),qf(1))}),YS(()=>this.afterPreactivation()),jr(()=>{var c;const{currentSnapshot:h,targetSnapshot:p}=s,m=null===(c=this.createViewTransition)||void 0===c?void 0:c.call(this,this.environmentInjector,h.root,p.root);return m?Qn(m).pipe(_t(()=>s)):Wt(s)}),_t(c=>{const h=function Pre(t,e,n){const r=k_(t,e._root,n?n._root:void 0);return new Z$(r,e)}(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:h},this.currentNavigation.targetRouterState=h,s}),Xi(()=>{this.events.next(new FS)}),((t,e,n,r)=>_t(i=>(new $re(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),qf(1),Xi({next:c=>{var h;a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Hl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),null===(h=this.titleStrategy)||void 0===h||h.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),function jne(t){return bt((e,n)=>{Yo(t).subscribe(Ot(n,()=>n.complete(),Qt)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(Xi(c=>{throw c}))),RS(()=>{var c;!a&&!l&&this.cancelNavigationTransition(s,"",Is.SupersededByNewNavigation),(null===(c=this.currentTransition)||void 0===c?void 0:c.id)===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),gd(c=>{if(l=!0,lU(c))this.events.next(new Xf(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function Nre(t){return lU(t)&&Yf(t.url)}(c)?this.events.next(new LS(c.url)):s.resolve(!1);else{var h;this.events.next(new q0(s.id,this.urlSerializer.serialize(s.extractedUrl),c,null!==(h=s.targetSnapshot)&&void 0!==h?h:void 0));try{s.resolve(r.errorHandler(c))}catch(p){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(p)}}return Ca}))}))}cancelNavigationTransition(r,i,o){const s=new Xf(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){var r,i;return(null===(r=this.currentTransition)||void 0===r?void 0:r.extractedUrl.toString())!==(null===(i=this.currentTransition)||void 0===i?void 0:i.currentUrlTree.toString())}isUpdatedBrowserUrl(){var r,i;return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==(null===(r=this.currentTransition)||void 0===r?void 0:r.extractedUrl.toString())&&!(null!==(i=this.currentTransition)&&void 0!==i&&i.extras.skipLocationChange)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function Lie(t){return t!==M_}let Vie=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>Be($ie),providedIn:"root"}),e})();class Bie{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let $ie=(()=>{var t;class e extends Bie{}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=xn(t)))(i||t)}})(),t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),IU=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>Be(Uie),providedIn:"root"}),e})(),Uie=(()=>{var t;class e extends IU{constructor(){super(...arguments),this.location=Be($c),this.urlSerializer=Be(_d),this.options=Be(rp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Be(ZS),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Qf,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=J$(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){var r,i;return"computed"!==this.canceledNavigationResolution?this.currentPageId:null!==(r=null===(i=this.restoredState())||void 0===i?void 0:i.\u0275routerPageId)&&void 0!==r?r:this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{"popstate"===i.type&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof N_)this.stateMemento=this.createStateMemento();else if(r instanceof Zf)this.rawUrlTree=i.initialUrl;else if(r instanceof Q$){if("eager"===this.urlUpdateStrategy&&!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof FS?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Xf&&(r.code===Is.GuardRejected||r.code===Is.NoDataFromResolver)?this.restoreHistory(i):r instanceof q0?this.restoreHistory(i,!0):r instanceof Hl&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){const o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){const a={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(o,"",a)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(o,"",s)}}restoreHistory(r,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&0===s&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){var i;this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,null!==(i=r.finalUrl)&&void 0!==i?i:this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=xn(t)))(i||t)}})(),t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var B_=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(B_||{});function EU(t,e){t.events.pipe(ys(n=>n instanceof Hl||n instanceof Xf||n instanceof q0||n instanceof Zf),_t(n=>n instanceof Hl||n instanceof Zf?B_.COMPLETE:n instanceof Xf&&(n.code===Is.Redirect||n.code===Is.SupersededByNewNavigation)?B_.REDIRECTING:B_.FAILED),ys(n=>n!==B_.REDIRECTING),qf(1)).subscribe(()=>{e()})}function jie(t){throw t}const Hie={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zie={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vr=(()=>{var t;class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){var r,i;this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Be(bV),this.stateManager=Be(IU),this.options=Be(rp,{optional:!0})||{},this.pendingTasks=Be(gf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Be(Z0),this.urlSerializer=Be(_d),this.location=Be($c),this.urlHandlingStrategy=Be(ZS),this._events=new $,this.errorHandler=this.options.errorHandler||jie,this.navigated=!1,this.routeReuseStrategy=Be(Vie),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=null!==(r=null===(i=Be(ip,{optional:!0}))||void 0===i?void 0:i.flat())&&void 0!==r?r:[],this.componentInputBindingEnabled=!!Be(K0,{optional:!0}),this.eventsSubscription=new ue,this.isNgZoneEnabled=Be(xe)instanceof xe&&xe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:o=>{this.console.warn(o)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const r=this.navigationTransitions.events.subscribe(i=>{try{const o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==o&&null!==s)if(this.stateManager.handleRouterEvent(i,s),i instanceof Xf&&i.code!==Is.Redirect&&i.code!==Is.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Hl)this.navigated=!0;else if(i instanceof LS){const a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Lie(o.source)};this.scheduleNavigation(a,M_,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}(function Wie(t){return!(t instanceof FS||t instanceof LS)})(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),M_,this.stateManager.restoredState())}setUpLocationChangeListener(){var r;null!==(r=this.nonRouterCurrentEntryChangeSubscription)&&void 0!==r||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,o)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",o)},0)}))}navigateToSyncWithBrowser(r,i,o){const s={replaceUrl:!0},a=null!=o&&o.navigationId?o:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const l=this.parseUrl(r);this.scheduleNavigation(l,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(GS),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){const{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,h=c?this.currentUrlTree.fragment:a;let m,p=null;switch(l){case"merge":p={...this.currentUrlTree.queryParams,...s};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}null!==p&&(p=this.removeEmptyProps(p));try{m=j$(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof r[0]||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return H$(m,r,p,null!=h?h:null)}navigateByUrl(r,i={skipLocationChange:!1}){const o=Yf(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,M_,null,i)}navigate(r,i={skipLocationChange:!1}){return function Gie(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new Se(4008,!1)}(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(o=!0===i?{...Hie}:!1===i?{...zie}:i,Yf(r))return N$(this.currentUrlTree,r,o);const s=this.parseUrl(r);return N$(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(null!=s&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,c,h;a?(l=a.resolve,c=a.reject,h=a.promise):h=new Promise((m,_)=>{l=m,c=_});const p=this.pendingTasks.add();return EU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:l,reject:c,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Ks=(()=>{var t;class e{constructor(r,i,o,s,a,l){var c;this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new $,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const h=null===(c=a.nativeElement.tagName)||void 0===c?void 0:c.toLowerCase();this.isAnchorElement="a"===h||"area"===h,this.isAnchorElement?this.subscription=r.events.subscribe(p=>{p instanceof Hl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){null!=r?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){const l=this.urlTree;return!!(null===l||this.isAnchorElement&&(0!==r||i||o||s||a||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(l,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){var r;null===(r=this.subscription)||void 0===r||r.unsubscribe()}updateHref(){var r;const i=this.urlTree;this.href=null!==i&&this.locationStrategy?null===(r=this.locationStrategy)||void 0===r?void 0:r.prepareExternalUrl(this.router.serializeUrl(i)):null;const o=null===this.href?null:function sk(t,e,n){return function Aq(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?ok:ma}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",o)}applyAttributeValue(r,i){const o=this.renderer,s=this.el.nativeElement;null!==i?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(t=e).\u0275fac=function(r){return new(r||t)(E(vr),E(Ta),pa("tabindex"),E(Nl),E(He),E(Ia))},t.\u0275dir=xt({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&kt("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Gs("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[tr.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Uf],skipLocationChange:[tr.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Uf],replaceUrl:[tr.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Uf],routerLink:"routerLink"},standalone:!0,features:[QO,Ki]}),e})();class wU{}let Qie=(()=>{var t;class e{preload(r,i){return i().pipe(gd(()=>Wt(null)))}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Yie=(()=>{var t;class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(ys(r=>r instanceof Hl),A_(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){const o=[];for(const c of i){var s,a;c.providers&&!c._injector&&(c._injector=xE(c.providers,r,`Route: ${c.path}`));const h=null!==(s=c._injector)&&void 0!==s?s:r,p=null!==(a=c._loadedInjector)&&void 0!==a?a:h;var l;(c.loadChildren&&!c._loadedRoutes&&void 0===c.canLoad||c.loadComponent&&!c._loadedComponent)&&o.push(this.preloadConfig(h,c)),(c.children||c._loadedRoutes)&&o.push(this.processRoutes(p,null!==(l=c.children)&&void 0!==l?l:c._loadedRoutes))}return Qn(o).pipe(Wf())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;o=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(r,i):Wt(null);const s=o.pipe(Yi(a=>{var l;return null===a?Wt(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(null!==(l=a.injector)&&void 0!==l?l:r,a.routes))}));return i.loadComponent&&!i._loadedComponent?Qn([s,this.loader.loadComponent(i)]).pipe(Wf()):s})}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(vr),Ve(NV),Ve(qr),Ve(wU),Ve(XS))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const JS=new lt("");let CU=(()=>{var t;class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||(a.scrollPositionRestoration="disabled"),a.anchorScrolling||(a.anchorScrolling="disabled")}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof N_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Hl?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Zf&&r.code===W0.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Y$&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Y$(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){var r,i;null===(r=this.routerEventsSubscription)||void 0===r||r.unsubscribe(),null===(i=this.scrollEventsSubscription)||void 0===i||i.unsubscribe()}}return(t=e).\u0275fac=function(r){!function Pk(){throw new Error("invalid")}()},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();function Ja(t,e){return{\u0275kind:t,\u0275providers:e}}function TU(){const t=Be(tt);return e=>{var n,r;const i=t.get(Fl);if(e!==i.components[0])return;const o=t.get(vr),s=t.get(AU);1===t.get(eR)&&o.initialNavigation(),null===(n=t.get(DU,null,vn.Optional))||void 0===n||n.setUpPreloading(),null===(r=t.get(JS,null,vn.Optional))||void 0===r||r.init(),o.resetRootComponentType(i.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const AU=new lt("",{factory:()=>new $}),eR=new lt("",{providedIn:"root",factory:()=>1}),DU=new lt("");function eoe(t){return Ja(0,[{provide:DU,useExisting:Yie},{provide:wU,useExisting:t}])}function noe(t){return Ja(9,[{provide:vU,useValue:Oie},{provide:yU,useValue:{skipNextTransition:!(null==t||!t.skipInitialTransition),...t}}])}const SU=new lt("ROUTER_FORROOT_GUARD"),roe=[$c,{provide:_d,useClass:xS},vr,vd,{provide:Ta,useFactory:function bU(t){return t.routerState.root},deps:[vr]},XS,[]];let tR=(()=>{var t;class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[roe,[],{provide:ip,multi:!0,useValue:r},{provide:SU,useFactory:aoe,deps:[[vr,new El,new hc]]},{provide:rp,useValue:i||{}},null!=i&&i.useHash?{provide:Ia,useClass:T2}:{provide:Ia,useClass:b2},{provide:JS,useFactory:()=>{const t=Be(cee),e=Be(xe),n=Be(rp),r=Be(Z0),i=Be(_d);return n.scrollOffset&&t.setOffset(n.scrollOffset),new CU(i,r,t,e,n)}},null!=i&&i.preloadingStrategy?eoe(i.preloadingStrategy).\u0275providers:[],null!=i&&i.initialNavigation?loe(i):[],null!=i&&i.bindToComponentInputs?Ja(8,[iU,{provide:K0,useExisting:iU}]).\u0275providers:[],null!=i&&i.enableViewTransitions?noe().\u0275providers:[],[{provide:RU,useFactory:TU},{provide:gD,multi:!0,useExisting:RU}]]}}static forChild(r){return{ngModule:e,providers:[{provide:ip,multi:!0,useValue:r}]}}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(SU,8))},t.\u0275mod=Uo({type:t}),t.\u0275inj=On({}),e})();function aoe(t){return"guarded"}function loe(t){return["disabled"===t.initialNavigation?Ja(3,[{provide:JE,multi:!0,useFactory:()=>{const e=Be(vr);return()=>{e.setUpLocationChangeListener()}}},{provide:eR,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Ja(2,[{provide:eR,useValue:0},{provide:JE,multi:!0,deps:[tt],useFactory:e=>{const n=e.get($Z,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(vr),o=e.get(AU);EU(i,()=>{r(!0)}),e.get(Z0).afterPreactivation=()=>(r(!0),o.closed?Wt(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const RU=new lt("");class uoe{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,n){const r=this.m.get(e);return void 0!==r?r:n}getBoolean(e,n=!1){const r=this.m.get(e);return void 0===r?n:"string"==typeof r?"true"===r:!!r}getNumber(e,n){const r=parseFloat(this.m.get(e));return isNaN(r)?void 0!==n?n:NaN:r}set(e,n){this.m.set(e,n)}}const Wc=new uoe,MU=t=>kU(t),kU=(t=window)=>{if(typeof t>"u")return[];t.Ionic=t.Ionic||{};let e=t.Ionic.platforms;return null==e&&(e=t.Ionic.platforms=goe(t),e.forEach(n=>t.document.documentElement.classList.add(`plt-${n}`))),e},goe=t=>{const e=Wc.get("platform");return Object.keys(BU).filter(n=>{const r=null==e?void 0:e[n];return"function"==typeof r?r(t):BU[n](t)})},nR=t=>!!(yd(t,/iPad/i)||yd(t,/Macintosh/i)&&J0(t)),OU=t=>yd(t,/android|sink/i),J0=t=>Toe(t,"(any-pointer:coarse)"),FU=t=>LU(t)||VU(t),LU=t=>!!(t.cordova||t.phonegap||t.PhoneGap),VU=t=>{const e=t.Capacitor;return!(null==e||!e.isNative)},yd=(t,e)=>e.test(t.navigator.userAgent),Toe=(t,e)=>{var n;return null===(n=t.matchMedia)||void 0===n?void 0:n.call(t,e).matches},BU={ipad:nR,iphone:t=>yd(t,/iPhone/i),ios:t=>yd(t,/iPhone|iPod/i)||nR(t),android:OU,phablet:t=>{const e=t.innerWidth,n=t.innerHeight,r=Math.min(e,n),i=Math.max(e,n);return r>390&&r<520&&i>620&&i<800},tablet:t=>{const e=t.innerWidth,n=t.innerHeight,r=Math.min(e,n),i=Math.max(e,n);return nR(t)||(t=>OU(t)&&!yd(t,/mobile/i))(t)||r>460&&r<820&&i>780&&i<1400},cordova:LU,capacitor:VU,electron:t=>yd(t,/electron/i),pwa:t=>{var e;return!!(null!==(e=t.matchMedia)&&void 0!==e&&e.call(t,"(display-mode: standalone)").matches||t.navigator.standalone)},mobile:J0,mobileweb:t=>J0(t)&&!FU(t),desktop:t=>!J0(t),hybrid:FU};var $_=ce(6031),Aoe=ce(1656);function UU(t,e=Cr){return t=null!=t?t:Noe,bt((n,r)=>{let i,o=!0;n.subscribe(Ot(r,s=>{const a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function Noe(t,e){return t===e}let Ooe=(()=>{class t{constructor(n,r){this.doc=n,this.backButton=new $,this.keyboardDidShow=new $,this.keyboardDidHide=new $,this.pause=new $,this.resume=new $,this.resize=new $,r.run(()=>{var i;let o;this.win=n.defaultView,this.backButton.subscribeWithPriority=function(s,a){return this.subscribe(l=>l.register(s,c=>r.run(()=>a(c))))},sp(this.pause,n,"pause",r),sp(this.resume,n,"resume",r),sp(this.backButton,n,"ionBackButton",r),sp(this.resize,this.win,"resize",r),sp(this.keyboardDidShow,this.win,"ionKeyboardDidShow",r),sp(this.keyboardDidHide,this.win,"ionKeyboardDidHide",r),this._readyPromise=new Promise(s=>{o=s}),null!==(i=this.win)&&void 0!==i&&i.cordova?n.addEventListener("deviceready",()=>{o("cordova")},{once:!0}):o("dom")})}is(n){return((t,e)=>("string"==typeof t&&(e=t,t=void 0),MU(t).includes(e)))(this.win,n)}platforms(){return MU(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(n){return Foe(this.win.location.href,n)}isLandscape(){return!this.isPortrait()}isPortrait(){var n,r;return null===(n=(r=this.win).matchMedia)||void 0===n?void 0:n.call(r,"(orientation: portrait)").matches}testUserAgent(n){const r=this.win.navigator;return!!(null!=r&&r.userAgent&&r.userAgent.indexOf(n)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return t.\u0275fac=function(n){return new(n||t)(Ve(Qo),Ve(xe))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Foe=(t,e)=>{e=e.replace(/[[\]\\]/g,"\\$&");const r=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return r?decodeURIComponent(r[1].replace(/\+/g," ")):null},sp=(t,e,n,r)=>{e&&e.addEventListener(n,i=>{r.run(()=>{t.next(null!=i?i.detail:void 0)})})};let ap=(()=>{class t{constructor(n,r,i,o){this.location=r,this.serializer=i,this.router=o,this.direction=jU,this.animated=HU,this.guessDirection="forward",this.lastNavId=-1,o&&o.events.subscribe(s=>{if(s instanceof N_){const a=s.restoredState?s.restoredState.navigationId:s.id;this.guessDirection=a<this.lastNavId?"back":"forward",this.guessAnimation=s.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?s.id:a}}),n.backButton.subscribeWithPriority(0,s=>{this.pop(),s()})}navigateForward(n,r={}){return this.setDirection("forward",r.animated,r.animationDirection,r.animation),this.navigate(n,r)}navigateBack(n,r={}){return this.setDirection("back",r.animated,r.animationDirection,r.animation),this.navigate(n,r)}navigateRoot(n,r={}){return this.setDirection("root",r.animated,r.animationDirection,r.animation),this.navigate(n,r)}back(n={animated:!0,animationDirection:"back"}){return this.setDirection("back",n.animated,n.animationDirection,n.animation),this.location.back()}pop(){var n=this;return(0,y.A)(function*(){let r=n.topOutlet;for(;r;){if(yield r.pop())return!0;r=r.parentOutlet}return!1})()}setDirection(n,r,i,o){this.direction=n,this.animated=Loe(n,r,i),this.animationBuilder=o}setTopOutlet(n){this.topOutlet=n}consumeTransition(){let r,n="root";const i=this.animationBuilder;return"auto"===this.direction?(n=this.guessDirection,r=this.guessAnimation):(r=this.animated,n=this.direction),this.direction=jU,this.animated=HU,this.animationBuilder=void 0,{direction:n,animation:r,animationBuilder:i}}navigate(n,r){if(Array.isArray(n))return this.router.navigate(n,r);{const i=this.serializer.parse(n.toString());return void 0!==r.queryParams&&(i.queryParams={...r.queryParams}),void 0!==r.fragment&&(i.fragment=r.fragment),this.router.navigateByUrl(i,r)}}}return t.\u0275fac=function(n){return new(n||t)(Ve(Ooe),Ve($c),Ve(_d),Ve(vr,8))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Loe=(t,e,n)=>{if(!1!==e){if(void 0!==n)return n;if("forward"===t||"back"===t)return t;if("root"===t&&!0===e)return"forward"}},jU="auto",HU=void 0;let rR=(()=>{class t{get(n,r){const i=iR();return i?i.get(n,r):null}getBoolean(n,r){const i=iR();return!!i&&i.getBoolean(n,r)}getNumber(n,r){const i=iR();return i?i.getNumber(n,r):0}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const zU=new lt("USERCONFIG"),iR=()=>{if(typeof window<"u"){const t=window.Ionic;if(null!=t&&t.config)return t.config}return null};class GU{constructor(e={}){this.data=e}get(e){return this.data[e]}}let U_=(()=>{class t{constructor(){this.zone=Be(xe),this.applicationRef=Be(Fl)}create(n,r,i){return new Voe(n,r,this.applicationRef,this.zone,i)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac}),t})();class Voe{constructor(e,n,r,i,o){this.environmentInjector=e,this.injector=n,this.applicationRef=r,this.zone=i,this.elementReferenceKey=o,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(e,n,r,i){return this.zone.run(()=>new Promise(o=>{const s={...r};void 0!==this.elementReferenceKey&&(s[this.elementReferenceKey]=e),o(Boe(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,e,n,s,i,this.elementReferenceKey))}))}removeViewFromDom(e,n){return this.zone.run(()=>new Promise(r=>{const i=this.elRefMap.get(n);if(i){i.destroy(),this.elRefMap.delete(n);const o=this.elEventsMap.get(n);o&&(o(),this.elEventsMap.delete(n))}r()}))}}const Boe=(t,e,n,r,i,o,s,a,l,c,h)=>{const m=function LZ(t,e){const n=nn(t),r=e.elementInjector||Ih();return new Gm(n).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}(a,{environmentInjector:e,elementInjector:tt.create({providers:Uoe(l),parent:n})}),_=m.instance,w=m.location.nativeElement;if(l&&(h&&void 0!==_[h]&&console.error(`[Ionic Error]: ${h} is a reserved property when using ${s.tagName.toLowerCase()}. Rename or remove the "${h}" property from ${a.name}.`),Object.assign(_,l)),c)for(const S of c)w.classList.add(S);const T=WU(t,_,w);return s.appendChild(w),r.attachView(m.hostView),i.set(w,m),o.set(w,T),w},$oe=[$_.L,$_.a,$_.b,$_.c,$_.d],WU=(t,e,n)=>t.run(()=>{const r=$oe.filter(i=>"function"==typeof e[i]).map(i=>{const o=s=>e[i](s.detail);return n.addEventListener(i,o),()=>n.removeEventListener(i,o)});return()=>r.forEach(i=>i())}),qU=new lt("NavParamsToken"),Uoe=t=>[{provide:qU,useValue:t},{provide:GU,useFactory:joe,deps:[qU]}],joe=t=>new GU(t),KU=(t,e)=>((t=t.filter(n=>n.stackId!==e.stackId)).push(e),t),sR=(t,e)=>{const n=t.createUrlTree(["."],{relativeTo:e});return t.serializeUrl(n)},QU=(t,e)=>!e||t.stackId!==e.stackId,ese=(t,e)=>{if(!t)return;const n=YU(e);for(let r=0;r<n.length;r++){if(r>=t.length)return n[r];if(n[r]!==t[r])return}},YU=t=>t.split("/").map(e=>e.trim()).filter(e=>""!==e),XU=t=>{t&&(t.ref.destroy(),t.unlistenEvents())};class tse{constructor(e,n,r,i,o,s){this.containerEl=n,this.router=r,this.navCtrl=i,this.zone=o,this.location=s,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==e?YU(e):void 0}createView(e,n){var r;const i=sR(this.router,n),o=null==e||null===(r=e.location)||void 0===r?void 0:r.nativeElement,s=WU(this.zone,e.instance,o);return{id:this.nextId++,stackId:ese(this.tabsPrefix,i),unlistenEvents:s,element:o,ref:e,url:i}}getExistingView(e){const n=sR(this.router,e),r=this.views.find(i=>i.url===n);return r&&r.ref.changeDetectorRef.reattach(),r}setActive(e){var n,r;const i=this.navCtrl.consumeTransition();let{direction:o,animation:s,animationBuilder:a}=i;const l=this.activeView,c=QU(e,l);c&&(o="back",s=void 0);const h=this.views.slice();let p;const m=this.router;m.getCurrentNavigation?p=m.getCurrentNavigation():null!==(n=m.navigations)&&void 0!==n&&n.value&&(p=m.navigations.value),null!==(r=p)&&void 0!==r&&null!==(r=r.extras)&&void 0!==r&&r.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const _=this.views.includes(e),w=this.insertView(e,o);_||e.ref.changeDetectorRef.detectChanges();const T=e.animationBuilder;return void 0===a&&"back"===o&&!c&&void 0!==T&&(a=T),l&&(l.animationBuilder=a),this.zone.runOutsideAngular(()=>this.wait(()=>(l&&l.ref.changeDetectorRef.detach(),e.ref.changeDetectorRef.reattach(),this.transition(e,l,s,this.canGoBack(1),!1,a).then(()=>nse(e,w,h,this.location,this.zone)).then(()=>({enteringView:e,direction:o,animation:s,tabSwitch:c})))))}canGoBack(e,n=this.getActiveStackId()){return this.getStack(n).length>e}pop(e,n=this.getActiveStackId()){return this.zone.run(()=>{const r=this.getStack(n);if(r.length<=e)return Promise.resolve(!1);const i=r[r.length-e-1];let o=i.url;const s=i.savedData;if(s){var a;const c=s.get("primary");null!=c&&null!==(a=c.route)&&void 0!==a&&null!==(a=a._routerState)&&void 0!==a&&a.snapshot.url&&(o=c.route._routerState.snapshot.url)}const{animationBuilder:l}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(o,{...i.savedExtras,animation:l}).then(()=>!0)})}startBackTransition(){const e=this.activeView;if(e){const n=this.getStack(e.stackId),r=n[n.length-2],i=r.animationBuilder;return this.wait(()=>this.transition(r,e,"back",this.canGoBack(2),!0,i))}return Promise.resolve()}endBackTransition(e){e?(this.skipTransition=!0,this.pop(1)):this.activeView&&ZU(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(e){const n=this.getStack(e);return n.length>0?n[n.length-1]:void 0}getRootUrl(e){const n=this.getStack(e);return n.length>0?n[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}getActiveView(){return this.activeView}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(XU),this.activeView=void 0,this.views=[]}getStack(e){return this.views.filter(n=>n.stackId===e)}insertView(e,n){return this.activeView=e,this.views=((t,e,n)=>"root"===n?KU(t,e):"forward"===n?((t,e)=>(t.indexOf(e)>=0?t=t.filter(r=>r.stackId!==e.stackId||r.id<=e.id):t.push(e),t))(t,e):((t,e)=>t.indexOf(e)>=0?t.filter(r=>r.stackId!==e.stackId||r.id<=e.id):KU(t,e))(t,e))(this.views,e,n),this.views.slice()}transition(e,n,r,i,o,s){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(n===e)return Promise.resolve(!1);const a=e?e.element:void 0,l=n?n.element:void 0,c=this.containerEl;return a&&a!==l&&(a.classList.add("ion-page"),a.classList.add("ion-page-invisible"),a.parentElement!==c&&c.appendChild(a),c.commit)?c.commit(a,l,{duration:void 0===r?0:void 0,direction:r,showGoBack:i,progressAnimation:o,animationBuilder:s}):Promise.resolve(!1)}wait(e){var n=this;return(0,y.A)(function*(){void 0!==n.runningTask&&(yield n.runningTask,n.runningTask=void 0);const r=n.runningTask=e();return r.finally(()=>n.runningTask=void 0),r})()}}const nse=(t,e,n,r,i)=>"function"==typeof requestAnimationFrame?new Promise(o=>{requestAnimationFrame(()=>{ZU(t,e,n,r,i),o()})}):Promise.resolve(),ZU=(t,e,n,r,i)=>{i.run(()=>n.filter(o=>!e.includes(o)).forEach(XU)),e.forEach(o=>{const a=r.path().split("?")[0].split("#")[0];if(o!==t&&o.url!==a){const l=o.element;l.setAttribute("aria-hidden","true"),l.classList.add("ion-page-hidden"),o.ref.changeDetectorRef.detach()}})};let JU=(()=>{class t{constructor(n,r,i,o,s,a,l,c){this.parentOutlet=c,this.activatedView=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new K(null),this.activated=null,this._activatedRoute=null,this.name=dn,this.stackWillChange=new ar,this.stackDidChange=new ar,this.activateEvents=new ar,this.deactivateEvents=new ar,this.parentContexts=Be(vd),this.location=Be(Hs),this.environmentInjector=Be(qr),this.inputBinder=Be(ej,{optional:!0}),this.supportsBindingToComponentInputs=!0,this.config=Be(rR),this.navCtrl=Be(ap),this.nativeEl=o.nativeElement,this.name=n||dn,this.tabsPrefix="true"===r?sR(s,l):void 0,this.stackCtrl=new tse(this.tabsPrefix,this.nativeEl,s,this.navCtrl,a,i),this.parentContexts.onChildOutletCreated(this.name,this)}get activatedComponentRef(){return this.activated}set animation(n){this.nativeEl.animation=n}set animated(n){this.nativeEl.animated=n}set swipeGesture(n){this._swipeGesture=n,this.nativeEl.swipeHandler=n?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:r=>this.stackCtrl.endBackTransition(r)}:void 0}ngOnDestroy(){var n;this.stackCtrl.destroy(),null===(n=this.inputBinder)||void 0===n||n.unsubscribeFromRouteData(this)}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const n=this.getContext();null!=n&&n.route&&this.activateWith(n.route,n.injector)}new Promise(n=>(0,Aoe.c)(this.nativeEl,n)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(n,r){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const r=this.getContext();this.activatedView.savedData=new Map(r.children.contexts);const i=this.activatedView.savedData.get("primary");if(i&&r.route&&(i.route={...r.route}),this.activatedView.savedExtras={},r.route){const o=r.route.snapshot;this.activatedView.savedExtras.queryParams=o.queryParams,this.activatedView.savedExtras.fragment=o.fragment}}const n=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){var i;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;let o,s=this.stackCtrl.getExistingView(n);if(s){o=this.activated=s.ref;const c=s.savedData;c&&(this.getContext().children.contexts=c),this.updateActivatedRouteProxy(o.instance,n)}else{var a;const c=n._futureSnapshot,h=this.parentContexts.getOrCreateContext(this.name).children,p=new K(null),m=this.createActivatedRouteProxy(p,n),_=new rse(m,h,this.location.injector),w=null!==(a=c.routeConfig.component)&&void 0!==a?a:c.component;o=this.activated=this.location.createComponent(w,{index:this.location.length,injector:_,environmentInjector:null!=r?r:this.environmentInjector}),p.next(o.instance),s=this.stackCtrl.createView(this.activated,n),this.proxyMap.set(o.instance,m),this.currentActivatedRoute$.next({component:o.instance,activatedRoute:n})}null===(i=this.inputBinder)||void 0===i||i.bindActivatedRouteToOutletComponent(this),this.activatedView=s,this.navCtrl.setTopOutlet(this);const l=this.stackCtrl.getActiveView();this.stackWillChange.emit({enteringView:s,tabSwitch:QU(s,l)}),this.stackCtrl.setActive(s).then(c=>{this.activateEvents.emit(o.instance),this.stackDidChange.emit(c)})}canGoBack(n=1,r){return this.stackCtrl.canGoBack(n,r)}pop(n=1,r){return this.stackCtrl.pop(n,r)}getLastUrl(n){const r=this.stackCtrl.getLastUrl(n);return r?r.url:void 0}getLastRouteView(n){return this.stackCtrl.getLastUrl(n)}getRootView(n){return this.stackCtrl.getRootUrl(n)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(n,r){const i=new Ta;return i._futureSnapshot=r._futureSnapshot,i._routerState=r._routerState,i.snapshot=r.snapshot,i.outlet=r.outlet,i.component=r.component,i._paramMap=this.proxyObservable(n,"paramMap"),i._queryParamMap=this.proxyObservable(n,"queryParamMap"),i.url=this.proxyObservable(n,"url"),i.params=this.proxyObservable(n,"params"),i.queryParams=this.proxyObservable(n,"queryParams"),i.fragment=this.proxyObservable(n,"fragment"),i.data=this.proxyObservable(n,"data"),i}proxyObservable(n,r){return n.pipe(ys(i=>!!i),jr(i=>this.currentActivatedRoute$.pipe(ys(o=>null!==o&&o.component===i),jr(o=>o&&o.activatedRoute[r]),UU())))}updateActivatedRouteProxy(n,r){const i=this.proxyMap.get(n);if(!i)throw new Error("Could not find activated route proxy for view");i._futureSnapshot=r._futureSnapshot,i._routerState=r._routerState,i.snapshot=r.snapshot,i.outlet=r.outlet,i.component=r.component,this.currentActivatedRoute$.next({component:n,activatedRoute:r})}}return t.\u0275fac=function(n){return new(n||t)(pa("name"),pa("tabs"),E($c),E(He),E(vr),E(xe),E(Ta),E(t,12))},t.\u0275dir=xt({type:t,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",name:"name"},outputs:{stackWillChange:"stackWillChange",stackDidChange:"stackDidChange",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class rse{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ta?this.route:e===vd?this.childContexts:this.parent.get(e,n)}}const ej=new lt("");let ise=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){var r;null===(r=this.outletDataSubscriptions.get(n))||void 0===r||r.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=k0([r.queryParams,r.params,r.data]).pipe(jr(([o,s,a],l)=>(a={...o,...s,...a},0===l?Wt(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=E2(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac}),t})();function sse(t){return null!=t&&t.componentInputBindingEnabled?new ise:null}let cse=(()=>{class t{constructor(n,r,i,o,s){this.locationStrategy=n,this.navCtrl=r,this.elementRef=i,this.router=o,this.routerLink=s,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var n;if(null!==(n=this.routerLink)&&void 0!==n&&n.urlTree){const r=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=r}}onClick(n){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),n.preventDefault()}}return t.\u0275fac=function(n){return new(n||t)(E(Ia),E(ap),E(He),E(vr),E(Ks,8))},t.\u0275dir=xt({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(n,r){1&n&&kt("click",function(o){return r.onClick(o)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[Ki]}),t})();const tj=t=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(t):"function"==typeof requestAnimationFrame?requestAnimationFrame(t):setTimeout(t);class nj{constructor(e){this.ctrl=e}create(e){return this.ctrl.create(e||{})}dismiss(e,n,r){return this.ctrl.dismiss(e,n,r)}getTop(){return this.ctrl.getTop()}}ce(3503),ce(1497),ce(2604),ce(3003),ce(405);var _se=ce(8436),vse=ce(464),rj=(ce(7818),ce(4133)),yse=(ce(8476),ce(9081));ce(8221),ce(9457);const Ese=_se.i,wse=function(){var t=(0,y.A)(function*(e,n){if(!(typeof window>"u"))return yield Ese(),(0,yse.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[1,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"positionAnchor":[1,"position-anchor"],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"swipeGesture":[1,"swipe-gesture"],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"swipeGesture":["swipeGestureChanged"],"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]},null,{"value":["valueChanged"]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"placeholder":["placeholderChanged"],"value":["valueChanged"]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"lang":["onLangChanged"],"dir":["onDirChanged"],"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"activated":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"button":["buttonChanged"],"counterFormatter":["counterFormatterChanged"]}],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"formatOptions":[16],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"formatOptions":["formatOptionsChanged"],"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"presentation":["presentationChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[32,"ion-picker-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"],"checked":["styleChanged"],"color":["styleChanged"],"disabled":["styleChanged"]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"compareWith":[1,"compare-with"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]},null,{"disabled":["disabledChanged"]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[33,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"disabled":[4],"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]},null,{"value":["valueChange"]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"legacy":[4]},null,{"checked":["styleChanged"],"disabled":["styleChanged"]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),n)});return function(n,r){return t.apply(this,arguments)}}(),yt=["*"],Nse=(t,e)=>{const n=t.prototype;e.forEach(r=>{Object.defineProperty(n,r,{get(){return this.el[r]},set(i){this.z.runOutsideAngular(()=>this.el[r]=i)},configurable:!0})})},kse=(t,e)=>{const n=t.prototype;e.forEach(r=>{n[r]=function(){const i=arguments;return this.z.runOutsideAngular(()=>this.el[r].apply(this.el,i))}})};function Ct(t){return function(n){const{defineCustomElementFn:r,inputs:i,methods:o}=t;return void 0!==r&&r(),i&&Nse(n,i),o&&kse(n,o),n}}let el=(()=>{let t=class{constructor(n,r,i){this.z=i,n.detach(),this.el=r.nativeElement}};return t.\u0275fac=function(n){return new(n||t)(E(at),E(He),E(xe))},t.\u0275cmp=Ke({type:t,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:yt,decls:1,vars:0,template:function(n,r){1&n&&(function gt(t){const e=De()[Ar][fi];if(!e.projection){const r=e.projection=function fc(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(t?t.length:1,null),i=r.slice();let o=e.child;for(;null!==o;){const s=t?GQ(o,t):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}(),function ht(t,e=0,n){const r=De(),i=yn(),o=df(i,Jt+t,16,null,n||null);null===o.projection&&(o.projection=e),Bh(),(!r[so]||Cc())&&32&~o.flags&&function Yq(t,e,n){Ak(e[Yt],0,e,n,UT(t,n,e),Ik(n.parent||e[fi],n,e))}(i,r,o)}(0))},encapsulation:2,changeDetection:0}),t=(0,ct.Cg)([Ct({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],t),t})(),H_=(()=>{class t extends JU{constructor(n,r,i,o,s,a,l,c){super(n,r,i,o,s,a,l,c),this.parentOutlet=c}}return t.\u0275fac=function(n){return new(n||t)(pa("name"),pa("tabs"),E($c),E(He),E(vr),E(xe),E(Ta),E(t,12))},t.\u0275dir=xt({type:t,selectors:[["ion-router-outlet"]],features:[cn]}),t})(),qc=(()=>{class t extends cse{}return t.\u0275fac=(()=>{let e;return function(r){return(e||(e=xn(t)))(r||t)}})(),t.\u0275dir=xt({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],features:[cn]}),t})();const lle={provide:Li,useExisting:kn(()=>ij),multi:!0};let ij=(()=>{class t extends CS{}return t.\u0275fac=(()=>{let e;return function(r){return(e||(e=xn(t)))(r||t)}})(),t.\u0275dir=xt({type:t,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(n,r){2&n&&Gs("max",r._enabled?r.max:null)},features:[Wn([lle]),cn]}),t})();const cle={provide:Li,useExisting:kn(()=>oj),multi:!0};let oj=(()=>{class t extends bS{}return t.\u0275fac=(()=>{let e;return function(r){return(e||(e=xn(t)))(r||t)}})(),t.\u0275dir=xt({type:t,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,r){2&n&&Gs("min",r._enabled?r.min:null)},features:[Wn([cle]),cn]}),t})(),ule=(()=>{class t extends nj{constructor(){super(rj.m),this.angularDelegate=Be(U_),this.injector=Be(tt),this.environmentInjector=Be(qr)}create(n){return super.create({...n,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac}),t})();class dle extends nj{constructor(){super(rj.c),this.angularDelegate=Be(U_),this.injector=Be(tt),this.environmentInjector=Be(qr)}create(e){return super.create({...e,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}const hle=(t,e,n)=>()=>{const r=e.defaultView;if(r&&typeof window<"u"){(0,vse.s)({...t,_zoneGate:o=>n.run(o)});const i="__zone_symbol__addEventListener"in e.body?"__zone_symbol__addEventListener":"addEventListener";return function Ise(){var t=[];if(typeof window<"u"){var e=window;(!e.customElements||e.Element&&(!e.Element.prototype.closest||!e.Element.prototype.matches||!e.Element.prototype.remove||!e.Element.prototype.getRootNode))&&t.push(ce.e(7278).then(ce.t.bind(ce,2190,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||e.NodeList&&!e.NodeList.prototype.forEach||!e.fetch||!function(){try{var r=new URL("b","http://a");return r.pathname="c%20d","http://a/c%20d"===r.href&&r.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&t.push(ce.e(9329).then(ce.t.bind(ce,7783,23)))}return Promise.all(t)}().then(()=>wse(r,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:tj,jmp:o=>n.runOutsideAngular(o),ael(o,s,a,l){o[i](s,a,l)},rel(o,s,a,l){o.removeEventListener(s,a,l)}}))}};let fle=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:zU,useValue:n},{provide:JE,useFactory:hle,multi:!0,deps:[zU,Qo,xe]},{provide:ej,useFactory:sse,deps:[vr]}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Uo({type:t}),t.\u0275inj=On({providers:[U_,ule,dle],imports:[U2]}),t})(),sj=(()=>{var t;class e{constructor(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Ke({type:t,selectors:[["app-root"]],decls:1,vars:0,consts:[["id","main-content"]],template:function(r,i){1&r&&$e(0,"ion-router-outlet",0)},dependencies:[H_],styles:["ion-menu[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: var(--ion-item-background, var(--ion-background-color, #fff))}ion-menu.md[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--padding-top: 20px;--padding-bottom: 20px}ion-menu.md[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0}ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:30px}ion-menu.md[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:10px}ion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]{border-bottom:1px solid var(--ion-color-step-150, #d7d8da)}ion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:22px;font-weight:600;min-height:20px}ion-menu.md[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:16px;margin-bottom:18px;color:#757575;min-height:26px}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;border-radius:4px}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]{--background: rgba(var(--ion-color-primary-rgb), .14)}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#616e7e}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:500}ion-menu.ios[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 20px}ion-menu.ios[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0 0}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{line-height:24px;margin-bottom:20px}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--min-height: 50px}ion-menu.ios[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#73849a}ion-menu.ios[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{margin-bottom:8px}ion-menu.ios[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:8px}ion-note[_ngcontent-%COMP%]{display:inline-block;font-size:16px;color:var(--ion-color-medium-shade)}ion-item.selected[_ngcontent-%COMP%]{--color: var(--ion-color-primary)}"]}),e})();function z_(t){return(z_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function An(t,e,n){return(e=function gle(t){var e=function ple(t,e){if("object"!=z_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=z_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==z_(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ce(6020);var Xo=ce(7852);(0,Xo.registerVersion)("firebase","10.9.0","app");class vle extends ue{constructor(e,n){super()}schedule(e,n=0){return this}}const nw={setInterval(t,e,...n){const{delegate:r}=nw;return null!=r&&r.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=nw;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0};class aj extends vle{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return nw.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&nw.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ae(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const cR={now:()=>(cR.delegate||Date).now(),delegate:void 0};class G_{constructor(e,n=G_.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}G_.now=cR.now;class lj extends G_{constructor(e,n=G_.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const Ele=new class Ile extends lj{}(class yle extends aj{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),uR=new lj(aj),dR=new Bf("ANGULARFIRE2_VERSION");class hR{constructor(){return((t,e)=>{const n=(0,Xo.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r})(Cle)}}const Cle="app-check";function cp(){}class cj{constructor(e,n=Ele){An(this,"zone",void 0),An(this,"delegate",void 0),this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},n,r)}}class ble{constructor(e){An(this,"zone",void 0),An(this,"task",null),this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",cp,{},cp,cp)),n.pipe(Xi({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let fR=(()=>{var t;class e{constructor(r){An(this,"ngZone",void 0),An(this,"outsideAngular",void 0),An(this,"insideAngular",void 0),this.ngZone=r,this.outsideAngular=r.runOutsideAngular(()=>new cj(Zone.current)),this.insideAngular=r.run(()=>new cj(Zone.current,uR)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t=e,An(e,"\u0275fac",function(r){return new(r||t)(Ve(xe))}),An(e,"\u0275prov",je({token:t,factory:t.\u0275fac,providedIn:"root"})),e})();function up(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function uj(t){return t.pipe(Uc(up().outsideAngular))}function xo(t){return function Ale(t){return function(n){return(n=n.lift(new ble(t.ngZone))).pipe(Hf(t.outsideAngular),Uc(t.insideAngular))}}(up())(t)}var Ci=ce(3345);Ci.A.registerVersion("firebase","10.9.0","app-compat");const Ple=["ngOnDestroy"];class dj{constructor(e){return e}}const W_=new lt("angularfire2.app.options"),q_=new lt("angularfire2.app.name");function rw(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const s=Ci.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ci.A.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){const a=!!module.hot;Nle("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new dj(s)}const Nle=(t,...e)=>{},kle={provide:dj,useFactory:rw,deps:[W_,xe,[new El,q_]]};let Ole=(()=>{var t;class e{static initializeApp(r,i){return{ngModule:e,providers:[{provide:W_,useValue:r},{provide:q_,useValue:i}]}}constructor(r){Ci.A.registerVersion("angularfire",dR.full,"core"),Ci.A.registerVersion("angularfire",dR.full,"app-compat"),Ci.A.registerVersion("angular",ZY.full,r.toString())}}return t=e,An(e,"\u0275fac",function(r){return new(r||t)(Ve(ga))}),An(e,"\u0275mod",Uo({type:t})),An(e,"\u0275inj",On({providers:[kle]})),e})();function pR(t,e,n,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return function Fle(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,s)||(hj("error",`${e} was already initialized on the ${n} Firebase App with different settings.${Lle?" You may need to reload as Firebase is not HMR aware.":""}`),hj("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const Lle=typeof module<"u"&&!!module.hot,hj=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class Ble extends ${constructor(e=1/0,n=1/0,r=cR){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=n.now();let a=0;for(let l=1;l<r.length&&r[l]<=s;l+=2)a=l;a&&r.splice(0,a+1)}}}function gR(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new $n({next:()=>{r.unsubscribe(),t()}});return Yo(e(...n)).subscribe(r)}function fj(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=null!=t?t:1/0,function $le(t={}){const{connector:e=(()=>new $),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,l,c=0,h=!1,p=!1;const m=()=>{null==a||a.unsubscribe(),a=void 0},_=()=>{m(),s=l=void 0,h=p=!1},w=()=>{const T=s;_(),null==T||T.unsubscribe()};return bt((T,S)=>{c++,!p&&!h&&m();const U=l=null!=l?l:e();S.add(()=>{c--,0===c&&!p&&!h&&(a=gR(w,i))}),U.subscribe(S),!s&&c>0&&(s=new $n({next:H=>U.next(H),error:H=>{p=!0,m(),a=gR(_,n,H),U.error(H)},complete:()=>{h=!0,m(),a=gR(_,r),U.complete()}}),Yo(T).subscribe(s))})(o)}}({connector:()=>new Ble(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function pj(t,e){return wt(e)?jr(()=>t,e):jr(()=>t)}const gj=new lt("angularfire2.auth.use-emulator"),mj=new lt("angularfire2.auth.settings"),_j=new lt("angularfire2.auth.tenant-id"),vj=new lt("angularfire2.auth.langugage-code"),yj=new lt("angularfire2.auth.use-device-language"),Ij=new lt("angularfire.auth.persistence"),Ej=(t,e,n,r,i,o,s,a)=>pR(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const l=e.runOutsideAngular(()=>t.auth());if(n&&l.useEmulator(...n),r&&(l.tenantId=r),l.languageCode=i,o&&l.useDeviceLanguage(),s)for(const[c,h]of Object.entries(s))l.settings[c]=h;return a&&l.setPersistence(a),l},[n,r,i,o,s,a]);let Es=(()=>{var t;class e{constructor(r,i,o,s,a,l,c,h,p,m,_,w){An(this,"authState",void 0),An(this,"idToken",void 0),An(this,"user",void 0),An(this,"idTokenResult",void 0),An(this,"credential",void 0);const T=new $,S=Wt(void 0).pipe(Uc(a.outsideAngular),jr(()=>s.runOutsideAngular(()=>Promise.resolve().then(ce.bind(ce,6020)))),_t(()=>rw(r,s,i)),_t(U=>Ej(U,s,l,h,p,m,c,_)),fj({bufferSize:1,refCount:!1}));if(I0(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Wt(null);else{S.pipe(zc()).subscribe();const U=S.pipe(jr(ve=>ve.getRedirectResult().then(Ye=>Ye,()=>null)),xo,fj({bufferSize:1,refCount:!1})),H=S.pipe(jr(ve=>new Un(Ye=>({unsubscribe:s.runOutsideAngular(()=>ve.onAuthStateChanged(At=>Ye.next(At),At=>Ye.error(At),()=>Ye.complete()))})))),me=S.pipe(jr(ve=>new Un(Ye=>({unsubscribe:s.runOutsideAngular(()=>ve.onIdTokenChanged(At=>Ye.next(At),At=>Ye.error(At),()=>Ye.complete()))}))));this.authState=U.pipe(pj(H),Hf(a.outsideAngular),Uc(a.insideAngular)),this.user=U.pipe(pj(me),Hf(a.outsideAngular),Uc(a.insideAngular)),this.idToken=this.user.pipe(jr(ve=>ve?Qn(ve.getIdToken()):Wt(null))),this.idTokenResult=this.user.pipe(jr(ve=>ve?Qn(ve.getIdTokenResult()):Wt(null))),this.credential=function Vle(...t){const e=E_(t),n=function Nte(t,e){return"number"==typeof JD(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Yo(r[0]):Wf(n)(Qn(r,e)):Ca}(U,T,this.authState.pipe(ys(ve=>!ve))).pipe(_t(ve=>null!=ve&&ve.user?ve:null),Hf(a.outsideAngular),Uc(a.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var s;if(t[o])return null!=r&&null!==(s=r.spy)&&void 0!==s&&s.get&&r.spy.get(o,t[o]),t[o];if(Ple.indexOf(o)>-1)return()=>{};const a=e.toPromise().then(l=>{const c=null==l?void 0:l[o];return"function"==typeof c?c.bind(l):null!=c&&c.then?c.then(h=>n.run(()=>h)):n.run(()=>c)});return new Proxy(()=>{},{get:(l,c)=>a[c],apply:(l,c,h)=>a.then(p=>{var m;const _=null==p?void 0:p(...h);return null!=r&&null!==(m=r.spy)&&void 0!==m&&m.apply&&r.spy.apply(o,h,_),_})})})}))(this,S,s,{spy:{apply:(U,H,me)=>{(U.startsWith("signIn")||U.startsWith("createUser"))&&me.then(ve=>T.next(ve))}}})}}return t=e,An(e,"\u0275fac",function(r){return new(r||t)(Ve(W_),Ve(q_,8),Ve(ga),Ve(xe),Ve(fR),Ve(gj,8),Ve(mj,8),Ve(_j,8),Ve(vj,8),Ve(yj,8),Ve(Ij,8),Ve(hR,8))}),An(e,"\u0275prov",je({token:t,factory:t.\u0275fac,providedIn:"any"})),e})(),jle=(()=>{var t;class e{constructor(){Ci.A.registerVersion("angularfire",dR.full,"auth-compat")}}return t=e,An(e,"\u0275fac",function(r){return new(r||t)}),An(e,"\u0275mod",Uo({type:t})),An(e,"\u0275inj",On({providers:[Es]})),e})();var Tt,Aa=ce(1362),ws=ce(8041),A=ce(1076),Hle=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Da={},mR=mR||{},sn=Hle||self;function iw(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function K_(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var _R="closure_uid_"+(1e9*Math.random()>>>0),Gle=0;function Wle(t,e,n){return t.call.apply(t.bind,arguments)}function qle(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function ho(t,e,n){return(ho=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Wle:qle).apply(null,arguments)}function ow(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Vi(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function Kc(){this.s=this.s,this.o=this.o}Kc.prototype.s=!1,Kc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function zle(t){Object.prototype.hasOwnProperty.call(t,_R)&&t[_R]||(t[_R]=++Gle)}(this)},Kc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const wj=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function vR(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Cj(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(iw(r)){const i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function fo(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}fo.prototype.h=function(){this.defaultPrevented=!0};var Qle=function(){if(!sn.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};sn.addEventListener("test",n,e),sn.removeEventListener("test",n,e)}catch{}return t}();function Q_(t){return/^[\s\xa0]*$/.test(t)}function sw(){var t=sn.navigator;return t&&(t=t.userAgent)?t:""}function tl(t){return-1!=sw().indexOf(t)}function yR(t){return yR[" "](t),t}yR[" "]=function(){};var ER,t,Xle=tl("Opera"),dp=tl("Trident")||tl("MSIE"),bj=tl("Edge"),IR=bj||dp,Tj=tl("Gecko")&&!(-1!=sw().toLowerCase().indexOf("webkit")&&!tl("Edge"))&&!(tl("Trident")||tl("MSIE"))&&!tl("Edge"),Zle=-1!=sw().toLowerCase().indexOf("webkit")&&!tl("Edge");function Aj(){var t=sn.document;return t?t.documentMode:void 0}e:{var wR="",CR=(t=sw(),Tj?/rv:([^\);]+)(\)|;)/.exec(t):bj?/Edge\/([\d\.]+)/.exec(t):dp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Zle?/WebKit\/(\S+)/.exec(t):Xle?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(CR&&(wR=CR?CR[1]:""),dp){var bR=Aj();if(null!=bR&&bR>parseFloat(wR)){ER=String(bR);break e}}ER=wR}var Jle=sn.document&&dp&&(Aj()||parseInt(ER,10))||void 0;function Y_(t,e){if(fo.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Tj){e:{try{yR(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ece[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Y_.$.h.call(this)}}Vi(Y_,fo);var ece={2:"touch",3:"pen",4:"mouse"};Y_.prototype.h=function(){Y_.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var X_="closure_listenable_"+(1e6*Math.random()|0),tce=0;function nce(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++tce,this.fa=this.ia=!1}function aw(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function AR(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Sj(t){const e={};for(const n in t)e[n]=t[n];return e}const Rj="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pj(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let o=0;o<Rj.length;o++)n=Rj[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function lw(t){this.src=t,this.g={},this.h=0}function DR(t,e){var n=e.type;if(n in t.g){var o,r=t.g[n],i=wj(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(aw(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function SR(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}lw.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=SR(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):((e=new nce(e,this.src,o,!!r,i)).ia=n,t.push(e)),e};var RR="closure_lm_"+(1e6*Math.random()|0),PR={};function xj(t,e,n,r,i){if(r&&r.once)return Nj(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)xj(t,e[o],n,r,i);return null}return n=kR(n),t&&t[X_]?t.O(e,n,K_(r)?!!r.capture:!!r,i):Mj(t,e,n,!1,r,i)}function Mj(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=K_(i)?!!i.capture:!!i,a=MR(t);if(a||(t[RR]=a=new lw(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function ice(){const e=oce;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qle||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Oj(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Nj(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Nj(t,e[o],n,r,i);return null}return n=kR(n),t&&t[X_]?t.P(e,n,K_(r)?!!r.capture:!!r,i):Mj(t,e,n,!0,r,i)}function kj(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)kj(t,e[o],n,r,i);else r=K_(r)?!!r.capture:!!r,n=kR(n),t&&t[X_]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=SR(o=t.g[e],n,r,i))&&(aw(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=MR(t))&&(e=t.g[e.toString()],t=-1,e&&(t=SR(e,n,r,i)),(n=-1<t?e[t]:null)&&xR(n))}function xR(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[X_])DR(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Oj(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=MR(e))?(DR(n,t),0==n.h&&(n.src=null,e[RR]=null)):aw(t)}}}function Oj(t){return t in PR?PR[t]:PR[t]="on"+t}function oce(t,e){if(t.fa)t=!0;else{e=new Y_(e,this);var n=t.listener,r=t.la||t.src;t.ia&&xR(t),t=n.call(r,e)}return t}function MR(t){return(t=t[RR])instanceof lw?t:null}var NR="__closure_events_fn_"+(1e9*Math.random()>>>0);function kR(t){return"function"==typeof t?t:(t[NR]||(t[NR]=function(e){return t.handleEvent(e)}),t[NR])}function Bi(){Kc.call(this),this.i=new lw(this),this.S=this,this.J=null}function Zi(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new fo(e,t);else if(e instanceof fo)e.target=e.target||t;else{var i=e;Pj(e=new fo(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=cw(s,r,!0,e)&&i}if(i=cw(s=e.g=t,r,!0,e)&&i,i=cw(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=cw(s=e.g=n[o],r,!1,e)&&i}function cw(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&DR(t.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Vi(Bi,Kc),Bi.prototype[X_]=!0,Bi.prototype.removeEventListener=function(t,e,n,r){kj(this,t,e,n,r)},Bi.prototype.N=function(){if(Bi.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)aw(n[r]);delete t.g[e],t.h--}}this.J=null},Bi.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Bi.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var OR=sn.JSON.stringify;function ace(){var t=FR;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Fj=new class sce{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new cce,t=>t.reset());class cce{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function uce(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function dce(t){sn.setTimeout(()=>{throw t},0)}let Z_,J_=!1,FR=new class lce{constructor(){this.h=this.g=null}add(e,n){const r=Fj.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},Lj=()=>{const t=sn.Promise.resolve(void 0);Z_=()=>{t.then(hce)}};var hce=()=>{for(var t;t=ace();){try{t.h.call(t.g)}catch(n){dce(n)}var e=Fj;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}J_=!1};function uw(t,e){Bi.call(this),this.h=t||1,this.g=e||sn,this.j=ho(this.qb,this),this.l=Date.now()}function LR(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function VR(t,e,n){if("function"==typeof t)n&&(t=ho(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ho(t.handleEvent,t)}return 2147483647<Number(e)?-1:sn.setTimeout(t,e||0)}function Vj(t){t.g=VR(()=>{t.g=null,t.i&&(t.i=!1,Vj(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Vi(uw,Bi),(Tt=uw.prototype).ga=!1,Tt.T=null,Tt.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Zi(this,"tick"),this.ga&&(LR(this),this.start()))}},Tt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Tt.N=function(){uw.$.N.call(this),LR(this),delete this.g};class fce extends Kc{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Vj(this)}N(){super.N(),this.g&&(sn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ev(t){Kc.call(this),this.h=t,this.g={}}Vi(ev,Kc);var Bj=[];function $j(t,e,n,r){Array.isArray(n)||(n&&(Bj[0]=n.toString()),n=Bj);for(var i=0;i<n.length;i++){var o=xj(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Uj(t){AR(t.g,function(e,n){this.g.hasOwnProperty(n)&&xR(e)},t),t.g={}}function dw(){this.g=!0}function hp(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _ce(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return OR(n)}catch{return e}}(t,n)+(r?" "+r:"")})}ev.prototype.N=function(){ev.$.N.call(this),Uj(this)},ev.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dw.prototype.Ea=function(){this.g=!1},dw.prototype.info=function(){};var Ed={},jj=null;function hw(){return jj=jj||new Bi}function Hj(t){fo.call(this,Ed.Ta,t)}function tv(t){const e=hw();Zi(e,new Hj(e))}function zj(t,e){fo.call(this,Ed.STAT_EVENT,t),this.stat=e}function Mo(t){const e=hw();Zi(e,new zj(e,t))}function Gj(t,e){fo.call(this,Ed.Ua,t),this.size=e}function nv(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return sn.setTimeout(function(){t()},e)}Ed.Ta="serverreachability",Vi(Hj,fo),Ed.STAT_EVENT="statevent",Vi(zj,fo),Ed.Ua="timingevent",Vi(Gj,fo);var fw={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Wj={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function BR(){}function Kj(){}BR.prototype.h=null;var jR,rv={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function $R(){fo.call(this,"d")}function UR(){fo.call(this,"c")}function pw(){}function iv(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ev(this),this.P=vce,this.V=new uw(t=IR?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Qj}function Qj(){this.i=null,this.g="",this.h=!1}Vi($R,fo),Vi(UR,fo),Vi(pw,BR),pw.prototype.g=function(){return new XMLHttpRequest},pw.prototype.i=function(){return{}},jR=new pw;var vce=45e3,Yj={},HR={};function zR(t,e,n){t.L=1,t.A=vw(zl(e)),t.u=n,t.S=!0,Xj(t,null)}function Xj(t,e){t.G=Date.now(),ov(t),t.B=zl(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),a4(n.i,"t",r),t.o=0,n=t.l.J,t.h=new Qj,t.g=x4(t.l,n?e:null,!t.u),0<t.O&&(t.M=new fce(ho(t.Pa,t,t.g),t.O)),$j(t.U,t.g,"readystatechange",t.nb),e=t.I?Sj(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),tv(),function pce(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var p=h.split("_");s=2<=p.length&&"type"==p[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.v,t.B,t.m,t.W,t.u)}function Zj(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function Jj(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=yce(t,n),i==HR){4==e&&(t.s=4,Mo(14),r=!1),hp(t.j,t.m,null,"[Incomplete Response]");break}if(i==Yj){t.s=4,Mo(15),hp(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}hp(t.j,t.m,i,null),GR(t,i)}Zj(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,Mo(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ZR(e),e.M=!0,Mo(11))):(hp(t.j,t.m,n,"[Invalid Chunked Response]"),wd(t),sv(t))}function yce(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?HR:(n=Number(e.substring(n,r)),isNaN(n)?Yj:(r+=1)+n>e.length?HR:(e=e.slice(r,r+n),t.o=r+n,e))}function ov(t){t.Y=Date.now()+t.P,e4(t,t.P)}function e4(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=nv(ho(t.lb,t),e)}function gw(t){t.C&&(sn.clearTimeout(t.C),t.C=null)}function sv(t){0==t.l.H||t.J||D4(t.l,t)}function wd(t){gw(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,LR(t.V),Uj(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function GR(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||WR(n.i,t)))if(!t.K&&WR(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;bw(n),ww(n)}XR(n),Mo(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=nv(ho(n.ib,n),6e3));if(1>=u4(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else bd(n,11)}else if((t.K||n.g==t)&&bw(n),!Q_(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const h=c[3];null!=h&&(n.ra=h,n.l.info("VER="+n.ra));const p=c[4];null!=p&&(n.Ga=p,n.l.info("SVER="+n.Ga));const m=c[5];null!=m&&"number"==typeof m&&0<m&&(n.L=r=1.5*m,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const _=t.g;if(_){const w=_.g?_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var o=r.i;o.g||-1==w.indexOf("spdy")&&-1==w.indexOf("quic")&&-1==w.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(qR(o,o.h),o.h=null))}if(r.F){const T=_.g?_.g.getResponseHeader("X-HTTP-Session-Id"):null;T&&(r.Da=T,Dr(r.I,r.F,T))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=t;if((r=n).wa=P4(r,r.J?r.pa:null,r.Y),s.K){d4(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.C&&(gw(a),ov(a)),r.g=s}else T4(r);0<n.j.length&&Cw(n)}else"stop"!=c[0]&&"close"!=c[0]||bd(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?bd(n,7):YR(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}tv()}catch{}}function t4(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(iw(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function Ece(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(iw(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function Ice(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(iw(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(Tt=iv.prototype).setTimeout=function(t){this.P=t},Tt.nb=function(t){t=t.target;const e=this.M;e&&3==nl(t)?e.l():this.Pa(t)},Tt.Pa=function(t){try{if(t==this.g)e:{const h=nl(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||IR||this.g&&(this.h.h||this.g.ja()||y4(this.g)))){this.J||4!=h||7==e||tv(),gw(this);var n=this.g.da();this.ca=n;t:if(Zj(this)){var r=y4(this.g);t="";var i=r.length,o=4==nl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){wd(this),sv(this);var s="";break t}this.h.i=new sn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function gce(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q_(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,Mo(12),wd(this),sv(this);break e}hp(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,GR(this,n)}this.S?(Jj(this,h,s),IR&&this.i&&3==h&&($j(this.U,this.V,"tick",this.mb),this.V.start())):(hp(this.j,this.m,s,null),GR(this,s)),4==h&&wd(this),this.i&&!this.J&&(4==h?D4(this.l,this):(this.i=!1,ov(this)))}else(function Bce(t){const e={};t=(t.g&&2<=nl(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Q_(t[r]))continue;var n=uce(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const o=e[i]||[];e[i]=o,o.push(n)}!function rce(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Mo(12)):(this.s=0,Mo(13)),wd(this),sv(this)}}}catch{}},Tt.mb=function(){if(this.g){var t=nl(this.g),e=this.g.ja();this.o<e.length&&(gw(this),Jj(this,t,e),this.i&&4!=t&&ov(this))}},Tt.cancel=function(){this.J=!0,wd(this)},Tt.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function mce(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(tv(),Mo(17)),wd(this),this.s=2,sv(this)):e4(this,this.Y-t)};var n4=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cd(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Cd){this.h=t.h,mw(this,t.j),this.s=t.s,this.g=t.g,_w(this,t.m),this.l=t.l;var e=t.i,n=new cv;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),r4(this,n),this.o=t.o}else t&&(e=String(t).match(n4))?(this.h=!1,mw(this,e[1]||"",!0),this.s=av(e[2]||""),this.g=av(e[3]||"",!0),_w(this,e[4]),this.l=av(e[5]||"",!0),r4(this,e[6]||"",!0),this.o=av(e[7]||"")):(this.h=!1,this.i=new cv(null,this.h))}function zl(t){return new Cd(t)}function mw(t,e,n){t.j=n?av(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function _w(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function r4(t,e,n){e instanceof cv?(t.i=e,function Sce(t,e){e&&!t.j&&(Qc(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(o4(this,r),a4(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=lv(e,Ace)),t.i=new cv(e,t.h))}function Dr(t,e,n){t.i.set(e,n)}function vw(t){return Dr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function av(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function lv(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Cce),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Cce(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Cd.prototype.toString=function(){var t=[],e=this.j;e&&t.push(lv(e,i4,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(lv(e,i4,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(lv(n,"/"==n.charAt(0)?Tce:bce,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",lv(n,Dce)),t.join("")};var i4=/[#\/\?@]/g,bce=/[#\?:]/g,Tce=/[#\?]/g,Ace=/[#\?@]/g,Dce=/#/g;function cv(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Qc(t){t.g||(t.g=new Map,t.h=0,t.i&&function wce(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function o4(t,e){Qc(t),e=fp(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function s4(t,e){return Qc(t),e=fp(t,e),t.g.has(e)}function a4(t,e,n){o4(t,e),0<n.length&&(t.i=null,t.g.set(fp(t,e),vR(n)),t.h+=n.length)}function fp(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Tt=cv.prototype).add=function(t,e){Qc(this),this.i=null,t=fp(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Tt.forEach=function(t,e){Qc(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},Tt.ta=function(){Qc(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n},Tt.Z=function(t){Qc(this);let e=[];if("string"==typeof t)s4(this,t)&&(e=e.concat(this.g.get(fp(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},Tt.set=function(t,e){return Qc(this),this.i=null,s4(this,t=fp(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Tt.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},Tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};var Rce=class{constructor(t,e){this.g=t,this.map=e}};function l4(t){this.l=t||Pce,t=sn.PerformanceNavigationTiming?0<(t=sn.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(sn.g&&sn.g.Ka&&sn.g.Ka()&&sn.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Pce=10;function c4(t){return!!t.h||!!t.g&&t.g.size>=t.j}function u4(t){return t.h?1:t.g?t.g.size:0}function WR(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function qR(t,e){t.g?t.g.add(e):t.h=e}function d4(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function h4(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return vR(t.i)}l4.prototype.cancel=function(){if(this.i=h4(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var xce=class{stringify(t){return sn.JSON.stringify(t,void 0)}parse(t){return sn.JSON.parse(t,void 0)}};function Mce(){this.g=new xce}function Nce(t,e,n){const r=n||"";try{t4(t,function(i,o){let s=i;K_(i)&&(s=OR(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function yw(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function uv(t){this.l=t.ec||null,this.j=t.ob||!1}function Iw(t,e){Bi.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=KR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vi(uv,BR),uv.prototype.g=function(){return new Iw(this.l,this.j)},uv.prototype.i=function(t){return function(){return t}}({}),Vi(Iw,Bi);var KR=0;function f4(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function dv(t){t.readyState=4,t.l=null,t.j=null,t.A=null,hv(t)}function hv(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Tt=Iw.prototype).open=function(t,e){if(this.readyState!=KR)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,hv(this)},Tt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||sn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,dv(this)),this.readyState=KR},Tt.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,hv(this)),this.g&&(this.readyState=3,hv(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof sn.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;f4(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},Tt.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?dv(this):hv(this),3==this.readyState&&f4(this)}},Tt.Za=function(t){this.g&&(this.response=this.responseText=t,dv(this))},Tt.Ya=function(t){this.g&&(this.response=t,dv(this))},Tt.ka=function(){this.g&&dv(this)},Tt.setRequestHeader=function(t,e){this.v.append(t,e)},Tt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Tt.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Iw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Oce=sn.JSON.parse;function Qr(t){Bi.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=p4,this.L=this.M=!1}Vi(Qr,Bi);var p4="",Fce=/^https?$/i,Lce=["POST","PUT"];function g4(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,m4(t),Ew(t)}function m4(t){t.F||(t.F=!0,Zi(t,"complete"),Zi(t,"error"))}function _4(t){if(t.h&&typeof mR<"u"&&(!t.C[1]||4!=nl(t)||2!=t.da()))if(t.v&&4==nl(t))VR(t.La,0,t);else if(Zi(t,"readystatechange"),4==nl(t)){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===s){var i=String(t.I).match(n4)[1]||null;!i&&sn.self&&sn.self.location&&(i=sn.self.location.protocol.slice(0,-1)),r=!Fce.test(i?i.toLowerCase():"")}n=r}if(n)Zi(t,"complete"),Zi(t,"success");else{t.m=6;try{var o=2<nl(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",m4(t)}}finally{Ew(t)}}}function Ew(t,e){if(t.g){v4(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Zi(t,"ready");try{n.onreadystatechange=r}catch{}}}function v4(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(sn.clearTimeout(t.A),t.A=null)}function nl(t){return t.g?t.g.readyState:0}function y4(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case p4:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function I4(t){let e="";return AR(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function QR(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=I4(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Dr(t,e,n))}function fv(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function E4(t){this.Ga=0,this.j=[],this.l=new dw,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=fv("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=fv("baseRetryDelayMs",5e3,t),this.hb=fv("retryDelaySeedMs",1e4,t),this.eb=fv("forwardChannelMaxRetries",2,t),this.xa=fv("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new l4(t&&t.concurrentRequestLimit),this.Ja=new Mce,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function YR(t){if(w4(t),3==t.H){var e=t.W++,n=zl(t.I);if(Dr(n,"SID",t.K),Dr(n,"RID",e),Dr(n,"TYPE","terminate"),pv(t,n),(e=new iv(t,t.l,e)).L=2,e.A=vw(zl(n)),n=!1,sn.navigator&&sn.navigator.sendBeacon)try{n=sn.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&sn.Image&&((new Image).src=e.A,n=!0),n||(e.g=x4(e.l,null),e.g.ha(e.A)),e.G=Date.now(),ov(e)}R4(t)}function ww(t){t.g&&(ZR(t),t.g.cancel(),t.g=null)}function w4(t){ww(t),t.u&&(sn.clearTimeout(t.u),t.u=null),bw(t),t.i.cancel(),t.m&&("number"==typeof t.m&&sn.clearTimeout(t.m),t.m=null)}function Cw(t){if(!c4(t.i)&&!t.m){t.m=!0;var e=t.Na;Z_||Lj(),J_||(Z_(),J_=!0),FR.add(e,t),t.C=0}}function C4(t,e){var n;n=e?e.m:t.W++;const r=zl(t.I);Dr(r,"SID",t.K),Dr(r,"RID",n),Dr(r,"AID",t.V),pv(t,r),t.o&&t.s&&QR(r,t.o,t.s),n=new iv(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=b4(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),qR(t.i,n),zR(n,r,e)}function pv(t,e){t.na&&AR(t.na,function(n,r){Dr(e,r,n)}),t.h&&t4({},function(n,r){Dr(e,r,n)})}function b4(t,e,n){n=Math.min(t.j.length,n);var r=t.h?ho(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+n];-1==o?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const h=i[l].map;if(c-=o,0>c)o=Math.max(0,i[l].g-100),a=!1;else try{Nce(h,s,"req"+c+"_")}catch{r&&r(h)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function T4(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Z_||Lj(),J_||(Z_(),J_=!0),FR.add(e,t),t.A=0}}function XR(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=nv(ho(t.Ma,t),S4(t,t.A)),t.A++,0))}function ZR(t){null!=t.B&&(sn.clearTimeout(t.B),t.B=null)}function A4(t){t.g=new iv(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=zl(t.wa);Dr(e,"RID","rpc"),Dr(e,"SID",t.K),Dr(e,"AID",t.V),Dr(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Dr(e,"TO",t.qa),Dr(e,"TYPE","xmlhttp"),pv(t,e),t.o&&t.s&&QR(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=vw(zl(e)),n.u=null,n.S=!0,Xj(n,t)}function bw(t){null!=t.v&&(sn.clearTimeout(t.v),t.v=null)}function D4(t,e){var n=null;if(t.g==e){bw(t),ZR(t),t.g=null;var r=2}else{if(!WR(t.i,e))return;n=e.F,d4(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;Zi(r=hw(),new Gj(r,n)),Cw(t)}else T4(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function $ce(t,e){return!(u4(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=nv(ho(t.Na,t,e),S4(t,t.C)),t.C++,0)))}(t,e)||2==r&&XR(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:bd(t,5);break;case 4:bd(t,10);break;case 3:bd(t,6);break;default:bd(t,2)}}function S4(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function bd(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=ho(t.pb,t);n||(n=new Cd("//www.google.com/images/cleardot.gif"),sn.location&&"http"==sn.location.protocol||mw(n,"https"),vw(n)),function kce(t,e){const n=new dw;if(sn.Image){const r=new Image;r.onload=ow(yw,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ow(yw,n,r,"TestLoadImage: error",!1,e),r.onabort=ow(yw,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ow(yw,n,r,"TestLoadImage: timeout",!1,e),sn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Mo(2);t.H=0,t.h&&t.h.za(e),R4(t),w4(t)}function R4(t){if(t.H=0,t.ma=[],t.h){const e=h4(t.i);(0!=e.length||0!=t.j.length)&&(Cj(t.ma,e),Cj(t.ma,t.j),t.i.i.length=0,vR(t.j),t.j.length=0),t.h.ya()}}function P4(t,e,n){var r=n instanceof Cd?zl(n):new Cd(n);if(""!=r.g)e&&(r.g=e+"."+r.g),_w(r,r.m);else{var i=sn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Cd(null);r&&mw(o,r),e&&(o.g=e),i&&_w(o,i),n&&(o.l=n),r=o}return e=t.Da,(n=t.F)&&e&&Dr(r,n,e),Dr(r,"VER",t.ra),pv(t,r),r}function x4(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Qr(t.Ha&&!t.va?new uv({ob:n}):t.va)).Oa(t.J),e}function M4(){}function Tw(){if(dp&&!(10<=Number(Jle)))throw Error("Environmental error: no available transport.")}function Cs(t,e){Bi.call(this),this.g=new E4(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Q_(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Q_(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new pp(this)}function N4(t){$R.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function k4(){UR.call(this),this.status=1}function pp(t){this.g=t}function Sa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function JR(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var o=t.g[3],s=(e=t.g[0])+(o^(n=t.g[1])&((i=t.g[2])^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=n+(s<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=n+((s=e+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(e^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}function nr(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=0|t[i];r&&o==e||(n[i]=o,r=!1)}this.g=n}(Tt=Qr.prototype).Oa=function(t){this.M=t},Tt.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():jR.g(),this.C=function qj(t){return t.h||(t.h=t.i())}(this.u?this.u:jR),this.g.onreadystatechange=ho(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){return void g4(this,o)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())n.set(o,r.get(o))}r=Array.from(n.keys()).find(o=>"content-type"==o.toLowerCase()),i=sn.FormData&&t instanceof sn.FormData,!(0<=wj(Lce,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{v4(this),0<this.B&&((this.L=function Vce(t){return dp&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ho(this.ua,this)):this.A=VR(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){g4(this,o)}},Tt.ua=function(){typeof mR<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zi(this,"timeout"),this.abort(8))},Tt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Zi(this,"complete"),Zi(this,"abort"),Ew(this))},Tt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ew(this,!0)),Qr.$.N.call(this)},Tt.La=function(){this.s||(this.G||this.v||this.l?_4(this):this.kb())},Tt.kb=function(){_4(this)},Tt.isActive=function(){return!!this.g},Tt.da=function(){try{return 2<nl(this)?this.g.status:-1}catch{return-1}},Tt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Tt.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Oce(e)}},Tt.Ia=function(){return this.m},Tt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Tt=E4.prototype).ra=8,Tt.H=1,Tt.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new iv(this,this.l,t);let o=this.s;if(this.U&&(o?(o=Sj(o),Pj(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=b4(this,i,e),Dr(n=zl(this.I),"RID",t),Dr(n,"CVER",22),this.F&&Dr(n,"X-HTTP-Session-Id",this.F),pv(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(I4(o)))+"&"+e:this.o&&QR(n,this.o,o)),qR(this.i,i),this.bb&&Dr(n,"TYPE","init"),this.P?(Dr(n,"$req",e),Dr(n,"SID","null"),i.aa=!0,zR(i,n,null)):zR(i,n,e),this.H=2}}else 3==this.H&&(t?C4(this,t):0==this.j.length||c4(this.i)||C4(this))},Tt.Ma=function(){if(this.u=null,A4(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=nv(ho(this.jb,this),t)}},Tt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Mo(10),ww(this),A4(this))},Tt.ib=function(){null!=this.v&&(this.v=null,ww(this),XR(this),Mo(19))},Tt.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Mo(2)):(this.l.info("Failed to ping google.com"),Mo(1))},Tt.isActive=function(){return!!this.h&&this.h.isActive(this)},(Tt=M4.prototype).Ba=function(){},Tt.Aa=function(){},Tt.za=function(){},Tt.ya=function(){},Tt.isActive=function(){return!0},Tt.Va=function(){},Tw.prototype.g=function(t,e){return new Cs(t,e)},Vi(Cs,Bi),Cs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Mo(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=P4(t,null,t.Y),Cw(t)},Cs.prototype.close=function(){YR(this.g)},Cs.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=OR(t),t=n);e.j.push(new Rce(e.fb++,t)),3==e.H&&Cw(e)},Cs.prototype.N=function(){this.g.h=null,delete this.j,YR(this.g),delete this.g,Cs.$.N.call(this)},Vi(N4,$R),Vi(k4,UR),Vi(pp,M4),pp.prototype.Ba=function(){Zi(this.g,"a")},pp.prototype.Aa=function(t){Zi(this.g,new N4(t))},pp.prototype.za=function(t){Zi(this.g,new k4)},pp.prototype.ya=function(){Zi(this.g,"b")},Vi(Sa,function Uce(){this.blockSize=-1}),Sa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Sa.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=n;)JR(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){JR(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){JR(this,r),i=0;break}}this.h=i,this.i+=e},Sa.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var jce={};function eP(t){return-128<=t&&128>t?function Yle(t,e){var n=jce;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new nr([0|e],0>e?-1:0)}):new nr([0|t],0>t?-1:0)}function rl(t){if(isNaN(t)||!isFinite(t))return gp;if(0>t)return Ji(rl(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=tP;return new nr(e,0)}var tP=4294967296,gp=eP(0),nP=eP(1),F4=eP(16777216);function Gl(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Qs(t){return-1==t.h}function Ji(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new nr(n,~t.h).add(nP)}function Aw(t,e){return t.add(Ji(e))}function Dw(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function gv(t,e){this.g=t,this.h=e}function Sw(t,e){if(Gl(e))throw Error("division by zero");if(Gl(t))return new gv(gp,gp);if(Qs(t))return e=Sw(Ji(t),e),new gv(Ji(e.g),Ji(e.h));if(Qs(e))return e=Sw(t,Ji(e)),new gv(Ji(e.g),e.h);if(30<t.g.length){if(Qs(t)||Qs(e))throw Error("slowDivide_ only works with positive integers.");for(var n=nP,r=e;0>=r.X(t);)n=L4(n),r=L4(r);var i=mp(n,1),o=mp(r,1);for(r=mp(r,2),n=mp(n,2);!Gl(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=mp(r,1),n=mp(n,1)}return e=Aw(t,i.R(e)),new gv(i,e)}for(i=gp;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=rl(n)).R(e);Qs(s)||0<s.X(t);)s=(o=rl(n-=r)).R(e);Gl(o)&&(o=nP),i=i.add(o),t=Aw(t,s)}return new gv(i,t)}function L4(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new nr(n,t.h)}function mp(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new nr(i,t.h)}(Tt=nr.prototype).ea=function(){if(Qs(this))return-Ji(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:tP+r)*e,e*=tP}return t},Tt.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Gl(this))return"0";if(Qs(this))return"-"+Ji(this).toString(t);for(var e=rl(Math.pow(t,6)),n=this,r="";;){var i=Sw(n,e).g,o=((0<(n=Aw(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Gl(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Tt.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},Tt.X=function(t){return Qs(t=Aw(this,t))?-1:Gl(t)?0:1},Tt.abs=function(){return Qs(this)?Ji(this):this},Tt.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&t.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,n[i]=(s&=65535)<<16|(o&=65535)}return new nr(n,-2147483648&n[n.length-1]?-1:0)},Tt.R=function(t){if(Gl(this)||Gl(t))return gp;if(Qs(this))return Qs(t)?Ji(this).R(Ji(t)):Ji(Ji(this).R(t));if(Qs(t))return Ji(this.R(Ji(t)));if(0>this.X(F4)&&0>t.X(F4))return rl(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=t.D(i)>>>16,l=65535&t.D(i);n[2*r+2*i]+=s*l,Dw(n,2*r+2*i),n[2*r+2*i+1]+=o*l,Dw(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Dw(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Dw(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new nr(n,0)},Tt.gb=function(t){return Sw(this,t).h},Tt.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new nr(n,this.h&t.h)},Tt.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new nr(n,this.h|t.h)},Tt.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new nr(n,this.h^t.h)},Tw.prototype.createWebChannel=Tw.prototype.g,Cs.prototype.send=Cs.prototype.u,Cs.prototype.open=Cs.prototype.m,Cs.prototype.close=Cs.prototype.close,fw.NO_ERROR=0,fw.TIMEOUT=8,fw.HTTP_ERROR=6,Wj.COMPLETE="complete",Kj.EventType=rv,rv.OPEN="a",rv.CLOSE="b",rv.ERROR="c",rv.MESSAGE="d",Bi.prototype.listen=Bi.prototype.O,Qr.prototype.listenOnce=Qr.prototype.P,Qr.prototype.getLastError=Qr.prototype.Sa,Qr.prototype.getLastErrorCode=Qr.prototype.Ia,Qr.prototype.getStatus=Qr.prototype.da,Qr.prototype.getResponseJson=Qr.prototype.Wa,Qr.prototype.getResponseText=Qr.prototype.ja,Qr.prototype.send=Qr.prototype.ha,Qr.prototype.setWithCredentials=Qr.prototype.Oa,Sa.prototype.digest=Sa.prototype.l,Sa.prototype.reset=Sa.prototype.reset,Sa.prototype.update=Sa.prototype.j,nr.prototype.add=nr.prototype.add,nr.prototype.multiply=nr.prototype.R,nr.prototype.modulo=nr.prototype.gb,nr.prototype.compare=nr.prototype.X,nr.prototype.toNumber=nr.prototype.ea,nr.prototype.toString=nr.prototype.toString,nr.prototype.getBits=nr.prototype.D,nr.fromNumber=rl,nr.fromString=function O4(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Ji(O4(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=rl(Math.pow(e,8)),r=gp,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=rl(Math.pow(e,o)),r=r.R(o).add(rl(s))):r=(r=r.R(n)).add(rl(s))}return r};var Hce=Da.createWebChannelTransport=function(){return new Tw},zce=Da.getStatEventTarget=function(){return hw()},rP=Da.ErrorCode=fw,Gce=Da.EventType=Wj,Wce=Da.Event=Ed,V4=Da.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Rw=(Da.FetchXmlHttpFactory=uv,Da.WebChannel=Kj),qce=Da.XhrIo=Qr,Kce=Da.Md5=Sa,_p=Da.Integer=nr;const B4="@firebase/firestore";class $i{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$i.UNAUTHENTICATED=new $i(null),$i.GOOGLE_CREDENTIALS=new $i("google-credentials-uid"),$i.FIRST_PARTY=new $i("first-party-uid"),$i.MOCK_USER=new $i("mock-user");let vp="10.9.0";const Yc=new ws.Vy("@firebase/firestore");function yp(){return Yc.logLevel}function Ge(t,...e){if(Yc.logLevel<=ws.$b.DEBUG){const n=e.map(iP);Yc.debug(`Firestore (${vp}): ${t}`,...n)}}function ii(t,...e){if(Yc.logLevel<=ws.$b.ERROR){const n=e.map(iP);Yc.error(`Firestore (${vp}): ${t}`,...n)}}function Zo(t,...e){if(Yc.logLevel<=ws.$b.WARN){const n=e.map(iP);Yc.warn(`Firestore (${vp}): ${t}`,...n)}}function iP(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function Mt(t="Unexpected state"){const e=`FIRESTORE (${vp}) INTERNAL ASSERTION FAILED: `+t;throw ii(e),new Error(e)}function Lt(t,e){t||Mt()}function mt(t,e){return t}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends A.g{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class $4{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xce{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($i.UNAUTHENTICATED))}shutdown(){}}class Zce{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Jce{constructor(e){this.t=e,this.currentUser=$i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const o=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new bi,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable((0,y.A)(function*(){yield c.promise,yield o(r.currentUser)}))},l=c=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new bi)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt("string"==typeof r.accessToken),new $4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Lt(null===e||"string"==typeof e),new $i(e)}}class eue{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=$i.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tue{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new eue(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n($i.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nue{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{null!=o.error&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,Ge("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Lt("string"==typeof n.token),this.R=n.token,new U4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function rue(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class j4{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=rue(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function rn(t,e){return t<e?-1:t>e?1:0}function Ip(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function H4(t){return t+"\0"}class Nr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ue(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ue(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ue(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nr.fromMillis(Date.now())}static fromDate(e){return Nr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Nr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rn(this.nanoseconds,e.nanoseconds):rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ut(e)}static min(){return new Ut(new Nr(0,0))}static max(){return new Ut(new Nr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class mv{constructor(e,n,r){void 0===n?n=0:n>e.length&&Mt(),void 0===r?r=e.length-n:r>e.length-n&&Mt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===mv.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof mv?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Sn extends mv{construct(e,n,r){return new Sn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Sn(n)}static emptyPath(){return new Sn([])}}const iue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sr extends mv{construct(e,n,r){return new Sr(e,n,r)}static isValidIdentifier(e){return iue.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Sr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Ue(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Ue(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Ue(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ue(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sr(n)}static emptyPath(){return new Sr([])}}class It{constructor(e){this.path=e}static fromPath(e){return new It(Sn.fromString(e))}static fromName(e){return new It(Sn.fromString(e).popFirst(5))}static empty(){return new It(Sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Sn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new It(new Sn(e.slice()))}}class Ep{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function oP(t){return t.fields.find(e=>2===e.kind)}function Td(t){return t.fields.filter(e=>2!==e.kind)}Ep.UNKNOWN_ID=-1;class Ad{constructor(e,n){this.fieldPath=e,this.kind=n}}class wp{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new wp(0,bs.min())}}function z4(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ut.fromTimestamp(1e9===r?new Nr(n+1,0):new Nr(n,r));return new bs(i,It.empty(),e)}function G4(t){return new bs(t.readTime,t.key,-1)}class bs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new bs(Ut.min(),It.empty(),-1)}static max(){return new bs(Ut.max(),It.empty(),-1)}}function sP(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=It.comparator(t.documentKey,e.documentKey),0!==n?n:rn(t.largestBatchId,e.largestBatchId))}const W4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class q4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Xc(t){return aP.apply(this,arguments)}function aP(){return aP=(0,y.A)(function*(t){if(t.code!==_e.FAILED_PRECONDITION||t.message!==W4)throw t;Ge("LocalStore","Unexpectedly lost primary lease")}),aP.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.reject(n)}static resolve(e){return new oe((n,r)=>{n(e)})}static reject(e){return new oe((n,r)=>{r(e)})}static waitFor(e){return new oe((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next(i=>i?oe.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new oe((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;n(e[c]).next(h=>{s[c]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new oe((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}class Pw{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new bi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new _v(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=lP(r.target.error);this.V.reject(new _v(e,i))}}static open(e,n,r,i){try{return new Pw(n,e.transaction(i,r))}catch(o){throw new _v(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ge("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new lue(n)}}class Ys{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===Ys.S((0,A.ZQ)())&&ii("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ge("SimpleDb","Removing database:",e),Dd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,A.zW)())return!1;if(Ys.C())return!0;const e=(0,A.ZQ)(),n=Ys.S(e),r=0<n&&n<10,i=Ys.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,y.A)(function*(){return n.db||(Ge("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const o=indexedDB.open(n.name,n.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new _v(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new Ue(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Ue(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new _v(e,a))},o.onupgradeneeded=s=>{Ge("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',s.oldVersion),n.p.N(s.target.result,o.transaction,s.oldVersion,n.version).next(()=>{Ge("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.L&&(n.db.onversionchange=r=>n.L(r)),n.db})()}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var o=this;return(0,y.A)(function*(){const s="readonly"===n;let a=0;for(;;){++a;try{o.db=yield o.O(e);const l=Pw.open(o.db,e,s?"readonly":"readwrite",r),c=i(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),oe.reject(h))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,h="FirebaseError"!==c.name&&a<3;if(Ge("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),o.close(),!h)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class aue{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Dd(this.k.delete())}}class _v extends Ue{constructor(e,n){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Zc(t){return"IndexedDbTransactionError"===t.name}class lue{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(Ge("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Ge("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Dd(r)}add(e){return Ge("SimpleDb","ADD",this.store.name,e,e),Dd(this.store.add(e))}get(e){return Dd(this.store.get(e)).next(n=>(void 0===n&&(n=null),Ge("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Ge("SimpleDb","DELETE",this.store.name,e),Dd(this.store.delete(e))}count(){return Ge("SimpleDb","COUNT",this.store.name),Dd(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new oe((s,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{s(l.target.result)}})}{const o=this.cursor(r),s=[];return this.G(o,(a,l)=>{s.push(l)}).next(()=>s)}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new oe((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){Ge("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new oe((r,i)=>{n.onerror=o=>{const s=lP(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){const r=[];return new oe((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const l=new aue(a),c=n(a.primaryKey,a.value,l);if(c instanceof oe){const h=c.catch(p=>(l.done(),oe.reject(p)));r.push(h)}l.isDone?i():null===l.$?a.continue():a.continue(l.$)}}).next(()=>oe.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Dd(t){return new oe((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=lP(r.target.error);n(i)}})}let K4=!1;function lP(t){const e=Ys.S((0,A.ZQ)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return K4||(K4=!0,setTimeout(()=>{throw r},0)),r}}return t}class cue{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;Ge("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,y.A)(function*(){n.task=null;try{Ge("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(r){Zc(r)?Ge("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Xc(r)}yield n.ee(6e4)}))}}class uue{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,y.A)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,o=!0;return oe.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return Ge("IndexBackfiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(Ge("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{const s=G4(o);sP(s,r)>0&&(r=s)}),new bs(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Ts=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function vv(t){return null==t}function yv(t){return 0===t&&1/t==-1/0}function Q4(t){return"number"==typeof t&&Number.isInteger(t)&&!yv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function po(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Y4(e)),e=due(t.get(n),e);return Y4(e)}function due(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Y4(t){return t+"\x01\x01"}function il(t){const e=t.length;if(Lt(e>=2),2===e)return Lt("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Sn.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf("\x01",o);switch((s<0||s>n)&&Mt(),t.charAt(s+1)){case"\x01":const a=t.substring(o,s);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Mt()}o=s+2}return new Sn(r)}const X4=["userId","batchId"];function xw(t,e){return[t,po(e)]}function Z4(t,e,n){return[t,po(e),n]}const hue={},fue=["prefixPath","collectionGroup","readTime","documentId"],pue=["prefixPath","collectionGroup","documentId"],gue=["collectionGroup","readTime","prefixPath","documentId"],mue=["canonicalId","targetId"],_ue=["targetId","path"],vue=["path","targetId"],yue=["collectionId","parent"],Iue=["indexId","uid"],Eue=["uid","sequenceNumber"],wue=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Cue=["indexId","uid","orderedDocumentKey"],bue=["userId","collectionPath","documentId"],Tue=["userId","collectionPath","largestBatchId"],Aue=["userId","collectionGroup","largestBatchId"],J4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Due=[...J4,"documentOverlays"],e3=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],t3=e3,Sue=[...t3,"indexConfiguration","indexState","indexEntries"];class cP extends q4{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Ui(t,e){const n=mt(t);return Ys.M(n.ae,e)}function n3(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function r3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class yr{constructor(e,n){this.comparator=e,this.root=n||eo.EMPTY}insert(e,n){return new yr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,eo.BLACK,null,null))}remove(e){return new yr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,eo.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mw(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mw(this.root,e,this.comparator,!0)}}class Mw{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class eo{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:eo.RED,this.left=null!=i?i:eo.EMPTY,this.right=null!=o?o:eo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new eo(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return eo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return eo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,eo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,eo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Mt();const e=this.left.check();if(e!==this.right.check())throw Mt();return e+(this.isRed()?0:1)}}eo.EMPTY=null,eo.RED=!0,eo.BLACK=!1,eo.EMPTY=new class{constructor(){this.size=0}get key(){throw Mt()}get value(){throw Mt()}get color(){throw Mt()}get left(){throw Mt()}get right(){throw Mt()}copy(e,n,r,i,o){return this}insert(e,n,r){return new eo(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cr{constructor(e){this.comparator=e,this.data=new yr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new i3(this.data.getIterator())}getIteratorFrom(e){return new i3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof cr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new cr(this.comparator);return n.data=e,n}}class i3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Cp(t){return t.hasNext()?t.getNext():void 0}class Jo{constructor(e){this.fields=e,e.sort(Sr.comparator)}static empty(){return new Jo([])}unionWith(e){let n=new cr(Sr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ip(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class o3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ti{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new o3("Invalid base64 string: "+o):o}}(e);return new Ti(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Ti(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ti.EMPTY_BYTE_STRING=new Ti("");const Pue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eu(t){if(Lt(!!t),"string"==typeof t){let e=0;const n=Pue.exec(t);if(Lt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yr(t.seconds),nanos:Yr(t.nanos)}}function Yr(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Wl(t){return"string"==typeof t?Ti.fromBase64String(t):Ti.fromUint8Array(t)}function Nw(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function kw(t){const e=t.mapValue.fields.__previous_value__;return Nw(e)?kw(e):e}function Iv(t){const e=eu(t.mapValue.fields.__local_write_time__.timestampValue);return new Nr(e.seconds,e.nanos)}class xue{constructor(e,n,r,i,o,s,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class tu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new tu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof tu&&e.projectId===this.projectId&&e.database===this.database}}const nu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ow={nullValue:"NULL_VALUE"};function ru(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nw(t)?4:c3(t)?9007199254740991:10:Mt()}function ol(t,e){if(t===e)return!0;const n=ru(t);if(n!==ru(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Iv(t).isEqual(Iv(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=eu(i.timestampValue),a=eu(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,Wl(t.bytesValue).isEqual(Wl(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Yr(i.geoPointValue.latitude)===Yr(o.geoPointValue.latitude)&&Yr(i.geoPointValue.longitude)===Yr(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Yr(i.integerValue)===Yr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Yr(i.doubleValue),a=Yr(o.doubleValue);return s===a?yv(s)===yv(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Ip(t.arrayValue.values||[],e.arrayValue.values||[],ol);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(n3(s)!==n3(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(void 0===a[l]||!ol(s[l],a[l])))return!1;return!0}(t,e);default:return Mt()}var o}function Ev(t,e){return void 0!==(t.values||[]).find(n=>ol(n,e))}function iu(t,e){if(t===e)return 0;const n=ru(t),r=ru(e);if(n!==r)return rn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rn(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Yr(o.integerValue||o.doubleValue),l=Yr(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return s3(t.timestampValue,e.timestampValue);case 4:return s3(Iv(t),Iv(e));case 5:return rn(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Wl(o),l=Wl(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=rn(a[c],l[c]);if(0!==h)return h}return rn(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=rn(Yr(o.latitude),Yr(s.latitude));return 0!==a?a:rn(Yr(o.longitude),Yr(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],l=s.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=iu(a[c],l[c]);if(h)return h}return rn(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===nu.mapValue&&s===nu.mapValue)return 0;if(o===nu.mapValue)return 1;if(s===nu.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const m=rn(l[p],h[p]);if(0!==m)return m;const _=iu(a[l[p]],c[h[p]]);if(0!==_)return _}return rn(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Mt()}}function s3(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return rn(t,e);const n=eu(t),r=eu(e),i=rn(n.seconds,r.seconds);return 0!==i?i:rn(n.nanos,r.nanos)}function bp(t){return uP(t)}function uP(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=eu(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Wl(t.bytesValue).toBase64():"referenceValue"in t?It.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=uP(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${uP(n.fields[s])}`;return i+"}"}(t.mapValue):Mt()}function Sd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dP(t){return!!t&&"integerValue"in t}function wv(t){return!!t&&"arrayValue"in t}function a3(t){return!!t&&"nullValue"in t}function l3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lw(t){return!!t&&"mapValue"in t}function Cv(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Jc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Cv(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cv(t.arrayValue.values[n]);return e}return Object.assign({},t)}function c3(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function Mue(t){return"nullValue"in t?Ow:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Sd(tu.empty(),It.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Mt()}function Nue(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Sd(tu.empty(),It.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?nu:Mt()}function u3(t,e){const n=iu(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function d3(t,e){const n=iu(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class to{constructor(e){this.value=e}static empty(){return new to({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lw(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cv(n)}setAll(e){let n=Sr.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Cv(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Lw(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ol(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Jc(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new to(Cv(this.value))}}function h3(t){const e=[];return Jc(t.fields,(n,r)=>{const i=new Sr([n]);if(Lw(r)){const o=h3(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Jo(e)}class Rr{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Rr(e,0,Ut.min(),Ut.min(),Ut.min(),to.empty(),0)}static newFoundDocument(e,n,r,i){return new Rr(e,1,n,Ut.min(),r,i,0)}static newNoDocument(e,n){return new Rr(e,2,n,Ut.min(),Ut.min(),to.empty(),0)}static newUnknownDocument(e,n){return new Rr(e,3,n,Ut.min(),Ut.min(),to.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ut.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=to.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=to.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ou{constructor(e,n){this.position=e,this.inclusive=n}}function f3(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?It.comparator(It.fromName(s.referenceValue),n.key):iu(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function p3(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ol(t.position[n],e.position[n]))return!1;return!0}class bv{constructor(e,n="asc"){this.field=e,this.dir=n}}function kue(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class g3{}class Rn extends g3{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new Oue(e,n,r):"array-contains"===n?new Vue(e,r):"in"===n?new E3(e,r):"not-in"===n?new Bue(e,r):"array-contains-any"===n?new $ue(e,r):new Rn(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new Fue(e,r):new Lue(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(iu(n,this.value)):null!==n&&ru(this.value)===ru(n)&&this.matchesComparison(iu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends g3{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new rr(e,n)}matches(e){return Tp(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Tp(t){return"and"===t.op}function hP(t){return"or"===t.op}function fP(t){return m3(t)&&Tp(t)}function m3(t){for(const e of t.filters)if(e instanceof rr)return!1;return!0}function pP(t){if(t instanceof Rn)return t.field.canonicalString()+t.op.toString()+bp(t.value);if(fP(t))return t.filters.map(e=>pP(e)).join(",");{const e=t.filters.map(n=>pP(n)).join(",");return`${t.op}(${e})`}}function _3(t,e){return t instanceof Rn?(r=t,(i=e)instanceof Rn&&r.op===i.op&&r.field.isEqual(i.field)&&ol(r.value,i.value)):t instanceof rr?function(r,i){return i instanceof rr&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&_3(s,i.filters[a]),!0)}(t,e):void Mt();var r,i}function v3(t,e){const n=t.filters.concat(e);return rr.create(n,t.op)}function y3(t){return t instanceof Rn?`${(n=t).field.canonicalString()} ${n.op} ${bp(n.value)}`:t instanceof rr?function(n){return n.op.toString()+" {"+n.getFilters().map(y3).join(" ,")+"}"}(t):"Filter";var n}class Oue extends Rn{constructor(e,n,r){super(e,n,r),this.key=It.fromName(r.referenceValue)}matches(e){const n=It.comparator(e.key,this.key);return this.matchesComparison(n)}}class Fue extends Rn{constructor(e,n){super(e,"in",n),this.keys=I3(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Lue extends Rn{constructor(e,n){super(e,"not-in",n),this.keys=I3(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function I3(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>It.fromName(r.referenceValue))}class Vue extends Rn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wv(n)&&Ev(n.arrayValue,this.value)}}class E3 extends Rn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Ev(this.value.arrayValue,n)}}class Bue extends Rn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ev(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Ev(this.value.arrayValue,n)}}class $ue extends Rn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ev(this.value.arrayValue,r))}}class Uue{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function gP(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Uue(t,e,n,r,i,o,s)}function Rd(t){const e=mt(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pP(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),vv(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bp(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bp(r)).join(",")),e.ce=n}return e.ce}function Tv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kue(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_3(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!p3(t.startAt,e.startAt)&&p3(t.endAt,e.endAt)}function Vw(t){return It.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Bw(t,e){return t.filters.filter(n=>n instanceof Rn&&n.field.isEqual(e))}function w3(t,e,n){let r=Ow,i=!0;for(const o of Bw(t,e)){let s=Ow,a=!0;switch(o.op){case"<":case"<=":s=Mue(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Ow}u3({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];u3({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}function C3(t,e,n){let r=nu,i=!0;for(const o of Bw(t,e)){let s=nu,a=!0;switch(o.op){case">=":case">":s=Nue(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=nu}d3({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];d3({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}class ql{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null}}function b3(t,e,n,r,i,o,s,a){return new ql(t,e,n,r,i,o,s,a)}function Ap(t){return new ql(t)}function T3(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function mP(t){return null!==t.collectionGroup}function Dp(t){const e=mt(t);if(null===e.le){e.le=[];const n=new Set;for(const o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new cr(Sr.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new bv(o,r))}),n.has(Sr.keyField().canonicalString())||e.le.push(new bv(Sr.keyField(),r))}return e.le}function No(t){const e=mt(t);return e.he||(e.he=function A3(t,e){if("F"===t.limitType)return gP(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new bv(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new ou(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ou(t.startAt.position,t.startAt.inclusive):null;return gP(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Dp(t))),e.he}function _P(t,e){const n=t.filters.concat([e]);return new ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $w(t,e,n){return new ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Av(t,e){return Tv(No(t),No(e))&&t.limitType===e.limitType}function D3(t){return`${Rd(No(t))}|lt:${t.limitType}`}function Sp(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>y3(i)).join(", ")}]`),vv(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bp(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bp(i)).join(",")),`Target(${r})`}(No(t))}; limitType=${t.limitType})`}function Dv(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):It.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Dp(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,l){const c=f3(s,a,l);return s.inclusive?c<=0:c<0}(r.startAt,Dp(r),i)||r.endAt&&!function(s,a,l){const c=f3(s,a,l);return s.inclusive?c>=0:c>0}(r.endAt,Dp(r),i)));var r,i}function S3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function R3(t){return(e,n)=>{let r=!1;for(const i of Dp(t)){const o=jue(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function jue(t,e,n){const r=t.field.isKeyField()?It.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return null!==l&&null!==c?iu(l,c):Mt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Mt()}}class Kl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jc(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return r3(this.inner)}size(){return this.innerSize}}const Hue=new yr(It.comparator);function es(){return Hue}const P3=new yr(It.comparator);function Sv(...t){let e=P3;for(const n of t)e=e.insert(n.key,n);return e}function x3(t){let e=P3;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function sl(){return Rv()}function M3(){return Rv()}function Rv(){return new Kl(t=>t.toString(),(t,e)=>t.isEqual(e))}const zue=new yr(It.comparator),Gue=new cr(It.comparator);function fn(...t){let e=Gue;for(const n of t)e=e.add(n);return e}const Wue=new cr(rn);function vP(){return Wue}function N3(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yv(e)?"-0":e}}function k3(t){return{integerValue:""+t}}function O3(t,e){return Q4(e)?k3(e):N3(t,e)}class Uw{constructor(){this._=void 0}}function que(t,e,n){return t instanceof Rp?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Nw(o)&&(o=kw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Pd?L3(t,e):t instanceof xd?V3(t,e):function(i,o){const s=F3(i,o),a=B3(s)+B3(i.Ie);return dP(s)&&dP(i.Ie)?k3(a):N3(i.serializer,a)}(t,e)}function Kue(t,e,n){return t instanceof Pd?L3(t,e):t instanceof xd?V3(t,e):n}function F3(t,e){return t instanceof Pp?dP(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class Rp extends Uw{}class Pd extends Uw{constructor(e){super(),this.elements=e}}function L3(t,e){const n=$3(e);for(const r of t.elements)n.some(i=>ol(i,r))||n.push(r);return{arrayValue:{values:n}}}class xd extends Uw{constructor(e){super(),this.elements=e}}function V3(t,e){let n=$3(e);for(const r of t.elements)n=n.filter(i=>!ol(i,r));return{arrayValue:{values:n}}}class Pp extends Uw{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function B3(t){return Yr(t.integerValue||t.doubleValue)}function $3(t){return wv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Pv{constructor(e,n){this.field=e,this.transform=n}}class Yue{constructor(e,n){this.version=e,this.transformResults=n}}class kr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kr}static exists(e){return new kr(void 0,e)}static updateTime(e){return new kr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jw(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Hw{}function U3(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Mp(t.key,kr.none()):new xp(t.key,t.data,kr.none());{const n=t.data,r=to.empty();let i=new cr(Sr.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Ql(t.key,r,new Jo(i.toArray()),kr.none())}}function Xue(t,e,n){t instanceof xp?function(i,o,s){const a=i.value.clone(),l=z3(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ql?function(i,o,s){if(!jw(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=z3(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(H3(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function xv(t,e,n,r){return t instanceof xp?function(o,s,a,l){if(!jw(o.precondition,s))return a;const c=o.value.clone(),h=G3(o.fieldTransforms,l,s);return c.setAll(h),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ql?function(o,s,a,l){if(!jw(o.precondition,s))return a;const c=G3(o.fieldTransforms,l,s),h=s.data;return h.setAll(H3(o)),h.setAll(c),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):(a=n,jw(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function Zue(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=F3(r.transform,i||null);null!=o&&(null===n&&(n=to.empty()),n.set(r.field,o))}return n||null}function j3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Ip(r,i,(o,s)=>function Que(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Pd&&i instanceof Pd||r instanceof xd&&i instanceof xd?Ip(r.elements,i.elements,ol):r instanceof Pp&&i instanceof Pp?ol(r.Ie,i.Ie):r instanceof Rp&&i instanceof Rp);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class xp extends Hw{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ql extends Hw{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function H3(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function z3(t,e,n){const r=new Map;Lt(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Kue(s,a,n[i]))}return r}function G3(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,que(o,s,e))}return r}class Mp extends Hw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yP extends Hw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class IP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Xue(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xv(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xv(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=M3();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=U3(s,a);null!==l&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Ut.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fn())}isEqual(e){return this.batchId===e.batchId&&Ip(this.mutations,e.mutations,(n,r)=>j3(n,r))&&Ip(this.baseMutations,e.baseMutations,(n,r)=>j3(n,r))}}class EP{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Lt(e.mutations.length===r.length);let i=function(){return zue}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new EP(e,n,r,i)}}class wP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ede{constructor(e,n){this.count=e,this.unchangedNames=n}}var vi,Fn;function W3(t){switch(t){default:return Mt();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function q3(t){if(void 0===t)return ii("GRPC error has no .code"),_e.UNKNOWN;switch(t){case vi.OK:return _e.OK;case vi.CANCELLED:return _e.CANCELLED;case vi.UNKNOWN:return _e.UNKNOWN;case vi.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case vi.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case vi.INTERNAL:return _e.INTERNAL;case vi.UNAVAILABLE:return _e.UNAVAILABLE;case vi.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case vi.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case vi.NOT_FOUND:return _e.NOT_FOUND;case vi.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case vi.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case vi.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case vi.ABORTED:return _e.ABORTED;case vi.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case vi.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case vi.DATA_LOSS:return _e.DATA_LOSS;default:return Mt()}}(Fn=vi||(vi={}))[Fn.OK=0]="OK",Fn[Fn.CANCELLED=1]="CANCELLED",Fn[Fn.UNKNOWN=2]="UNKNOWN",Fn[Fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fn[Fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fn[Fn.NOT_FOUND=5]="NOT_FOUND",Fn[Fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fn[Fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fn[Fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fn[Fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fn[Fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fn[Fn.ABORTED=10]="ABORTED",Fn[Fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fn[Fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fn[Fn.INTERNAL=13]="INTERNAL",Fn[Fn.UNAVAILABLE=14]="UNAVAILABLE",Fn[Fn.DATA_LOSS=15]="DATA_LOSS";function K3(){return new TextEncoder}const tde=new _p([4294967295,4294967295],0);function Q3(t){const e=K3().encode(t),n=new Kce;return n.update(e),new Uint8Array(n.digest())}function Y3(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new _p([n,r],0),new _p([i,o],0)]}class CP{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mv(`Invalid padding: ${n}`);if(r<0)throw new Mv(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Mv(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Mv(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=_p.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(_p.fromNumber(r)));return 1===i.compare(tde)&&(i=new _p([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=Q3(e),[r,i]=Y3(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new CP(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const n=Q3(e),[r,i]=Y3(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Mv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Nv{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,kv.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Nv(Ut.min(),i,new yr(rn),es(),fn())}}class kv{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new kv(r,n,fn(),fn(),fn())}}class Gw{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class X3{constructor(e,n){this.targetId=e,this.fe=n}}class Z3{constructor(e,n,r=Ti.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class J3{constructor(){this.ge=0,this.pe=tH(),this.ye=Ti.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=fn(),n=fn(),r=fn();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Mt()}}),new kv(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=tH()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Lt(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class nde{constructor(e){this.Be=e,this.ke=new Map,this.qe=es(),this.Qe=eH(),this.Ke=new yr(rn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:Mt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const o=i.target;if(Vw(o))if(0===r){const s=new It(o.path);this.We(n,s,Rr.newNoDocument(s,Ut.min()))}else Lt(1===r);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(e),l=a?this.et(a,e,s):1;0!==l&&(this.He(n),this.Ke=this.Ke.insert(n,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Wl(r).toUint8Array()}catch(l){if(l instanceof o3)return Zo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new CP(s,i,o)}catch(l){return Zo(l instanceof Mv?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&Vw(a.target)){const l=new It(a.target.path);null!==this.qe.get(l)||this.st(s,l)||this.We(s,l,Rr.newNoDocument(l,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=fn();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Ye(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new Nv(e,n,this.Ke,this.qe,r);return this.qe=es(),this.Qe=eH(),this.Ke=new yr(rn),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new J3,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new cr(rn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||Ge("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new J3),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function eH(){return new yr(It.comparator)}function tH(){return new yr(It.comparator)}const rde={asc:"ASCENDING",desc:"DESCENDING"},ide={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ode={and:"AND",or:"OR"};class sde{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bP(t,e){return t.useProto3Json||vv(e)?e:{value:e}}function Np(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nH(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ade(t,e){return Np(t,e.toTimestamp())}function oi(t){return Lt(!!t),Ut.fromTimestamp(function(n){const r=eu(n);return new Nr(r.seconds,r.nanos)}(t))}function TP(t,e){return AP(t,e).canonicalString()}function AP(t,e){const n=(i=t,new Sn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function rH(t){const e=Sn.fromString(t);return Lt(fH(e)),e}function Ov(t,e){return TP(t.databaseId,e.path)}function al(t,e){const n=rH(e);if(n.get(1)!==t.databaseId.projectId)throw new Ue(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ue(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new It(sH(n))}function iH(t,e){return TP(t.databaseId,e)}function oH(t){const e=rH(t);return 4===e.length?Sn.emptyPath():sH(e)}function DP(t){return new Sn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sH(t){return Lt(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function aH(t,e,n){return{name:Ov(t,e),fields:n.value.mapValue.fields}}function lH(t,e,n){const r=al(t,e.name),i=oi(e.updateTime),o=e.createTime?oi(e.createTime):Ut.min(),s=new to({mapValue:{fields:e.fields}}),a=Rr.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Fv(t,e){let n;if(e instanceof xp)n={update:aH(t,e.key,e.value)};else if(e instanceof Mp)n={delete:Ov(t,e.key)};else if(e instanceof Ql)n={update:aH(t,e.key,e.data),updateMask:gde(e.fieldMask)};else{if(!(e instanceof yP))return Mt();n={verify:Ov(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Rp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Pd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xd)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Pp)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw Mt()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:ade(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Mt()),n;var o}function SP(t,e){const n=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?kr.updateTime(oi(o.updateTime)):void 0!==o.exists?kr.exists(o.exists):kr.none():kr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let l=null;"setToServerValue"in a?(Lt("REQUEST_TIME"===a.setToServerValue),l=new Rp):"appendMissingElements"in a?l=new Pd(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new xd(a.removeAllFromArray.values||[]):"increment"in a?l=new Pp(s,a.increment):Mt();const c=Sr.fromServerFormat(a.fieldPath);return new Pv(c,l)}(t,i)):[];var o;if(e.update){const i=al(t,e.update.name),o=new to({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Jo((e.updateMask.fieldPaths||[]).map(h=>Sr.fromServerFormat(h)));return new Ql(i,o,s,n,r)}return new xp(i,o,n,r)}if(e.delete){const i=al(t,e.delete);return new Mp(i,n)}if(e.verify){const i=al(t,e.verify);return new yP(i,n)}return Mt()}function cH(t,e){return{documents:[iH(t,e.path)]}}function RP(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=iH(t,i);const o=function(c){if(0!==c.length)return hH(rr.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(c){if(0!==c.length)return c.map(h=>{return{field:su((m=h).field),direction:hde(m.dir)};var m})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=bP(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i};var c}function uH(t){let e=oH(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Lt(1===r);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){const m=dH(p);return m instanceof rr&&fP(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(m=>{return new bv(kp((w=m).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction));var w}));let a=null;n.limit&&(a=function(p){let m;return m="object"==typeof p?p.value:p,vv(m)?null:m}(n.limit));let l=null;var p;n.startAt&&(l=new ou((p=n.startAt).values||[],!!p.before));let c=null;return n.endAt&&(c=function(p){return new ou(p.values||[],!p.before)}(n.endAt)),b3(e,i,s,o,a,"F",l,c)}function dH(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=kp(n.unaryFilter.field);return Rn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=kp(n.unaryFilter.field);return Rn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=kp(n.unaryFilter.field);return Rn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=kp(n.unaryFilter.field);return Rn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Mt()}}(t):void 0!==t.fieldFilter?Rn.create(kp((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Mt()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return rr.create(n.compositeFilter.filters.map(r=>dH(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Mt()}}(n.compositeFilter.op))}(t):Mt();var n}function hde(t){return rde[t]}function fde(t){return ide[t]}function pde(t){return ode[t]}function su(t){return{fieldPath:t.canonicalString()}}function kp(t){return Sr.fromServerFormat(t.fieldPath)}function hH(t){return t instanceof Rn?function(n){if("=="===n.op){if(l3(n.value))return{unaryFilter:{field:su(n.field),op:"IS_NAN"}};if(a3(n.value))return{unaryFilter:{field:su(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(l3(n.value))return{unaryFilter:{field:su(n.field),op:"IS_NOT_NAN"}};if(a3(n.value))return{unaryFilter:{field:su(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:su(n.field),op:fde(n.op),value:n.value}}}(t):t instanceof rr?function(n){const r=n.getFilters().map(i=>hH(i));return 1===r.length?r[0]:{compositeFilter:{op:pde(n.op),filters:r}}}(t):Mt()}function gde(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fH(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Yl{constructor(e,n,r,i,o=Ut.min(),s=Ut.min(),a=Ti.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Yl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class pH{constructor(e){this.ct=e}}function gH(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ww(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ov(o=t.ct,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Np(o,s.version.toTimestamp()),createTime:Np(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Md(e.version)};else{if(!e.isUnknownDocument())return Mt();r.unknownDocument={path:n.path.toArray(),version:Md(e.version)}}var o,s;return r}function Ww(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Md(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Nd(t){const e=new Nr(t.seconds,t.nanoseconds);return Ut.fromTimestamp(e)}function kd(t,e){const n=(e.baseMutations||[]).map(o=>SP(t.ct,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>SP(t.ct,o)),i=Nr.fromMillis(e.localWriteTimeMs);return new IP(e.batchId,i,n,r)}function Lv(t){const e=Nd(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Nd(t.lastLimboFreeSnapshotVersion):Ut.min();let r;return r=void 0!==t.query.documents?(Lt(1===(o=t.query).documents.length),No(Ap(oH(o.documents[0])))):function(o){return No(uH(o))}(t.query),new Yl(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ti.fromBase64String(t.resumeToken));var o}function mH(t,e){const n=Md(e.snapshotVersion),r=Md(e.lastLimboFreeSnapshotVersion);let i;i=Vw(e.target)?cH(t.ct,e.target):RP(t.ct,e.target).ut;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Rd(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function PP(t){const e=uH({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?$w(e,e.limit,"L"):e}function xP(t,e){return new wP(e.largestBatchId,SP(t.ct,e.overlayMutation))}function _H(t,e){const n=e.path.lastSegment();return[t,po(e.path.popLast()),n]}function vH(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Md(r.readTime),documentKey:po(r.documentKey.path),largestBatchId:r.largestBatchId}}class _de{getBundleMetadata(e,n){return yH(e).get(n).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Nd(o.createTime),version:o.version};var o})}saveBundleMetadata(e,n){return yH(e).put({bundleId:(i=n).id,createTime:Md(oi(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return IH(e).get(n).next(r=>{if(r)return{name:(o=r).name,query:PP(o.bundledQuery),readTime:Nd(o.readTime)};var o})}saveNamedQuery(e,n){return IH(e).put({name:(i=n).name,readTime:Md(oi(i.readTime)),bundledQuery:i.bundledQuery});var i}}function yH(t){return Ui(t,"bundles")}function IH(t){return Ui(t,"namedQueries")}class qw{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new qw(e,n.uid||"")}getOverlay(e,n){return Vv(e).get(_H(this.userId,n)).next(r=>r?xP(this.serializer,r):null)}getOverlays(e,n){const r=sl();return oe.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,s)=>{const a=new wP(n,s);i.push(this.ht(e,a))}),oe.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(s=>i.add(po(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Vv(e).H("collectionPathOverlayIndex",a))}),oe.waitFor(o)}getOverlaysForCollection(e,n,r){const i=sl(),o=po(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Vv(e).W("collectionPathOverlayIndex",s).next(a=>{for(const l of a){const c=xP(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=sl();let s;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Vv(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,c,h)=>{const p=xP(this.serializer,c);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,n){return Vv(e).put(function(i,o,s){const[a,l,c]=_H(o,s.mutation.key);return{userId:o,collectionPath:l,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Fv(i.ct,s.mutation)}}(this.serializer,this.userId,n))}}function Vv(t){return Ui(t,"documentOverlays")}class Od{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Yr(e.integerValue));else if("doubleValue"in e){const r=Yr(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),yv(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(n,20),"string"==typeof r?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Wl(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?c3(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):Mt()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),It.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function vde(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function EH(t){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=vde(255&r[o]);if(i+=s,8!==s)break}return i}(t);return Math.ceil(e/8)}Od.bt=new Od;class yde{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const n=this.Bt(e),r=EH(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Bt(e),r=EH(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Ide{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Ede{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Bv{constructor(){this.Gt=new yde,this.zt=new Ide(this.Gt),this.jt=new Ede(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Fd{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Fd(this.indexId,this.documentKey,this.arrayValue,r)}}function au(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=wH(t.arrayValue,e.arrayValue),0!==n?n:(n=wH(t.directionalValue,e.directionalValue),0!==n?n:It.comparator(t.documentKey,e.documentKey)))}function wH(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class CH{constructor(e){this.Yt=new cr((n,r)=>Sr.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Lt(e.collectionGroup===this.collectionId),this.en)return!1;const n=oP(e);if(void 0!==n&&!this.nn(n))return!1;const r=Td(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[o];if(!this.rn(a,l)||!this.sn(this.Zt[s++],l))return!1}++o}for(;o<r.length;++o)if(s>=this.Zt.length||!this.sn(this.Zt[s++],r[o]))return!1;return!0}on(){if(this.en)return null;let e=new cr(Sr.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new Ad(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Ad(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Ad(r.field,"asc"===r.dir?0:1)));return new Ep(Ep.UNKNOWN_ID,this.collectionId,n,wp.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function bH(t){var e,n;if(Lt(t instanceof Rn||t instanceof rr),t instanceof Rn){if(t instanceof E3){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(o=>Rn.create(t.field,"==",o)))||[];return rr.create(i,"or")}return t}const r=t.filters.map(i=>bH(i));return rr.create(r,t.op)}function wde(t){if(0===t.getFilters().length)return[];const e=kP(bH(t));return Lt(TH(e)),MP(e)||NP(e)?[e]:e.getFilters()}function MP(t){return t instanceof Rn}function NP(t){return t instanceof rr&&fP(t)}function TH(t){return MP(t)||NP(t)||function(n){if(n instanceof rr&&hP(n)){for(const r of n.getFilters())if(!MP(r)&&!NP(r))return!1;return!0}return!1}(t)}function kP(t){if(Lt(t instanceof Rn||t instanceof rr),t instanceof Rn)return t;if(1===t.filters.length)return kP(t.filters[0]);const e=t.filters.map(r=>kP(r));let n=rr.create(e,t.op);return n=Kw(n),TH(n)?n:(Lt(n instanceof rr),Lt(Tp(n)),Lt(n.filters.length>1),n.filters.reduce((r,i)=>OP(r,i)))}function OP(t,e){let n;return Lt(t instanceof Rn||t instanceof rr),Lt(e instanceof Rn||e instanceof rr),n=t instanceof Rn?e instanceof Rn?rr.create([t,e],"and"):AH(t,e):e instanceof Rn?AH(e,t):function(i,o){if(Lt(i.filters.length>0&&o.filters.length>0),Tp(i)&&Tp(o))return v3(i,o.getFilters());const s=hP(i)?i:o,a=hP(i)?o:i,l=s.filters.map(c=>OP(c,a));return rr.create(l,"or")}(t,e),Kw(n)}function AH(t,e){if(Tp(e))return v3(e,t.getFilters());{const n=e.filters.map(r=>OP(t,r));return rr.create(n,"or")}}function Kw(t){if(Lt(t instanceof Rn||t instanceof rr),t instanceof Rn)return t;const e=t.getFilters();if(1===e.length)return Kw(e[0]);if(m3(t))return t;const n=e.map(i=>Kw(i)),r=[];return n.forEach(i=>{i instanceof Rn?r.push(i):i instanceof rr&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:rr.create(r,t.op)}class Cde{constructor(){this._n=new FP}addToCollectionParentIndex(e,n){return this._n.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(bs.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class FP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new cr(Sn.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new cr(Sn.comparator)).toArray()}}const Qw=new Uint8Array(0);class bde{constructor(e,n){this.databaseId=n,this.an=new FP,this.un=new Kl(r=>Rd(r),(r,i)=>Tv(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const o={collectionId:r,parent:po(i)};return DH(e).put(o)}return oe.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[H4(n),""],!1,!0);return DH(e).W(i).next(o=>{for(const s of o){if(s.collectionId!==n)break;r.push(il(s.parent))}return r})}addFieldIndex(e,n){const r=$v(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete i.indexId;const o=r.add(i);if(n.indexState){const s=Fp(e);return o.next(a=>{s.put(vH(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=$v(e),i=Fp(e),o=Op(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=$v(e),r=Op(e),i=Fp(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return oe.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new CH(r).on();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const r=Op(e);let i=!0;const o=new Map;return oe.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=fn();const a=[];return oe.forEach(o,(l,c)=>{var me;Ge("IndexedDbIndexManager",`Using index ${me=l,`id=${me.indexId}|cg=${me.collectionGroup}|f=${me.fields.map(ve=>`${ve.fieldPath}:${ve.kind}`).join(",")}`} to execute ${Rd(n)}`);const h=function(me,ve){const Ye=oP(ve);if(void 0===Ye)return null;for(const At of Bw(me,Ye.fieldPath))switch(At.op){case"array-contains-any":return At.value.arrayValue.values||[];case"array-contains":return[At.value]}return null}(c,l),p=function(me,ve){const Ye=new Map;for(const At of Td(ve))for(const _n of Bw(me,At.fieldPath))switch(_n.op){case"==":case"in":Ye.set(At.fieldPath.canonicalString(),_n.value);break;case"not-in":case"!=":return Ye.set(At.fieldPath.canonicalString(),_n.value),Array.from(Ye.values())}return null}(c,l),m=function(me,ve){const Ye=[];let At=!0;for(const _n of Td(ve)){const Bn=0===_n.kind?w3(me,_n.fieldPath,me.startAt):C3(me,_n.fieldPath,me.startAt);Ye.push(Bn.value),At&&(At=Bn.inclusive)}return new ou(Ye,At)}(c,l),_=function(me,ve){const Ye=[];let At=!0;for(const _n of Td(ve)){const Bn=0===_n.kind?C3(me,_n.fieldPath,me.endAt):w3(me,_n.fieldPath,me.endAt);Ye.push(Bn.value),At&&(At=Bn.inclusive)}return new ou(Ye,At)}(c,l),w=this.hn(l,c,m),T=this.hn(l,c,_),S=this.Pn(l,c,p),U=this.In(l.indexId,h,w,m.inclusive,T,_.inclusive,S);return oe.forEach(U,H=>r.j(H,n.limit).next(me=>{me.forEach(ve=>{const Ye=It.fromSegments(ve.documentKey);s.has(Ye)||(s=s.add(Ye),a.push(Ye))})}))}).next(()=>a)}return oe.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:wde(rr.create(e.filters,"and")).map(r=>gP(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){const l=(null!=n?n.length:1)*Math.max(r.length,o.length),c=l/(null!=n?n.length:1),h=[];for(let p=0;p<l;++p){const m=n?this.Tn(n[p/c]):Qw,_=this.En(e,m,r[p%c],i),w=this.dn(e,m,o[p%c],s),T=a.map(S=>this.En(e,m,S,!0));h.push(...this.createRange(_,w,T))}return h}En(e,n,r,i){const o=new Fd(e,It.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){const o=new Fd(e,It.empty(),n,r);return i?o.Jt():o}ln(e,n){const r=new CH(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2;const i=this.cn(n);return oe.forEach(i,o=>this.ln(e,o).next(s=>{s?0!==r&&s.fields.length<function(l){let c=new cr(Sr.comparator),h=!1;for(const p of l.filters)for(const m of p.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?h=!0:c=c.add(m.field));for(const p of l.orderBy)p.field.isKeyField()||(c=c.add(p.field));return c.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}An(e,n){const r=new Bv;for(const i of Td(e)){const o=n.data.field(i.fieldPath);if(null==o)return null;const s=r.Ht(i.kind);Od.bt.Pt(o,s)}return r.Wt()}Tn(e){const n=new Bv;return Od.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new Bv;return Od.bt.Pt(Sd(this.databaseId,n),r.Ht(function(o){const s=Td(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(null===r)return[];let i=[];i.push(new Bv);let o=0;for(const s of Td(e)){const a=r[o++];for(const l of i)if(this.Vn(n,s.fieldPath)&&wv(a))i=this.mn(i,s,a);else{const c=l.Ht(s.kind);Od.bt.Pt(a,c)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const l=new Bv;l.seed(a.Wt()),Od.bt.Pt(s,l.Ht(n.kind)),o.push(l)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof Rn&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=$v(e),i=Fp(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{const s=[];return oe.forEach(o,a=>i.get([a.indexId,this.uid]).next(l=>{s.push(function(h,p){const m=p?new wp(p.sequenceNumber,new bs(Nd(p.readTime),new It(il(p.documentKey)),p.largestBatchId)):wp.empty(),_=h.fields.map(([w,T])=>new Ad(Sr.fromServerFormat(w),T));return new Ep(h.indexId,h.collectionGroup,_,m)}(a,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:rn(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=$v(e),o=Fp(e);return this.gn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>oe.forEach(a,l=>o.put(vH(l.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){const r=new Map;return oe.forEach(n,(i,o)=>{const s=r.get(i.collectionGroup);return(s?oe.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),oe.forEach(a,l=>this.pn(e,i,l).next(c=>{const h=this.yn(o,l);return c.isEqual(h)?oe.resolve():this.wn(e,o,l,c,h)}))))})}Sn(e,n,r,i){return Op(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Op(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=Op(e);let o=new cr(au);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new Fd(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new cr(au);const i=this.An(n,e);if(null==i)return r;const o=oP(n);if(null!=o){const s=e.data.field(o.fieldPath);if(wv(s))for(const a of s.arrayValue.values||[])r=r.add(new Fd(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Fd(n.indexId,e.key,Qw,i));return r}wn(e,n,r,i,o){Ge("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const s=[];return function(l,c,h,p,m){const _=l.getIterator(),w=c.getIterator();let T=Cp(_),S=Cp(w);for(;T||S;){let U=!1,H=!1;if(T&&S){const me=h(T,S);me<0?H=!0:me>0&&(U=!0)}else null!=T?H=!0:U=!0;U?(p(S),S=Cp(w)):H?(m(T),T=Cp(_)):(T=Cp(_),S=Cp(w))}}(i,o,au,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),oe.waitFor(s)}gn(e){let n=1;return Fp(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>au(s,a)).filter((s,a,l)=>!a||0!==au(s,l[a-1]));const i=[];i.push(e);for(const s of r){const a=au(s,e),l=au(s,n);if(0===a)i[0]=e.Jt();else if(a>0&&l<0)i.push(s),i.push(s.Jt());else if(l>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Qw,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Qw,[]]))}return o}Dn(e,n){return au(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(SH)}getMinOffset(e,n){return oe.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||Mt())).next(SH)}}function DH(t){return Ui(t,"collectionParents")}function Op(t){return Ui(t,"indexEntries")}function $v(t){return Ui(t,"indexConfiguration")}function Fp(t){return Ui(t,"indexState")}function SH(t){Lt(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;sP(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new bs(e.readTime,e.documentKey,n)}const RH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class go{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new go(e,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function PH(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:s},(h,p,m)=>(a++,m.delete()));o.push(l.next(()=>{Lt(1===a)}));const c=[];for(const h of n.mutations){const p=Z4(e,h.key.path,n.batchId);o.push(i.delete(p)),c.push(h.key)}return oe.waitFor(o).next(()=>c)}function Yw(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Mt();e=t.noDocument}return JSON.stringify(e).length}go.DEFAULT_COLLECTION_PERCENTILE=10,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,go.DEFAULT=new go(41943040,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),go.DISABLED=new go(-1,0,0);class Xw{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){Lt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new Xw(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lu(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=Lp(e),s=lu(e);return s.add({}).next(a=>{Lt("number"==typeof a);const l=new IP(a,n,r,i),c=function(_,w,T){const S=T.baseMutations.map(H=>Fv(_.ct,H)),U=T.mutations.map(H=>Fv(_.ct,H));return{userId:w,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:S,mutations:U}}(this.serializer,this.userId,l),h=[];let p=new cr((m,_)=>rn(m.canonicalString(),_.canonicalString()));for(const m of i){const _=Z4(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(c)),h.push(o.put(_,hue))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),oe.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return lu(e).get(n).next(r=>r?(Lt(r.userId===this.userId),kd(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?oe.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return lu(e).Y({index:"userMutationsIndex",range:i},(s,a,l)=>{a.userId===this.userId&&(Lt(a.batchId>=r),o=kd(this.serializer,a)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return lu(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lu(e).W("userMutationsIndex",n).next(r=>r.map(i=>kd(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=xw(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Lp(e).Y({range:i},(s,a,l)=>{const[c,h,p]=s,m=il(h);if(c===this.userId&&n.path.isEqual(m))return lu(e).get(p).next(_=>{if(!_)throw Mt();Lt(_.userId===this.userId),o.push(kd(this.serializer,_))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new cr(rn);const i=[];return n.forEach(o=>{const s=xw(this.userId,o.path),a=IDBKeyRange.lowerBound(s),l=Lp(e).Y({range:a},(c,h,p)=>{const[m,_,w]=c,T=il(_);m===this.userId&&o.path.isEqual(T)?r=r.add(w):p.done()});i.push(l)}),oe.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=xw(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new cr(rn);return Lp(e).Y({range:s},(l,c,h)=>{const[p,m,_]=l,w=il(m);p===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(_)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],i=[];return n.forEach(o=>{i.push(lu(e).get(o).next(s=>{if(null===s)throw Mt();Lt(s.userId===this.userId),r.push(kd(this.serializer,s))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return PH(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return oe.resolve();const r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Lp(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){const l=il(o[1]);i.push(l)}else a.done()}).next(()=>{Lt(0===i.length)})})}containsKey(e,n){return xH(e,this.userId,n)}xn(e){return MH(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xH(t,e,n){const r=xw(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Lp(t).Y({range:o,J:!0},(a,l,c)=>{const[h,p,m]=a;h===e&&p===i&&(s=!0),c.done()}).next(()=>s)}function lu(t){return Ui(t,"mutations")}function Lp(t){return Ui(t,"documentMutations")}function MH(t){return Ui(t,"mutationQueues")}class Ld{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ld(0)}static Ln(){return new Ld(-1)}}class Tde{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new Ld(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Ut.fromTimestamp(new Nr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Vp(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Lt(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return Vp(e).Y((s,a)=>{const l=Lv(a);l.sequenceNumber<=n&&null===r.get(l.targetId)&&(i++,o.push(this.removeTargetData(e,l)))}).next(()=>oe.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Vp(e).Y((r,i)=>{const o=Lv(i);n(o)})}Bn(e){return NH(e).get("targetGlobalKey").next(n=>(Lt(null!==n),n))}kn(e,n){return NH(e).put("targetGlobalKey",n)}qn(e,n){return Vp(e).put(mH(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Rd(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Vp(e).Y({range:i,index:"queryTargetsIndex"},(s,a,l)=>{const c=Lv(a);Tv(n,c.target)&&(o=c,l.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=cu(e);return n.forEach(s=>{const a=po(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),oe.waitFor(i)}removeMatchingKeys(e,n,r){const i=cu(e);return oe.forEach(n,o=>{const s=po(o.path);return oe.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=cu(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=cu(e);let o=fn();return i.Y({range:r,J:!0},(s,a,l)=>{const c=il(s[1]),h=new It(c);o=o.add(h)}).next(()=>o)}containsKey(e,n){const r=po(n.path),i=IDBKeyRange.bound([r],[H4(r)],!1,!0);let o=0;return cu(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],l,c)=>{0!==s&&(o++,c.done())}).next(()=>o>0)}_t(e,n){return Vp(e).get(n).next(r=>r?Lv(r):null)}}function Vp(t){return Ui(t,"targets")}function NH(t){return Ui(t,"targetGlobal")}function cu(t){return Ui(t,"targetDocuments")}function kH([t,e],[n,r]){const i=rn(t,n);return 0===i?rn(e,r):i}class Ade{constructor(e){this.Kn=e,this.buffer=new cr(kH),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();kH(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class OH{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;Ge("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,y.A)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Zc(r)?Ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Xc(r)}yield n.zn(3e5)}))}}class Dde{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return oe.resolve(Ts._e);const r=new Ade(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(RH)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RH):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(c=Date.now(),yp()<=ws.$b.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-h}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(l-a)+`ms\n\tRemoved ${p} documents in `+(c-l)+`ms\nTotal Duration: ${c-h}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}}class Sde{constructor(e,n){this.db=e,this.garbageCollector=function FH(t,e){return new Dde(t,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Zw(e,r)}removeReference(e,n,r){return Zw(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Zw(e,n)}er(e,n){return function(i,o){let s=!1;return MH(i).Z(a=>xH(i,a,o).next(l=>(l&&(s=!0),oe.resolve(!l)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Xn(e,(s,a)=>{if(a<=n){const l=this.er(e,s).next(c=>{if(!c)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Ut.min()),cu(e).delete([0,po(s.path)])))});i.push(l)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Zw(e,n)}Xn(e,n){const r=cu(e);let i,o=Ts._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:l,sequenceNumber:c})=>{0===s?(o!==Ts._e&&n(new It(il(i)),o),o=c,i=l):o=Ts._e}).next(()=>{o!==Ts._e&&n(new It(il(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zw(t,e){return cu(t).put((i=t.currentSequenceNumber,{targetId:0,path:po(e.path),sequenceNumber:i}));var i}class LH{constructor(){this.changes=new Kl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Rde{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Vd(e).put(r)}removeEntry(e,n,r){return Vd(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ww(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Rr.newInvalidDocument(n);return Vd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Uv(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Rr.newInvalidDocument(n)};return Vd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Uv(n))},(i,o)=>{r={document:this.nr(n,o),size:Yw(o)}}).next(()=>r)}getEntries(e,n){let r=es();return this.ir(e,n,(i,o)=>{const s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=es(),i=new yr(It.comparator);return this.ir(e,n,(o,s)=>{const a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,Yw(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return oe.resolve();let i=new cr(UH);n.forEach(l=>i=i.add(l));const o=IDBKeyRange.bound(Uv(i.first()),Uv(i.last())),s=i.getIterator();let a=s.getNext();return Vd(e).Y({index:"documentKeyIndex",range:o},(l,c,h)=>{const p=It.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&UH(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,c),a=s.hasNext()?s.getNext():null),a?h.U(Uv(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Ww(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vd(e).W(IDBKeyRange.bound(a,l,!0)).next(c=>{null==o||o.incrementDocumentReadCount(c.length);let h=es();for(const p of c){const m=this.nr(It.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Dv(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,i){let o=es();const s=$H(n,r),a=$H(n,bs.max());return Vd(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(l,c,h)=>{const p=this.nr(It.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Pde(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return BH(e).get("remoteDocumentGlobalKey").next(n=>(Lt(!!n),n))}tr(e,n){return BH(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=function mde(t,e){let n;if(e.document)n=lH(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=It.fromSegments(e.noDocument.path),i=Nd(e.noDocument.readTime);n=Rr.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Mt();{const r=It.fromSegments(e.unknownDocument.path),i=Nd(e.unknownDocument.version);n=Rr.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const o=new Nr(i[0],i[1]);return Ut.fromTimestamp(o)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(Ut.min()))return r}return Rr.newInvalidDocument(e)}}function VH(t){return new Rde(t)}class Pde extends LH{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Kl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new cr((o,s)=>rn(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){const l=gH(this.ar.serializer,s);i=i.add(o.path.popLast());const c=Yw(l);r+=c-a.size,n.push(this.ar.addEntry(e,o,l))}else if(r-=a.size,this.trackRemovals){const l=gH(this.ar.serializer,s.convertToNoDocument(Ut.min()));n.push(this.ar.addEntry(e,o,l))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),oe.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function BH(t){return Ui(t,"remoteDocumentGlobal")}function Vd(t){return Ui(t,"remoteDocumentsV14")}function Uv(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $H(t,e){const n=e.documentKey.path.toArray();return[t,Ww(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function UH(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=rn(n[o],r[o]),i)return i;return i=rn(n.length,r.length),i||(i=rn(n[n.length-2],r[r.length-2]),i||rn(n[n.length-1],r[r.length-1]))}class xde{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class jH{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&xv(r.mutation,i,Jo.empty(),Nr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fn()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fn()){const i=sl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Sv();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=sl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fn()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=es();const s=Rv(),a=Rv();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(void 0===h||h.mutation instanceof Ql)?o=o.insert(c.key,c):void 0!==h?(s.set(c.key,h.mutation.getFieldMask()),xv(h.mutation,c,h.mutation.getFieldMask(),Nr.now())):s.set(c.key,Jo.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,h)=>s.set(c,h)),n.forEach((c,h)=>{var p;return a.set(c,new xde(h,null!==(p=s.get(c))&&void 0!==p?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Rv();let i=new yr((s,a)=>s-a),o=fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=n.get(l);if(null===c)return;let h=r.get(l)||Jo.empty();h=a.applyToLocalView(c,h),r.set(l,h);const p=(i.get(a.batchId)||fn()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,p=M3();h.forEach(m=>{if(!o.has(m)){const _=U3(n.get(m),r.get(m));null!==_&&p.set(m,_),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,p))}return oe.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return It.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):mP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):oe.resolve(sl());let a=-1,l=o;return s.next(c=>oe.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?oe.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,fn())).next(h=>({batchId:a,changes:x3(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new It(n)).next(r=>{let i=Sv();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Sv();return this.indexManager.getCollectionParents(e,o).next(a=>oe.forEach(a,l=>{const c=(p=n,m=l.child(o),new ql(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt));var p,m;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,c)=>{const h=c.getKey();null===s.get(h)&&(s=s.insert(h,Rr.newInvalidDocument(h)))});let a=Sv();return s.forEach((l,c)=>{const h=o.get(l);void 0!==h&&xv(h.mutation,c,Jo.empty(),Nr.now()),Dv(n,c)&&(a=a.insert(l,c))}),a})}}class Mde{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return oe.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(i=n).id,version:i.version,createTime:oi(i.createTime)}),oe.resolve();var i}getNamedQuery(e,n){return oe.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(i=n).name,query:PP(i.bundledQuery),readTime:oi(i.readTime)}),oe.resolve();var i}}class Nde{constructor(){this.overlays=new yr(It.comparator),this.hr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=sl();return oe.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),oe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const i=sl(),o=n.length+1,s=new It(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new yr((c,h)=>c-h);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=o.get(c.largestBatchId);null===h&&(h=sl(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=sl(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return oe.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new wP(n,r));let o=this.hr.get(n);void 0===o&&(o=fn(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}}class LP{constructor(){this.Pr=new cr(ji.Ir),this.Tr=new cr(ji.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new ji(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ji(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new It(new Sn([])),r=new ji(n,e),i=new ji(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new It(new Sn([])),r=new ji(n,e),i=new ji(n,e+1);let o=fn();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new ji(e,0),r=this.Pr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class ji{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return It.comparator(e.key,n.key)||rn(e.pr,n.pr)}static Er(e,n){return rn(e.pr,n.pr)||It.comparator(e.key,n.key)}}class kde{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new cr(ji.Ir)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.yr;this.yr++;const s=new IP(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new ji(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return oe.resolve(s)}lookupMutationBatch(e,n){return oe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.br(n+1),o=i<0?0:i;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ji(n,0),i=new ji(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{const a=this.Sr(s.pr);o.push(a)}),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new cr(rn);return n.forEach(i=>{const o=new ji(i,0),s=new ji(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),oe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;It.isDocumentKey(o)||(o=o.child(""));const s=new ji(new It(o),0);let a=new cr(rn);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},s),oe.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Lt(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return oe.forEach(n.mutations,i=>{const o=new ji(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new ji(n,0),i=this.wr.firstAfterOrEqual(r);return oe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Ode{constructor(e){this.vr=e,this.docs=new yr(It.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():Rr.newInvalidDocument(n))}getEntries(e,n){let r=es();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Rr.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=es();const s=n.path,a=new It(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||sP(G4(h),r)<=0||(i.has(h.key)||Dv(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Mt()}Fr(e,n){return oe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Fde(this)}getSize(e){return oe.resolve(this.size)}}class Fde extends LH{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),oe.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class Lde{constructor(e){this.persistence=e,this.Mr=new Kl(n=>Rd(n),Tv),this.lastRemoteSnapshotVersion=Ut.min(),this.highestTargetId=0,this.Or=0,this.Nr=new LP,this.targetCount=0,this.Lr=Ld.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),oe.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Ld(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.qn(n),oe.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),oe.waitFor(o).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),oe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this.Nr.containsKey(n))}}class VP{constructor(e,n){this.Br={},this.overlays={},this.kr=new Ts(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Lde(this),this.indexManager=new Cde,this.remoteDocumentCache=new Ode(r=>this.referenceDelegate.Kr(r)),this.serializer=new pH(n),this.$r=new Mde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Nde,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new kde(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Ge("MemoryPersistence","Starting transaction:",e);const i=new Vde(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return oe.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class Vde extends q4{constructor(e){super(),this.currentSequenceNumber=e}}class Jw{constructor(e){this.persistence=e,this.zr=new LP,this.jr=null}static Hr(e){return new Jw(e)}get Jr(){if(this.jr)return this.jr;throw Mt()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),oe.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Jr,r=>{const i=It.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,Ut.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return oe.or([()=>oe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class Bde{constructor(e){this.serializer=e}N(e,n,r,i){const o=new Pw("createOrUpgrade",n);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",X4,{unique:!0}),l.createObjectStore("documentMutations"),HH(e),function(l){l.createObjectStore("remoteDocuments")}(e));let s=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),HH(e)),s=s.next(()=>function(l){const c=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ut.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(l,c){return c.store("mutations").W().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",X4,{unique:!0});const p=c.store("mutations"),m=h.map(_=>p.put(_));return oe.waitFor(m)})}(e,o))),s=s.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:bue});c.createIndex("collectionPathOverlayIndex",Tue,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",Aue,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:fue});c.createIndex("documentKeyIndex",pue),c.createIndex("collectionGroupIndex",gue)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Iue}).createIndex("sequenceNumberIndex",Eue,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:wue}).createIndex("documentKeyIndex",Cue,{unique:!1})}(e))),s}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Yw(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>oe.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>oe.forEach(a,l=>{Lt(l.userId===o.userId);const c=kd(this.serializer,l);return PH(e,o.userId,c).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Y((s,a)=>{const l=new Sn(s),c=[0,po(l)];o.push(n.get(c).next(h=>h?oe.resolve():n.put({targetId:0,path:po(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:yue});const r=n.store("collectionParents"),i=new FP,o=s=>{if(i.add(s)){const a=s.lastSegment(),l=s.popLast();return r.put({collectionId:a,parent:po(l)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{const l=new Sn(s);return o(l.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,l],c)=>{const h=il(a);return o(h.popLast())}))}ri(e){const n=e.store("targets");return n.Y((r,i)=>{const o=Lv(i),s=mH(this.serializer,o);return n.put(s)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{const a=n.store("remoteDocumentsV14"),l=(p=s,p.document?new It(Sn.fromString(p.document.name).popFirst(5)):p.noDocument?It.fromSegments(p.noDocument.path):p.unknownDocument?It.fromSegments(p.unknownDocument.path):Mt()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var p;i.push(a.put(c))}).next(()=>oe.waitFor(i))}si(e,n){const r=n.store("mutations"),i=VH(this.serializer),o=new VP(Jw.Hr,this.serializer.ct);return r.W().next(s=>{const a=new Map;return s.forEach(l=>{var c;let h=null!==(c=a.get(l.userId))&&void 0!==c?c:fn();kd(this.serializer,l).keys().forEach(p=>h=h.add(p)),a.set(l.userId,h)}),oe.forEach(a,(l,c)=>{const h=new $i(c),p=qw.lt(this.serializer,h),m=o.getIndexManager(h),_=Xw.lt(h,this.serializer,m,o.referenceDelegate);return new jH(i,_,p,m).recalculateAndSaveOverlaysForDocumentKeys(new cP(n,Ts._e),l).next()})})}}function HH(t){t.createObjectStore("targetDocuments",{keyPath:_ue}).createIndex("documentTargetsIndex",vue,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",mue,{unique:!0}),t.createObjectStore("targetGlobal")}const BP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $P{constructor(e,n,r,i,o,s,a,l,c,h,p=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=c,this.ai=h,this.ui=p,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=m=>Promise.resolve(),!$P.D())throw new Ue(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Sde(this,i),this.Ti=n+"main",this.serializer=new pH(l),this.Ei=new Ys(this.Ti,this.ui,new Bde(this.serializer)),this.Qr=new Tde(this.referenceDelegate,this.serializer),this.remoteDocumentCache=VH(this.serializer),this.$r=new _de,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===h&&ii("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(_e.FAILED_PRECONDITION,BP);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Ts(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var r=(0,y.A)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(function(){var n=(0,y.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,y.A)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>tC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Zc(e))return Ge("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ge("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return jv(e).get("owner").next(n=>oe.resolve(this.Si(n)))}bi(e){return tC(e).delete(this.clientId)}Di(){var e=this;return(0,y.A)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ui(r,"clientMetadata");return i.W().next(o=>{const s=e.vi(o,18e5),a=o.filter(l=>-1===s.indexOf(l));return oe.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of n)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?oe.resolve(!0):jv(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new Ue(_e.FAILED_PRECONDITION,BP);return!1}}return!(!this.networkEnabled||!this.inForeground)||tC(e).W().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Ge("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,y.A)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new cP(n,Ts._e);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>tC(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Xw.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bde(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return qw.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){Ge("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",o=15===(l=this.ui)?Sue:14===l?t3:13===l?e3:12===l?Due:11===l?J4:void Mt();var l;let s;return this.Ei.runTransaction(e,i,o,a=>(s=new cP(a,this.kr?this.kr.next():Ts._e),"readwrite-primary"===n?this.gi(s).next(l=>!!l||this.pi(s)).next(l=>{if(!l)throw ii(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Ue(_e.FAILED_PRECONDITION,W4);return r(s)}).next(l=>this.wi(s).next(()=>l)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return jv(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Ue(_e.FAILED_PRECONDITION,BP)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jv(e).put("owner",n)}static D(){return Ys.D()}yi(e){const n=jv(e);return n.get("owner").next(r=>this.Si(r)?(Ge("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):oe.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n||e>r&&(ii(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,A.nr)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return Ge("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ii("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ii("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function jv(t){return Ui(t,"owner")}function tC(t){return Ui(t,"clientMetadata")}function UP(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class jP{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=fn(),i=fn();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new jP(e,n.fromCache,r,i)}}class $de{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class zH{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,A.nr)()?8:Ys.v((0,A.ZQ)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new $de;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(yp()<=ws.$b.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",Sp(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),oe.resolve()):(yp()<=ws.$b.DEBUG&&Ge("QueryEngine","Query:",Sp(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(yp()<=ws.$b.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",Sp(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,No(n))):oe.resolve())}ji(e,n){if(T3(n))return oe.resolve(null);let r=No(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=$w(n,null,"F"),r=No(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=fn(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,s,l.readTime)?this.ji(e,$w(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return T3(n)||i.isEqual(Ut.min())?oe.resolve(null):this.zi.getDocuments(e,r).next(o=>{const s=this.Zi(n,o);return this.Xi(n,s,r,i)?oe.resolve(null):(yp()<=ws.$b.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sp(n)),this.es(e,s,n,z4(i,-1)).next(a=>a))})}Zi(e,n){let r=new cr(R3(e));return n.forEach((i,o)=>{Dv(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return yp()<=ws.$b.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",Sp(n)),this.zi.getDocumentsMatchingQuery(e,n,bs.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}class Ude{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new yr(rn),this.rs=new Kl(o=>Rd(o),Tv),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jH(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function GH(t,e,n,r){return new Ude(t,e,n,r)}function WH(t,e){return HP.apply(this,arguments)}function HP(){return HP=(0,y.A)(function*(t,e){const n=mt(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=fn();for(const c of i){s.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of o){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})}),HP.apply(this,arguments)}function qH(t){const e=mt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function KH(t,e,n){let r=fn(),i=fn();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=es();return n.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ut.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):Ge("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:s,ls:i}})}function zde(t,e){const n=mt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bp(t,e){const n=mt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,oe.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new Yl(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function $p(t,e,n){return zP.apply(this,arguments)}function zP(){return zP=(0,y.A)(function*(t,e,n){const r=mt(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Zc(s))throw s;Ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),zP.apply(this,arguments)}function nC(t,e,n){const r=mt(t);let i=Ut.min(),o=fn();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,h){const p=mt(l),m=p.rs.get(h);return void 0!==m?oe.resolve(p.ns.get(m)):p.Qr.getTargetData(c,h)}(r,s,No(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:Ut.min(),n?o:fn())).next(a=>(XH(r,S3(e),a),{documents:a,hs:o})))}function QH(t,e){const n=mt(t),r=mt(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function YH(t,e){const n=mt(t),r=n.ss.get(e)||Ut.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,z4(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(XH(n,e,i),i))}function XH(t,e,n){let r=t.ss.get(e)||Ut.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function GP(){return GP=(0,y.A)(function*(t,e,n,r){const i=mt(t);let o=fn(),s=es();for(const c of n){const h=e.Ps(c.metadata.name);c.document&&(o=o.add(h));const p=e.Is(c);p.setReadTime(e.Ts(c.metadata.readTime)),s=s.insert(h,p)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=yield Bp(i,(h=r,No(Ap(Sn.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>KH(c,a,s).next(h=>(a.apply(c),h)).next(h=>i.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Qr.addMatchingKeys(c,o,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,h.cs,h.ls)).next(()=>h.cs)))}),GP.apply(this,arguments)}function Wde(t,e){return WP.apply(this,arguments)}function WP(){return WP=(0,y.A)(function*(t,e,n=fn()){const r=yield Bp(t,No(PP(e.bundledQuery))),i=mt(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=oi(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(o,e);const a=r.withResumeToken(Ti.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(o,a).next(()=>i.Qr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Qr.addMatchingKeys(o,n,r.targetId)).next(()=>i.$r.saveNamedQuery(o,e))})}),WP.apply(this,arguments)}function ZH(t,e){return`firestore_clients_${t}_${e}`}function JH(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function qP(t,e){return`firestore_targets_${t}_${e}`}class rC{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new Ue(i.error.code,i.error.message))),s?new rC(e,n,i.state,o):(ii("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hv{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Ue(r.error.code,r.error.message))),o?new Hv(e,r.state,i):(ii("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class iC{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=vP();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Q4(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new iC(e,o):(ii("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class KP{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new KP(n.clientId,n.onlineState):(ii("SharedClientState",`Failed to parse online state: ${e}`),null)}}class QP{constructor(){this.activeTargetIds=vP()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YP{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new yr(rn),this.started=!1,this.ys=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=ZH(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new QP),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,y.A)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Vs)continue;const o=e.getItem(ZH(e.persistenceKey,i));if(o){const s=iC.Es(i,o);s&&(e.ps=e.ps.insert(s.clientId,s))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(qP(this.persistenceKey,e));if(r){const i=Hv.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qP(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Ge("SharedClientState","READ",e,n),n}setItem(e,n){Ge("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Ge("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(Ge("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void ii("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,y.A)(function*(){if(n.started){if(null!==r.key)if(n.bs.test(r.key)){if(null==r.newValue){const i=n.$s(r.key);return n.Us(i,null)}{const i=n.Ws(r.key,r.newValue);if(i)return n.Us(i.clientId,i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.Gs(r.key,r.newValue);if(i)return n.zs(i)}}else if(n.Cs.test(r.key)){if(null!==r.newValue){const i=n.js(r.key,r.newValue);if(i)return n.Hs(i)}}else if(r.key===n.vs){if(null!==r.newValue){const i=n.xs(r.newValue);if(i)return n.Os(i)}}else if(r.key===n.Ss){const i=function(s){let a=Ts._e;if(null!=s)try{const l=JSON.parse(s);Lt("number"==typeof l),a=l}catch(l){ii("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(r.newValue);i!==Ts._e&&n.sequenceNumberHandler(i)}else if(r.key===n.Fs){const i=n.Js(r.newValue);yield Promise.all(i.map(o=>n.syncEngine.Ys(o)))}}else n.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){const i=new rC(this.currentUser,e,n,r),o=JH(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){const n=JH(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,r){const i=qP(this.persistenceKey,e),o=new Hv(e,n,r);this.setItem(i,o.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return iC.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return rC.Es(new $i(void 0!==r[2]?r[2]:null),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return Hv.Es(i,n)}xs(e){return KP.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,y.A)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);Ge("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(l=>{i.has(l)||s.push(l)}),i.forEach(l=>{o.has(l)||a.push(l)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=vP();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class e5{constructor(){this.no=new QP,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new QP,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qde{io(e){}shutdown(){}}class t5{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let oC=null;function XP(){return null===oC?oC=268435456+Math.round(2147483648*Math.random()):oC++,"0x"+oC.toString(16)}const Kde={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Qde{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const mo="WebChannelConnection";class Yde extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){const a=XP(),l=this.bo(n,r.toUriEncodedString());Ge("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(n,l,c,i).then(h=>(Ge("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Zo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+vp,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){return`${this.fo}/v1/${r}:${Kde[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const o=XP();return new Promise((s,a)=>{const l=new qce;l.setWithCredentials(!0),l.listenOnce(Gce.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case rP.NO_ERROR:const h=l.getResponseJson();Ge(mo,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case rP.TIMEOUT:Ge(mo,`RPC '${e}' ${o} timed out`),a(new Ue(_e.DEADLINE_EXCEEDED,"Request time out"));break;case rP.HTTP_ERROR:const p=l.getStatus();if(Ge(mo,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=null==m?void 0:m.error;if(_&&_.status&&_.message){const w=function(S){const U=S.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(U)>=0?U:_e.UNKNOWN}(_.status);a(new Ue(w,_.message))}else a(new Ue(_e.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ue(_e.UNAVAILABLE,"Connection failed."));break;default:Mt()}}finally{Ge(mo,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);Ge(mo,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const i=XP(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Hce(),a=zce(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=o.join("");Ge(mo,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=s.createWebChannel(h,l);let m=!1,_=!1;const w=new Qde({lo:S=>{_?Ge(mo,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(m||(Ge(mo,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),Ge(mo,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},ho:()=>p.close()}),T=(S,U,H)=>{S.listen(U,me=>{try{H(me)}catch(ve){setTimeout(()=>{throw ve},0)}})};return T(p,Rw.EventType.OPEN,()=>{_||Ge(mo,`RPC '${e}' stream ${i} transport opened.`)}),T(p,Rw.EventType.CLOSE,()=>{_||(_=!0,Ge(mo,`RPC '${e}' stream ${i} transport closed`),w.Vo())}),T(p,Rw.EventType.ERROR,S=>{_||(_=!0,Zo(mo,`RPC '${e}' stream ${i} transport errored:`,S),w.Vo(new Ue(_e.UNAVAILABLE,"The operation could not be completed")))}),T(p,Rw.EventType.MESSAGE,S=>{var U;if(!_){const H=S.data[0];Lt(!!H);const ve=H.error||(null===(U=H[0])||void 0===U?void 0:U.error);if(ve){Ge(mo,`RPC '${e}' stream ${i} received error:`,ve);const Ye=ve.status;let At=function(rs){const vg=vi[rs];if(void 0!==vg)return q3(vg)}(Ye),_n=ve.message;void 0===At&&(At=_e.INTERNAL,_n="Unknown error status: "+Ye+" with message "+ve.message),_=!0,w.Vo(new Ue(At,_n)),p.close()}else Ge(mo,`RPC '${e}' stream ${i} received:`,H),w.mo(H)}}),T(a,Wce.STAT_EVENT,S=>{S.stat===V4.PROXY?Ge(mo,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===V4.NOPROXY&&Ge(mo,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.Ro()},0),w}}function n5(){return typeof window<"u"?window:null}function sC(){return typeof document<"u"?document:null}function zv(t){return new sde(t,!0)}class ZP{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&Ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class r5{constructor(e,n,r,i,o,s,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new ZP(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,y.A)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,y.A)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var r=this;return(0,y.A)(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():n&&n.code===_e.RESOURCE_EXHAUSTED?(ii(n.toString()),ii("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):n&&n.code===_e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new Ue(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo((0,y.A)(function*(){e.state=0,e.start()}))}__(e){return Ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(Ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xde extends r5{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function cde(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:Mt(),i=e.targetChange.targetIds||[],o=function(c,h){return c.useProto3Json?(Lt(void 0===h||"string"==typeof h),Ti.fromBase64String(h||"")):(Lt(void 0===h||h instanceof Uint8Array),Ti.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const h=void 0===c.code?_e.UNKNOWN:q3(c.code);return new Ue(h,c.message||"")}(s);n=new Z3(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=al(t,r.document.name),o=oi(r.document.updateTime),s=r.document.createTime?oi(r.document.createTime):Ut.min(),a=new to({mapValue:{fields:r.document.fields}}),l=Rr.newFoundDocument(i,o,s,a);n=new Gw(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=al(t,r.document),o=r.readTime?oi(r.readTime):Ut.min(),s=Rr.newNoDocument(i,o);n=new Gw([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=al(t,r.document);n=new Gw([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Mt();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new ede(i,o);n=new X3(r.targetId,s)}}var c;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ut.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ut.min():s.readTime?oi(s.readTime):Ut.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=DP(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=Vw(l)?{documents:cH(o,l)}:{query:RP(o,l).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=nH(o,s.resumeToken);const c=bP(o,s.expectedCount);null!==c&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(Ut.min())>0){a.readTime=Np(o,s.snapshotVersion.toTimestamp());const c=bP(o,s.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function dde(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Mt()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=DP(this.serializer),n.removeTarget=e,this.t_(n)}}class Zde extends r5{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function ude(t,e){return t&&t.length>0?(Lt(void 0!==e),t.map(n=>function(i,o){let s=oi(i.updateTime?i.updateTime:o);return s.isEqual(Ut.min())&&(s=oi(o)),new Yue(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=oi(e.commitTime);return this.listener.T_(r,n)}return Lt(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=DP(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Fv(this.serializer,r))};this.t_(n)}}class Jde extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new Ue(_e.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,AP(n,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ue(_e.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,AP(n,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ue(_e.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class the{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ii(n),this.g_=!1):Ge("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class nhe{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(a=>{r.enqueueAndForget((0,y.A)(function*(){var l;uu(s)&&(Ge("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,y.A)(function*(h){const p=mt(h);p.v_.add(4),yield Up(p),p.x_.set("Unknown"),p.v_.delete(4),yield Gv(p)}),function c(h){return l.apply(this,arguments)})(s))}))}),this.x_=new the(r,i)}}function Gv(t){return e1.apply(this,arguments)}function e1(){return e1=(0,y.A)(function*(t){if(uu(t))for(const e of t.F_)yield e(!0)}),e1.apply(this,arguments)}function Up(t){return t1.apply(this,arguments)}function t1(){return t1=(0,y.A)(function*(t){for(const e of t.F_)yield e(!1)}),t1.apply(this,arguments)}function aC(t,e){const n=mt(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),i1(n)?r1(n):zp(n).Jo()&&n1(n,e))}function jp(t,e){const n=mt(t),r=zp(n);n.C_.delete(e),r.Jo()&&i5(n,e),0===n.C_.size&&(r.Jo()?r.Xo():uu(n)&&n.x_.set("Unknown"))}function n1(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ut.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zp(t).c_(e)}function i5(t,e){t.O_.Oe(e),zp(t).l_(e)}function r1(t){t.O_=new nde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),zp(t).start(),t.x_.p_()}function i1(t){return uu(t)&&!zp(t).Ho()&&t.C_.size>0}function uu(t){return 0===mt(t).v_.size}function o5(t){t.O_=void 0}function rhe(t){return o1.apply(this,arguments)}function o1(){return o1=(0,y.A)(function*(t){t.C_.forEach((e,n)=>{n1(t,e)})}),o1.apply(this,arguments)}function ihe(t,e){return s1.apply(this,arguments)}function s1(){return s1=(0,y.A)(function*(t,e){o5(t),i1(t)?(t.x_.S_(e),r1(t)):t.x_.set("Unknown")}),s1.apply(this,arguments)}function ohe(t,e,n){return a1.apply(this,arguments)}function a1(){return a1=(0,y.A)(function*(t,e,n){if(t.x_.set("Online"),e instanceof Z3&&2===e.state&&e.cause)try{yield(r=(0,y.A)(function*(o,s){const a=s.cause;for(const l of s.targetIds)o.C_.has(l)&&(yield o.remoteSyncer.rejectListen(l,a),o.C_.delete(l),o.O_.removeTarget(l))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){Ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield lC(t,r)}else if(e instanceof Gw?t.O_.$e(e):e instanceof X3?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Ut.min()))try{const r=yield qH(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.O_.it(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=o.C_.get(c);h&&o.C_.set(c,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const h=o.C_.get(l);if(!h)return;o.C_.set(l,h.withResumeToken(Ti.EMPTY_BYTE_STRING,h.snapshotVersion)),i5(o,l);const p=new Yl(h.target,l,c,h.sequenceNumber);n1(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){Ge("RemoteStore","Failed to raise snapshot:",r),yield lC(t,r)}var r}),a1.apply(this,arguments)}function lC(t,e,n){return l1.apply(this,arguments)}function l1(){return l1=(0,y.A)(function*(t,e,n){if(!Zc(e))throw e;t.v_.add(1),yield Up(t),t.x_.set("Offline"),n||(n=()=>qH(t.localStore)),t.asyncQueue.enqueueRetryable((0,y.A)(function*(){Ge("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Gv(t)}))}),l1.apply(this,arguments)}function s5(t,e){return e().catch(n=>lC(t,n,e))}function Hp(t){return c1.apply(this,arguments)}function c1(){return c1=(0,y.A)(function*(t){const e=mt(t),n=du(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;she(e);)try{const i=yield zde(e.localStore,r);if(null===i){0===e.D_.length&&n.Xo();break}r=i.batchId,ahe(e,i)}catch(i){yield lC(e,i)}a5(e)&&l5(e)}),c1.apply(this,arguments)}function she(t){return uu(t)&&t.D_.length<10}function ahe(t,e){t.D_.push(e);const n=du(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function a5(t){return uu(t)&&!du(t).Ho()&&t.D_.length>0}function l5(t){du(t).start()}function lhe(t){return u1.apply(this,arguments)}function u1(){return u1=(0,y.A)(function*(t){du(t).d_()}),u1.apply(this,arguments)}function che(t){return d1.apply(this,arguments)}function d1(){return d1=(0,y.A)(function*(t){const e=du(t);for(const n of t.D_)e.I_(n.mutations)}),d1.apply(this,arguments)}function uhe(t,e,n){return h1.apply(this,arguments)}function h1(){return h1=(0,y.A)(function*(t,e,n){const r=t.D_.shift(),i=EP.from(r,e,n);yield s5(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Hp(t)}),h1.apply(this,arguments)}function dhe(t,e){return f1.apply(this,arguments)}function f1(){return f1=(0,y.A)(function*(t,e){var n;e&&du(t).P_&&(yield(n=(0,y.A)(function*(i,o){if(W3(a=o.code)&&a!==_e.ABORTED){const s=i.D_.shift();du(i).Zo(),yield s5(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Hp(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),a5(t)&&l5(t)}),f1.apply(this,arguments)}function c5(t,e){return p1.apply(this,arguments)}function p1(){return p1=(0,y.A)(function*(t,e){const n=mt(t);n.asyncQueue.verifyOperationInProgress(),Ge("RemoteStore","RemoteStore received new credentials");const r=uu(n);n.v_.add(3),yield Up(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Gv(n)}),p1.apply(this,arguments)}function g1(t,e){return m1.apply(this,arguments)}function m1(){return m1=(0,y.A)(function*(t,e){const n=mt(t);e?(n.v_.delete(2),yield Gv(n)):e||(n.v_.add(2),yield Up(n),n.x_.set("Unknown"))}),m1.apply(this,arguments)}function zp(t){return t.N_||(t.N_=function(n,r,i){const o=mt(n);return o.R_(),new Xde(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:rhe.bind(null,t),To:ihe.bind(null,t),u_:ohe.bind(null,t)}),t.F_.push(function(){var e=(0,y.A)(function*(n){n?(t.N_.Zo(),i1(t)?r1(t):t.x_.set("Unknown")):(yield t.N_.stop(),o5(t))});return function(n){return e.apply(this,arguments)}}())),t.N_}function du(t){return t.L_||(t.L_=function(n,r,i){const o=mt(n);return o.R_(),new Zde(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:lhe.bind(null,t),To:dhe.bind(null,t),E_:che.bind(null,t),T_:uhe.bind(null,t)}),t.F_.push(function(){var e=(0,y.A)(function*(n){n?(t.L_.Zo(),yield Hp(t)):(yield t.L_.stop(),t.D_.length>0&&(Ge("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))});return function(n){return e.apply(this,arguments)}}())),t.L_}class _1{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new _1(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gp(t,e){if(ii("AsyncQueue",`${e}: ${t}`),Zc(t))return new Ue(_e.UNAVAILABLE,`${e}: ${t}`);throw t}class Wp{constructor(e){this.comparator=e?(n,r)=>e(n,r)||It.comparator(n.key,r.key):(n,r)=>It.comparator(n.key,r.key),this.keyedMap=Sv(),this.sortedSet=new yr(this.comparator)}static emptySet(e){return new Wp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wp)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Wp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class u5{constructor(){this.B_=new yr(It.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Mt():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class qp{constructor(e,n,r,i,o,s,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new qp(e,n,Wp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Av(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class hhe{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class fhe{constructor(){this.queries=new Kl(e=>D3(e),Av),this.onlineState="Unknown",this.W_=new Set}}function v1(t,e){return y1.apply(this,arguments)}function y1(){return y1=(0,y.A)(function*(t,e){const n=mt(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.K_()&&e.U_()&&(r=2):(o=new hhe,r=e.U_()?0:1);try{switch(r){case 0:o.q_=yield n.onListen(i,!0);break;case 1:o.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=Gp(s,`Initialization of query '${Sp(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Q_.push(e),e.G_(n.onlineState),o.q_&&e.z_(o.q_)&&w1(n)}),y1.apply(this,arguments)}function I1(t,e){return E1.apply(this,arguments)}function E1(){return E1=(0,y.A)(function*(t,e){const n=mt(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),0===o.Q_.length?i=e.U_()?0:1:!o.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}),E1.apply(this,arguments)}function phe(t,e){const n=mt(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.Q_)a.z_(i)&&(r=!0);s.q_=i}}r&&w1(n)}function ghe(t,e,n){const r=mt(t),i=r.queries.get(e);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(e)}function w1(t){t.W_.forEach(e=>{e.next()})}var C1,d5;(d5=C1||(C1={})).j_="default",d5.Cache="cache";class b1{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new qp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){return!e.fromCache||!this.U_()||(!this.options.ta||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ea(e){e=qp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==C1.Cache}}class mhe{constructor(e,n){this.na=e,this.byteLength=n}ra(){return"metadata"in this.na}}class h5{constructor(e){this.serializer=e}Ps(e){return al(this.serializer,e)}Is(e){return e.metadata.exists?lH(this.serializer,e.document,!1):Rr.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return oi(e)}}class _he{constructor(e,n,r){this.ia=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=f5(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++n;const r=Sn.fromString(e.na.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(e){const n=new Map,r=new h5(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Ps(i.metadata.name);for(const s of i.metadata.queries){const a=(n.get(s)||fn()).add(o);n.set(s,a)}}return n}complete(){var e=this;return(0,y.A)(function*(){const n=yield function Gde(t,e,n,r){return GP.apply(this,arguments)}(e.localStore,new h5(e.serializer),e.documents,e.ia.id),r=e.oa(e.documents);for(const i of e.queries)yield Wde(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,_a:e.collectionGroups,aa:n}})()}}function f5(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class p5{constructor(e){this.key=e}}class g5{constructor(e){this.key=e}}class m5{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=fn(),this.mutatedKeys=fn(),this.ha=R3(e),this.Pa=new Wp(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new u5,i=n?n.Pa:this.Pa;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),_=Dv(this.query,p)?p:null,w=!!m&&this.mutatedKeys.has(m.key),T=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;m&&_?m.data.isEqual(_.data)?w!==T&&(r.track({type:3,doc:_}),S=!0):this.da(m,_)||(r.track({type:2,doc:_}),S=!0,(l&&this.ha(_,l)>0||c&&this.ha(_,c)<0)&&(a=!0)):!m&&_?(r.track({type:0,doc:_}),S=!0):m&&!_&&(r.track({type:1,doc:m}),S=!0,(l||c)&&(a=!0)),S&&(_?(s=s.add(_),o=T?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const h="F"===this.query.limitType?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Pa:s,Ea:r,Xi:a,mutatedKeys:o}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const s=e.Ea.k_();s.sort((h,p)=>function(_,w){const T=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mt()}};return T(_)-T(w)}(h.type,p.type)||this.ha(h.doc,p.doc)),this.Aa(r),i=null!=i&&i;const a=n&&!i?this.Ra():[],l=0===this.la.size&&this.current&&!i?1:0,c=l!==this.ca;return this.ca=l,0!==s.length||c?{snapshot:new qp(this.query,e.Pa,o,s,e.mutatedKeys,0===l,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new u5,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=fn(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new g5(r))}),this.la.forEach(r=>{e.has(r)||n.push(new p5(r))}),n}fa(e){this.ua=e.hs,this.la=fn();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return qp.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class vhe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class yhe{constructor(e){this.key=e,this.pa=!1}}class Ihe{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new Kl(a=>D3(a),Av),this.Sa=new Map,this.ba=new Set,this.Da=new yr(It.comparator),this.Ca=new Map,this.va=new LP,this.Fa={},this.Ma=new Map,this.xa=Ld.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}function Ehe(t,e){return T1.apply(this,arguments)}function T1(){return T1=(0,y.A)(function*(t,e,n=!0){const r=cC(t);let i;const o=r.wa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ga()):i=yield _5(r,e,n,!0),i}),T1.apply(this,arguments)}function whe(t,e){return A1.apply(this,arguments)}function A1(){return A1=(0,y.A)(function*(t,e){const n=cC(t);yield _5(n,e,!0,!1)}),A1.apply(this,arguments)}function _5(t,e,n,r){return D1.apply(this,arguments)}function D1(){return D1=(0,y.A)(function*(t,e,n,r){const i=yield Bp(t.localStore,No(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=yield S1(t,e,o,"current"===s,i.resumeToken)),t.isPrimaryClient&&n&&aC(t.remoteStore,i),a}),D1.apply(this,arguments)}function S1(t,e,n,r,i){return R1.apply(this,arguments)}function R1(){return R1=(0,y.A)(function*(t,e,n,r,i){t.Na=(p,m,_)=>{return(w=(0,y.A)(function*(S,U,H,me){let ve=U.view.Ta(H);ve.Xi&&(ve=yield nC(S.localStore,U.query,!1).then(({documents:Bn})=>U.view.Ta(Bn,ve)));const Ye=me&&me.targetChanges.get(U.targetId),At=me&&null!=me.targetMismatches.get(U.targetId),_n=U.view.applyChanges(ve,S.isPrimaryClient,Ye,At);return $1(S,U.targetId,_n.Va),_n.snapshot}),function T(S,U,H,me){return w.apply(this,arguments)})(t,p,m,_);var w};const o=yield nC(t.localStore,e,!0),s=new m5(e,o.hs),a=s.Ta(o.documents),l=kv.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=s.applyChanges(a,t.isPrimaryClient,l);$1(t,n,c.Va);const h=new vhe(e,n,s);return t.wa.set(e,h),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}),R1.apply(this,arguments)}function Che(t,e,n){return P1.apply(this,arguments)}function P1(){return P1=(0,y.A)(function*(t,e,n){const r=mt(t),i=r.wa.get(e),o=r.Sa.get(i.targetId);if(o.length>1)return r.Sa.set(i.targetId,o.filter(s=>!Av(s,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield $p(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&jp(r.remoteStore,i.targetId),Kp(r,i.targetId)}).catch(Xc))):(Kp(r,i.targetId),yield $p(r.localStore,i.targetId,!0))}),P1.apply(this,arguments)}function bhe(t,e){return x1.apply(this,arguments)}function x1(){return x1=(0,y.A)(function*(t,e){const n=mt(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jp(n.remoteStore,r.targetId))}),x1.apply(this,arguments)}function M1(){return M1=(0,y.A)(function*(t,e,n){const r=X1(t);try{const i=yield function(s,a){const l=mt(s),c=Nr.now(),h=a.reduce((_,w)=>_.add(w.key),fn());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let w=es(),T=fn();return l.os.getEntries(_,h).next(S=>{w=S,w.forEach((U,H)=>{H.isValidDocument()||(T=T.add(U))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,w)).next(S=>{p=S;const U=[];for(const H of a){const me=Zue(H,p.get(H.key).overlayedDocument);null!=me&&U.push(new Ql(H.key,me,h3(me.value.mapValue),kr.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,U,a)}).next(S=>{m=S;const U=S.applyToLocalDocumentSet(p,T);return l.documentOverlayCache.saveOverlays(_,S.batchId,U)})}).then(()=>({batchId:m.batchId,changes:x3(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let c=s.Fa[s.currentUser.toKey()];c||(c=new yr(rn)),c=c.insert(a,l),s.Fa[s.currentUser.toKey()]=c}(r,i.batchId,n),yield Xl(r,i.changes),yield Hp(r.remoteStore)}catch(i){const o=Gp(i,"Failed to persist write");n.reject(o)}}),M1.apply(this,arguments)}function v5(t,e){return N1.apply(this,arguments)}function N1(){return N1=(0,y.A)(function*(t,e){const n=mt(t);try{const r=yield function Hde(t,e){const n=mt(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;a.push(n.Qr.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Qr.addMatchingKeys(o,h.addedDocuments,p)));let _=m.withSequenceNumber(o.currentSequenceNumber);var T,S,U;null!==e.targetMismatches.get(p)?_=_.withResumeToken(Ti.EMPTY_BYTE_STRING,Ut.min()).withLastLimboFreeSnapshotVersion(Ut.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),S=_,U=h,(0===(T=m).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8||U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0)&&a.push(n.Qr.updateTargetData(o,_))});let l=es(),c=fn();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(KH(o,s,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(Ut.min())){const h=n.Qr.getLastRemoteSnapshotVersion(o).next(p=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return oe.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.ns=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Ca.get(o);s&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.pa=!0:i.modifiedDocuments.size>0?Lt(s.pa):i.removedDocuments.size>0&&(Lt(s.pa),s.pa=!1))}),yield Xl(n,r,e)}catch(r){yield Xc(r)}}),N1.apply(this,arguments)}function y5(t,e,n){const r=mt(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.wa.forEach((o,s)=>{const a=s.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=mt(s);l.onlineState=a;let c=!1;l.queries.forEach((h,p)=>{for(const m of p.Q_)m.G_(a)&&(c=!0)}),c&&w1(l)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ahe(t,e,n){return k1.apply(this,arguments)}function k1(){return k1=(0,y.A)(function*(t,e,n){const r=mt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ca.get(e),o=i&&i.key;if(o){let s=new yr(It.comparator);s=s.insert(o,Rr.newNoDocument(o,Ut.min()));const a=fn().add(o),l=new Nv(Ut.min(),new Map,new yr(rn),s,a);yield v5(r,l),r.Da=r.Da.remove(o),r.Ca.delete(e),U1(r)}else yield $p(r.localStore,e,!1).then(()=>Kp(r,e,n)).catch(Xc)}),k1.apply(this,arguments)}function Dhe(t,e){return O1.apply(this,arguments)}function O1(){return O1=(0,y.A)(function*(t,e){const n=mt(t),r=e.batch.batchId;try{const i=yield function jde(t,e){const n=mt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const p=c.batch,m=p.keys();let _=oe.resolve();return m.forEach(w=>{_=_.next(()=>h.getEntry(l,w)).next(T=>{const S=c.docVersions.get(w);Lt(null!==S),T.version.compareTo(S)<0&&(p.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),h.addEntry(T)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=fn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);B1(n,r,null),V1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Xl(n,i)}catch(i){yield Xc(i)}}),O1.apply(this,arguments)}function She(t,e,n){return F1.apply(this,arguments)}function F1(){return F1=(0,y.A)(function*(t,e,n){const r=mt(t);try{const i=yield function(s,a){const l=mt(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(Lt(null!==p),h=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);B1(r,e,n),V1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Xl(r,i)}catch(i){yield Xc(i)}}),F1.apply(this,arguments)}function L1(){return L1=(0,y.A)(function*(t,e){const n=mt(t);uu(n.remoteStore)||Ge("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=mt(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(-1===r)return void e.resolve();const i=n.Ma.get(r)||[];i.push(e),n.Ma.set(r,i)}catch(r){const i=Gp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),L1.apply(this,arguments)}function V1(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function B1(t,e,n){const r=mt(t);let i=r.Fa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function Kp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||I5(t,r)})}function I5(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);null!==n&&(jp(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),U1(t))}function $1(t,e,n){for(const r of n)r instanceof p5?(t.va.addReference(r.key,e),Phe(t,r)):r instanceof g5?(Ge("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||I5(t,r.key)):Mt()}function Phe(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(Ge("SyncEngine","New document in limbo: "+n),t.ba.add(r),U1(t))}function U1(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new It(Sn.fromString(e)),r=t.xa.next();t.Ca.set(r,new yhe(n)),t.Da=t.Da.insert(n,r),aC(t.remoteStore,new Yl(No(Ap(n.path)),r,"TargetPurposeLimboResolution",Ts._e))}}function Xl(t,e,n){return j1.apply(this,arguments)}function j1(){return j1=(0,y.A)(function*(t,e,n){const r=mt(t),i=[],o=[],s=[];var a;r.wa.isEmpty()||(r.wa.forEach((a,l)=>{s.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,null!=c&&c.fromCache?"not-current":"current"),c){i.push(c);const h=jP.Ki(l.targetId,c);o.push(h)}}))}),yield Promise.all(s),r.ya.u_(i),yield(a=(0,y.A)(function*(c,h){const p=mt(c);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>oe.forEach(h,_=>oe.forEach(_.qi,w=>p.persistence.referenceDelegate.addReference(m,_.targetId,w)).next(()=>oe.forEach(_.Qi,w=>p.persistence.referenceDelegate.removeReference(m,_.targetId,w)))))}catch(m){if(!Zc(m))throw m;Ge("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const _=m.targetId;if(!m.fromCache){const w=p.ns.get(_),S=w.withLastLimboFreeSnapshotVersion(w.snapshotVersion);p.ns=p.ns.insert(_,S)}}}),function l(c,h){return a.apply(this,arguments)})(r.localStore,o))}),j1.apply(this,arguments)}function xhe(t,e){return H1.apply(this,arguments)}function H1(){return H1=(0,y.A)(function*(t,e){const n=mt(t);if(!n.currentUser.isEqual(e)){Ge("SyncEngine","User change. New user:",e.toKey());const r=yield WH(n.localStore,e);n.currentUser=e,(o=n).Ma.forEach(a=>{a.forEach(l=>{l.reject(new Ue(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ma.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xl(n,r.us)}var o}),H1.apply(this,arguments)}function Mhe(t,e){const n=mt(t),r=n.Ca.get(e);if(r&&r.pa)return fn().add(r.key);{let i=fn();const o=n.Sa.get(e);if(!o)return i;for(const s of o){const a=n.wa.get(s);i=i.unionWith(a.view.Ia)}return i}}function Nhe(t,e){return z1.apply(this,arguments)}function z1(){return z1=(0,y.A)(function*(t,e){const n=mt(t),r=yield nC(n.localStore,e.query,!0),i=e.view.fa(r);return n.isPrimaryClient&&$1(n,e.targetId,i.Va),i}),z1.apply(this,arguments)}function khe(t,e){return G1.apply(this,arguments)}function G1(){return G1=(0,y.A)(function*(t,e){const n=mt(t);return YH(n.localStore,e).then(r=>Xl(n,r))}),G1.apply(this,arguments)}function Ohe(t,e,n,r){return W1.apply(this,arguments)}function W1(){return W1=(0,y.A)(function*(t,e,n,r){const i=mt(t),o=yield function(a,l){const c=mt(a),h=mt(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.vn(p,l).next(m=>m?c.localDocuments.getDocuments(p,m):oe.resolve(null)))}(i.localStore,e);var l;null!==o?("pending"===n?yield Hp(i.remoteStore):"acknowledged"===n||"rejected"===n?(B1(i,e,r||null),V1(i,e),l=e,mt(mt(i.localStore).mutationQueue).Mn(l)):Mt(),yield Xl(i,o)):Ge("SyncEngine","Cannot apply mutation batch with id: "+e)}),W1.apply(this,arguments)}function q1(){return q1=(0,y.A)(function*(t,e){const n=mt(t);if(cC(n),X1(n),!0===e&&!0!==n.Oa){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield E5(n,r.toArray());n.Oa=!0,yield g1(n.remoteStore,!0);for(const o of i)aC(n.remoteStore,o)}else if(!1===e&&!1!==n.Oa){const r=[];let i=Promise.resolve();n.Sa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Kp(n,s),$p(n.localStore,s,!0))),jp(n.remoteStore,s)}),yield i,yield E5(n,r),function(s){const a=mt(s);a.Ca.forEach((l,c)=>{jp(a.remoteStore,c)}),a.va.mr(),a.Ca=new Map,a.Da=new yr(It.comparator)}(n),n.Oa=!1,yield g1(n.remoteStore,!1)}}),q1.apply(this,arguments)}function E5(t,e,n){return K1.apply(this,arguments)}function K1(){return K1=(0,y.A)(function*(t,e,n){const r=mt(t),i=[],o=[];for(const s of e){let a;const l=r.Sa.get(s);if(l&&0!==l.length){a=yield Bp(r.localStore,No(l[0]));for(const c of l){const h=r.wa.get(c),p=yield Nhe(r,h);p.snapshot&&o.push(p.snapshot)}}else{const c=yield QH(r.localStore,s);a=yield Bp(r.localStore,c),yield S1(r,w5(c),s,!1,a.resumeToken)}i.push(a)}return r.ya.u_(o),i}),K1.apply(this,arguments)}function w5(t){return b3(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Lhe(t){return n=mt(t).localStore,mt(mt(n).persistence).Bi();var n}function Vhe(t,e,n,r){return Q1.apply(this,arguments)}function Q1(){return Q1=(0,y.A)(function*(t,e,n,r){const i=mt(t);if(i.Oa)return void Ge("SyncEngine","Ignoring unexpected query state notification.");const o=i.Sa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=yield YH(i.localStore,S3(o[0])),a=Nv.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Ti.EMPTY_BYTE_STRING);yield Xl(i,s,a);break}case"rejected":yield $p(i.localStore,e,!0),Kp(i,e,r);break;default:Mt()}}),Q1.apply(this,arguments)}function Bhe(t,e,n){return Y1.apply(this,arguments)}function Y1(){return Y1=(0,y.A)(function*(t,e,n){const r=cC(t);if(r.Oa){for(const i of e){if(r.Sa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ge("SyncEngine","Adding an already active target "+i);continue}const o=yield QH(r.localStore,i),s=yield Bp(r.localStore,o);yield S1(r,w5(o),s.targetId,!1,s.resumeToken),aC(r.remoteStore,s)}for(const i of n)r.Sa.has(i)&&(yield $p(r.localStore,i,!1).then(()=>{jp(r.remoteStore,i),Kp(r,i)}).catch(Xc))}}),Y1.apply(this,arguments)}function cC(t){const e=mt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=v5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mhe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ahe.bind(null,e),e.ya.u_=phe.bind(null,e.eventManager),e.ya.La=ghe.bind(null,e.eventManager),e}function X1(t){const e=mt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dhe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=She.bind(null,e),e}class Qp{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,y.A)(function*(){n.serializer=zv(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return GH(this.persistence,new zH,e.initialUser,this.serializer)}createPersistence(e){return new VP(Jw.Hr,this.serializer)}createSharedClientState(e){return new e5}terminate(){var e=this;return(0,y.A)(function*(){var n,r;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Z1 extends Qp{constructor(e,n,r){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,y.A)(function*(){yield n().call(r,e),yield r.ka.initialize(r,e),yield X1(r.ka.syncEngine),yield Hp(r.ka.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return GH(this.persistence,new zH,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new OH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new uue(n,this.persistence);return new cue(e.asyncQueue,r)}createPersistence(e){const n=UP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?go.withCacheSize(this.cacheSizeBytes):go.DEFAULT;return new $P(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,n5(),sC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new e5}}class C5 extends Z1{constructor(e,n){super(e,n,!1),this.ka=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,y.A)(function*(){yield n().call(r,e);const i=r.ka.syncEngine;r.sharedClientState instanceof YP&&(r.sharedClientState.syncEngine={Zs:Ohe.bind(null,i),Xs:Vhe.bind(null,i),eo:Bhe.bind(null,i),Bi:Lhe.bind(null,i),Ys:khe.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var o=(0,y.A)(function*(s){yield function Fhe(t,e){return q1.apply(this,arguments)}(r.ka.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const n=n5();if(!YP.D(n))throw new Ue(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=UP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new YP(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Yp{initialize(e,n){var r=this;return(0,y.A)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>y5(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=xhe.bind(null,r.syncEngine),yield g1(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new fhe}createDatastore(e){const n=zv(e.databaseInfo.databaseId),r=new Yde(e.databaseInfo);return new Jde(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=n=>y5(this.syncEngine,n,0),a=t5.D()?new t5:new qde,new nhe(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,n){return function(i,o,s,a,l,c,h){const p=new Ihe(i,o,s,a,l,c);return h&&(p.Oa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,y.A)(function*(){var n,r;yield(r=(0,y.A)(function*(o){const s=mt(o);Ge("RemoteStore","RemoteStore shutting down."),s.v_.add(5),yield Up(s),s.M_.shutdown(),s.x_.set("Unknown")}),function i(o){return r.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function b5(t,e=10240){let n=0;return{read:()=>(0,y.A)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,y.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class uC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):ii("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class jhe{constructor(e,n){this.Ka=e,this.serializer=n,this.metadata=new bi,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then(r=>{r&&r.ra()?this.metadata.resolve(r.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.na)}`))},r=>this.metadata.reject(r))}close(){return this.Ka.cancel()}getMetadata(){var e=this;return(0,y.A)(function*(){return e.metadata.promise})()}Ba(){var e=this;return(0,y.A)(function*(){return yield e.getMetadata(),e.Ua()})()}Ua(){var e=this;return(0,y.A)(function*(){const n=yield e.Wa();if(null===n)return null;const r=e.$a.decode(n),i=Number(r);isNaN(i)&&e.Ga(`length string (${r}) is not valid number`);const o=yield e.za(i);return new mhe(JSON.parse(o),n.length+i)})()}ja(){return this.buffer.findIndex(e=>123===e)}Wa(){var e=this;return(0,y.A)(function*(){for(;e.ja()<0&&!(yield e.Ha()););if(0===e.buffer.length)return null;const n=e.ja();n<0&&e.Ga("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}za(e){var n=this;return(0,y.A)(function*(){for(;n.buffer.length<e;)(yield n.Ha())&&n.Ga("Reached the end of bundle when more is expected.");const r=n.$a.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ha(){var e=this;return(0,y.A)(function*(){const n=yield e.Ka.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class Hhe{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,y.A)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new Ue(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const r=yield(i=(0,y.A)(function*(s,a){const l=mt(s),c={documents:a.map(_=>Ov(l.serializer,_))},h=yield l.vo("BatchGetDocuments",l.serializer.databaseId,Sn.emptyPath(),c,a.length),p=new Map;h.forEach(_=>{const w=function lde(t,e){return"found"in e?function(r,i){Lt(!!i.found);const o=al(r,i.found.name),s=oi(i.found.updateTime),a=i.found.createTime?oi(i.found.createTime):Ut.min(),l=new to({mapValue:{fields:i.found.fields}});return Rr.newFoundDocument(o,s,a,l)}(t,e):"missing"in e?function(r,i){Lt(!!i.missing),Lt(!!i.readTime);const o=al(r,i.missing),s=oi(i.readTime);return Rr.newNoDocument(o,s)}(t,e):Mt()}(l.serializer,_);p.set(w.key.toString(),w)});const m=[];return a.forEach(_=>{const w=p.get(_.toString());Lt(!!w),m.push(w)}),m}),function o(s,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,y.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const o=It.fromPath(i);e.mutations.push(new yP(o,e.precondition(o)))}),yield(r=(0,y.A)(function*(o,s){const a=mt(o),l={writes:s.map(c=>Fv(a.serializer,c))};yield a.So("Commit",a.serializer.databaseId,Sn.emptyPath(),l)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Mt();n=Ut.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Ue(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ut.min())?kr.exists(!1):kr.updateTime(n):kr.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ut.min()))throw new Ue(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kr.updateTime(n)}return kr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class zhe{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Ja=r.maxAttempts,this.jo=new ZP(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){var e=this;this.jo.qo((0,y.A)(function*(){const n=new Hhe(e.datastore),r=e.Xa(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.eu(o)}))}).catch(i=>{e.eu(i)})}))}Xa(e){try{const n=this.updateFunction(e);return!vv(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!W3(n)}return!1}}class Ghe{constructor(e,n,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$i.UNAUTHENTICATED,this.clientId=j4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=(0,y.A)(function*(a){Ge("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(Ge("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,y.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Gp(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function dC(t,e){return J1.apply(this,arguments)}function J1(){return J1=(0,y.A)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),Ge("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,y.A)(function*(o){r.isEqual(o)||(yield WH(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),J1.apply(this,arguments)}function ex(t,e){return tx.apply(this,arguments)}function tx(){return tx=(0,y.A)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield nx(t);Ge("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>c5(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>c5(e.remoteStore,i)),t._onlineComponents=e}),tx.apply(this,arguments)}function T5(t){return"FirebaseError"===t.name?t.code===_e.FAILED_PRECONDITION||t.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function nx(t){return rx.apply(this,arguments)}function rx(){return rx=(0,y.A)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ge("FirestoreClient","Using user provided OfflineComponentProvider");try{yield dC(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!T5(n))throw n;Zo("Error using user provided cache. Falling back to memory cache: "+n),yield dC(t,new Qp)}}else Ge("FirestoreClient","Using default OfflineComponentProvider"),yield dC(t,new Qp);return t._offlineComponents}),rx.apply(this,arguments)}function hC(t){return ix.apply(this,arguments)}function ix(){return ix=(0,y.A)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ge("FirestoreClient","Using user provided OnlineComponentProvider"),yield ex(t,t._uninitializedComponentsProvider._online)):(Ge("FirestoreClient","Using default OnlineComponentProvider"),yield ex(t,new Yp))),t._onlineComponents}),ix.apply(this,arguments)}function A5(t){return nx(t).then(e=>e.persistence)}function Xp(t){return nx(t).then(e=>e.localStore)}function D5(t){return hC(t).then(e=>e.remoteStore)}function ox(t){return hC(t).then(e=>e.syncEngine)}function Zp(t){return sx.apply(this,arguments)}function sx(){return sx=(0,y.A)(function*(t){const e=yield hC(t),n=e.eventManager;return n.onListen=Ehe.bind(null,e.syncEngine),n.onUnlisten=Che.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=whe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bhe.bind(null,e.syncEngine),n}),sx.apply(this,arguments)}function R5(t,e,n={}){const r=new bi;return t.asyncQueue.enqueueAndForget((0,y.A)(function*(){return function(o,s,a,l,c){const h=new uC({next:m=>{s.enqueueAndForget(()=>I1(o,p));const _=m.docs.has(a);!_&&m.fromCache?c.reject(new Ue(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&l&&"server"===l.source?c.reject(new Ue(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new b1(Ap(a.path),h,{includeMetadataChanges:!0,ta:!0});return v1(o,p)}(yield Zp(t),t.asyncQueue,e,n,r)})),r.promise}function P5(t,e,n={}){const r=new bi;return t.asyncQueue.enqueueAndForget((0,y.A)(function*(){return function(o,s,a,l,c){const h=new uC({next:m=>{s.enqueueAndForget(()=>I1(o,p)),m.fromCache&&"server"===l.source?c.reject(new Ue(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new b1(a,h,{includeMetadataChanges:!0,ta:!0});return v1(o,p)}(yield Zp(t),t.asyncQueue,e,n,r)})),r.promise}function x5(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const M5=new Map;function ax(t,e,n){if(!n)throw new Ue(_e.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function N5(t,e,n,r){if(!0===e&&!0===r)throw new Ue(_e.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function k5(t){if(!It.isDocumentKey(t))throw new Ue(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function O5(t){if(It.isDocumentKey(t))throw new Ue(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fC(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":Mt()}function Dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ue(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fC(t);throw new Ue(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function F5(t,e){if(e<=0)throw new Ue(_e.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class L5{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=x5(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new Ue(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ue(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ue(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wv{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L5({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ue(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L5(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Xce;switch(r.type){case"firstParty":return new tue(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ue(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=M5.get(n);r&&(Ge("ComponentProvider","Removing Datastore"),M5.delete(n),r.terminate())}(this),Promise.resolve()}}class no{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new no(this.firestore,e,this._query)}}class Pr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ll(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pr(this.firestore,e,this._key)}}class ll extends no{constructor(e,n,r){super(e,n,Ap(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pr(this.firestore,null,new It(e))}withConverter(e){return new ll(this.firestore,e,this._path)}}function B5(t,e,...n){if(t=(0,A.Ku)(t),ax("collection","path",e),t instanceof Wv){const r=Sn.fromString(e,...n);return O5(r),new ll(t,null,r)}{if(!(t instanceof Pr||t instanceof ll))throw new Ue(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Sn.fromString(e,...n));return O5(r),new ll(t.firestore,null,r)}}function pC(t,e,...n){if(t=(0,A.Ku)(t),1===arguments.length&&(e=j4.newId()),ax("doc","path",e),t instanceof Wv){const r=Sn.fromString(e,...n);return k5(r),new Pr(t,null,new It(r))}{if(!(t instanceof Pr||t instanceof ll))throw new Ue(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Sn.fromString(e,...n));return k5(r),new Pr(t.firestore,t instanceof ll?t.converter:null,new It(r))}}function $5(t,e){return t=(0,A.Ku)(t),e=(0,A.Ku)(e),(t instanceof Pr||t instanceof ll)&&(e instanceof Pr||e instanceof ll)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function lx(t,e){return t=(0,A.Ku)(t),e=(0,A.Ku)(e),t instanceof no&&e instanceof no&&t.firestore===e.firestore&&Av(t._query,e._query)&&t.converter===e.converter}class rfe{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new ZP(this,"async_queue_retry"),this.cu=()=>{const n=sC();n&&Ge("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=sC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=sC();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new bi;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){var e=this;return(0,y.A)(function*(){if(0!==e.ru.length){try{yield e.ru[0](),e.ru.shift(),e.jo.reset()}catch(n){if(!Zc(n))throw n;Ge("AsyncQueue","Operation failed with retryable error: "+n)}e.ru.length>0&&e.jo.qo(()=>e.Pu())}})()}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{throw this.ou=r,this._u=!1,ii("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const i=_1.createAndSchedule(this,e,n,r,o=>this.Iu(o));return this.su.push(i),i}lu(){this.ou&&Mt()}verifyOperationInProgress(){}Tu(){var e=this;return(0,y.A)(function*(){let n;do{n=e.nu,yield n}while(n!==e.nu)})()}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function cx(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(t)}class ife{constructor(){this._progressObserver={},this._taskCompletionResolver=new bi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ir extends Wv{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new rfe,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||U5(this),this._firestoreClient.terminate()}}function Xr(t){return t._firestoreClient||U5(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function U5(t){var e,n,r;const i=t._freezeSettings(),o=(l=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new xue(t._databaseId,l,t._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,x5(h.experimentalLongPollingOptions),h.useFetchStreams));var l,h;t._firestoreClient=new Ghe(t._authCredentials,t._appCheckCredentials,t._queue,o),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function j5(t,e,n){const r=new bi;return t.asyncQueue.enqueue((0,y.A)(function*(){try{yield dC(t,n),yield ex(t,e),r.resolve()}catch(i){const o=i;if(!T5(o))throw o;Zo("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function H5(t){if(t._initialized||t._terminated)throw new Ue(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class cl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cl(Ti.fromBase64String(e))}catch(n){throw new Ue(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new cl(Ti.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Zl{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Ue(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bd{constructor(e){this._methodName=e}}class gC{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ue(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ue(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rn(this._lat,e._lat)||rn(this._long,e._long)}}const gfe=/^__.*__$/;class mfe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Ql(e,this.data,this.fieldMask,n,this.fieldTransforms):new xp(e,this.data,n,this.fieldTransforms)}}class z5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ql(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function G5(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mt()}}class mC{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Ru(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new mC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return yC(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(G5(this.Vu)&&gfe.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class _fe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zv(e)}Cu(e,n,r,i=!1){return new mC({Vu:e,methodName:n,Du:r,path:Sr.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $d(t){const e=t._freezeSettings(),n=zv(t._databaseId);return new _fe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _C(t,e,n,r,i,o={}){const s=t.Cu(o.merge||o.mergeFields?2:0,e,n,i);mx("Data must be an object, but it was:",s,r);const a=K5(r,s);let l,c;if(o.merge)l=new Jo(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const m=Qv(e,p,n);if(!s.contains(m))throw new Ue(_e.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Y5(h,m)||h.push(m)}l=new Jo(h),c=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=s.fieldTransforms;return new mfe(new to(a),l,c)}class Kv extends Bd{_toFieldTransform(e){if(2!==e.Vu)throw e.Su(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kv}}function W5(t,e,n){return new mC({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ux extends Bd{_toFieldTransform(e){return new Pv(e.path,new Rp)}isEqual(e){return e instanceof ux}}class dx extends Bd{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=W5(this,e,!0),r=this.vu.map(o=>Ud(o,n)),i=new Pd(r);return new Pv(e.path,i)}isEqual(e){return e instanceof dx&&(0,A.bD)(this.vu,e.vu)}}class hx extends Bd{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=W5(this,e,!0),r=this.vu.map(o=>Ud(o,n)),i=new xd(r);return new Pv(e.path,i)}isEqual(e){return e instanceof hx&&(0,A.bD)(this.vu,e.vu)}}class fx extends Bd{constructor(e,n){super(e),this.Fu=n}_toFieldTransform(e){const n=new Pp(e.serializer,O3(e.serializer,this.Fu));return new Pv(e.path,n)}isEqual(e){return e instanceof fx&&this.Fu===e.Fu}}function px(t,e,n,r){const i=t.Cu(1,e,n);mx("Data must be an object, but it was:",i,r);const o=[],s=to.empty();Jc(r,(l,c)=>{const h=vC(e,l,n);c=(0,A.Ku)(c);const p=i.yu(h);if(c instanceof Kv)o.push(h);else{const m=Ud(c,p);null!=m&&(o.push(h),s.set(h,m))}});const a=new Jo(o);return new z5(s,a,i.fieldTransforms)}function gx(t,e,n,r,i,o){const s=t.Cu(1,e,n),a=[Qv(e,r,n)],l=[i];if(o.length%2!=0)throw new Ue(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Qv(e,o[m])),l.push(o[m+1]);const c=[],h=to.empty();for(let m=a.length-1;m>=0;--m)if(!Y5(c,a[m])){const _=a[m];let w=l[m];w=(0,A.Ku)(w);const T=s.yu(_);if(w instanceof Kv)c.push(_);else{const S=Ud(w,T);null!=S&&(c.push(_),h.set(_,S))}}const p=new Jo(c);return new z5(h,p,s.fieldTransforms)}function q5(t,e,n,r=!1){return Ud(n,t.Cu(r?4:3,e))}function Ud(t,e){if(Q5(t=(0,A.Ku)(t)))return mx("Unsupported field value:",e,t),K5(t,e);if(t instanceof Bd)return function(r,i){if(!G5(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&4!==e.Vu)throw e.Su("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=Ud(a,i.wu(s));null==l&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=(0,A.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return O3(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Nr.fromDate(r);return{timestampValue:Np(i.serializer,o)}}if(r instanceof Nr){const o=new Nr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Np(i.serializer,o)}}if(r instanceof gC)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof cl)return{bytesValue:nH(i.serializer,r._byteString)};if(r instanceof Pr){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Su(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:TP(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${fC(r)}`)}(t,e)}function K5(t,e){const n={};return r3(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jc(t,(r,i)=>{const o=Ud(i,e.fu(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function Q5(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Nr||t instanceof gC||t instanceof cl||t instanceof Pr||t instanceof Bd)}function mx(t,e,n){if(!Q5(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=fC(n);throw e.Su("an object"===r?t+" a custom object":t+" "+r)}var i}function Qv(t,e,n){if((e=(0,A.Ku)(e))instanceof Zl)return e._internalPath;if("string"==typeof e)return vC(t,e);throw yC("Field path arguments must be of type string or ",t,!1,void 0,n)}const vfe=new RegExp("[~\\*/\\[\\]]");function vC(t,e,n){if(e.search(vfe)>=0)throw yC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zl(...e.split("."))._internalPath}catch{throw yC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yC(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new Ue(_e.INVALID_ARGUMENT,a+t+l)}function Y5(t,e){return t.some(n=>n.isEqual(e))}class Yv{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new yfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(IC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class yfe extends Yv{data(){return super.data()}}function IC(t,e){return"string"==typeof e?vC(t,e):e instanceof Zl?e._internalPath:e._delegate._internalPath}function X5(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Ue(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _x{}class Xv extends _x{}function hu(t,e,...n){let r=[];e instanceof _x&&r.push(e),r=r.concat(n),function(o){const s=o.filter(l=>l instanceof Jp).length,a=o.filter(l=>l instanceof Zv).length;if(s>1||s>0&&a>0)throw new Ue(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Zv extends Xv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zv(e,n,r)}_apply(e){const n=this._parse(e);return tz(e._query,n),new no(e.firestore,e.converter,_P(e._query,n))}_parse(e){const n=$d(e.firestore);return function(o,s,a,l,c,h,p){let m;if(c.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new Ue(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){ez(p,h);const _=[];for(const w of p)_.push(J5(l,o,w));m={arrayValue:{values:_}}}else m=J5(l,o,p)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||ez(p,h),m=q5(a,"where",p,"in"===h||"not-in"===h);return Rn.create(c,h,m)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Jp extends _x{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Jp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:rr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const l of a)tz(s,l),s=_P(s,l)}(e._query,n),new no(e.firestore,e.converter,_P(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class vx extends Xv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new vx(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new Ue(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ue(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bv(o,s)}(e._query,this._field,this._direction);return new no(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new ql(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class EC extends Xv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new EC(e,n,r)}_apply(e){return new no(e.firestore,e.converter,$w(e._query,this._limit,this._limitType))}}class wC extends Xv{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new wC(e,n,r)}_apply(e){const n=Z5(e,this.type,this._docOrFields,this._inclusive);return new no(e.firestore,e.converter,(o=n,new ql((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class CC extends Xv{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new CC(e,n,r)}_apply(e){const n=Z5(e,this.type,this._docOrFields,this._inclusive);return new no(e.firestore,e.converter,(o=n,new ql((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function Z5(t,e,n,r){if(n[0]=(0,A.Ku)(n[0]),n[0]instanceof Yv)return function(o,s,a,l,c){if(!l)throw new Ue(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const p of Dp(o))if(p.field.isKeyField())h.push(Sd(s,l.key));else{const m=l.data.field(p.field);if(Nw(m))throw new Ue(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const _=p.field.canonicalString();throw new Ue(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}h.push(m)}return new ou(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=$d(t.firestore);return function(s,a,l,c,h,p){const m=s.explicitOrderBy;if(h.length>m.length)throw new Ue(_e.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let w=0;w<h.length;w++){const T=h[w];if(m[w].field.isKeyField()){if("string"!=typeof T)throw new Ue(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof T}`);if(!mP(s)&&-1!==T.indexOf("/"))throw new Ue(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${T}' contains a slash.`);const S=s.path.child(Sn.fromString(T));if(!It.isDocumentKey(S))throw new Ue(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const U=new It(S);_.push(Sd(a,U))}else{const S=q5(l,c,T);_.push(S)}}return new ou(_,p)}(t._query,t.firestore._databaseId,i,e,n,r)}}function J5(t,e,n){if("string"==typeof(n=(0,A.Ku)(n))){if(""===n)throw new Ue(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mP(e)&&-1!==n.indexOf("/"))throw new Ue(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Sn.fromString(n));if(!It.isDocumentKey(r))throw new Ue(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sd(t,new It(r))}if(n instanceof Pr)return Sd(t,n._key);throw new Ue(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fC(n)}.`)}function ez(t,e){if(!Array.isArray(t)||0===t.length)throw new Ue(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tz(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Ue(_e.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class yx{convertValue(e,n="none"){switch(ru(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Mt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Jc(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new gC(Yr(e.latitude),Yr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kw(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Iv(e));default:return null}}convertTimestamp(e){const n=eu(e);return new Nr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Sn.fromString(e);Lt(fH(r));const i=new tu(r.get(1),r.get(3)),o=new It(r.popFirst(5));return i.isEqual(n)||ii(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function bC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Sfe extends yx{constructor(e){super(),this.firestore=e}convertBytes(e){return new cl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pr(this.firestore,null,n)}}class jd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jl extends Yv{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(IC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Jv extends Jl{data(e={}){return super.data(e)}}class fu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new jd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Jv(this._firestore,this._userDataWriter,r.key,r,new jd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ue(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Jv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const l=new Jv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return 0!==a.type&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Pfe(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Pfe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mt()}}function rz(t,e){return t instanceof Jl&&e instanceof Jl?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof fu&&e instanceof fu&&t._firestore===e._firestore&&lx(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class pu extends yx{constructor(e){super(),this.firestore=e}convertBytes(e){return new cl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pr(this.firestore,null,n)}}function iz(t,e,n){t=Dn(t,Pr);const r=Dn(t.firestore,Ir),i=bC(t.converter,e,n);return eg(r,[_C($d(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,kr.none())])}function oz(t,e,n,...r){t=Dn(t,Pr);const i=Dn(t.firestore,Ir),o=$d(i);let s;return s="string"==typeof(e=(0,A.Ku)(e))||e instanceof Zl?gx(o,"updateDoc",t._key,e,n,r):px(o,"updateDoc",t._key,e),eg(i,[s.toMutation(t._key,kr.exists(!0))])}function sz(t,...e){var n,r,i;t=(0,A.Ku)(t);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof e[s]||cx(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(cx(e[s])){const p=e[s];e[s]=null===(n=p.next)||void 0===n?void 0:n.bind(p),e[s+1]=null===(r=p.error)||void 0===r?void 0:r.bind(p),e[s+2]=null===(i=p.complete)||void 0===i?void 0:i.bind(p)}let l,c,h;if(t instanceof Pr)c=Dn(t.firestore,Ir),h=Ap(t._key.path),l={next:p=>{e[s]&&e[s](Ix(c,t,p))},error:e[s+1],complete:e[s+2]};else{const p=Dn(t,no);c=Dn(p.firestore,Ir),h=p._query;const m=new pu(c);l={next:_=>{e[s]&&e[s](new fu(c,m,p,_))},error:e[s+1],complete:e[s+2]},X5(t._query)}return function(m,_,w,T){const S=new uC(T),U=new b1(_,S,w);return m.asyncQueue.enqueueAndForget((0,y.A)(function*(){return v1(yield Zp(m),U)})),()=>{S.Qa(),m.asyncQueue.enqueueAndForget((0,y.A)(function*(){return I1(yield Zp(m),U)}))}}(Xr(c),h,a,l)}function eg(t,e){return function(r,i){const o=new bi;return r.asyncQueue.enqueueAndForget((0,y.A)(function*(){return function The(t,e,n){return M1.apply(this,arguments)}(yield ox(r),i,o)})),o.promise}(Xr(t),e)}function Ix(t,e,n){const r=n.docs.get(e._key),i=new pu(t);return new Jl(t,i,e._key,r,new jd(n.hasPendingWrites,n.fromCache),e.converter)}const Kfe={maxAttempts:5};class az{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=$d(e)}set(e,n,r){this._verifyNotCommitted();const i=gu(e,this._firestore),o=bC(i.converter,n,r),s=_C(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,kr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=gu(e,this._firestore);let s;return s="string"==typeof(n=(0,A.Ku)(n))||n instanceof Zl?gx(this._dataReader,"WriteBatch.update",o._key,n,r,i):px(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,kr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=gu(e,this._firestore);return this._mutations=this._mutations.concat(new Mp(n._key,kr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gu(t,e){if((t=(0,A.Ku)(t)).firestore!==e)throw new Ue(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class Qfe extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=$d(n)}get(n){const r=gu(n,this._firestore),i=new Sfe(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return Mt();const s=o[0];if(s.isFoundDocument())return new Yv(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Yv(this._firestore,i,r._key,null,r.converter);throw Mt()})}set(n,r,i){const o=gu(n,this._firestore),s=bC(o.converter,r,i),a=_C(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){const s=gu(n,this._firestore);let a;return a="string"==typeof(r=(0,A.Ku)(r))||r instanceof Zl?gx(this._dataReader,"Transaction.update",s._key,r,i,o):px(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){const r=gu(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=gu(e,this._firestore),r=new pu(this._firestore);return super.get(e).then(i=>new Jl(this._firestore,r,n._key,i._document,new jd(!1,!1),n.converter))}}function wx(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function dz(){if(typeof Uint8Array>"u")throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function hz(){if(!function Rue(){return typeof atob<"u"}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){vp=Xo.SDK_VERSION,(0,Xo._registerComponent)(new Aa.uA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Ir(new Jce(r.getProvider("auth-internal")),new nue(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ue(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tu(c.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Xo.registerVersion)(B4,"4.5.0",e),(0,Xo.registerVersion)(B4,"4.5.0","esm2017")}();class ey{constructor(e){this._delegate=e}static fromBase64String(e){return hz(),new ey(cl.fromBase64String(e))}static fromUint8Array(e){return dz(),new ey(cl.fromUint8Array(e))}toBase64(){return hz(),this._delegate.toBase64()}toUint8Array(){return dz(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Cx(t){return function ope(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class spe{enableIndexedDbPersistence(e,n){return function sfe(t,e){H5(t=Dn(t,Ir));const n=Xr(t);if(n._uninitializedComponentsProvider)throw new Ue(_e.FAILED_PRECONDITION,"SDK cache is already specified.");Zo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Yp;return j5(n,i,new Z1(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function afe(t){H5(t=Dn(t,Ir));const e=Xr(t);if(e._uninitializedComponentsProvider)throw new Ue(_e.FAILED_PRECONDITION,"SDK cache is already specified.");Zo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Yp;return j5(e,r,new C5(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function lfe(t){if(t._initialized&&!t._terminated)throw new Ue(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new bi;return t._queue.enqueueAndForgetEvenWhileRestricted((0,y.A)(function*(){try{yield(n=(0,y.A)(function*(i){if(!Ys.D())return Promise.resolve();const o=i+"main";yield Ys.delete(o)}),function r(i){return n.apply(this,arguments)})(UP(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class fz{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof tu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Zo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function V5(t,e,n,r={}){var i;const o=(t=Dn(t,Wv))._getSettings(),s=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=$i.MOCK_USER;else{a=(0,A.Fy)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Ue(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new $i(c)}t._authCredentials=new Zce(new $4(a,l))}}(this._delegate,e,n,r)}enableNetwork(){return function ufe(t){return function Whe(t){return t.asyncQueue.enqueue((0,y.A)(function*(){const e=yield A5(t),n=yield D5(t);return e.setNetworkEnabled(!0),function(i){const o=mt(i);return o.v_.delete(0),Gv(o)}(n)}))}(Xr(t=Dn(t,Ir)))}(this._delegate)}disableNetwork(){return function dfe(t){return function qhe(t){return t.asyncQueue.enqueue((0,y.A)(function*(){const e=yield A5(t),n=yield D5(t);return e.setNetworkEnabled(!1),(r=(0,y.A)(function*(o){const s=mt(o);s.v_.add(0),yield Up(s),s.x_.set("Offline")}),function i(o){return r.apply(this,arguments)})(n);var r}))}(Xr(t=Dn(t,Ir)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,N5("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function cfe(t){return function(n){const r=new bi;return n.asyncQueue.enqueueAndForget((0,y.A)(function*(){return function Rhe(t,e){return L1.apply(this,arguments)}(yield ox(n),r)})),r.promise}(Xr(t=Dn(t,Ir)))}(this._delegate)}onSnapshotsInSync(e){return function Bfe(t,e){return function Yhe(t,e){const n=new uC(e);return t.asyncQueue.enqueueAndForget((0,y.A)(function*(){return i=yield Zp(t),o=n,mt(i).W_.add(o),void o.next();var i,o})),()=>{n.Qa(),t.asyncQueue.enqueueAndForget((0,y.A)(function*(){return i=yield Zp(t),o=n,void mt(i).W_.delete(o);var i,o}))}}(Xr(t=Dn(t,Ir)),cx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new tg(this,B5(this._delegate,e))}catch(n){throw ko(n,"collection()","Firestore.collection()")}}doc(e){try{return new Xs(this,pC(this._delegate,e))}catch(n){throw ko(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Oo(this,function nfe(t,e){if(t=Dn(t,Wv),ax("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new no(t,null,(r=e,new ql(Sn.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw ko(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Yfe(t,e,n){t=Dn(t,Ir);const r=Object.assign(Object.assign({},Kfe),n);return function(o){if(o.maxAttempts<1)throw new Ue(_e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const l=new bi;return o.asyncQueue.enqueueAndForget((0,y.A)(function*(){const c=yield function S5(t){return hC(t).then(e=>e.datastore)}(o);new zhe(o.asyncQueue,c,a,s,l).Ya()})),l.promise}(Xr(t),i=>e(new Qfe(t,i)),r)}(this._delegate,n=>e(new pz(this,n)))}batch(){return Xr(this._delegate),new gz(new az(this._delegate,e=>eg(this._delegate,e)))}loadBundle(e){return function hfe(t,e){const n=Xr(t=Dn(t,Ir)),r=new ife;return function Xhe(t,e,n,r){const i=function(s,a){let l;return l="string"==typeof s?K3().encode(s):s,h=function(h,p){if(h instanceof Uint8Array)return b5(h,p);if(h instanceof ArrayBuffer)return b5(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new jhe(h,a);var h}(n,zv(e));t.asyncQueue.enqueueAndForget((0,y.A)(function*(){!function $he(t,e,n){const r=mt(t);var i;(i=(0,y.A)(function*(s,a,l){try{const c=yield a.getMetadata();if(yield function(w,T){const S=mt(w),U=oi(T.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",H=>S.$r.getBundleMetadata(H,T.id)).then(H=>!!H&&H.createTime.compareTo(U)>=0)}(s.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(w=c).totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}),Promise.resolve(new Set);l._updateProgress(f5(c));const h=new _he(c,s.localStore,a.serializer);let p=yield a.Ba();for(;p;){const _=yield h.sa(p);_&&l._updateProgress(_),p=yield a.Ba()}const m=yield h.complete();return yield Xl(s,m.aa,void 0),yield function(w,T){const S=mt(w);return S.persistence.runTransaction("Save bundle","readwrite",U=>S.$r.saveBundleMetadata(U,T))}(s.localStore,c),l._completeWith(m.progress),Promise.resolve(m._a)}catch(c){return Zo("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var w}),function o(s,a,l){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield ox(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function ffe(t,e){return function Zhe(t,e){return t.asyncQueue.enqueue((0,y.A)(function*(){return function(r,i){const o=mt(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield Xp(t),e)}))}(Xr(t=Dn(t,Ir)),e).then(n=>n?new no(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Oo(this,n):null)}}class AC extends yx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ey(new cl(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Xs.forKey(n,this.firestore,null)}}class pz{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new AC(e)}get(e){const n=zd(e);return this._delegate.get(n).then(r=>new ty(this._firestore,new Jl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=zd(e);return r?(wx("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=zd(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=zd(e);return this._delegate.delete(n),this}}class gz{constructor(e){this._delegate=e}set(e,n,r){const i=zd(e);return r?(wx("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=zd(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=zd(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Hd{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Jv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ny(this._firestore,r),null!=n?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Hd.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new Hd(e,new AC(e),n),i.set(n,o)),o}}Hd.INSTANCES=new WeakMap;class Xs{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new AC(e)}static forPath(e,n,r){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Xs(n,new Pr(n._delegate,r,new It(e)))}static forKey(e,n,r){return new Xs(n,new Pr(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new tg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new tg(this.firestore,B5(this._delegate,e))}catch(n){throw ko(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,A.Ku)(e))instanceof Pr&&$5(this._delegate,e)}set(e,n){n=wx("DocumentReference.set",n);try{return n?iz(this._delegate,e,n):iz(this._delegate,e)}catch(r){throw ko(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?oz(this._delegate,e):oz(this._delegate,e,n,...r)}catch(i){throw ko(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Lfe(t){return eg(Dn(t.firestore,Ir),[new Mp(t._key,kr.none())])}(this._delegate)}onSnapshot(...e){const n=mz(e),r=_z(e,i=>new ty(this.firestore,new Jl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return sz(this._delegate,n,r)}get(e){let n;return n="cache"===(null==e?void 0:e.source)?function Mfe(t){t=Dn(t,Pr);const e=Dn(t.firestore,Ir),n=Xr(e),r=new pu(e);return function Khe(t,e){const n=new bi;return t.asyncQueue.enqueueAndForget((0,y.A)(function*(){return(r=(0,y.A)(function*(o,s,a){try{const l=yield function(h,p){const m=mt(h);return m.persistence.runTransaction("read document","readonly",_=>m.localDocuments.getDocument(_,p))}(o,s);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new Ue(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=Gp(l,`Failed to get document '${s} from cache`);a.reject(c)}}),function i(o,s,a){return r.apply(this,arguments)})(yield Xp(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Jl(e,r,t._key,i,new jd(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Nfe(t){t=Dn(t,Pr);const e=Dn(t.firestore,Ir);return R5(Xr(e),t._key,{source:"server"}).then(n=>Ix(e,t,n))}(this._delegate):function xfe(t){t=Dn(t,Pr);const e=Dn(t.firestore,Ir);return R5(Xr(e),t._key).then(n=>Ix(e,t,n))}(this._delegate),n.then(r=>new ty(this.firestore,new Jl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Xs(this.firestore,this._delegate.withConverter(e?Hd.getInstance(this.firestore,e):null))}}function ko(t,e,n){return t.message=t.message.replace(e,n),t}function mz(t){for(const e of t)if("object"==typeof e&&!Cx(e))return e;return{}}function _z(t,e){var n,r;let i;return i=Cx(t[0])?t[0]:Cx(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ty{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Xs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return rz(this._delegate,e._delegate)}}class ny extends ty{data(e){const n=this._delegate.data(e);return this._delegate._converter||function Yce(t,e){t||Mt()}(void 0!==n),n}}class Oo{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new AC(e)}where(e,n,r){try{return new Oo(this.firestore,hu(this._delegate,function Ife(t,e,n){const r=e,i=IC("where",t);return Zv._create(i,r,n)}(e,n,r)))}catch(i){throw ko(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Oo(this.firestore,hu(this._delegate,function Efe(t,e="asc"){const n=e,r=IC("orderBy",t);return vx._create(r,n)}(e,n)))}catch(r){throw ko(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Oo(this.firestore,hu(this._delegate,function wfe(t){return F5("limit",t),EC._create("limit",t,"F")}(e)))}catch(n){throw ko(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Oo(this.firestore,hu(this._delegate,function Cfe(t){return F5("limitToLast",t),EC._create("limitToLast",t,"L")}(e)))}catch(n){throw ko(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Oo(this.firestore,hu(this._delegate,function bfe(...t){return wC._create("startAt",t,!0)}(...e)))}catch(n){throw ko(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Oo(this.firestore,hu(this._delegate,function Tfe(...t){return wC._create("startAfter",t,!1)}(...e)))}catch(n){throw ko(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Oo(this.firestore,hu(this._delegate,function Afe(...t){return CC._create("endBefore",t,!1)}(...e)))}catch(n){throw ko(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Oo(this.firestore,hu(this._delegate,function Dfe(...t){return CC._create("endAt",t,!0)}(...e)))}catch(n){throw ko(n,"endAt()","Query.endAt()")}}isEqual(e){return lx(this._delegate,e._delegate)}get(e){let n;return n="cache"===(null==e?void 0:e.source)?function Ofe(t){t=Dn(t,no);const e=Dn(t.firestore,Ir),n=Xr(e),r=new pu(e);return function Qhe(t,e){const n=new bi;return t.asyncQueue.enqueueAndForget((0,y.A)(function*(){return(r=(0,y.A)(function*(o,s,a){try{const l=yield nC(o,s,!0),c=new m5(s,l.hs),h=c.Ta(l.documents),p=c.applyChanges(h,!1);a.resolve(p.snapshot)}catch(l){const c=Gp(l,`Failed to execute query '${s} against cache`);a.reject(c)}}),function i(o,s,a){return r.apply(this,arguments)})(yield Xp(t),e,n);var r})),n.promise}(n,t._query).then(i=>new fu(e,r,t,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function Ffe(t){t=Dn(t,no);const e=Dn(t.firestore,Ir),n=Xr(e),r=new pu(e);return P5(n,t._query,{source:"server"}).then(i=>new fu(e,r,t,i))}(this._delegate):function kfe(t){t=Dn(t,no);const e=Dn(t.firestore,Ir),n=Xr(e),r=new pu(e);return X5(t._query),P5(n,t._query).then(i=>new fu(e,r,t,i))}(this._delegate),n.then(r=>new bx(this.firestore,new fu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=mz(e),r=_z(e,i=>new bx(this.firestore,new fu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return sz(this._delegate,n,r)}withConverter(e){return new Oo(this.firestore,this._delegate.withConverter(e?Hd.getInstance(this.firestore,e):null))}}class lpe{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ny(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class bx{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Oo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ny(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new lpe(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ny(this._firestore,r))})}isEqual(e){return rz(this._delegate,e._delegate)}}class tg extends Oo{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Xs(this.firestore,e):null}doc(e){try{return new Xs(this.firestore,void 0===e?pC(this._delegate):pC(this._delegate,e))}catch(n){throw ko(n,"doc()","CollectionReference.doc()")}}add(e){return function Vfe(t,e){const n=Dn(t.firestore,Ir),r=pC(t),i=bC(t.converter,e);return eg(n,[_C($d(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,kr.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Xs(this.firestore,n))}isEqual(e){return $5(this._delegate,e._delegate)}withConverter(e){return new tg(this.firestore,this._delegate.withConverter(e?Hd.getInstance(this.firestore,e):null))}}function zd(t){return Dn(t,Pr)}class Tx{constructor(...e){this._delegate=new Zl(...e)}static documentId(){return new Tx(Sr.keyField().canonicalString())}isEqual(e){return(e=(0,A.Ku)(e))instanceof Zl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Gd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Zfe(){return new ux("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Gd(e)}static delete(){const e=function Xfe(){return new Kv("deleteField")}();return e._methodName="FieldValue.delete",new Gd(e)}static arrayUnion(...e){const n=function Jfe(...t){return new dx("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new Gd(n)}static arrayRemove(...e){const n=function epe(...t){return new hx("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new Gd(n)}static increment(e){const n=function tpe(t){return new fx("increment",t)}(e);return n._methodName="FieldValue.increment",new Gd(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const cpe={Firestore:fz,GeoPoint:gC,Timestamp:Nr,Blob:ey,Transaction:pz,WriteBatch:gz,DocumentReference:Xs,DocumentSnapshot:ty,Query:Oo,QueryDocumentSnapshot:ny,QuerySnapshot:bx,CollectionReference:tg,FieldPath:Tx,FieldValue:Gd,setLogLevel:function ape(t){!function Qce(t){Yc.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};!function dpe(t){(function upe(t,e){t.INTERNAL.registerComponent(new Aa.uA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},cpe)))})(t,(e,n)=>new fz(e,n,new spe)),t.registerVersion("@firebase/firestore-compat","0.3.27")}(Ci.A);const vz="firebasestorage.googleapis.com",yz="storageBucket";class Hr extends A.g{constructor(e,n,r=0){super(Ax(e),`Firebase Storage: ${n} (${Ax(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ax(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Or=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Or||{});function Ax(t){return"storage/"+t}function Dx(){return new Hr(Or.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Iz(){return new Hr(Or.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ez(){return new Hr(Or.CANCELED,"User canceled the upload/download.")}function wz(){return new Hr(Or.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ng(t){return new Hr(Or.INVALID_ARGUMENT,t)}function Cz(){return new Hr(Or.APP_DELETED,"The Firebase app was deleted.")}function bz(t){return new Hr(Or.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ry(t,e){return new Hr(Or.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function iy(t){throw new Hr(Or.INTERNAL_ERROR,"Internal error: "+t)}class _o{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=_o.makeFromUrl(e,n)}catch{return new _o(e,"")}if(""===r.path)return r;throw function Epe(t){return new Hr(Or.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function c(ve){ve.path_=decodeURIComponent(ve.path)}const p=n.replace(/[.]/g,"\\."),me=[{regex:a,indices:{bucket:1,path:3},postModify:function o(ve){"/"===ve.path.charAt(ve.path.length-1)&&(ve.path_=ve.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${p}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${n===vz?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let ve=0;ve<me.length;ve++){const Ye=me[ve],At=Ye.regex.exec(e);if(At){let Bn=At[Ye.indices.path];Bn||(Bn=""),r=new _o(At[Ye.indices.bucket],Bn),Ye.postModify(r);break}}if(null==r)throw function Ipe(t){return new Hr(Or.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return r}}class Ape{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function DC(t){return"string"==typeof t||t instanceof String}function Tz(t){return Sx()&&t instanceof Blob}function Sx(){return typeof Blob<"u"}function Rx(t,e,n,r){if(r<e)throw ng(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ng(`Invalid value for '${t}'. Expected ${n} or less.`)}function ec(t,e,n){let r=e;return null==n&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Az(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}var rg=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(rg||{});function Dz(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),o=-1!==e.indexOf(t);return n||i||o}class Mpe{constructor(e,n,r,i,o,s,a,l,c,h,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,w)=>{this.resolve_=_,this.reject_=w,this.start_()})}start_(){const n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function Rpe(t){return void 0!==t}(l)?o():o(l)}catch(l){s(l)}else if(null!==a){const l=Dx();l.serverResponse=a.getErrorText(),s(this.errorCallback_?this.errorCallback_(a,l):l)}else s(i.canceled?this.appDelete_?Cz():Ez():Iz())};this.canceled_?n(0,new SC(!1,null,!0)):this.backoffId_=function Dpe(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function h(...S){c||(c=!0,e.apply(null,S))}function p(S){i=setTimeout(()=>{i=null,t(_,l())},S)}function m(){o&&clearTimeout(o)}function _(S,...U){if(c)return void m();if(S)return m(),void h.call(null,S,...U);if(l()||s)return m(),void h.call(null,S,...U);let me;r<64&&(r*=2),1===a?(a=2,me=0):me=1e3*(r+Math.random()),p(me)}let w=!1;function T(S){w||(w=!0,m(),!c&&(null!==i?(S||(a=2),clearTimeout(i),p(0)):S||(a=1)))}return p(0),o=setTimeout(()=>{s=!0,T(!0)},n),T}((r,i)=>{if(i)return void r(!1,new SC(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===rg.NO_ERROR,l=o.getStatus();if(!a||Dz(l,this.additionalRetryCodes_)&&this.retry){const h=o.getErrorCode()===rg.ABORT;return void r(!1,new SC(!1,null,h))}const c=-1!==this.successCodes_.indexOf(l);r(!0,new SC(c,o))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Spe(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class SC{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Bpe(...t){const e=function Vpe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}if(Sx())return new Blob(t);throw new Hr(Or.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const As={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Px{constructor(e,n){this.data=e,this.contentType=n||null}}function xx(t,e){switch(t){case As.RAW:return new Px(Sz(e));case As.BASE64:case As.BASE64URL:return new Px(Rz(t,e));case As.DATA_URL:return new Px(function Hpe(t){const e=new Pz(t);return e.base64?Rz(As.BASE64,e.rest):function jpe(t){let e;try{e=decodeURIComponent(t)}catch{throw ry(As.DATA_URL,"Malformed data URL.")}return Sz(e)}(e.rest)}(e),function zpe(t){return new Pz(t).contentType}(e))}throw Dx()}function Sz(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Rz(t,e){switch(t){case As.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw ry(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case As.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw ry(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function Upe(t){if(typeof atob>"u")throw function Tpe(t){return new Hr(Or.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(t)}(e)}catch(i){throw i.message.includes("polyfill")?i:ry(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Pz{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw ry(As.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;null!=r&&(this.base64=function Gpe(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ul{constructor(e,n){let r=0,i="";Tz(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Tz(this.data_)){const i=function $pe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===i?null:new ul(i)}{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ul(r,!0)}}static getBlob(...e){if(Sx()){const n=e.map(r=>r instanceof ul?r.data_:r);return new ul(Bpe.apply(null,n))}{const n=e.map(s=>DC(s)?xx(As.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new ul(i,!0)}}uploadData(){return this.data_}}function Mx(t){let e;try{e=JSON.parse(t)}catch{return null}return function xpe(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function xz(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Kpe(t,e){return e}class Fo{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Kpe}}let RC=null;function oy(){if(RC)return RC;const t=[];t.push(new Fo("bucket")),t.push(new Fo("generation")),t.push(new Fo("metageneration")),t.push(new Fo("name","fullPath",!0));const n=new Fo("name");n.xform=function e(o,s){return function Qpe(t){return!DC(t)||t.length<2?t:xz(t)}(s)},t.push(n);const i=new Fo("size");return i.xform=function r(o,s){return void 0!==s?Number(s):s},t.push(i),t.push(new Fo("timeCreated")),t.push(new Fo("updated")),t.push(new Fo("md5Hash",null,!0)),t.push(new Fo("cacheControl",null,!0)),t.push(new Fo("contentDisposition",null,!0)),t.push(new Fo("contentEncoding",null,!0)),t.push(new Fo("contentLanguage",null,!0)),t.push(new Fo("contentType",null,!0)),t.push(new Fo("metadata","customMetadata",!0)),RC=t,RC}function Mz(t,e,n){const r=Mx(e);return null===r?null:function Xpe(t,e,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return function Ype(t,e){Object.defineProperty(t,"ref",{get:function n(){const o=new _o(t.bucket,t.fullPath);return e._makeStorageReference(o)}})}(r,t),r}(t,r,n)}function Nx(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}const Nz="prefixes",kz="items";class dl{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function hl(t){if(!t)throw Dx()}function PC(t,e){return function n(r,i){const o=Mz(t,i,e);return hl(null!==o),o}}function ig(t){return function e(n,r){let i;return i=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function vpe(){return new Hr(Or.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function _pe(){return new Hr(Or.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function mpe(t){return new Hr(Or.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===n.getStatus()?function ype(t){return new Hr(Or.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}(t.path):r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}}function sy(t){const e=ig(t);return function n(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function gpe(t){return new Hr(Or.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}(t.path)),o.serverResponse=i.serverResponse,o}}function Oz(t,e,n){const i=ec(e.fullServerUrl(),t.host,t._protocol),s=t.maxOperationRetryTime,a=new dl(i,"GET",PC(t,n),s);return a.errorHandler=sy(e),a}function rge(t,e,n,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const a=ec(e.bucketOnlyServerUrl(),t.host,t._protocol),c=t.maxOperationRetryTime,h=new dl(a,"GET",function tge(t,e){return function n(r,i){const o=function ege(t,e,n){const r=Mx(n);return null===r?null:function Jpe(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Nz])for(const i of n[Nz]){const o=i.replace(/\/$/,""),s=t._makeStorageReference(new _o(e,o));r.prefixes.push(s)}if(n[kz])for(const i of n[kz]){const o=t._makeStorageReference(new _o(e,i.name));r.items.push(o)}return r}(t,e,r)}(t,e,i);return hl(null!==o),o}}(t,e.bucket),c);return h.urlParams=o,h.errorHandler=ig(e),h}function Lz(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function age(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class xC{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function kx(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{hl(!1)}return hl(!!n&&-1!==(e||["active"]).indexOf(n)),n}const dge={STATE_CHANGED:"state_changed"},Lo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ox(t){switch(t){case"running":case"pausing":case"canceling":return Lo.RUNNING;case"paused":return Lo.PAUSED;case"success":return Lo.SUCCESS;case"canceled":return Lo.CANCELED;default:return Lo.ERROR}}class hge{constructor(e,n,r){if(function Ppe(t){return"function"==typeof t}(e)||null!=n||null!=r)this.next=e,this.error=null!=n?n:void 0,this.complete=null!=r?r:void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function og(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}let $z=null;class fge{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=rg.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=rg.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=rg.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw iy("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw iy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw iy("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw iy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw iy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class pge extends fge{initXhr(){this.xhr_.responseType="text"}}function Ra(){return $z?$z():new pge}class Uz{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=oy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Or.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(Dz(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=Iz()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Or.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,n)=>{const r=function lge(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s=Lz(e,r,i),a={name:s.fullPath},l=ec(o,t.host,t._protocol),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},p=Nx(s,n),w=new dl(l,"POST",function _(T){let S;kx(T);try{S=T.getResponseHeader("X-Goog-Upload-URL")}catch{hl(!1)}return hl(DC(S)),S},t.maxUploadRetryTime);return w.urlParams=a,w.headers=h,w.body=p,w.errorHandler=ig(e),w}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ra,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=function cge(t,e,n,r){const l=new dl(n,"POST",function o(c){const h=kx(c,["active","final"]);let p=null;try{p=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{hl(!1)}p||hl(!1);const m=Number(p);return hl(!isNaN(m)),new xC(m,r.size(),"final"===h)},t.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=ig(e),l}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Ra,n,r);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,n=new xC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=function uge(t,e,n,r,i,o,s,a){const l=new xC(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw function Cpe(){return new Hr(Or.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const c=l.total-l.current;let h=c;i>0&&(h=Math.min(h,i));const p=l.current;let _="";_=0===h?"finalize":c===h?"upload, finalize":"upload";const w={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${l.current}`},T=r.slice(p,p+h);if(null===T)throw wz();const me=new dl(n,"POST",function S(ve,Ye){const At=kx(ve,["active","final"]),_n=l.current+h,Bn=r.size();let rs;return rs="final"===At?PC(e,o)(ve,Ye):null,new xC(_n,Bn,"final"===At,rs)},e.maxUploadRetryTime);return me.headers=w,me.body=T.uploadData(),me.progressCallback=a||null,me.errorHandler=ig(t),me}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(s,Ra,i,o,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Oz(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ra,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=function Vz(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let me="";for(let ve=0;ve<2;ve++)me+=Math.random().toString().slice(2);return me}();s["Content-Type"]="multipart/related; boundary="+l;const c=Lz(e,r,i),h=Nx(c,n),_=ul.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+h+"\r\n--"+l+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",r,"\r\n--"+l+"--");if(null===_)throw wz();const w={name:c.fullPath},T=ec(o,t.host,t._protocol),U=t.maxUploadRetryTime,H=new dl(T,"POST",PC(t,n),U);return H.urlParams=w,H.headers=s,H.body=_.uploadData(),H.errorHandler=ig(e),H}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ra,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n="paused"===this._state;this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ez(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Ox(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const o=new hge(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);-1!==n&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Ox(this._state)){case Lo.SUCCESS:og(this._resolve.bind(null,this.snapshot))();break;case Lo.CANCELED:case Lo.ERROR:og(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ox(this._state)){case Lo.RUNNING:case Lo.PAUSED:e.next&&og(e.next.bind(e,this.snapshot))();break;case Lo.SUCCESS:e.complete&&og(e.complete.bind(e))();break;default:e.error&&og(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Wd{constructor(e,n){this._service=e,this._location=n instanceof _o?n:_o.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Wd(e,n)}get root(){const e=new _o(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xz(this._location.path)}get storage(){return this._service}get parent(){const e=function Wpe(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;const n=new _o(this._location.bucket,e);return new Wd(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw bz(e)}}function Hz(t,e,n){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,y.A)(function*(t,e,n){const i=yield zz(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Hz(t,e,i.nextPageToken))}),Fx.apply(this,arguments)}function zz(t,e){null!=e&&"number"==typeof e.maxResults&&Rx("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=rge(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Ra)}function Age(t){t._throwIfRoot("getDownloadURL");const e=function ige(t,e,n){const i=ec(e.fullServerUrl(),t.host,t._protocol),s=t.maxOperationRetryTime,a=new dl(i,"GET",function nge(t,e){return function n(r,i){const o=Mz(t,i,e);return hl(null!==o),function Zpe(t,e,n,r){const i=Mx(e);if(null===i||!DC(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const p=t.fullPath;return ec("/b/"+s(t.bucket)+"/o/"+s(p),n,r)+Az({alt:"media",token:c})})[0]}(o,i,t.host,t._protocol)}}(t,n),s);return a.errorHandler=sy(e),a}(t.storage,t._location,oy());return t.storage.makeRequestWithTokens(e,Ra).then(n=>{if(null===n)throw function bpe(){return new Hr(Or.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return n})}function Gz(t,e){const n=function qpe(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new _o(t._location.bucket,n);return new Wd(t.storage,r)}function Wz(t,e){if(t instanceof Lx){const n=t;if(null==n._bucket)throw function wpe(){return new Hr(Or.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yz+"' property when initializing the app?")}();const r=new Wd(n,n._bucket);return null!=e?Wz(r,e):r}return void 0!==e?Gz(t,e):t}function Pge(t,e){if(e&&function Sge(t){return/^[A-Za-z]+:\/\//.test(t)}(e)){if(t instanceof Lx)return function Rge(t,e){return new Wd(t,e)}(t,e);throw ng("To use ref(service, url), the first argument must be a Storage instance.")}return Wz(t,e)}function qz(t,e){const n=null==e?void 0:e[yz];return null==n?null:_o.makeFromBucketSpec(n,t)}class Lx{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=vz,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?_o.makeFromBucketSpec(i,this._host):qz(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?_o.makeFromBucketSpec(this._url,e):qz(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Rx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Rx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,y.A)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const r=yield n.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,y.A)(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wd(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new Ape(Cz());{const s=function Lpe(t,e,n,r,i,o,s=!0){const a=Az(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return function Ope(t,e){e&&(t["X-Firebase-GMPID"]=e)}(c,e),function Npe(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(c,n),function kpe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(c,o),function Fpe(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(c,r),new Mpe(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){var r=this;return(0,y.A)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,n,i,o).getPromise()})()}}const Kz="@firebase/storage";function Xz(t,e){return Pge(t=(0,A.Ku)(t),e)}function $ge(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Lx(n,r,i,e,Xo.SDK_VERSION)}!function Uge(){(0,Xo._registerComponent)(new Aa.uA("storage",$ge,"PUBLIC").setMultipleInstances(!0)),(0,Xo.registerVersion)(Kz,"0.12.2",""),(0,Xo.registerVersion)(Kz,"0.12.2","esm2017")}();class MC{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Jz{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new MC(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new MC(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(o="function"==typeof n?s=>n(new MC(s,this,this._ref)):{next:n.next?s=>n.next(new MC(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class e6{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new tc(e,this._service))}get items(){return this._delegate.items.map(e=>new tc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class tc{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=function Bge(t,e){return Gz(t,e)}(this._delegate,e);return new tc(n,this.storage)}get root(){return new tc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new tc(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new Jz(function Mge(t,e,n){return function Ege(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Uz(t,new ul(e),n)}(t=(0,A.Ku)(t),e,n)}(this._delegate,e,n),this)}putString(e,n=As.RAW,r){this._throwIfRoot("putString");const i=xx(n,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new Jz(new Uz(this._delegate,new ul(i.data,!0),o),this)}listAll(){return function Fge(t){return function Cge(t){const e={prefixes:[],items:[]};return Hz(t,e).then(()=>e)}(t=(0,A.Ku)(t))}(this._delegate).then(e=>new e6(e,this.storage))}list(e){return function Oge(t,e){return zz(t=(0,A.Ku)(t),e)}(this._delegate,e||void 0).then(n=>new e6(n,this.storage))}getMetadata(){return function Nge(t){return function bge(t){t._throwIfRoot("getMetadata");const e=Oz(t.storage,t._location,oy());return t.storage.makeRequestWithTokens(e,Ra)}(t=(0,A.Ku)(t))}(this._delegate)}updateMetadata(e){return function kge(t,e){return function Tge(t,e){t._throwIfRoot("updateMetadata");const n=function oge(t,e,n,r){const o=ec(e.fullServerUrl(),t.host,t._protocol),a=Nx(n,r),c=t.maxOperationRetryTime,h=new dl(o,"PATCH",PC(t,r),c);return h.headers={"Content-Type":"application/json; charset=utf-8"},h.body=a,h.errorHandler=sy(e),h}(t.storage,t._location,e,oy());return t.storage.makeRequestWithTokens(n,Ra)}(t=(0,A.Ku)(t),e)}(this._delegate,e)}getDownloadURL(){return function Lge(t){return Age(t=(0,A.Ku)(t))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Vge(t){return function Dge(t){t._throwIfRoot("deleteObject");const e=function sge(t,e){const r=ec(e.fullServerUrl(),t.host,t._protocol),a=new dl(r,"DELETE",function s(l,c){},t.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=sy(e),a}(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Ra)}(t=(0,A.Ku)(t))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw bz(e)}}class t6{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(n6(e))throw ng("ref() expected a child path but got a URL, use refFromURL instead.");return new tc(Xz(this._delegate,e),this)}refFromURL(e){if(!n6(e))throw ng("refFromURL() expected a full URL but got a child path, use ref() instead.");try{_o.makeFromUrl(e,this._delegate.host)}catch{throw ng("refFromUrl() expected a valid full URL but got an invalid one.")}return new tc(Xz(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){!function Zz(t,e,n,r={}){!function xge(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken="string"==typeof i?i:(0,A.Fy)(i,t.app.options.projectId))}(t,e,n,r)}(this._delegate,e,n,r)}}function n6(t){return/^[A-Za-z]+:\/\//.test(t)}function Gge(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new t6(n,r)}function Vx(){return bt((t,e)=>{let n,r=!1;t.subscribe(Ot(e,i=>{const o=n;n=i,r&&e.next([o,i]),r=!0}))})}function r6(t,e){return function qge(t,e=uR){return new Un(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Bx(t,e){return r6(t,e).pipe(_t(n=>({payload:n,type:"query"})))}!function Wge(t){const e={TaskState:Lo,TaskEvent:dge,StringFormat:As,Storage:t6,Reference:tc};t.INTERNAL.registerComponent(new Aa.uA("storage-compat",Gge,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage-compat","0.3.5")}(Ci.A);class i6{constructor(e,n){An(this,"ref",void 0),An(this,"afs",void 0),this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:o}=l6(r,n);return new a6(i,o,this.afs)}snapshotChanges(){return function Kge(t,e){return r6(t,e).pipe(L0(void 0),Vx(),_t(n=>{const[r,i]=n;return i.exists?null!=r&&r.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xo)}valueChanges(e={}){return this.snapshotChanges().pipe(_t(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return Qn(this.ref.get(e)).pipe(xo)}}function NC(t,e){return Bx(t,e).pipe(L0(void 0),Vx(),_t(n=>{const[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const c=o.find(p=>p.doc.ref.isEqual(a.ref)),h=null==r?void 0:r.payload.docs.find(p=>p.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),s}))}function o6(t,e,n){return NC(t,n).pipe(B0((r,i)=>function Qge(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function Yge(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return $x(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return $x(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $x(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(o=>o.payload),e),[]),UU(),_t(r=>r.map(i=>({type:i.type,payload:i}))))}function $x(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function s6(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class a6{constructor(e,n,r){An(this,"ref",void 0),An(this,"query",void 0),An(this,"afs",void 0),this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=NC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(_t(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(L0(void 0),Vx(),ys(([r,i])=>i.length>0||!r),_t(([,r])=>r),xo)}auditTrail(e){return this.stateChanges(e).pipe(B0((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=s6(e);return o6(this.query,n,this.afs.schedulers.outsideAngular).pipe(xo)}valueChanges(e={}){return Bx(this.query,this.afs.schedulers.outsideAngular).pipe(_t(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),xo)}get(e){return Qn(this.query.get(e)).pipe(xo)}add(e){return this.ref.add(e)}doc(e){return new i6(this.ref.doc(e),this.afs)}}class Xge{constructor(e,n){An(this,"query",void 0),An(this,"afs",void 0),this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?NC(this.query,this.afs.schedulers.outsideAngular).pipe(_t(n=>n.filter(r=>e.indexOf(r.type)>-1)),ys(n=>n.length>0),xo):NC(this.query,this.afs.schedulers.outsideAngular).pipe(xo)}auditTrail(e){return this.stateChanges(e).pipe(B0((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=s6(e);return o6(this.query,n,this.afs.schedulers.outsideAngular).pipe(xo)}valueChanges(e={}){return Bx(this.query,this.afs.schedulers.outsideAngular).pipe(_t(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),xo)}get(e){return Qn(this.query.get(e)).pipe(xo)}}const Zge=new lt("angularfire2.enableFirestorePersistence"),Jge=new lt("angularfire2.firestore.persistenceSettings"),eme=new lt("angularfire2.firestore.settings"),tme=new lt("angularfire2.firestore.use-emulator");function l6(t,e=(n=>n)){return{query:e(t),ref:t}}let fl=(()=>{var t;class e{constructor(r,i,o,s,a,l,c,h,p,m,_,w,T,S,U,H,me){An(this,"schedulers",void 0),An(this,"firestore",void 0),An(this,"persistenceEnabled$",void 0),this.schedulers=c;const ve=rw(r,l,i),Ye=p;m&&Ej(ve,l,_,T,S,U,w,H),[this.firestore,this.persistenceEnabled$]=pR(`${ve.name}.firestore`,"AngularFirestore",ve.name,()=>{const At=l.runOutsideAngular(()=>ve.firestore());if(s&&At.settings(s),Ye&&At.useEmulator(...Ye),o&&!I0(a)){const _n=()=>{try{return Qn(At.enablePersistence(h||void 0).then(()=>!0,()=>!1))}catch(Bn){return typeof console<"u"&&console.warn(Bn),Wt(!1)}};return[At,l.runOutsideAngular(_n)]}return[At,Wt(!1)]},[s,Ye,o])}collection(r,i){let o;o="string"==typeof r?this.firestore.collection(r):r;const{ref:s,query:a}=l6(o,i),l=this.schedulers.ngZone.run(()=>s);return new a6(l,a,this)}collectionGroup(r,i){const o=i||(a=>a),s=this.firestore.collectionGroup(r);return new Xge(o(s),this)}doc(r){let i;i="string"==typeof r?this.firestore.doc(r):r;const o=this.schedulers.ngZone.run(()=>i);return new i6(o,this)}createId(){return this.firestore.collection("_").doc().id}}return t=e,An(e,"\u0275fac",function(r){return new(r||t)(Ve(W_),Ve(q_,8),Ve(Zge,8),Ve(eme,8),Ve(ga),Ve(xe),Ve(fR),Ve(Jge,8),Ve(tme,8),Ve(Es,8),Ve(gj,8),Ve(mj,8),Ve(_j,8),Ve(vj,8),Ve(yj,8),Ve(Ij,8),Ve(hR,8))}),An(e,"\u0275prov",je({token:t,factory:t.\u0275fac,providedIn:"any"})),e})(),nc=(()=>{var t;class e{constructor(r,i,o){this.firestore=r,this.afAuth=i,this.router=o}initialize(){console.log("The fetched user's data from the server won't be available for 1 to 5 seconds"),this.getPublicUserData()}getPublicUserData(){this.afAuth.authState.subscribe(r=>{r?this.firestore.collection("public_users_data").doc(r.uid).get().subscribe(i=>{if(i.exists){const o=i.data();this.public_user_data=o,this.canGoOn="true"}else this.router.navigate(["/splash"])}):this.router.navigate(["/log"])})}getPrivateUserData(){this.afAuth.authState.subscribe(r=>{r?this.firestore.collection("private_users_data").doc(r.uid).get().subscribe(i=>{if(i.exists){const o=i.data();this.private_user_data=o}else this.router.navigate(["/splash"])}):this.router.navigate(["/log"])})}confirmPartecipation(r,i,o){"yes"==o&&this.firestore.collection("events").doc(r).set({people_coming:Ci.A.firestore.FieldValue.increment(1)},{merge:!0})}addLikeToSpot(r){this.firestore.collection("spots").doc(r).set({likes:Ci.A.firestore.FieldValue.increment(1)},{merge:!0})}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(fl),Ve(Es),Ve(vr))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),nme=(()=>{var t;class e{constructor(r,i,o){this.afAuth=r,this.router=i,this.firebaseService=o,this.afAuth.authState.subscribe(s=>{this.router.navigate(s?["/home"]:["/log"])})}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Es),E(vr),E(nc))},t.\u0275cmp=Ke({type:t,selectors:[["app-splash"]],decls:3,vars:0,consts:[[2,"height","100%","width","100%","display","flex","flex-direction","column","align-items","center","justify-content","center"],["src","assets\\img\\trasparent_logo.png"]],template:function(r,i){1&r&&(x(0,"body")(1,"div",0),$e(2,"img",1),k()())}}),e})();const c6="@firebase/database";let Ux="";function jx(t){Ux=t}class rme{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,A.As)(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:(0,A.$L)(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class ime{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return(0,A.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const d6=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new rme(e)}}catch{}return new ime},qd=d6("localStorage"),Hx=d6("sessionStorage"),sg=new ws.Vy("@firebase/database"),h6=function(){let t=1;return function(){return t++}}(),f6=function(t){const e=(0,A.kj)(t),n=new A.gz;n.update(e);const r=n.digest();return A.K3.encodeByteArray(r)},ay=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=ay.apply(null,r):e+="object"==typeof r?(0,A.As)(r):r,e+=" "}return e};let Kd=null,p6=!0;const g6=function(t,e){(0,A.vA)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(sg.logLevel=ws.$b.VERBOSE,Kd=sg.log.bind(sg),e&&Hx.set("logging_enabled",!0)):"function"==typeof t?Kd=t:(Kd=null,Hx.remove("logging_enabled"))},Hi=function(...t){if(!0===p6&&(p6=!1,null===Kd&&!0===Hx.get("logging_enabled")&&g6(!0)),Kd){const e=ay.apply(null,t);Kd(e)}},ly=function(t){return function(...e){Hi(t,...e)}},zx=function(...t){const e="FIREBASE INTERNAL ERROR: "+ay(...t);sg.error(e)},pl=function(...t){const e=`FIREBASE FATAL ERROR: ${ay(...t)}`;throw sg.error(e),new Error(e)},vo=function(...t){const e="FIREBASE WARNING: "+ay(...t);sg.warn(e)},kC=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},mu="[MIN_NAME]",rc="[MAX_NAME]",Qd=function(t,e){if(t===e)return 0;if(t===mu||e===rc)return-1;if(e===mu||t===rc)return 1;{const n=v6(t),r=v6(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},ame=function(t,e){return t===e?0:t<e?-1:1},cy=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,A.As)(e))},Gx=function(t){if("object"!=typeof t||null===t)return(0,A.As)(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=(0,A.As)(e[r]),n+=":",n+=Gx(t[e[r]]);return n+="}",n},m6=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function zi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const _6=function(t){(0,A.vA)(!kC(t),"Invalid JSON number");const r=1023;let i,o,s,a,l;0===t?(o=0,s=0,i=1/t==-1/0?1:0):(i=t<0,(t=Math.abs(t))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(t/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=11;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(i?1:0),c.reverse();const h=c.join("");let p="";for(l=0;l<64;l+=8){let m=parseInt(h.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),p+=m}return p.toLowerCase()},dme=new RegExp("^-?(0*)\\d{1,10}$"),v6=function(t){if(dme.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},ag=function(t){try{t()}catch(e){setTimeout(()=>{throw vo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},uy=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class gme{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=null==n?void 0:n.getImmediate({optional:!0}),this.appCheck||null==n||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){vo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class mme{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(Hi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vo(e)}}let dy=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const C6=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,A6="websocket",D6="long_polling";class qx{constructor(e,n,r,i,o=!1,s="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qd.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&qd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function S6(t,e,n){let r;if((0,A.vA)("string"==typeof e,"typeof type must == string"),(0,A.vA)("object"==typeof n,"typeof params must == object"),e===A6)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==D6)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function _me(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return zi(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}class vme{constructor(){this.counters_={}}incrementCounter(e,n=1){(0,A.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return(0,A.A4)(this.counters_)}}const Kx={},Qx={};function Yx(t){const e=t.toString();return Kx[e]||(Kx[e]=new vme),Kx[e]}class Ime{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ag(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class _u{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ly(e),this.stats_=Yx(n),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),S6(n,D6,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Ime(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if((0,A.$g)()||"complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Xx((...o)=>{const[s,a,l,c,h]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=l;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&C6.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_u.forceAllow_=!0}static forceDisallow(){_u.forceDisallow_=!0}static isAvailable(){return!((0,A.$g)()||!_u.forceAllow_&&(_u.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=(0,A.As)(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=(0,A.KA)(n),i=m6(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if((0,A.$g)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=(0,A.As)(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Xx{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,A.$g)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=h6(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=Xx.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Hi("frame writing exception"),a.stack&&Hi(a.stack),Hi(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Hi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const s=this.pendingSegs.shift();r=r+"&seg"+i+"="+s.seg+"&ts"+i+"="+s.ts+"&d"+i+"="+s.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,n){(0,A.$g)()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Hi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let FC=null;typeof MozWebSocket<"u"?FC=MozWebSocket:typeof WebSocket<"u"&&(FC=WebSocket);let lg=(()=>{class t{constructor(n,r,i,o,s,a,l){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ly(this.connId),this.stats_=Yx(r),this.connURL=t.connectionURL_(r,a,l,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){const a={v:"5"};return!(0,A.$g)()&&typeof location<"u"&&location.hostname&&C6.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),o&&(a.ac=o),s&&(a.p=s),S6(n,A6,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qd.set("previous_websocket_failure",!0);try{let i;if((0,A.$g)()){i={headers:{"User-Agent":`Firebase/5/${Ux}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const s=process.env,a=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new FC(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==FC&&!t.forceDisallow_}static previouslyFailed(){return qd.isInMemoryStorage||!0===qd.get("previous_websocket_failure")}markConnectionHealthy(){qd.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,A.$L)(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if((0,A.vA)(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=(0,A.As)(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=m6(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),O6=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[_u,lg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=lg&&lg.isAvailable();let i=r&&!lg.previouslyFailed();if(n.webSocketOnly&&(r||vo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[lg];else{const o=this.transports_=[];for(const s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class j6{constructor(e,n,r,i,o,s,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ly("c:"+this.id+":"),this.transportManager_=new O6(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=uy(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=cy("t",e),r=cy("d",e);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=cy("t",e),r=cy("d",e);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=cy("t",e);if("d"in e){const r=e.d;if("h"===n){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?zx("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zx("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&vo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),uy(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):uy(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class H6{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class z6{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,A.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,A.vA)(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class LC extends z6{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,A.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new LC}getInitialEvent(e){return(0,A.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Jn{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function Hn(){return new Jn("")}function In(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function vu(t){return t.pieces_.length-t.pieceNum_}function hr(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Jn(t.pieces_,e)}function Jx(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function hy(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function q6(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Jn(e,0)}function Fr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Jn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Jn(n,0)}function En(t){return t.pieceNum_>=t.pieces_.length}function Vo(t,e){const n=In(t),r=In(e);if(null===n)return e;if(n===r)return Vo(hr(t),hr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function jme(t,e){const n=hy(t,0),r=hy(e,0);for(let i=0;i<n.length&&i<r.length;i++){const o=Qd(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function eM(t,e){if(vu(t)!==vu(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Zs(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(vu(t)>vu(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Hme{constructor(e,n){this.errorPrefix_=n,this.parts_=hy(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,A.OE)(this.parts_[r]);K6(this)}}function K6(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Yd(t))}function Yd(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class tM extends z6{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new tM}getInitialEvent(e){return(0,A.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const fy=1e3;let BC,Xd=(()=>{class t extends H6{constructor(n,r,i,o,s,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=ly("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=fy,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,A.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");tM.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&LC.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_((0,A.As)(s)),(0,A.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();const r=new A.cY,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,o){this.initConnection_();const s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),(0,A.vA)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,A.vA)(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const l={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const s={p:i};n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest("q",s,l=>{const c=l.d,h=l.s;t.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",l),"ok"!==h&&this.removeListen_(i,o),n.onComplete&&n.onComplete(h,c))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&(0,A.gR)(n,"w")){const i=(0,A.yw)(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();vo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||(0,A.qc)(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=(0,A.Cv)(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const s=o.s,a=o.d||"error";this.authToken_===n&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,A.vA)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);const s={p:n};o&&(s.q=i,s.t=o),this.sendRequest("n",s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){const s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();const a={p:r,d:i};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+(0,A.As)(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):zx("Unrecognized action received from server: "+(0,A.As)(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){(0,A.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=fy,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=fy,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=fy),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return(0,y.A)(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),o=n.onRealtimeDisconnect_.bind(n),s=n.id+":"+t.nextConnectionId_++,a=n.lastSessionId;let l=!1,c=null;const h=function(){c?c.close():(l=!0,o())};n.realtime_={close:h,sendRequest:function(_){(0,A.vA)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(_)}};const m=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[_,w]=yield Promise.all([n.authTokenProvider_.getToken(m),n.appCheckTokenProvider_.getToken(m)]);l?Hi("getToken() completed but was canceled"):(Hi("getToken() completed. Creating connection."),n.authToken_=_&&_.accessToken,n.appCheckToken_=w&&w.token,c=new j6(s,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,o,T=>{vo(T+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(_){n.log_("Failed to get token: "+_),l||(n.repoInfo_.nodeAdmin&&vo(_),h())}}})()}interrupt(n){Hi("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Hi("Resuming connection for reason: "+n),delete this.interruptReasons_[n],(0,A.Im)(this.interruptReasons_)&&(this.reconnectDelay_=fy,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(s=>Gx(s)).join("$"):"default";const o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){const i=new Jn(n).toString();let o;if(this.listens.has(i)){const s=this.listens.get(i);o=s.get(r),s.delete(r),0===s.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){Hi("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Hi("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";(0,A.$g)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),n["sdk."+r+"."+Ux.replace(/\./g,"-")]=1,(0,A.jZ)()?n["framework.cordova"]=1:(0,A.lV)()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=LC.getInstance().currentlyOnline();return(0,A.Im)(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class wn{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new wn(e,n)}}class VC{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new wn(mu,e),i=new wn(mu,n);return 0!==this.compare(r,i)}minPost(){return wn.MIN}}class X6 extends VC{static get __EMPTY_NODE(){return BC}static set __EMPTY_NODE(e){BC=e}compare(e,n){return Qd(e.name,n.name)}isDefinedOn(e){throw(0,A.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return wn.MIN}maxPost(){return new wn(rc,BC)}makePost(e,n){return(0,A.vA)("string"==typeof e,"KeyIndex indexValue must always be a string."),new wn(e,BC)}toString(){return".key"}}const gl=new X6;class $C{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let rM,Pa=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=null!=i?i:t.RED,this.left=null!=o?o:ts.EMPTY_NODE,this.right=null!=s?s:ts.EMPTY_NODE}copy(n,r,i,o,s){return new t(null!=n?n:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=o?o:this.left,null!=s?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this;const s=i(n,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(n,r,i),null):0===s?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return ts.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return ts.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class ts{constructor(e,n=ts.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ts(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Pa.BLACK,null,null))}remove(e){return new ts(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pa.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $C(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new $C(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new $C(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new $C(this.root_,null,this.comparator_,!0,e)}}function Xme(t,e){return Qd(t.name,e.name)}function nM(t,e){return Qd(t,e)}ts.EMPTY_NODE=new class Yme{copy(e,n,r,i,o){return this}insert(e,n,r){return new Pa(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Z6=function(t){return"number"==typeof t?"number:"+_6(t):"string:"+t},J6=function(t){if(t.isLeafNode()){const e=t.val();(0,A.vA)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,A.gR)(e,".sv"),"Priority must be a string or number.")}else(0,A.vA)(t===rM||t.isEmpty(),"priority of unexpected type.");(0,A.vA)(t===rM||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let eG,tG,nG,cg=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,(0,A.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),J6(this.priorityNode_)}static set __childrenNodeConstructor(n){eG=n}static get __childrenNodeConstructor(){return eG}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return En(n)?this:".priority"===In(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=In(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,A.vA)(".priority"!==i||1===vu(n),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(hr(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Z6(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?_6(this.value_):this.value_,this.lazyHash_=f6(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:((0,A.vA)(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return(0,A.vA)(o>=0,"Unknown leaf type: "+r),(0,A.vA)(s>=0,"Unknown leaf type: "+i),o===s?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const Er=new class t_e extends VC{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return 0===o?Qd(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return wn.MIN}maxPost(){return new wn(rc,new cg("[PRIORITY-POST]",nG))}makePost(e,n){const r=tG(e);return new wn(n,new cg("[PRIORITY-POST]",r))}toString(){return".priority"}},n_e=Math.log(2);class r_e{constructor(e){this.count=parseInt(Math.log(e+1)/n_e,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const UC=function(t,e,n,r){t.sort(e);const i=function(l,c){const h=c-l;let p,m;if(0===h)return null;if(1===h)return p=t[l],m=n?n(p):p,new Pa(m,p.node,Pa.BLACK,null,null);{const _=parseInt(h/2,10)+l,w=i(l,_),T=i(_+1,c);return p=t[_],m=n?n(p):p,new Pa(m,p.node,Pa.BLACK,w,T)}},a=function(l){let c=null,h=null,p=t.length;const m=function(w,T){const S=p-w,U=p;p-=w;const H=i(S+1,U),me=t[S],ve=n?n(me):me;_(new Pa(ve,me.node,T,null,H))},_=function(w){c?(c.left=w,c=w):(h=w,c=w)};for(let w=0;w<l.count;++w){const T=l.nextBitIsOne(),S=Math.pow(2,l.count-(w+1));T?m(S,Pa.BLACK):(m(S,Pa.BLACK),m(S,Pa.RED))}return h}(new r_e(t.length));return new ts(r||e,a)};let iM;const ug={};class ic{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return(0,A.vA)(ug&&Er,"ChildrenNode.ts has not been loaded"),iM=iM||new ic({".priority":ug},{".priority":Er}),iM}get(e){const n=(0,A.yw)(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ts?n:null}hasIndex(e){return(0,A.gR)(this.indexSet_,e.toString())}addIndex(e,n){(0,A.vA)(e!==gl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(wn.Wrap);let a,s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();a=i?UC(r,e.getCompare()):ug;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new ic(h,c)}addToIndexes(e,n){const r=(0,A.kH)(this.indexes_,(i,o)=>{const s=(0,A.yw)(this.indexSet_,o);if((0,A.vA)(s,"Missing index implementation for "+o),i===ug){if(s.isDefinedOn(e.node)){const a=[],l=n.getIterator(wn.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),UC(a,s.getCompare())}return ug}{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new wn(e.name,a))),l.insert(e,e.node)}});return new ic(r,this.indexSet_)}removeFromIndexes(e,n){const r=(0,A.kH)(this.indexes_,i=>{if(i===ug)return i;{const o=n.get(e.name);return o?i.remove(new wn(e.name,o)):i}});return new ic(r,this.indexSet_)}}let py,hn=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&J6(this.priorityNode_),this.children_.isEmpty()&&(0,A.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return py||(py=new t(new ts(nM),null,ic.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||py}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?py:r}}getChild(n){const r=In(n);return null===r?this:this.getImmediateChild(r).getChild(hr(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if((0,A.vA)(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new wn(n,r);let o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));const a=o.isEmpty()?py:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){const i=In(n);if(null===i)return r;{(0,A.vA)(".priority"!==In(n)||1===vu(n),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(hr(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,o=0,s=!0;if(this.forEachChild(Er,(a,l)=>{r[a]=l.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+Z6(this.getPriority().val())+":"),this.forEachChild(Er,(r,i)=>{const o=i.hash();""!==o&&(n+=":"+r+":"+o)}),this.lazyHash_=""===n?"":f6(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const o=this.resolveIndex_(i);if(o){const s=o.getPredecessorKey(new wn(n,r));return s?s.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new wn(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new wn(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{const o=this.children_.getIteratorFrom(n.name,wn.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{const o=this.children_.getReverseIteratorFrom(n.name,wn.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===gy?-1:0}withIndex(n){if(n===gl||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===gl||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Er),o=r.getIterator(Er);let s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(n){return n===gl?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const gy=new class i_e extends hn{constructor(){super(new ts(nM),hn.EMPTY_NODE,ic.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return hn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(wn,{MIN:{value:new wn(mu,hn.EMPTY_NODE)},MAX:{value:new wn(rc,gy)}}),X6.__EMPTY_NODE=hn.EMPTY_NODE,cg.__childrenNodeConstructor=hn,function Zme(t){rM=t}(gy),function e_e(t){nG=t}(gy);const o_e=!0;function zr(t,e=null){if(null===t)return hn.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,A.vA)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new cg(t,zr(e));if(t instanceof Array||!o_e){let n=hn.EMPTY_NODE;return zi(t,(r,i)=>{if((0,A.gR)(t,r)&&"."!==r.substring(0,1)){const o=zr(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(zr(e))}{const n=[];let r=!1;if(zi(t,(s,a)=>{if("."!==s.substring(0,1)){const l=zr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new wn(s,l)))}}),0===n.length)return hn.EMPTY_NODE;const o=UC(n,Xme,s=>s.name,nM);if(r){const s=UC(n,Er.getCompare());return new hn(o,zr(e),new ic({".priority":s},{".priority":Er}))}return new hn(o,zr(e),ic.Default)}}!function Jme(t){tG=t}(zr);class oM extends VC{constructor(e){super(),this.indexPath_=e,(0,A.vA)(!En(e)&&".priority"!==In(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return 0===o?Qd(e.name,n.name):o}makePost(e,n){const r=zr(e),i=hn.EMPTY_NODE.updateChild(this.indexPath_,r);return new wn(n,i)}maxPost(){const e=hn.EMPTY_NODE.updateChild(this.indexPath_,gy);return new wn(rc,e)}toString(){return hy(this.indexPath_,0).join("/")}}const sM=new class s_e extends VC{compare(e,n){const r=e.node.compareTo(n.node);return 0===r?Qd(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return wn.MIN}maxPost(){return wn.MAX}makePost(e,n){const r=zr(e);return new wn(n,r)}toString(){return".value"}};function rG(t){return{type:"value",snapshotNode:t}}function dg(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function my(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function _y(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class aM{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){(0,A.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=s&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(my(n,a)):(0,A.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(dg(n,r)):s.trackChildChange(_y(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Er,(i,o)=>{n.hasChild(i)||r.trackChildChange(my(i,o))}),n.isLeafNode()||n.forEachChild(Er,(i,o)=>{if(e.hasChild(i)){const s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(_y(i,o,s))}else r.trackChildChange(dg(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?hn.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class vy{constructor(e){this.indexedFilter_=new aM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=vy.getStartPost_(e),this.endPost_=vy.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new wn(n,r))||(r=hn.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=hn.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(hn.EMPTY_NODE);const o=this;return n.forEachChild(Er,(s,a)=>{o.matches(new wn(s,a))||(i=i.updateImmediateChild(s,hn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}return e.getIndex().maxPost()}}class l_e{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new vy(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new wn(n,r))||(r=hn.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=hn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let o;i=hn.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),s++}}}else{let o;i=n.withIndex(this.index_),i=i.updatePriority(hn.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let s=0;for(;o.hasNext();){const a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,hn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){const p=this.index_.getCompare();s=(m,_)=>p(_,m)}else s=this.index_.getCompare();const a=e;(0,A.vA)(a.numChildren()===this.limit_,"");const l=new wn(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const p=a.getImmediateChild(n);let m=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=m&&(m.name===n||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);const _=null==m?1:s(m,l);if(h&&!r.isEmpty()&&_>=0)return null!=o&&o.trackChildChange(_y(n,r,p)),a.updateImmediateChild(n,r);{null!=o&&o.trackChildChange(my(n,p));const T=a.updateImmediateChild(n,hn.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(null!=o&&o.trackChildChange(dg(m.name,m.node)),T.updateImmediateChild(m.name,m.node)):T}}return r.isEmpty()?e:h&&s(c,l)>=0?(null!=o&&(o.trackChildChange(my(c.name,c.node)),o.trackChildChange(dg(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,hn.EMPTY_NODE)):e}}class jC{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Er}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,A.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,A.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:mu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,A.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,A.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,A.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Er}copy(){const e=new jC;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function lM(t,e,n){const r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function cM(t,e,n){const r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function HC(t,e){const n=t.copy();return n.index_=e,n}function iG(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Er?n="$priority":t.index_===sM?n="$value":t.index_===gl?n="$key":((0,A.vA)(t.index_ instanceof oM,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=(0,A.As)(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=(0,A.As)(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+(0,A.As)(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=(0,A.As)(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+(0,A.As)(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function oG(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Er&&(e.i=t.index_.toString()),e}class zC extends H6{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ly("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:((0,A.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=zC.getListenId_(e,r),a={};this.listens_[s]=a;const l=iG(e._queryParams);this.restRequest_(o+".json",l,(c,h)=>{let p=h;if(404===c&&(p=null,c=null),null===c&&this.onDataUpdate_(o,p,!1,r),(0,A.yw)(this.listens_,s)===a){let m;m=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(m,null)}})}unlisten(e,n){const r=zC.getListenId_(e,n);delete this.listens_[r]}get(e){const n=iG(e._queryParams),r=e._path.toString(),i=new A.cY;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,A.Am)(n);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,A.$L)(a.responseText)}catch{vo("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&vo("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}}class p_e{constructor(){this.rootNode_=hn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function GC(){return{value:null,children:new Map}}function hg(t,e,n){if(En(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=In(e);t.children.has(r)||t.children.set(r,GC()),hg(t.children.get(r),e=hr(e),n)}}function uM(t,e){if(En(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Er,(r,i)=>{hg(t,new Jn(r),i)}),uM(t,e)}}if(t.children.size>0){const n=In(e);return e=hr(e),t.children.has(n)&&uM(t.children.get(n),e)&&t.children.delete(n),0===t.children.size}return!0}function dM(t,e,n){null!==t.value?n(e,t.value):function g_e(t,e){t.children.forEach((n,r)=>{e(r,n)})}(t,(r,i)=>{dM(i,new Jn(e.toString()+"/"+r),n)})}class m_e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&zi(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}class y_e{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new m_e(e);const r=1e4+2e4*Math.random();uy(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;zi(e,(i,o)=>{o>0&&(0,A.gR)(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),uy(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ml=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(ml||{});function pM(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class WC{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ml.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(En(this.path)){if(null!=this.affectedTree.value)return(0,A.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Jn(e));return new WC(Hn(),n,this.revert)}}return(0,A.vA)(In(this.path)===e,"operationForChild called for unrelated child."),new WC(hr(this.path),this.affectedTree,this.revert)}}class yy{constructor(e,n){this.source=e,this.path=n,this.type=ml.LISTEN_COMPLETE}operationForChild(e){return En(this.path)?new yy(this.source,Hn()):new yy(this.source,hr(this.path))}}class Zd{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ml.OVERWRITE}operationForChild(e){return En(this.path)?new Zd(this.source,Hn(),this.snap.getImmediateChild(e)):new Zd(this.source,hr(this.path),this.snap)}}class fg{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ml.MERGE}operationForChild(e){if(En(this.path)){const n=this.children.subtree(new Jn(e));return n.isEmpty()?null:n.value?new Zd(this.source,Hn(),n.value):new fg(this.source,Hn(),n)}return(0,A.vA)(In(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new fg(this.source,hr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class yu{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(En(e))return this.isFullyInitialized()&&!this.filtered_;const n=In(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class I_e{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Iy(t,e,n,r,i,o){const s=r.filter(a=>a.type===n);s.sort((a,l)=>function C_e(t,e,n){if(null==e.childName||null==n.childName)throw(0,A.Hk)("Should only compare child_ events.");const r=new wn(e.childName,e.snapshotNode),i=new wn(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,a,l)),s.forEach(a=>{const l=function w_e(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,a,o);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function qC(t,e){return{eventCache:t,serverCache:e}}function Ey(t,e,n,r){return qC(new yu(e,n,r),t.serverCache)}function aG(t,e,n,r){return qC(t.eventCache,new yu(e,n,r))}function KC(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Jd(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let gM;class wr{constructor(e,n=(()=>(gM||(gM=new ts(ame)),gM))()){this.value=e,this.children=n}static fromObject(e){let n=new wr(null);return zi(e,(r,i)=>{n=n.set(new Jn(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:Hn(),value:this.value};if(En(e))return null;{const r=In(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(hr(e),n);return null!=o?{path:Fr(new Jn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(En(e))return this;{const n=In(e),r=this.children.get(n);return null!==r?r.subtree(hr(e)):new wr(null)}}set(e,n){if(En(e))return new wr(n,this.children);{const r=In(e),o=(this.children.get(r)||new wr(null)).set(hr(e),n),s=this.children.insert(r,o);return new wr(this.value,s)}}remove(e){if(En(e))return this.children.isEmpty()?new wr(null):new wr(null,this.children);{const n=In(e),r=this.children.get(n);if(r){const i=r.remove(hr(e));let o;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new wr(null):new wr(this.value,o)}return this}}get(e){if(En(e))return this.value;{const n=In(e),r=this.children.get(n);return r?r.get(hr(e)):null}}setTree(e,n){if(En(e))return n;{const r=In(e),o=(this.children.get(r)||new wr(null)).setTree(hr(e),n);let s;return s=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new wr(this.value,s)}}fold(e){return this.fold_(Hn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Fr(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Hn(),n)}findOnPath_(e,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(En(e))return null;{const o=In(e),s=this.children.get(o);return s?s.findOnPath_(hr(e),Fr(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Hn(),n)}foreachOnPath_(e,n,r){if(En(e))return this;{this.value&&r(n,this.value);const i=In(e),o=this.children.get(i);return o?o.foreachOnPath_(hr(e),Fr(n,i),r):new wr(null)}}foreach(e){this.foreach_(Hn(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Fr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class xa{constructor(e){this.writeTree_=e}static empty(){return new xa(new wr(null))}}function wy(t,e,n){if(En(e))return new xa(new wr(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const s=Vo(i,e);return o=o.updateChild(s,n),new xa(t.writeTree_.set(i,o))}{const i=new wr(n),o=t.writeTree_.setTree(e,i);return new xa(o)}}}function mM(t,e,n){let r=t;return zi(n,(i,o)=>{r=wy(r,Fr(e,i),o)}),r}function lG(t,e){if(En(e))return xa.empty();{const n=t.writeTree_.setTree(e,new wr(null));return new xa(n)}}function _M(t,e){return null!=eh(t,e)}function eh(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Vo(n.path,e)):null}function cG(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Er,(r,i)=>{e.push(new wn(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new wn(r,i.value))}),e}function Iu(t,e){if(En(e))return t;{const n=eh(t,e);return new xa(null!=n?new wr(n):t.writeTree_.subtree(e))}}function vM(t){return t.writeTree_.isEmpty()}function pg(t,e){return uG(Hn(),t.writeTree_,e)}function uG(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,A.vA)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=uG(Fr(t,i),o,n)}),!n.getChild(t).isEmpty()&&null!==r&&(n=n.updateChild(Fr(t,".priority"),r)),n}}function QC(t,e){return gG(e,t)}function R_e(t,e){if(t.snap)return Zs(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Zs(Fr(t.path,n),e))return!0;return!1}function x_e(t){return t.visible}function dG(t,e,n){let r=xa.empty();for(let i=0;i<t.length;++i){const o=t[i];if(e(o)){const s=o.path;let a;if(o.snap)Zs(n,s)?(a=Vo(n,s),r=wy(r,a,o.snap)):Zs(s,n)&&(a=Vo(s,n),r=wy(r,Hn(),o.snap.getChild(a)));else{if(!o.children)throw(0,A.Hk)("WriteRecord should have .snap or .children");if(Zs(n,s))a=Vo(n,s),r=mM(r,a,o.children);else if(Zs(s,n))if(a=Vo(s,n),En(a))r=mM(r,Hn(),o.children);else{const l=(0,A.yw)(o.children,In(a));if(l){const c=l.getChild(hr(a));r=wy(r,Hn(),c)}}}}}return r}function hG(t,e,n,r,i){if(r||i){const o=Iu(t.visibleWrites,e);return!i&&vM(o)?n:i||null!=n||_M(o,Hn())?pg(dG(t.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Zs(c.path,e)||Zs(e,c.path))},e),n||hn.EMPTY_NODE):null}{const o=eh(t.visibleWrites,e);if(null!=o)return o;{const s=Iu(t.visibleWrites,e);return vM(s)?n:null!=n||_M(s,Hn())?pg(s,n||hn.EMPTY_NODE):null}}}function YC(t,e,n,r){return hG(t.writeTree,t.treePath,e,n,r)}function yM(t,e){return function M_e(t,e,n){let r=hn.EMPTY_NODE;const i=eh(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Er,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){const o=Iu(t.visibleWrites,e);return n.forEachChild(Er,(s,a)=>{const l=pg(Iu(o,new Jn(s)),a);r=r.updateImmediateChild(s,l)}),cG(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}return cG(Iu(t.visibleWrites,e)).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}(t.writeTree,t.treePath,e)}function fG(t,e,n,r){return function N_e(t,e,n,r,i){(0,A.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Fr(e,n);if(_M(t.visibleWrites,o))return null;{const s=Iu(t.visibleWrites,o);return vM(s)?i.getChild(n):pg(s,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function XC(t,e){return function O_e(t,e){return eh(t.visibleWrites,e)}(t.writeTree,Fr(t.treePath,e))}function IM(t,e,n){return function k_e(t,e,n,r){const i=Fr(e,n),o=eh(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?pg(Iu(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function pG(t,e){return gG(Fr(t.treePath,e),t.writeTree)}function gG(t,e){return{treePath:t,writeTree:e}}class B_e{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;(0,A.vA)("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),(0,A.vA)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===n&&"child_removed"===o)this.changeMap.set(r,_y(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===o)this.changeMap.set(r,my(r,i.oldSnap));else if("child_changed"===n&&"child_added"===o)this.changeMap.set(r,dg(r,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==o)throw(0,A.Hk)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,_y(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const mG=new class $_e{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};class EM{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new yu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return IM(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Jd(this.viewCache_),o=function V_e(t,e,n,r,i,o){return function F_e(t,e,n,r,i,o,s){let a;const l=Iu(t.visibleWrites,e),c=eh(l,Hn());if(null!=c)a=c;else{if(null==n)return[];a=pg(l,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const h=[],p=s.getCompare(),m=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let _=m.getNext();for(;_&&h.length<i;)0!==p(_,r)&&h.push(_),_=m.getNext();return h}}(t.writeTree,t.treePath,e,n,r,i,o)}(this.writes_,i,n,1,r,e);return 0===o.length?null:o[0]}}function _G(t,e,n,r,i,o){const s=e.eventCache;if(null!=XC(r,n))return e;{let a,l;if(En(n))if((0,A.vA)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Jd(e),p=yM(r,c instanceof hn?c:hn.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{const c=YC(r,Jd(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{const c=In(n);if(".priority"===c){(0,A.vA)(1===vu(n),"Can't have a priority with additional path components");const h=s.getNode();l=e.serverCache.getNode();const p=fG(r,n,h,l);a=null!=p?t.filter.updatePriority(h,p):s.getNode()}else{const h=hr(n);let p;if(s.isCompleteForChild(c)){l=e.serverCache.getNode();const m=fG(r,n,s.getNode(),l);p=null!=m?s.getNode().getImmediateChild(c).updateChild(h,m):s.getNode().getImmediateChild(c)}else p=IM(r,c,e.serverCache);a=null!=p?t.filter.updateChild(s.getNode(),c,p,h,i,o):s.getNode()}}return Ey(e,a,s.isFullyInitialized()||En(n),t.filter.filtersNodes())}}function ZC(t,e,n,r,i,o,s,a){const l=e.serverCache;let c;const h=s?t.filter:t.filter.getIndexedFilter();if(En(n))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const _=l.getNode().updateChild(n,r);c=h.updateFullNode(l.getNode(),_,null)}else{const _=In(n);if(!l.isCompleteForPath(n)&&vu(n)>1)return e;const w=hr(n),S=l.getNode().getImmediateChild(_).updateChild(w,r);c=".priority"===_?h.updatePriority(l.getNode(),S):h.updateChild(l.getNode(),_,S,w,mG,null)}const p=aG(e,c,l.isFullyInitialized()||En(n),h.filtersNodes());return _G(t,p,n,i,new EM(i,p,o),a)}function wM(t,e,n,r,i,o,s){const a=e.eventCache;let l,c;const h=new EM(i,e,o);if(En(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,s),l=Ey(e,c,!0,t.filter.filtersNodes());else{const p=In(n);if(".priority"===p)c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Ey(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=hr(n),_=a.getNode().getImmediateChild(p);let w;if(En(m))w=r;else{const T=h.getCompleteChild(p);w=null!=T?".priority"===Jx(m)&&T.getChild(q6(m)).isEmpty()?T:T.updateChild(m,r):hn.EMPTY_NODE}l=_.equals(w)?e:Ey(e,t.filter.updateChild(a.getNode(),p,w,m,h,s),a.isFullyInitialized(),t.filter.filtersNodes())}}return l}function vG(t,e){return t.eventCache.isCompleteForChild(e)}function yG(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function CM(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=En(n)?r:new wr(null).setTree(n,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((p,m)=>{if(h.hasChild(p)){const w=yG(0,e.serverCache.getNode().getImmediateChild(p),m);l=ZC(t,l,new Jn(p),w,i,o,s,a)}}),c.children.inorderTraversal((p,m)=>{const _=!e.serverCache.isCompleteForChild(p)&&null===m.value;if(!h.hasChild(p)&&!_){const T=yG(0,e.serverCache.getNode().getImmediateChild(p),m);l=ZC(t,l,new Jn(p),T,i,o,s,a)}}),l}class Q_e{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new aM(r.getIndex()),o=function c_e(t){return t.loadsAllData()?new aM(t.getIndex()):t.hasLimit()?new l_e(t):new vy(t)}(r);this.processor_=function U_e(t){return{filter:t}}(o);const s=n.serverCache,a=n.eventCache,l=i.updateFullNode(hn.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(hn.EMPTY_NODE,a.getNode(),null),h=new yu(l,s.isFullyInitialized(),i.filtersNodes()),p=new yu(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=qC(p,h),this.eventGenerator_=new I_e(this.query_)}get query(){return this.query_}}function Z_e(t,e){const n=Jd(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!En(e)&&!n.getImmediateChild(In(e)).isEmpty())?n.getChild(e):null}function IG(t){return 0===t.eventRegistrations_.length}function EG(t,e,n){const r=[];if(n){(0,A.vA)(null==e,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){const s=t.eventRegistrations_[o];if(s.matches(e)){if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}else i.push(s)}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function wG(t,e,n,r){e.type===ml.MERGE&&null!==e.source.queryId&&((0,A.vA)(Jd(t.viewCache_),"We should always have a full cache before handling merges"),(0,A.vA)(KC(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,o=function H_e(t,e,n,r,i){const o=new B_e;let s,a;if(n.type===ml.OVERWRITE){const c=n;c.source.fromUser?s=wM(t,e,c.path,c.snap,r,i,o):((0,A.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!En(c.path),s=ZC(t,e,c.path,c.snap,r,i,a,o))}else if(n.type===ml.MERGE){const c=n;c.source.fromUser?s=function G_e(t,e,n,r,i,o,s){let a=e;return r.foreach((l,c)=>{const h=Fr(n,l);vG(e,In(h))&&(a=wM(t,a,h,c,i,o,s))}),r.foreach((l,c)=>{const h=Fr(n,l);vG(e,In(h))||(a=wM(t,a,h,c,i,o,s))}),a}(t,e,c.path,c.children,r,i,o):((0,A.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),s=CM(t,e,c.path,c.children,r,i,a,o))}else if(n.type===ml.ACK_USER_WRITE){const c=n;s=c.revert?function K_e(t,e,n,r,i,o){let s;if(null!=XC(r,n))return e;{const a=new EM(r,e,i),l=e.eventCache.getNode();let c;if(En(n)||".priority"===In(n)){let h;if(e.serverCache.isFullyInitialized())h=YC(r,Jd(e));else{const p=e.serverCache.getNode();(0,A.vA)(p instanceof hn,"serverChildren would be complete if leaf node"),h=yM(r,p)}c=t.filter.updateFullNode(l,h,o)}else{const h=In(n);let p=IM(r,h,e.serverCache);null==p&&e.serverCache.isCompleteForChild(h)&&(p=l.getImmediateChild(h)),c=null!=p?t.filter.updateChild(l,h,p,hr(n),a,o):e.eventCache.getNode().hasChild(h)?t.filter.updateChild(l,h,hn.EMPTY_NODE,hr(n),a,o):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=YC(r,Jd(e)),s.isLeafNode()&&(c=t.filter.updateFullNode(c,s,o)))}return s=e.serverCache.isFullyInitialized()||null!=XC(r,Hn()),Ey(e,c,s,t.filter.filtersNodes())}}(t,e,c.path,r,i,o):function W_e(t,e,n,r,i,o,s){if(null!=XC(i,n))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(En(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return ZC(t,e,n,l.getNode().getChild(n),i,o,a,s);if(En(n)){let c=new wr(null);return l.getNode().forEachChild(gl,(h,p)=>{c=c.set(new Jn(h),p)}),CM(t,e,n,c,i,o,a,s)}return e}{let c=new wr(null);return r.foreach((h,p)=>{const m=Fr(n,h);l.isCompleteForPath(m)&&(c=c.set(h,l.getNode().getChild(m)))}),CM(t,e,n,c,i,o,a,s)}}(t,e,c.path,c.affectedTree,r,i,o)}else{if(n.type!==ml.LISTEN_COMPLETE)throw(0,A.Hk)("Unknown operation type: "+n.type);s=function q_e(t,e,n,r,i){const o=e.serverCache;return _G(t,aG(e,o.getNode(),o.isFullyInitialized()||En(n),o.isFiltered()),n,r,mG,i)}(t,e,n.path,r,o)}const l=o.getChanges();return function z_e(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=KC(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(rG(KC(e)))}}(e,s,l),{viewCache:s,changes:l}}(t.processor_,i,e,n,r);return function j_e(t,e){(0,A.vA)(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),(0,A.vA)(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,o.viewCache),(0,A.vA)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,CG(t,o.changes,o.viewCache.eventCache.getNode(),null)}function CG(t,e,n,r){return function E_e(t,e,n,r){const i=[],o=[];return e.forEach(s=>{"child_changed"===s.type&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function a_e(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(s.childName,s.snapshotNode))}),Iy(t,i,"child_removed",e,r,n),Iy(t,i,"child_added",e,r,n),Iy(t,i,"child_moved",o,r,n),Iy(t,i,"child_changed",e,r,n),Iy(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}let JC,tb;class bG{constructor(){this.views=new Map}}function bM(t,e,n,r){const i=e.source.queryId;if(null!==i){const o=t.views.get(i);return(0,A.vA)(null!=o,"SyncTree gave us an op for an invalid query."),wG(o,e,n,r)}{let o=[];for(const s of t.views.values())o=o.concat(wG(s,e,n,r));return o}}function TG(t,e,n,r,i){const s=t.views.get(e._queryIdentifier);if(!s){let a=YC(n,i?r:null),l=!1;a?l=!0:r instanceof hn?(a=yM(n,r),l=!1):(a=hn.EMPTY_NODE,l=!1);const c=qC(new yu(a,l,!1),new yu(r,i,!1));return new Q_e(e,c)}return s}function AG(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Eu(t,e){let n=null;for(const r of t.views.values())n=n||Z_e(r,e);return n}function DG(t,e){return e._queryParams.loadsAllData()?eb(t):t.views.get(e._queryIdentifier)}function SG(t,e){return null!=DG(t,e)}function wu(t){return null!=eb(t)}function eb(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let lve=1;class RG{constructor(e){this.listenProvider_=e,this.syncPointTree_=new wr(null),this.pendingWriteTree_=function L_e(){return{visibleWrites:xa.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function TM(t,e,n,r,i){return function T_e(t,e,n,r,i){(0,A.vA)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=wy(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?gg(t,new Zd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Cu(t,e,n=!1){const r=function D_e(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function S_e(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);(0,A.vA)(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){const a=t.allWrites[s];a.visible&&(s>=n&&R_e(a,r.path)?i=!1:Zs(r.path,a.path)&&(o=!0)),s--}return!!i&&(o?(function P_e(t){t.visibleWrites=dG(t.allWrites,x_e,Hn()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=lG(t.visibleWrites,r.path):zi(r.children,l=>{t.visibleWrites=lG(t.visibleWrites,Fr(r.path,l))}),!0))}(t.pendingWriteTree_,e)){let o=new wr(null);return null!=r.snap?o=o.set(Hn(),!0):zi(r.children,s=>{o=o.set(new Jn(s),!0)}),gg(t,new WC(r.path,o,n))}return[]}function Cy(t,e,n){return gg(t,new Zd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function nb(t,e,n,r,i=!1){const o=e._path,s=t.syncPointTree_.get(o);let a=[];if(s&&("default"===e._queryIdentifier||SG(s,e))){const l=function ove(t,e,n,r){const i=e._queryIdentifier,o=[];let s=[];const a=wu(t);if("default"===i)for(const[l,c]of t.views.entries())s=s.concat(EG(c,n,r)),IG(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const l=t.views.get(i);l&&(s=s.concat(EG(l,n,r)),IG(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!wu(t)&&o.push(new(function nve(){return(0,A.vA)(JC,"Reference.ts has not been loaded"),JC}())(e._repo,e._path)),{removed:o,events:s}}(s,e,n,r);(function rve(t){return 0===t.views.size})(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!i){const h=-1!==c.findIndex(m=>m._queryParams.loadsAllData()),p=t.syncPointTree_.findOnPath(o,(m,_)=>wu(_));if(h&&!p){const m=t.syncPointTree_.subtree(o);if(!m.isEmpty()){const _=function gve(t){return t.fold((e,n,r)=>{if(n&&wu(n))return[eb(n)];{let i=[];return n&&(i=AG(n)),zi(r,(o,s)=>{i=i.concat(s)}),i}})}(m);for(let w=0;w<_.length;++w){const T=_[w],S=T.query,U=NG(t,T);t.listenProvider_.startListening(Ty(S),by(t,S),U.hashFn,U.onComplete)}}}!p&&c.length>0&&!r&&(h?t.listenProvider_.stopListening(Ty(e),null):c.forEach(m=>{const _=t.queryToTagMap.get(ib(m));t.listenProvider_.stopListening(Ty(m),_)}))}!function mve(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=ib(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,c)}return a}function PG(t,e,n,r){const i=DM(t,r);if(null!=i){const o=SM(i),s=o.path,a=o.queryId,l=Vo(s,e);return RM(t,s,new Zd(pM(a),l,n))}return[]}function AM(t,e,n,r=!1){const i=e._path;let o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(m,_)=>{const w=Vo(m,i);o=o||Eu(_,w),s=s||wu(_)});let l,a=t.syncPointTree_.get(i);a?(s=s||wu(a),o=o||Eu(a,Hn())):(a=new bG,t.syncPointTree_=t.syncPointTree_.set(i,a)),null!=o?l=!0:(l=!1,o=hn.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((_,w)=>{const T=Eu(w,Hn());T&&(o=o.updateImmediateChild(_,T))}));const c=SG(a,e);if(!c&&!e._queryParams.loadsAllData()){const m=ib(e);(0,A.vA)(!t.queryToTagMap.has(m),"View does not exist, but we have a tag");const _=function _ve(){return lve++}();t.queryToTagMap.set(m,_),t.tagToQueryMap.set(_,m)}let p=function ive(t,e,n,r,i,o){const s=TG(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function J_e(t,e){t.eventRegistrations_.push(e)}(s,n),function eve(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Er,(o,s)=>{r.push(dg(o,s))}),n.isFullyInitialized()&&r.push(rG(n.getNode())),CG(t,r,n.getNode(),e)}(s,n)}(a,e,n,QC(t.pendingWriteTree_,i),o,l);if(!c&&!s&&!r){const m=DG(a,e);p=p.concat(function vve(t,e,n){const r=e._path,i=by(t,e),o=NG(t,n),s=t.listenProvider_.startListening(Ty(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)(0,A.vA)(!wu(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,h,p)=>{if(!En(c)&&h&&wu(h))return[eb(h).query];{let m=[];return h&&(m=m.concat(AG(h).map(_=>_.query))),zi(p,(_,w)=>{m=m.concat(w)}),m}});for(let c=0;c<l.length;++c){const h=l[c];t.listenProvider_.stopListening(Ty(h),by(t,h))}}return s}(t,e,m))}return p}function rb(t,e,n){const i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{const c=Eu(a,Vo(s,e));if(c)return c});return hG(i,e,o,n,!0)}function gg(t,e){return xG(e,t.syncPointTree_,null,QC(t.pendingWriteTree_,Hn()))}function xG(t,e,n,r){if(En(t.path))return MG(t,e,n,r);{const i=e.get(Hn());null==n&&null!=i&&(n=Eu(i,Hn()));let o=[];const s=In(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){const c=n?n.getImmediateChild(s):null,h=pG(r,s);o=o.concat(xG(a,l,c,h))}return i&&(o=o.concat(bM(i,t,r,n))),o}}function MG(t,e,n,r){const i=e.get(Hn());null==n&&null!=i&&(n=Eu(i,Hn()));let o=[];return e.children.inorderTraversal((s,a)=>{const l=n?n.getImmediateChild(s):null,c=pG(r,s),h=t.operationForChild(s);h&&(o=o.concat(MG(h,a,l,c)))}),i&&(o=o.concat(bM(i,t,r,n))),o}function NG(t,e){const n=e.query,r=by(t,n);return{hashFn:()=>(function Y_e(t){return t.viewCache_.serverCache.getNode()}(e)||hn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function hve(t,e,n){const r=DM(t,n);if(r){const i=SM(r),o=i.path,s=i.queryId,a=Vo(o,e);return RM(t,o,new yy(pM(s),a))}return[]}(t,n._path,r):function dve(t,e){return gg(t,new yy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);{const o=function ume(t,e){let n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(i,n);return nb(t,n,null,o)}}}}function by(t,e){const n=ib(e);return t.queryToTagMap.get(n)}function ib(t){return t._path.toString()+"$"+t._queryIdentifier}function DM(t,e){return t.tagToQueryMap.get(e)}function SM(t){const e=t.indexOf("$");return(0,A.vA)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Jn(t.substr(0,e))}}function RM(t,e,n){const r=t.syncPointTree_.get(e);return(0,A.vA)(r,"Missing sync point for query tag that we're tracking"),bM(r,n,QC(t.pendingWriteTree_,e),null)}function Ty(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(function ave(){return(0,A.vA)(tb,"Reference.ts has not been loaded"),tb}())(t._repo,t._path):t}class PM{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new PM(n)}node(){return this.node_}}class xM{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Fr(this.path_,e);return new xM(this.syncTree_,n)}node(){return rb(this.syncTree_,this.path_)}}const yve=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},kG=function(t,e,n){return t&&"object"==typeof t?((0,A.vA)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Ive(t[".sv"],e,n):"object"==typeof t[".sv"]?Eve(t[".sv"],e):void(0,A.vA)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Ive=function(t,e,n){if("timestamp"===t)return n.timestamp;(0,A.vA)(!1,"Unexpected server value: "+t)},Eve=function(t,e,n){t.hasOwnProperty("increment")||(0,A.vA)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&(0,A.vA)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,A.vA)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},OG=function(t,e,n,r){return NM(e,new xM(n,t),r)},MM=function(t,e,n){return NM(t,new PM(e),n)};function NM(t,e,n){const r=t.getPriority().val(),i=kG(r,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const s=t,a=kG(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new cg(a,zr(i)):t}{const s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new cg(i))),s.forEachChild(Er,(a,l)=>{const c=NM(l,e.getImmediateChild(a),n);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}class kM{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function ob(t,e){let n=e instanceof Jn?e:new Jn(e),r=t,i=In(n);for(;null!==i;){const o=(0,A.yw)(r.node.children,i)||{children:{},childCount:0};r=new kM(i,r,o),n=hr(n),i=In(n)}return r}function th(t){return t.node.value}function OM(t,e){t.node.value=e,FM(t)}function FG(t){return t.node.childCount>0}function sb(t,e){zi(t.node.children,(n,r)=>{e(new kM(n,t,r))})}function LG(t,e,n,r){n&&!r&&e(t),sb(t,i=>{LG(i,e,!0,r)}),n&&r&&e(t)}function Ay(t){return new Jn(null===t.parent?t.name:Ay(t.parent)+"/"+t.name)}function FM(t){null!==t.parent&&function bve(t,e,n){const r=function wve(t){return void 0===th(t)&&!FG(t)}(n),i=(0,A.gR)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,FM(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,FM(t))}(t.parent,t.name,t)}const Tve=/[\[\].#$\/\u0000-\u001F\u007F]/,Ave=/[\[\].#$\u0000-\u001F\u007F]/,LM=10485760,ab=function(t){return"string"==typeof t&&0!==t.length&&!Tve.test(t)},VG=function(t){return"string"==typeof t&&0!==t.length&&!Ave.test(t)},Dy=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!kC(t)||t&&"object"==typeof t&&(0,A.gR)(t,".sv")},_l=function(t,e,n,r){r&&void 0===e||Sy((0,A.dI)(t,"value"),e,n)},Sy=function(t,e,n){const r=n instanceof Jn?new Hme(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Yd(r));if("function"==typeof e)throw new Error(t+"contains a function "+Yd(r)+" with contents = "+e.toString());if(kC(e))throw new Error(t+"contains "+e.toString()+" "+Yd(r));if("string"==typeof e&&e.length>LM/3&&(0,A.OE)(e)>LM)throw new Error(t+"contains a string greater than "+LM+" utf8 bytes "+Yd(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(zi(e,(s,a)=>{if(".value"===s)i=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!ab(s)))throw new Error(t+" contains an invalid key ("+s+") "+Yd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function zme(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,A.OE)(e),K6(t)})(r,s),Sy(t,a,r),function Gme(t){const e=t.parts_.pop();t.byteLength_-=(0,A.OE)(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&o)throw new Error(t+' contains ".value" child '+Yd(r)+" in addition to actual children.")}},BG=function(t,e,n,r){if(r&&void 0===e)return;const i=(0,A.dI)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];zi(e,(s,a)=>{const l=new Jn(s);if(Sy(i,a,Fr(n,l)),".priority"===Jx(l)&&!Dy(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(l)}),function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const o=hy(r);for(let s=0;s<o.length;s++)if((".priority"!==o[s]||s!==o.length-1)&&!ab(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(jme);let i=null;for(n=0;n<e.length;n++){if(r=e[n],null!==i&&Zs(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},VM=function(t,e,n){if(!n||void 0!==e){if(kC(e))throw new Error((0,A.dI)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Dy(e))throw new Error((0,A.dI)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ry=function(t,e,n,r){if(!(r&&void 0===n||ab(n)))throw new Error((0,A.dI)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Py=function(t,e,n,r){if(!(r&&void 0===n||VG(n)))throw new Error((0,A.dI)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Rve=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Py(t,e,n,r)},Js=function(t,e){if(".info"===In(e))throw new Error(t+" failed = Can't modify data under /.info/")},$G=function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ab(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),VG(t)}(n))throw new Error((0,A.dI)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Pve{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function lb(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==n&&!eM(o,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function UG(t,e,n){lb(t,n),jG(t,r=>eM(r,e))}function Ds(t,e,n){lb(t,n),jG(t,r=>Zs(r,e)||Zs(e,r))}function jG(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(xve(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function xve(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();Kd&&Hi("event: "+n.toString()),ag(r)}}}const HG="repo_interrupt",Mve=25;class Nve{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pve,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=GC(),this.transactionQueueTree_=new kM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function zG(t){const n=t.infoData_.getNode(new Jn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function xy(t){return yve({timestamp:zG(t)})}function GG(t,e,n,r,i){t.dataUpdateCount++;const o=new Jn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){const l=(0,A.kH)(n,c=>zr(c));s=function fve(t,e,n,r){const i=DM(t,r);if(i){const o=SM(i),s=o.path,a=o.queryId,l=Vo(s,e),c=wr.fromObject(n);return RM(t,s,new fg(pM(a),l,c))}return[]}(t.serverSyncTree_,o,l,i)}else{const l=zr(n);s=PG(t.serverSyncTree_,o,l,i)}else if(r){const l=(0,A.kH)(n,c=>zr(c));s=function uve(t,e,n){const r=wr.fromObject(n);return gg(t,new fg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,o,l)}else{const l=zr(n);s=Cy(t.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=_g(t,o)),Ds(t.eventQueue_,a,s)}function WG(t,e){BM(t,"connected",e),!1===e&&function Vve(t){mg(t,"onDisconnectEvents");const e=xy(t),n=GC();dM(t.onDisconnect_,Hn(),(i,o)=>{const s=OG(i,o,t.serverSyncTree_,e);hg(n,i,s)});let r=[];dM(n,Hn(),(i,o)=>{r=r.concat(Cy(t.serverSyncTree_,i,o));const s=HM(t,i);_g(t,s)}),t.onDisconnect_=GC(),Ds(t.eventQueue_,Hn(),r)}(t)}function BM(t,e,n){const r=new Jn("/.info/"+e),i=zr(n);t.infoData_.updateSnapshot(r,i);const o=Cy(t.infoSyncTree_,r,i);Ds(t.eventQueue_,r,o)}function cb(t){return t.nextWriteId_++}function $M(t,e,n,r,i){mg(t,"set",{path:e.toString(),value:n,priority:r});const o=xy(t),s=zr(n,r),a=rb(t.serverSyncTree_,e),l=MM(s,a,o),c=cb(t),h=TM(t.serverSyncTree_,e,l,c,!0);lb(t.eventQueue_,h),t.server_.put(e.toString(),s.val(!0),(m,_)=>{const w="ok"===m;w||vo("set at "+e+" failed: "+m);const T=Cu(t.serverSyncTree_,c,!w);Ds(t.eventQueue_,e,T),bu(0,i,m,_)});const p=HM(t,e);_g(t,p),Ds(t.eventQueue_,p,[])}function Bve(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&uM(t.onDisconnect_,e),bu(0,n,r,i)})}function qG(t,e,n,r){const i=zr(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(o,s)=>{"ok"===o&&hg(t.onDisconnect_,e,i),bu(0,r,o,s)})}function UM(t,e,n){let r;r=".info"===In(e._path)?nb(t.infoSyncTree_,e,n):nb(t.serverSyncTree_,e,n),UG(t.eventQueue_,e._path,r)}function KG(t){t.persistentConnection_&&t.persistentConnection_.interrupt(HG)}function mg(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Hi(n,...e)}function bu(t,e,n,r){e&&ag(()=>{if("ok"===n)e(null);else{const i=(n||"error").toUpperCase();let o=i;r&&(o+=": "+r);const s=new Error(o);s.code=i,e(s)}})}function jM(t,e,n){return rb(t.serverSyncTree_,e,n)||hn.EMPTY_NODE}function ub(t,e=t.transactionQueueTree_){if(e||db(t,e),th(e)){const n=YG(t,e);(0,A.vA)(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function Gve(t,e,n){const r=n.map(c=>c.currentWriteId),i=jM(t,e,r);let o=i;const s=i.hash();for(let c=0;c<n.length;c++){const h=n[c];(0,A.vA)(0===h.status,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const p=Vo(e,h.path);o=o.updateChild(p,h.currentOutputSnapshotRaw)}const a=o.val(!0),l=e;t.server_.put(l.toString(),a,c=>{mg(t,"transaction put response",{path:l.toString(),status:c});let h=[];if("ok"===c){const p=[];for(let m=0;m<n.length;m++)n[m].status=2,h=h.concat(Cu(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&p.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();db(t,ob(t.transactionQueueTree_,e)),ub(t,t.transactionQueueTree_),Ds(t.eventQueue_,e,h);for(let m=0;m<p.length;m++)ag(p[m])}else{if("datastale"===c)for(let p=0;p<n.length;p++)n[p].status=3===n[p].status?4:0;else{vo("transaction at "+l.toString()+" failed: "+c);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=c}_g(t,e)}},s)}(t,Ay(e),n)}else FG(e)&&sb(e,n=>{ub(t,n)})}function _g(t,e){const n=QG(t,e),r=Ay(n);return function Wve(t,e,n){if(0===e.length)return;const r=[];let i=[];const s=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Vo(n,l.path);let p,h=!1;if((0,A.vA)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,p=l.abortReason,i=i.concat(Cu(t.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=Mve)h=!0,p="maxretry",i=i.concat(Cu(t.serverSyncTree_,l.currentWriteId,!0));else{const m=jM(t,l.path,s);l.currentInputSnapshot=m;const _=e[a].update(m.val());if(void 0!==_){Sy("transaction failed: Data returned ",_,l.path);let w=zr(_);"object"==typeof _&&null!=_&&(0,A.gR)(_,".priority")||(w=w.updatePriority(m.getPriority()));const S=l.currentWriteId,U=xy(t),H=MM(w,m,U);l.currentOutputSnapshotRaw=w,l.currentOutputSnapshotResolved=H,l.currentWriteId=cb(t),s.splice(s.indexOf(S),1),i=i.concat(TM(t.serverSyncTree_,l.path,H,l.currentWriteId,l.applyLocally)),i=i.concat(Cu(t.serverSyncTree_,S,!0))}else h=!0,p="nodata",i=i.concat(Cu(t.serverSyncTree_,l.currentWriteId,!0))}Ds(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===p?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(p),!1,null)))}db(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ag(r[a]);ub(t,t.transactionQueueTree_)}(t,YG(t,n),r),r}function QG(t,e){let n,r=t.transactionQueueTree_;for(n=In(e);null!==n&&void 0===th(r);)r=ob(r,n),n=In(e=hr(e));return r}function YG(t,e){const n=[];return XG(t,e,n),n.sort((r,i)=>r.order-i.order),n}function XG(t,e,n){const r=th(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);sb(e,i=>{XG(t,i,n)})}function db(t,e){const n=th(e);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,OM(e,n.length>0?n:void 0)}sb(e,r=>{db(t,r)})}function HM(t,e){const n=Ay(QG(t,e)),r=ob(t.transactionQueueTree_,e);return function Cve(t,e,n){let r=n?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{zM(t,i)}),zM(t,r),LG(r,i=>{zM(t,i)}),n}function zM(t,e){const n=th(e);if(n){const r=[];let i=[],o=-1;for(let s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?((0,A.vA)(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):((0,A.vA)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Cu(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?OM(e,void 0):n.length=o+1,Ds(t.eventQueue_,Ay(e),i);for(let s=0;s<r.length;s++)ag(r[s])}}const GM=function(t,e){const n=Qve(t),r=n.namespace;return"firebase.com"===n.domain&&pl(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&pl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&vo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new qx(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,e,"",r!==n.subdomain),path:new Jn(n.pathString)}},Qve=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",l=443;if("string"==typeof t){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");-1===h&&(h=t.length);let p=t.indexOf("?");-1===p&&(p=t.length),e=t.substring(0,Math.min(h,p)),h<p&&(i=function qve(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(t.substring(h,p)));const m=function Kve(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):vo(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,p)));c=e.indexOf(":"),c>=0?(s="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const _=e.slice(0,c);if("localhost"===_.toLowerCase())n="localhost";else if(_.split(".").length<=2)n=_;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),o=r}"ns"in m&&(o=m.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},ZG="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Yve=function(){let t=0;const e=[];return function(n){const r=n===t;let i;t=n;const o=new Array(8);for(i=7;i>=0;i--)o[i]=ZG.charAt(n%64),n=Math.floor(n/64);(0,A.vA)(0===n,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)s+=ZG.charAt(e[i]);return(0,A.vA)(20===s.length,"nextPushId: Length should be 20."),s}}();class JG{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,A.As)(this.snapshot.exportVal())}}class eW{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class WM{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return(0,A.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class tW{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new A.cY;return Bve(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Js("OnDisconnect.remove",this._path);const e=new A.cY;return qG(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Js("OnDisconnect.set",this._path),_l("OnDisconnect.set",e,this._path,!1);const n=new A.cY;return qG(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Js("OnDisconnect.setWithPriority",this._path),_l("OnDisconnect.setWithPriority",e,this._path,!1),VM("OnDisconnect.setWithPriority",n,!1);const r=new A.cY;return function $ve(t,e,n,r,i){const o=zr(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(s,a)=>{"ok"===s&&hg(t.onDisconnect_,e,o),bu(0,i,s,a)})}(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Js("OnDisconnect.update",this._path),BG("OnDisconnect.update",e,this._path,!1);const n=new A.cY;return function Uve(t,e,n,r){if((0,A.Im)(n))return Hi("onDisconnect().update() called with empty data.  Don't do anything."),void bu(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(i,o)=>{"ok"===i&&zi(n,(s,a)=>{const l=zr(a);hg(t.onDisconnect_,Fr(e,s),l)}),bu(0,r,i,o)})}(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}class ns{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return En(this._path)?null:Jx(this._path)}get ref(){return new ea(this._repo,this._path)}get _queryIdentifier(){const e=oG(this._queryParams),n=Gx(e);return"{}"===n?"default":n}get _queryObject(){return oG(this._queryParams)}isEqual(e){if(!((e=(0,A.Ku)(e))instanceof ns))return!1;const n=this._repo===e._repo,r=eM(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ume(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}function hb(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Tu(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===gl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==mu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==rc)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Er){if(null!=e&&!Dy(e)||null!=n&&!Dy(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,A.vA)(t.getIndex()instanceof oM||t.getIndex()===sM,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function fb(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ea extends ns{constructor(e,n){super(e,n,new jC,!1)}get parent(){const e=q6(this._path);return null===e?null:new ea(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class nh{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Jn(e),r=rh(this.ref,e);return new nh(this._node.getChild(n),r,Er)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new nh(i,rh(this.ref,r),Er)))}hasChild(e){const n=new Jn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function nW(t,e){return(t=(0,A.Ku)(t))._checkNotDeleted("ref"),void 0!==e?rh(t._root,e):t._root}function rW(t,e){(t=(0,A.Ku)(t))._checkNotDeleted("refFromURL");const n=GM(e,t._repo.repoInfo_.nodeAdmin);$G("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&pl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),nW(t,n.path.toString())}function rh(t,e){return null===In((t=(0,A.Ku)(t))._path)?Rve("child","path",e,!1):Py("child","path",e,!1),new ea(t._repo,Fr(t._path,e))}function qM(t,e){t=(0,A.Ku)(t),Js("set",t._path),_l("set",e,t._path,!1);const n=new A.cY;return $M(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function tye(t,e){BG("update",e,t._path,!1);const n=new A.cY;return function Lve(t,e,n,r){mg(t,"update",{path:e.toString(),value:n});let i=!0;const o=xy(t),s={};if(zi(n,(a,l)=>{i=!1,s[a]=OG(Fr(e,a),zr(l),t.serverSyncTree_,o)}),i)Hi("update() called with empty data.  Don't do anything."),bu(0,r,"ok",void 0);else{const a=cb(t),l=function cve(t,e,n,r){!function A_e(t,e,n,r){(0,A.vA)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=mM(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);const i=wr.fromObject(n);return gg(t,new fg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,s,a);lb(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,h)=>{const p="ok"===c;p||vo("update at "+e+" failed: "+c);const m=Cu(t.serverSyncTree_,a,!p),_=m.length>0?_g(t,e):e;Ds(t.eventQueue_,_,m),bu(0,r,c,h)}),zi(n,c=>{const h=HM(t,Fr(e,c));_g(t,h)}),Ds(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function nye(t){t=(0,A.Ku)(t);const e=new WM(()=>{}),n=new My(e);return function Fve(t,e,n){const r=function pve(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,h)=>{const p=Vo(c,n);r=r||Eu(h,p)});let i=t.syncPointTree_.get(n);i?r=r||Eu(i,Hn()):(i=new bG,t.syncPointTree_=t.syncPointTree_.set(n,i));const o=null!=r,s=o?new yu(r,!0,!1):null;return function X_e(t){return KC(t.viewCache_)}(TG(i,e,QC(t.pendingWriteTree_,e._path),o?s.getNode():hn.EMPTY_NODE,o))}(t.serverSyncTree_,e);return null!=r?Promise.resolve(r):t.server_.get(e).then(i=>{const o=zr(i).withIndex(e._queryParams.getIndex());let s;if(AM(t.serverSyncTree_,e,n,!0),e._queryParams.loadsAllData())s=Cy(t.serverSyncTree_,e._path,o);else{const a=by(t.serverSyncTree_,e);s=PG(t.serverSyncTree_,e._path,o,a)}return Ds(t.eventQueue_,e._path,s),nb(t.serverSyncTree_,e,n,null,!0),o},i=>(mg(t,"get for query "+(0,A.As)(e)+" failed: "+i),Promise.reject(new Error(i))))}(t._repo,t,n).then(r=>new nh(r,new ea(t._repo,t._path),t._queryParams.getIndex()))}class My{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,n){const r=n._queryParams.getIndex();return new JG("value",this,new nh(e.snapshotNode,new ea(n._repo,n._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new eW(this,e,n):null}matches(e){return e instanceof My&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class pb{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n="children_added"===e?"child_added":e;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new eW(this,e,n):null}createEvent(e,n){(0,A.vA)(null!=e.childName,"Child events should have a childName.");const r=rh(new ea(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new JG(e.type,this,new nh(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof pb&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ny(t,e,n,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const l=n,c=(h,p)=>{UM(t._repo,t,a),l(h,p)};c.userCallback=n.userCallback,c.context=n.context,n=c}const s=new WM(n,o||void 0),a="value"===e?new My(s):new pb(e,s);return function jve(t,e,n){let r;r=".info"===In(e._path)?AM(t.infoSyncTree_,e,n):AM(t.serverSyncTree_,e,n),UG(t.eventQueue_,e._path,r)}(t._repo,t,a),()=>UM(t._repo,t,a)}function KM(t,e,n,r){return Ny(t,"value",e,n,r)}function iW(t,e,n,r){return Ny(t,"child_added",e,n,r)}function oW(t,e,n,r){return Ny(t,"child_changed",e,n,r)}function sW(t,e,n,r){return Ny(t,"child_moved",e,n,r)}function aW(t,e,n,r){return Ny(t,"child_removed",e,n,r)}function lW(t,e,n){let r=null;const i=n?new WM(n):null;"value"===e?r=new My(i):e&&(r=new pb(e,i)),UM(t._repo,t,r)}class Ma{}class cW extends Ma{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){_l("endAt",this._value,e._path,!0);const n=cM(e._queryParams,this._value,this._key);if(fb(n),Tu(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ns(e._repo,e._path,n,e._orderByCalled)}}class iye extends Ma{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){_l("endBefore",this._value,e._path,!1);const n=function f_e(t,e,n){let r;return r=cM(t,e,t.index_===gl||n?n:mu),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(fb(n),Tu(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ns(e._repo,e._path,n,e._orderByCalled)}}class uW extends Ma{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){_l("startAt",this._value,e._path,!0);const n=lM(e._queryParams,this._value,this._key);if(fb(n),Tu(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ns(e._repo,e._path,n,e._orderByCalled)}}class aye extends Ma{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){_l("startAfter",this._value,e._path,!1);const n=function h_e(t,e,n){let r;return r=lM(t,e,t.index_===gl||n?n:rc),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(fb(n),Tu(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ns(e._repo,e._path,n,e._orderByCalled)}}class cye extends Ma{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ns(e._repo,e._path,function u_e(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class dye extends Ma{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ns(e._repo,e._path,function d_e(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class fye extends Ma{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){hb(e,"orderByChild");const n=new Jn(this._path);if(En(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new oM(n),i=HC(e._queryParams,r);return Tu(i),new ns(e._repo,e._path,i,!0)}}class gye extends Ma{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){hb(e,"orderByKey");const n=HC(e._queryParams,gl);return Tu(n),new ns(e._repo,e._path,n,!0)}}class _ye extends Ma{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){hb(e,"orderByPriority");const n=HC(e._queryParams,Er);return Tu(n),new ns(e._repo,e._path,n,!0)}}class yye extends Ma{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){hb(e,"orderByValue");const n=HC(e._queryParams,sM);return Tu(n),new ns(e._repo,e._path,n,!0)}}class Eye extends Ma{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(_l("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new cW(this._value,this._key)._apply(new uW(this._value,this._key)._apply(e))}}function Na(t,...e){let n=(0,A.Ku)(t);for(const r of e)n=r._apply(n);return n}(function tve(t){(0,A.vA)(!JC,"__referenceConstructor has already been defined"),JC=t})(ea),function sve(t){(0,A.vA)(!tb,"__referenceConstructor has already been defined"),tb=t}(ea);const QM={};function YM(t,e,n,r,i){let o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||pl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hi("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l,c,s=GM(o,i),a=s.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=GM(o,i),a=s.repoInfo):l=!s.repoInfo.secure;const h=i&&l?new dy(dy.OWNER):new mme(t.name,t.options,e);$G("Invalid Firebase Database URL",s),En(s.path)||pl("Database URL must point to the root of a Firebase Database (not including a child path).");const p=function Aye(t,e,n,r){let i=QM[e.name];i||(i={},QM[e.name]=i);let o=i[t.toURLString()];return o&&pl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Nve(t,false,n,r),i[t.toURLString()]=o,o}(a,t,h,new gme(t.name,n));return new Sye(p,t)}class Sye{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function kve(t,e,n){if(t.stats_=Yx(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new zC(t.repoInfo_,(r,i,o,s)=>{GG(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>WG(t,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,A.As)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Xd(t.repoInfo_,e,(r,i,o,s)=>{GG(t,r,i,o,s)},r=>{WG(t,r)},r=>{!function Ove(t,e){zi(e,(n,r)=>{BM(t,n,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function yme(t,e){const n=t.toString();return Qx[n]||(Qx[n]=e()),Qx[n]}(t.repoInfo_,()=>new y_e(t.stats_,t.server_)),t.infoData_=new p_e,t.infoSyncTree_=new RG({startListening:(r,i,o,s)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Cy(t.infoSyncTree_,r._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),BM(t,"connected",!1),t.serverSyncTree_=new RG({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,l)=>{const c=s(a,l);Ds(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ea(this._repo,Hn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Tye(t,e){const n=QM[e];(!n||n[t.key]!==t)&&pl(`Database ${e}(${t.repoInfo_}) has already been deleted.`),KG(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&pl("Cannot call "+e+" on a deleted database.")}}function hW(){O6.IS_TRANSPORT_INITIALIZED&&vo("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Rye(){hW(),_u.forceDisallow()}function Pye(){hW(),lg.forceDisallow(),_u.forceAllow()}function Nye(t,e){g6(t,e)}const Oye={".sv":"timestamp"};class Vye{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Xd.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Xd.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function kye(t){jx(Xo.SDK_VERSION),(0,Xo._registerComponent)(new Aa.uA("database",(e,{instanceIdentifier:n})=>YM(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),(0,Xo.registerVersion)(c6,"1.0.3",t),(0,Xo.registerVersion)(c6,"1.0.3","esm2017")}();const jye=new ws.Vy("@firebase/database-compat"),pW=function(t){jye.warn("FIREBASE WARNING: "+t)};class Gye{constructor(e){this._delegate=e}cancel(e){(0,A.od)("OnDisconnect.cancel",0,1,arguments.length),(0,A.oD)("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){(0,A.od)("OnDisconnect.remove",0,1,arguments.length),(0,A.oD)("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){(0,A.od)("OnDisconnect.set",1,2,arguments.length),(0,A.oD)("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){(0,A.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,A.oD)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,n){if((0,A.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,pW("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,A.oD)("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}}class Wye{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return(0,A.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Au{constructor(e,n){this._database=e,this._delegate=n}val(){return(0,A.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,A.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,A.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,A.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,A.od)("DataSnapshot.child",0,1,arguments.length),e=String(e),Py("DataSnapshot.child","path",e,!1),new Au(this._database,this._delegate.child(e))}hasChild(e){return(0,A.od)("DataSnapshot.hasChild",1,1,arguments.length),Py("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,A.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,A.od)("DataSnapshot.forEach",1,1,arguments.length),(0,A.oD)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new Au(this._database,n)))}hasChildren(){return(0,A.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,A.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,A.od)("DataSnapshot.ref",0,0,arguments.length),new Ss(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ro{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var o;(0,A.od)("Query.on",2,4,arguments.length),(0,A.oD)("Query.on","callback",n,!1);const s=ro.getCancelAndContextArgs_("Query.on",r,i),a=(c,h)=>{n.call(s.context,new Au(this.database,c),h)};a.userCallback=n,a.context=s.context;const l=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(e){case"value":return KM(this._delegate,a,l),n;case"child_added":return iW(this._delegate,a,l),n;case"child_removed":return aW(this._delegate,a,l),n;case"child_changed":return oW(this._delegate,a,l),n;case"child_moved":return sW(this._delegate,a,l),n;default:throw new Error((0,A.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if((0,A.od)("Query.off",0,3,arguments.length),function(t,e,n){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,A.dI)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,A.oD)("Query.off","callback",n,!0),(0,A.HN)("Query.off","context",r,!0),n){const i=()=>{};i.userCallback=n,i.context=r,lW(this._delegate,e,i)}else lW(this._delegate,e)}get(){return nye(this._delegate).then(e=>new Au(this.database,e))}once(e,n,r,i){(0,A.od)("Query.once",1,4,arguments.length),(0,A.oD)("Query.once","callback",n,!0);const o=ro.getCancelAndContextArgs_("Query.once",r,i),s=new A.cY,a=(c,h)=>{const p=new Au(this.database,c);n&&n.call(o.context,p,h),s.resolve(p)};a.userCallback=n,a.context=o.context;const l=c=>{o.cancel&&o.cancel.call(o.context,c),s.reject(c)};switch(e){case"value":KM(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":iW(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":aW(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":oW(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":sW(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,A.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return(0,A.od)("Query.limitToFirst",1,1,arguments.length),new ro(this.database,Na(this._delegate,function uye(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new cye(t)}(e)))}limitToLast(e){return(0,A.od)("Query.limitToLast",1,1,arguments.length),new ro(this.database,Na(this._delegate,function hye(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new dye(t)}(e)))}orderByChild(e){return(0,A.od)("Query.orderByChild",1,1,arguments.length),new ro(this.database,Na(this._delegate,function pye(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Py("orderByChild","path",t,!1),new fye(t)}(e)))}orderByKey(){return(0,A.od)("Query.orderByKey",0,0,arguments.length),new ro(this.database,Na(this._delegate,function mye(){return new gye}()))}orderByPriority(){return(0,A.od)("Query.orderByPriority",0,0,arguments.length),new ro(this.database,Na(this._delegate,function vye(){return new _ye}()))}orderByValue(){return(0,A.od)("Query.orderByValue",0,0,arguments.length),new ro(this.database,Na(this._delegate,function Iye(){return new yye}()))}startAt(e=null,n){return(0,A.od)("Query.startAt",0,2,arguments.length),new ro(this.database,Na(this._delegate,function sye(t=null,e){return Ry("startAt","key",e,!0),new uW(t,e)}(e,n)))}startAfter(e=null,n){return(0,A.od)("Query.startAfter",0,2,arguments.length),new ro(this.database,Na(this._delegate,function lye(t,e){return Ry("startAfter","key",e,!0),new aye(t,e)}(e,n)))}endAt(e=null,n){return(0,A.od)("Query.endAt",0,2,arguments.length),new ro(this.database,Na(this._delegate,function rye(t,e){return Ry("endAt","key",e,!0),new cW(t,e)}(e,n)))}endBefore(e=null,n){return(0,A.od)("Query.endBefore",0,2,arguments.length),new ro(this.database,Na(this._delegate,function oye(t,e){return Ry("endBefore","key",e,!0),new iye(t,e)}(e,n)))}equalTo(e,n){return(0,A.od)("Query.equalTo",1,2,arguments.length),new ro(this.database,Na(this._delegate,function wye(t,e){return Ry("equalTo","key",e,!0),new Eye(t,e)}(e,n)))}toString(){return(0,A.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,A.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,A.od)("Query.isEqual",1,1,arguments.length),!(e instanceof ro))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,(0,A.oD)(e,"cancel",i.cancel,!0),i.context=r,(0,A.HN)(e,"context",i.context,!0);else if(n)if("object"==typeof n&&null!==n)i.context=n;else{if("function"!=typeof n)throw new Error((0,A.dI)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=n}return i}get ref(){return new Ss(this.database,new ea(this._delegate._repo,this._delegate._path))}}class Ss extends ro{constructor(e,n){super(e,new ns(n._repo,n._path,new jC,!1)),this.database=e,this._delegate=n}getKey(){return(0,A.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,A.od)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ss(this.database,rh(this._delegate,e))}getParent(){(0,A.od)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ss(this.database,e):null}getRoot(){return(0,A.od)("Reference.root",0,0,arguments.length),new Ss(this.database,this._delegate.root)}set(e,n){(0,A.od)("Reference.set",1,2,arguments.length),(0,A.oD)("Reference.set","onComplete",n,!0);const r=qM(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if((0,A.od)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,pW("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Js("Reference.update",this._delegate._path),(0,A.oD)("Reference.update","onComplete",n,!0);const r=tye(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){(0,A.od)("Reference.setWithPriority",2,3,arguments.length),(0,A.oD)("Reference.setWithPriority","onComplete",r,!0);const i=function eye(t,e,n){if(Js("setWithPriority",t._path),_l("setWithPriority",e,t._path,!1),VM("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new A.cY;return $M(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,n);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,A.od)("Reference.remove",0,1,arguments.length),(0,A.oD)("Reference.remove","onComplete",e,!0);const n=function Zve(t){return Js("remove",t._path),qM(t,null)}(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){(0,A.od)("Reference.transaction",1,3,arguments.length),(0,A.oD)("Reference.transaction","transactionUpdate",e,!1),(0,A.oD)("Reference.transaction","onComplete",n,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error((0,A.dI)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Bye(t,e,n){var r;if(t=(0,A.Ku)(t),Js("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new A.cY,a=KM(t,()=>{});return function zve(t,e,n,r,i,o){mg(t,"transaction on "+e);const s={path:e,update:n,onComplete:r,status:null,order:h6(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=jM(t,e,void 0);s.currentInputSnapshot=a;const l=s.update(a.val());if(void 0===l)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{Sy("transaction failed: Data returned ",l,s.path),s.status=0;const c=ob(t.transactionQueueTree_,e),h=th(c)||[];let p;h.push(s),OM(c,h),"object"==typeof l&&null!==l&&(0,A.gR)(l,".priority")?(p=(0,A.yw)(l,".priority"),(0,A.vA)(Dy(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(rb(t.serverSyncTree_,e)||hn.EMPTY_NODE).getPriority().val();const m=xy(t),_=zr(l,p),w=MM(_,a,m);s.currentOutputSnapshotRaw=_,s.currentOutputSnapshotResolved=w,s.currentWriteId=cb(t);const T=TM(t.serverSyncTree_,e,w,s.currentWriteId,s.applyLocally);Ds(t.eventQueue_,e,T),ub(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(l,c,h)=>{let p=null;l?o.reject(l):(p=new nh(h,new ea(t._repo,t._path),Er),o.resolve(new Vye(c,p)))},a,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new Wye(o.committed,new Au(this.database,o.snapshot)));return n&&i.then(o=>n(null,o.committed,o.snapshot),o=>n(o,!1,null)),i}setPriority(e,n){(0,A.od)("Reference.setPriority",1,2,arguments.length),(0,A.oD)("Reference.setPriority","onComplete",n,!0);const r=function Jve(t,e){t=(0,A.Ku)(t),Js("setPriority",t._path),VM("setPriority",e,!1);const n=new A.cY;return $M(t._repo,Fr(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){(0,A.od)("Reference.push",0,2,arguments.length),(0,A.oD)("Reference.push","onComplete",n,!0);const r=function Xve(t,e){t=(0,A.Ku)(t),Js("push",t._path),_l("push",e,t._path,!0);const n=zG(t._repo),r=Yve(n),i=rh(t,r),o=rh(t,r);let s;return s=null!=e?qM(o,e).then(()=>o):Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}(this._delegate,e),i=r.then(s=>new Ss(this.database,s));n&&i.then(()=>n(null),s=>n(s));const o=new Ss(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return Js("Reference.onDisconnect",this._delegate._path),new Gye(new tW(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class ky{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Rye,forceLongPolling:Pye}}useEmulator(e,n,r={}){!function fW(t,e,n,r={}){(t=(0,A.Ku)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&pl("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new dy(dy.OWNER);else if(r.mockUserToken){const s="string"==typeof r.mockUserToken?r.mockUserToken:(0,A.Fy)(r.mockUserToken,t.app.options.projectId);o=new dy(s)}!function bye(t,e,n,r){t.repoInfo_=new qx(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}(i,e,n,o)}(this._delegate,e,n,r)}ref(e){if((0,A.od)("database.ref",0,1,arguments.length),e instanceof Ss){const n=rW(this._delegate,e.toString());return new Ss(this,n)}{const n=nW(this._delegate,e);return new Ss(this,n)}}refFromURL(e){(0,A.od)("database.refFromURL",1,1,arguments.length);const r=rW(this._delegate,e);return new Ss(this,r)}goOffline(){return(0,A.od)("database.goOffline",0,0,arguments.length),function xye(t){(t=(0,A.Ku)(t))._checkNotDeleted("goOffline"),KG(t._repo)}(this._delegate)}goOnline(){return(0,A.od)("database.goOnline",0,0,arguments.length),function Mye(t){(t=(0,A.Ku)(t))._checkNotDeleted("goOnline"),function Hve(t){t.persistentConnection_&&t.persistentConnection_.resume(HG)}(t._repo)}(this._delegate)}}ky.ServerValue={TIMESTAMP:function Fye(){return Oye}(),increment:t=>function Lye(t){return{".sv":{increment:t}}}(t)};var Kye=Object.freeze({__proto__:null,initStandalone:function qye({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:o,nodeAdmin:s=!1}){jx(n);const a=new Aa.h1("database-standalone"),l=new Aa.Kq("auth-internal",a);let c;return l.setComponent(new Aa.uA("auth-internal",()=>r,"PRIVATE")),i&&(c=new Aa.Kq("app-check-internal",a),c.setComponent(new Aa.uA("app-check-internal",()=>i,"PRIVATE"))),{instance:new ky(YM(t,l,c,e,s),t),namespace:o}}});const Qye=ky.ServerValue;!function Yye(t){t.INTERNAL.registerComponent(new Aa.uA("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new ky(i,r)},"PUBLIC").setServiceProps({Reference:Ss,Query:ro,Database:ky,DataSnapshot:Au,enableLogging:Nye,INTERNAL:Kye,ServerValue:Qye}).setMultipleInstances(!0)),t.registerVersion("@firebase/database-compat","1.0.3")}(Ci.A);let ih=(()=>{var t;class e{constructor(){}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Ke({type:t,selectors:[["app-footer"]],decls:6,vars:0,consts:[["id","under_bar"],["routerLink","/spot","name","people",2,"font-size","1.8rem"],["routerLink","/home","name","albums",2,"font-size","1.8rem"],["routerLink","/add","name","add-circle",2,"font-size","1.8rem"],["routerLink","/car-pooling","name","car",2,"font-size","1.8rem"],["routerLink","/account","name","person-circle",2,"font-size","1.8rem"]],template:function(r,i){1&r&&(x(0,"div",0),$e(1,"ion-icon",1)(2,"ion-icon",2)(3,"ion-icon",3)(4,"ion-icon",4)(5,"ion-icon",5),k())},dependencies:[el,qc,Ks]}),e})();function Xye(t,e){if(1&t){const n=Mf();x(0,"div",52)(1,"div",53)(2,"ion-icon",54),kt("click",function(){const i=hs(n).$implicit;return fs(gi().goToPostAccount(i))}),k(),$e(3,"ion-icon",55),k(),x(4,"img",56),kt("click",function(){const i=hs(n).$implicit;return fs(gi().showDetails(i))}),k(),x(5,"div",57)(6,"div",58)(7,"ion-icon",59),kt("click",function(){const i=hs(n).$implicit;return fs(gi().showComments(i))}),k(),$e(8,"div",6),x(9,"p",60),ae(10,"Parteciperai?"),k(),x(11,"span",61),kt("click",function(){const i=hs(n).$implicit;return fs(gi().confirmPartecipation(i.id,i,"yes"))}),ae(12,"done"),k(),x(13,"ion-icon",62),kt("click",function(){const i=hs(n).$implicit;return fs(gi().confirmPartecipation(i.id,i,"no"))}),k()(),x(14,"h5",63),ae(15),k(),x(16,"p",64),ae(17),k()()()}if(2&t){const n=e.$implicit;zt(4),Of("src",n.imageUrl,ma),zt(11),Ur(n.title),zt(2),Ur(n.description)}}function Zye(t,e){if(1&t){const n=Mf();x(0,"div",65)(1,"div",66)(2,"ion-icon",67),kt("click",function(){const i=hs(n).$implicit;return fs(gi().goToPostAccount(i))}),k(),x(3,"strong"),ae(4),k()(),x(5,"p",68),ae(6),k()()}if(2&t){const n=e.$implicit;zt(4),Ur(n.creator_name),zt(2),Ur(n.text)}}let Jye=(()=>{var t;class e{constructor(r,i,o,s){this.firestore=r,this.firebaseService=i,this.router=o,this.afAuth=s,this.comments=[],this.newComment=""}ngOnInit(){this.documents=this.firestore.collection("events").valueChanges({idField:"id"}).pipe(_t(r=>r.map(i=>({id:i.id,...i}))))}showComments(r){document.getElementById("comments").style.display="flex",this.currentEvent=r,Ci.A.database().ref("comments/"+r.id+"/").once("value").then(o=>{this.comments.splice(0),o.forEach(s=>{const a=s.val();this.comments.push(a)})})}addComment(){var r=this;this.afAuth.authState.subscribe(function(){var i=(0,y.A)(function*(o){o?(Ci.A.database().ref("comments/"+r.currentEvent.id+"/"+o.uid).set({text:r.newComment,creator_id:o.uid,creator_name:r.firebaseService.public_user_data.name,timestamp:(new Date).getTime()}),r.comments.push({text:r.newComment}),r.newComment=""):alert("Per pubblicare un commento devi essere loggato")});return function(o){return i.apply(this,arguments)}}())}goToPostAccount(r){this.router.navigate(["/account"],{queryParams:{uid:r.creator_id}})}showDetails(r){document.getElementById("post-details").style.display="flex",document.getElementById("post-img-details").src=r.imageUrl,document.getElementById("post-title-details").innerHTML=r.title,document.getElementById("post-description-details").innerHTML=r.description}getPrivateEvents(){this.documents=this.firestore.collection("events",r=>r.where("type","==","private")).valueChanges({idField:"id"}).pipe(_t(r=>r.map(i=>({id:i.id,...i}))))}getPublicEvents(){this.documents=this.firestore.collection("events",r=>r.where("type","==","public")).valueChanges({idField:"id"}).pipe(_t(r=>r.map(i=>({id:i.id,...i}))))}confirmPartecipation(r,i,o){this.firebaseService.confirmPartecipation(r,i,o)}}return(t=e).\u0275fac=function(r){return new(r||t)(E(fl),E(nc),E(vr),E(Es))},t.\u0275cmp=Ke({type:t,selectors:[["app-home"]],decls:92,vars:5,consts:[[1,"body1"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","padding-bottom","3.5rem","overflow-y","auto"],[1,"up_bar",2,"width","100%","min-height","6.5rem","display","flex","flex-direction","column","align-items","center","overflow","hidden"],[2,"width","100%","padding-left","0.5rem","margin-top","0.5rem","margin-bottom","0rem","display","flex","flex-direction","row","align-items","center"],["src","assets\\img\\icon-logo.jpg","alt","",2,"width","2.5rem","height","2.5rem","object-fit","contain"],[2,"font-size","1.6rem","padding-top","0.4rem","padding-left","0.2rem"],[2,"flex","1"],["routerLink","/search","name","search",2,"font-size","1.8rem"],["routerLink","/notifications","name","notifications",2,"font-size","1.8rem","padding-right","0.5rem","padding-left","0.5rem"],[2,"width","100%","height","3rem","display","flex","flex-direction","row","align-items","center","justify-content","space-evenly"],[3,"click"],[2,"background","rgba(255, 255, 255, 0.082)","width","1px","height","70%"],["style","width: 100%; border-bottom: 1px solid rgba(255, 255, 255, 0.068);",4,"ngFor","ngForOf"],[1,"overflow1"],["id","spacer"],["id","weekly-questions",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column-reverse","overflow-y","auto","overflow-x","hidden","background","rgba(0, 0, 0, 0.498)"],[2,"width","100%","min-height","25rem","border-start-end-radius","1.5rem","border-start-start-radius","1.5rem","background","black","display","flex","flex-direction","column","align-items","center","border-top","1px solid rgba(255, 255, 255, 0.084)"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","1rem","padding-bottom","0rem","padding-left","1rem"],["onclick","document.getElementById('weekly-questions').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],[2,"padding-left","1rem","padding-right","1rem"],[1,"input1",2,"margin-top","1rem","width","95%","padding-left","0.5rem"],[1,"material-symbols-outlined","notranslate"],["type","text","placeholder","Tipologia di evento?",1,"field1",2,"border-radius","2rem","height","4rem"],["type","text","placeholder","Tipologia di musica?",1,"field1",2,"border-radius","2rem","height","4rem"],["type","text","placeholder","Dove?",1,"field1",2,"border-radius","2rem","height","4rem"],["type","text","placeholder","Con quale artista/celebrit\xe0?",1,"field1",2,"border-radius","2rem","height","4rem"],[2,"width","100%","display","flex","flex-direction","column","align-items","center","margin-bottom","1rem","margin-top","1rem"],["onclick","document.getElementById('reserve-details').style.display = 'flex'; ",1,"button2",2,"width","95%","height","2.5rem"],["id","comments",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column-reverse","overflow-y","auto","overflow-x","hidden","background","rgba(0, 0, 0, 0.498)"],[2,"width","100%","height","25rem","border-start-end-radius","1.5rem","border-start-start-radius","1.5rem","background","black","display","flex","flex-direction","column","align-items","center","border-top","1px solid rgba(255, 255, 255, 0.084)"],["onclick","document.getElementById('comments').style.display = 'none';","name","close-outline",2,"font-size","2rem"],[2,"padding-left","1rem","padding-right","1rem","font-size","14px"],[2,"width","100%","overflow-x","hidden","overflow-y","auto"],["style","width: 100%; border-bottom: 1px solid rgba(255, 255, 255, 0.226); padding-left: 1rem; padding-top: 1rem;",4,"ngFor","ngForOf"],[1,"input1",2,"margin-top","1rem","width","95%","padding-left","0.5rem","padding-right","0.5rem","margin-bottom","0.5rem"],["type","text","id","comment-input","placeholder","Cosa ne pensi?",1,"field1",2,"border-radius","2rem","height","4rem",3,"ngModelChange","ngModel"],[1,"material-symbols-outlined","notranslate",3,"click"],["id","post-details",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["id","post-title-details"],["onclick","document.getElementById('post-details').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],[2,"width","100%","display","flex","align-items","center","justify-content","center","padding-left","1rem","padding-right","1rem"],["id","post-img-details",2,"width","100%"],[2,"width","100%","display","flex","padding-left","1rem"],["id","post-description-details"],[2,"width","100%","display","flex","flex-direction","column","align-items","center","margin-bottom","2rem"],["id","reserve-details",2,"position","absolute","z-index","1000","height","100%","width","100%","display","none","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black"],["onclick","document.getElementById('reserve-details').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],[1,"button2",2,"width","95%","height","2.5rem"],["id","notification",2,"display","flex","width","100%","height","100%","z-index","999","position","absolute","pointer-events","none"],[1,"card1",2,"display","flex","flex-direction","row","width","95%"],["name","notifications",2,"font-size","1.5rem"],[2,"width","100%","border-bottom","1px solid rgba(255, 255, 255, 0.068)"],[2,"width","100%","height","2.8rem","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["name","person-circle-outline",2,"font-size","1.8rem","padding-left","0.5rem",3,"click"],["name","ellipsis-vertical",2,"font-size","1.8rem","padding-right","0.5rem"],[2,"width","100%","object-fit","cover",3,"click","src"],[2,"padding-left","0.5rem","padding-top","0.5rem"],[2,"width","100%","height","2rem","display","flex","flex-direction","row","gap","0.8rem","margin-bottom","0.5rem","align-items","center"],["name","chatbubble-outline",2,"font-size","1.8rem",3,"click"],[2,"margin-top","0rem","margin-bottom","0rem"],[1,"material-symbols-outlined","notranslate",2,"font-size","1.8rem",3,"click"],["name","close-outline",2,"font-size","1.8rem","padding-right","1rem",3,"click"],[2,"margin-bottom","0.5rem","margin-top","0rem"],[2,"margin-top","0rem","font-weight","200","max-height","5rem","overflow","hidden"],[2,"width","100%","border-bottom","1px solid rgba(255, 255, 255, 0.226)","padding-left","1rem","padding-top","1rem"],[2,"display","flex","flex-direction","row","align-items","center"],["name","person-circle-outline",2,"font-size","1.8rem",3,"click"],[2,"margin-top","0.5rem"]],template:function(r,i){1&r&&(x(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3),$e(4,"img",4),x(5,"strong",5),ae(6,"Eventi"),k(),$e(7,"div",6)(8,"ion-icon",7)(9,"ion-icon",8),k(),x(10,"div",9)(11,"strong",10),kt("click",function(){return i.getPublicEvents()}),ae(12,"Pubblici"),k(),$e(13,"div",11),x(14,"strong",10),kt("click",function(){return i.getPrivateEvents()}),ae(15,"Privati"),k()()(),Mr(16,Xye,18,3,"div",12),kl(17,"async"),k(),x(18,"div",13),$e(19,"div",14)(20,"app-footer"),k(),x(21,"div",15)(22,"div",16)(23,"div",17)(24,"h3"),ae(25,"Sondaggio"),k(),$e(26,"ion-icon",18),k(),x(27,"p",19),ae(28,"In questo sondaggio ti viene richiesto di rispondere a queste domande per migliorare la qualit\xe0 e la quantit\xe0 degli eventi proposti e offerti da ClubO e dai suoi utenti"),k(),x(29,"div",20)(30,"span",21),ae(31,"celebration"),k(),$e(32,"input",22),k(),x(33,"div",20)(34,"span",21),ae(35,"play_circle"),k(),$e(36,"input",23),k(),x(37,"div",20)(38,"span",21),ae(39,"location_on"),k(),$e(40,"input",24),k(),x(41,"div",20)(42,"span",21),ae(43,"artist"),k(),$e(44,"input",25),k(),$e(45,"div",6),x(46,"div",26)(47,"button",27),ae(48,"Invia"),k()()()(),x(49,"div",28)(50,"div",29)(51,"div",17)(52,"h3"),ae(53,"Commenti"),k(),$e(54,"ion-icon",30),k(),x(55,"p",31),ae(56,"Ricorda di mantenere un tono educato quando pubblichi un commento, per modificare un commento basta scriverne uno nuovo"),k(),x(57,"div",32),Mr(58,Zye,7,2,"div",33),k(),$e(59,"div",6),x(60,"div",34)(61,"input",35),eD("ngModelChange",function(s){return function eV(t,e){const n=kO(t);return n&&t.set(e),n}(i.newComment,s)||(i.newComment=s),s}),k(),x(62,"span",36),kt("click",function(){return i.addComment()}),ae(63,"send"),k()()()(),x(64,"div",37)(65,"div",38),$e(66,"h3",39)(67,"ion-icon",40),k(),x(68,"div",41),$e(69,"img",42),k(),x(70,"div",43),$e(71,"p",44),k(),x(72,"div",45)(73,"button",27),ae(74,"Prenota"),k()()(),x(75,"div",46)(76,"div",38)(77,"h3"),ae(78,"Prenota l'evento"),k(),$e(79,"ion-icon",47),k(),x(80,"div",41),$e(81,"img",42),k(),x(82,"div",43),$e(83,"p",44),k(),x(84,"div",45)(85,"button",48),ae(86,"Conferma"),k()()(),x(87,"div",49)(88,"div",50),$e(89,"ion-icon",51),x(90,"p"),ae(91,"Notification!"),k()()()()),2&r&&(zt(16),Zn("ngForOf",Ol(17,3,i.documents)),zt(42),Zn("ngForOf",i.comments),zt(3),JA("ngModel",i.newComment))},dependencies:[g_,el,qc,Ks,C0,XB,gS,ih,m_]}),e})(),eIe=(()=>{var t;class e{constructor(){}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Ke({type:t,selectors:[["app-search"]],decls:11,vars:0,consts:[[1,"up_bar",2,"width","100%","min-height","3.5rem","display","flex","flex-direction","row","align-items","center","justify-content","center"],[1,"input1",2,"width","95%"],["type","text","id","","placeholder","Cerca",1,"field1"],["name","search",2,"color","rgb(190, 190, 190)","font-size","1.5rem","margin-left","0.5rem","margin-right","0.5rem"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","justify-content","center"],[1,"overflow1"],["id","spacer"]],template:function(r,i){1&r&&(x(0,"body")(1,"div",0)(2,"div",1),$e(3,"input",2)(4,"ion-icon",3),k()(),x(5,"div",4)(6,"p"),ae(7,"In fase di sviluppo"),k()(),x(8,"div",5),$e(9,"div",6)(10,"app-footer"),k()())},dependencies:[el,ih]}),e})(),tIe=(()=>{var t;class e{constructor(){}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Ke({type:t,selectors:[["app-notifications"]],decls:11,vars:0,consts:[[1,"body1"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","padding-bottom","3.5rem","overflow-y","auto"],[1,"up_bar",2,"width","100%","min-height","3rem","display","flex","flex-direction","row","align-items","center","overflow","hidden"],[2,"width","100%","font-size","1.6rem","padding-left","0.5rem"],[2,"width","100%","height","100%","display","flex","flex-direction","column","justify-content","center","overflow-y","auto","overflow-x","hidden"],[2,"width","100%","text-align","center"],[1,"overflow1"],["id","spacer"]],template:function(r,i){1&r&&(x(0,"body",0)(1,"div",1)(2,"div",2)(3,"strong",3),ae(4,"Tutte le notifiche"),k()(),x(5,"div",4)(6,"p",5),ae(7,"Nessuna notifica"),k()()(),x(8,"div",6),$e(9,"div",7)(10,"app-footer"),k()())},dependencies:[ih]}),e})();function gW(t){const e=function rIe(t){return new Un(e=>{const n=s=>e.next(s);n(t.snapshot);const o=t.on("state_changed",n);return t.then(s=>{n(s),e.complete()},s=>{n(t.snapshot),(s=>{e.error(s)})(s)}),function(){o()}}).pipe(function nIe(t,e=uR){return bt((n,r)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=o;o=null,r.next(c)}};function l(){const c=s+t,h=e.now();if(h<c)return i=this.schedule(void 0,c-h),void r.add(i);a()}n.subscribe(Ot(r,c=>{o=c,s=e.now(),i||(i=e.schedule(l,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(_t(n=>n.bytesTransferred/n.totalBytes*100))}}function gb(t){return{getDownloadURL:()=>Wt(void 0).pipe(uj,jr(()=>t.getDownloadURL()),xo),getMetadata:()=>Wt(void 0).pipe(uj,jr(()=>t.getMetadata()),xo),delete:()=>Qn(t.delete()),child:e=>gb(t.child(e)),updateMetadata:e=>Qn(t.updateMetadata(e)),put:(e,n)=>gW(t.put(e,n)),putString:(e,n,r)=>gW(t.putString(e,n,r)),list:e=>Qn(t.list(e)),listAll:()=>Qn(t.listAll())}}const iIe=new lt("angularfire2.storageBucket"),oIe=new lt("angularfire2.storage.maxUploadRetryTime"),sIe=new lt("angularfire2.storage.maxOperationRetryTime"),aIe=new lt("angularfire2.storage.use-emulator");let mb=(()=>{var t;class e{constructor(r,i,o,s,a,l,c,h,p,m){An(this,"storage",void 0);const _=rw(r,a,i);this.storage=pR(`${_.name}.storage.${o}`,"AngularFireStorage",_.name,()=>{const w=a.runOutsideAngular(()=>_.storage(o||void 0)),T=p;return T&&w.useEmulator(...T),c&&w.setMaxUploadRetryTime(c),h&&w.setMaxOperationRetryTime(h),w},[c,h])}ref(r){return gb(this.storage.ref(r))}refFromURL(r){return gb(this.storage.refFromURL(r))}upload(r,i,o){return gb(this.storage.ref(r)).put(i,o)}}return t=e,An(e,"\u0275fac",function(r){return new(r||t)(Ve(W_),Ve(q_,8),Ve(iIe,8),Ve(ga),Ve(xe),Ve(fR),Ve(oIe,8),Ve(sIe,8),Ve(aIe,8),Ve(hR,8))}),An(e,"\u0275prov",je({token:t,factory:t.\u0275fac,providedIn:"any"})),e})();function lIe(t,e){1&t&&$e(0,"img",34),2&t&&Zn("src",gi().imageSrc,ma)}function cIe(t,e){if(1&t&&(x(0,"div",35),$e(1,"progress",36),x(2,"span"),ae(3),k()()),2&t){const n=gi();zt(),Zn("value",n.uploadProgress),zt(2),Ko("",n.uploadProgress,"%")}}function uIe(t,e){if(1&t&&(x(0,"div",35),$e(1,"progress",36),x(2,"span"),ae(3),k()()),2&t){const n=gi();zt(),Zn("value",n.uploadProgress),zt(2),Ko("",n.uploadProgress,"%")}}function dIe(t,e){1&t&&$e(0,"img",34),2&t&&Zn("src",gi().imageSrc,ma)}function hIe(t,e){if(1&t&&(x(0,"div",35),$e(1,"progress",36),x(2,"span"),ae(3),k()()),2&t){const n=gi();zt(),Zn("value",n.uploadProgress),zt(2),Ko("",n.uploadProgress,"%")}}let fIe=(()=>{var t;class e{constructor(r,i,o,s,a){this.firestore=r,this.afAuth=i,this.storage=o,this.router=s,this.firebaseService=a,this.selectedImage=null,this.imageUrl=null,this.uploadProgress=null}ngOnInit(){"pro"==this.firebaseService.public_user_data.type?(document.getElementById("pro-add-selection").style.display="flex",document.getElementById("normal-add-selection").style.display="none"):(document.getElementById("pro-add-selection").style.display="none",document.getElementById("normal-add-selection").style.display="flex")}goBack(){"flex"==document.getElementById("add-selection").style.display?this.router.navigate(["/home"]):(document.getElementById("add-selection").style.display="flex",document.getElementById("add-spot").style.display="none",document.getElementById("add-drink").style.display="none",document.getElementById("add-event").style.display="none")}showEventCreation(){document.getElementById("add-selection").style.display="none",document.getElementById("add-spot").style.display="none",document.getElementById("add-drink").style.display="none",document.getElementById("add-event").style.display="flex"}showSpotCreation(){document.getElementById("add-selection").style.display="none",document.getElementById("add-event").style.display="none",document.getElementById("add-drink").style.display="none",document.getElementById("add-spot").style.display="flex"}showDrinkCreation(){document.getElementById("add-selection").style.display="none",document.getElementById("add-event").style.display="none",document.getElementById("add-drink").style.display="flex",document.getElementById("add-spot").style.display="none"}showTablesCreation(){document.getElementById("add-selection").style.display="none",document.getElementById("add-event").style.display="none",document.getElementById("add-drink").style.display="none",document.getElementById("add-spot").style.display="none"}onFileSelected(r){const i=r.target.files[0];if(i){const o=new FileReader;o.onload=s=>{this.imageSrc=s.target.result},o.readAsDataURL(i)}this.selectedImage=i}addEvent(){var r=this;return(0,y.A)(function*(){var i=document.getElementById("event-title-input").value,o=document.getElementById("event-description-input").value;if("pro"==r.firebaseService.public_user_data.type)var a="private";else a="public";r.afAuth.authState.subscribe(function(){var l=(0,y.A)(function*(c){if(c)if(r.selectedImage)try{const m=r.storage.ref("event-images/").child(r.selectedImage.name).put(r.selectedImage);m.percentageChanges().subscribe(S=>{r.uploadProgress=S});const w=yield(yield m).ref.getDownloadURL(),T={creator_id:c.uid,title:i,description:o,imageUrl:w,type:a,timestamp:Ci.A.firestore.FieldValue.serverTimestamp()};r.firestore.collection("events").add(T).then(()=>{alert("Evento aggiunto con successo")}).catch(S=>{alert("Errore durante l'aggiunta dell'evento: "+S.message.toString())})}catch(h){console.error("Errore durante il caricamento dell'immagine:",h)}else alert("Nessuna immagine selezionata");else alert("Per pubblicare un evento \xe8 necessario effettuare il login o la registrazione")});return function(c){return l.apply(this,arguments)}}())})()}addDrink(){var r=this;return(0,y.A)(function*(){var i=document.getElementById("drink-title-input").value,o=document.getElementById("drink-description-input").value;"pro"==r.firebaseService.public_user_data.type?r.afAuth.authState.subscribe(function(){var a=(0,y.A)(function*(l){if(l)if(r.selectedImage)try{const p=r.storage.ref("drink-images/").child(r.selectedImage.name).put(r.selectedImage);p.percentageChanges().subscribe(T=>{r.uploadProgress=T});const _=yield(yield p).ref.getDownloadURL(),w={creator_id:l.uid,title:i,description:o,imageUrl:_,timestamp:Ci.A.firestore.FieldValue.serverTimestamp()};r.firestore.collection("drinks").add(w).then(()=>{alert("Drink aggiunto con successo")}).catch(T=>{alert("Errore durante l'aggiunta del drink: "+T.message.toString())})}catch(c){console.error("Errore durante il caricamento dell'immagine:",c)}else alert("Nessuna immagine selezionata");else alert("Per pubblicare un drink \xe8 necessario effettuare il login o la registrazione")});return function(l){return a.apply(this,arguments)}}()):alert("Per aggiungere un drink \xe8 neccessario possedere un account di tipo professionale")})()}addSpot(){var r=this;return(0,y.A)(function*(){var i=document.getElementById("spot-datetime-input").value,o=document.getElementById("spot-where-input").value,s=document.getElementById("spot-description-input").value;r.afAuth.authState.subscribe(function(){var l=(0,y.A)(function*(c){if(c)try{const h={creator_id:c.uid,datetime:i,description:s,where:o,privacy:"null",timestamp:Ci.A.firestore.FieldValue.serverTimestamp()};r.firestore.collection("spots").add(h).then(()=>{alert("Spot aggiunto con successo")}).catch(p=>{alert("Errore durante l'aggiunta dello spot: "+p.message.toString())})}catch(h){console.error("Errore durante il caricamento dell'immagine:",h)}else alert("Per pubblicare uno spot \xe8 necessario effettuare il login o la registrazione")});return function(c){return l.apply(this,arguments)}}())})()}}return(t=e).\u0275fac=function(r){return new(r||t)(E(fl),E(Es),E(mb),E(vr),E(nc))},t.\u0275cmp=Ke({type:t,selectors:[["app-add"]],decls:71,vars:5,consts:[[2,"height","100%","overflow-y","hidden"],[2,"width","100%","display","flex","align-items","center","padding-top","1rem","padding-left","1rem","pointer-events","all"],[2,"background","#950DE8","padding","0.5rem","border-radius","50%","display","flex","flex-direction","column","align-items","center",3,"click"],[1,"material-symbols-outlined","notranslate",2,"width","100","text-align","center"],["id","add-selection",2,"width","100%","height","100%","display","flex","flex-direction","column"],["id","normal-add-selection",2,"width","100%","display","flex","flex-direction","column"],[2,"width","100%","padding-left","0.5rem"],[1,"button3",2,"border-top","1px solid rgba(255, 255, 255, 0.062)",3,"click"],["id","pro-add-selection",2,"width","100%","display","flex","flex-direction","column"],["id","add-drink",2,"width","100%","height","100%","display","none","flex-direction","column","align-items","center","padding-top","1rem","padding-bottom","4rem","overflow-y","auto"],[1,"card1",2,"width","95%"],[2,"color","#FFFFFF80","margin-bottom","0rem","width","100%","padding-left","1rem","margin-top","1rem"],["style","width: 90%; height: 8rem; object-fit: contain; margin-top: 1rem;",3,"src",4,"ngIf"],["for","event-image-input",1,"card3",2,"width","90%","display","flex","flex-direction","row","align-items","center","justify-content","center","overflow","hidden","height","4rem"],["src","assets\\img\\material-symbols_perm-media.svg",2,"width","1.5rem","height","1.5rem","margin-right","0.2rem"],["id","event-image-input","type","file","accept","image/*",2,"display","none","position","relative","width","100%","height","100%","pointer-events","all","z-index","1",3,"change"],[2,"color","#FFFFFF80"],["id","drink-title-input","type","text","placeholder","Titolo",1,"card3","field2",2,"width","90%","height","2.5rem"],["id","drink-description-input","type","text","placeholder","Descrizione",1,"card3","field2",2,"width","90%","min-height","8rem","resize","vertical"],["style","height: 4rem; display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: -1rem;",4,"ngIf"],[1,"button2",2,"width","90%","margin-top","1rem","margin-bottom","1rem","height","3rem",3,"click"],["id","add-spot",2,"width","100%","height","100%","display","none","flex-direction","column","align-items","center","padding-top","1rem","padding-bottom","4rem","overflow-y","auto"],["for","spot-datetime-input",2,"color","#FFFFFF80","margin-bottom","0rem","width","100%","padding-left","1rem","margin-top","1rem"],["id","spot-datetime-input","type","datetime-local",1,"card3","field2",2,"width","90%","height","2.5rem","padding-right","0.5rem","margin-top","0.2rem"],["id","spot-description-input","type","text","placeholder","Descrizione",1,"card3","field2",2,"width","90%","min-height","8rem","resize","vertical"],["for","spot-where-input",2,"color","#FFFFFF80","margin-bottom","0rem","width","100%","padding-left","1rem","margin-top","1rem"],["id","spot-where-input","type","text",1,"card3","field2",2,"width","90%","height","2.5rem","padding-right","0.5rem","margin-top","0.2rem"],["id","add-event",2,"width","100%","height","100%","display","none","flex-direction","column","align-items","center","padding-top","1rem","padding-bottom","4rem","overflow-y","auto"],["id","event-title-input","type","text","placeholder","Titolo",1,"card3","field2",2,"width","90%","height","2.5rem"],["id","event-description-input","type","text","placeholder","Descrizione",1,"card3","field2",2,"width","90%","min-height","8rem","resize","vertical"],[1,"card3",2,"width","90%","display","flex","flex-direction","row","align-items","center","justify-content","center","overflow","hidden","height","3rem"],["src","assets\\img\\material-symbols_location-on-rounded.svg",2,"width","1.5rem","height","1.5rem","margin-right","0.2rem"],[1,"overflow1"],["id","spacer"],[2,"width","90%","height","8rem","object-fit","contain","margin-top","1rem",3,"src"],[2,"height","4rem","display","flex","align-items","center","justify-content","center","gap","0.5rem","margin-bottom","-1rem"],["max","100",3,"value"]],template:function(r,i){1&r&&(x(0,"body",0)(1,"div",1)(2,"button",2),kt("click",function(){return i.goBack()}),x(3,"span",3),ae(4,"arrow_back_ios_new"),k()()(),x(5,"div",4)(6,"div",5)(7,"h3",6),ae(8,"Cosa vuoi pubblicare"),k(),x(9,"button",7),kt("click",function(){return i.showEventCreation()}),ae(10,"Evento"),k(),x(11,"button",7),kt("click",function(){return i.showSpotCreation()}),ae(12,"Spot"),k()(),x(13,"div",8)(14,"h3",6),ae(15,"Cosa vuoi pubblicare | Pro"),k(),x(16,"button",7),kt("click",function(){return i.showEventCreation()}),ae(17,"Evento"),k(),x(18,"button",7),kt("click",function(){return i.showDrinkCreation()}),ae(19,"Drink o bottiglia"),k()()(),x(20,"div",9)(21,"div",10)(22,"h3",11),ae(23,"Nuovo drink"),k(),Mr(24,lIe,1,1,"img",12),x(25,"label",13),$e(26,"img",14),x(27,"input",15),kt("change",function(s){return i.onFileSelected(s)}),k(),x(28,"p",16),ae(29,"Seleziona foto drink"),k()(),$e(30,"input",17)(31,"textarea",18),Mr(32,cIe,4,2,"div",19),x(33,"button",20),kt("click",function(){return i.addDrink()}),ae(34,"Aggiungi drink"),k()()(),x(35,"div",21)(36,"div",10)(37,"h3",11),ae(38,"Nuovo spot"),k(),x(39,"label",22),ae(40,"Data e ora"),k(),$e(41,"input",23)(42,"textarea",24),x(43,"label",25),ae(44,"Luogo"),k(),$e(45,"input",26),Mr(46,uIe,4,2,"div",19),x(47,"button",20),kt("click",function(){return i.addSpot()}),ae(48,"Pubblica"),k()()(),x(49,"div",27)(50,"div",10)(51,"h3",11),ae(52,"Nuovo evento"),k(),Mr(53,dIe,1,1,"img",12),x(54,"label",13),$e(55,"img",14),x(56,"input",15),kt("change",function(s){return i.onFileSelected(s)}),k(),x(57,"p",16),ae(58,"Seleziona media"),k()(),$e(59,"input",28)(60,"textarea",29),x(61,"button",30),$e(62,"img",31),x(63,"p",16),ae(64,"Aggiungi posizione"),k()(),Mr(65,hIe,4,2,"div",19),x(66,"button",20),kt("click",function(){return i.addEvent()}),ae(67,"Pubblica"),k()()(),x(68,"div",32),$e(69,"div",33)(70,"app-footer"),k()()),2&r&&(zt(24),Zn("ngIf",i.imageSrc),zt(8),Zn("ngIf",null!==i.uploadProgress),zt(14),Zn("ngIf",null!==i.uploadProgress),zt(7),Zn("ngIf",i.imageSrc),zt(12),Zn("ngIf",null!==i.uploadProgress))},dependencies:[hd,ih]}),e})();function pIe(t,e){if(1&t&&(x(0,"div",54),$e(1,"img",55),x(2,"p",56)(3,"strong"),ae(4,"Posti disponibili:"),k(),ae(5),k(),x(6,"button",57),ae(7,"Prenota"),k()()),2&t){const n=e.$implicit;zt(),Of("src",n.imageUrl,ma),zt(4),Ko(" ",n.seats_number,"")}}function gIe(t,e){if(1&t&&(x(0,"div",54)(1,"p",56),ae(2,"Nome: "),x(3,"strong"),ae(4),k()(),x(5,"p",56),ae(6,"Posti disponibili: "),x(7,"strong"),ae(8),k()(),x(9,"p",56),ae(10,"Zona: "),x(11,"strong"),ae(12),k()(),x(13,"p",56),ae(14,"Marchio/modello: "),x(15,"strong"),ae(16),k()(),x(17,"p",56),ae(18,"Colore: "),x(19,"strong"),ae(20),k()(),x(21,"p",56),ae(22,"Tipologia: "),x(23,"strong"),ae(24),k()(),x(25,"p",56),ae(26,"Targa: "),x(27,"strong"),ae(28),k()(),x(29,"p",56),ae(30,"Numero di telefono: "),x(31,"strong"),ae(32),k()(),x(33,"p",56),ae(34,"Quota: "),x(35,"strong"),ae(36),k()(),x(37,"p",56),ae(38,"Disponibilit\xe0: "),x(39,"strong"),ae(40),k()()()),2&t){const n=e.$implicit;zt(4),Ur(n.name),zt(4),Ur(n.seats),zt(4),Ur(n.zone),zt(4),Ur(n.brand_model),zt(4),Ur(n.color),zt(4),Ur(n.type),zt(4),Ur(n.signature),zt(4),Ur(n.number),zt(4),Ur(n.money),zt(4),Ur(n.available)}}function mIe(t,e){if(1&t&&(x(0,"div",58)(1,"div",59),$e(2,"ion-icon",60),k(),x(3,"strong",61),ae(4,"Dove:"),k(),x(5,"p",62),ae(6),k(),x(7,"strong",61),ae(8,"Quando:"),k(),x(9,"p",62),ae(10),k(),x(11,"strong",61),ae(12,"Descrizione:"),k(),x(13,"p",62),ae(14),k(),x(15,"div",63)(16,"div",64),$e(17,"ion-icon",65),k()()()),2&t){const n=e.$implicit,r=gi();zt(6),Ur(n.where),zt(4),Ur(r.formatDate(n.datetime)),zt(4),Ur(n.description)}}function _Ie(t,e){1&t&&$e(0,"img",66),2&t&&Of("src",e.$implicit.imageUrl,ma)}function vIe(t,e){1&t&&$e(0,"img",67),2&t&&Of("src",e.$implicit.imageUrl,ma)}let yIe=(()=>{var t;class e{constructor(r,i,o,s,a,l,c){this.firestore=r,this.afAuth=i,this.firebaseService=o,this.route=s,this.storage=a,this.router=l,this.locationStrategy=c,this.isIntersecting=!1,this.selectedImage=null,this.imageUrl=null,this.uploadProgress=null,this.nextPageAvailable=!0,this.data$=new K([]),this.drinksData$=new K([]),this.spotsData$=new K([])}ngOnInit(){this.route.queryParams.subscribe(r=>{if(this.see_uid=r.uid,this.see_uid)if(this.firestore.collection("public_users_data").doc(this.see_uid).get().subscribe(o=>{if(o.exists){const s=o.data();this.initializeProfile(s)}else alert("Utente non trovato")}),this.see_uid==this.firebaseService.public_user_data.uid){const o=document.getElementsByClassName("my-account-actions");for(let a=0;a<o.length;a++)o[a].style.display="flex";const s=document.getElementsByClassName("external-account-actions");for(let a=0;a<s.length;a++)s[a].style.display="none"}else{const o=document.getElementsByClassName("my-account-actions");for(let a=0;a<o.length;a++)o[a].style.display="none";const s=document.getElementsByClassName("external-account-actions");for(let a=0;a<s.length;a++)s[a].style.display="flex"}else{const o=document.getElementsByClassName("my-account-actions");for(let a=0;a<o.length;a++)o[a].style.display="flex";const s=document.getElementsByClassName("external-account-actions");for(let a=0;a<s.length;a++)s[a].style.display="none";this.initializeProfile(this.firebaseService.public_user_data)}})}initializeProfile(r){if(r){this.currentUserPublicData=r,"pro"==r.type?(document.getElementById("spots-toggle").style.display="flex",document.getElementById("events-toggle").style.display="flex",document.getElementById("car-pooling-toggle").style.display="none",document.getElementById("seat-toggle").style.display="flex",document.getElementById("drink-toggle").style.display="flex"):(document.getElementById("spots-toggle").style.display="flex",document.getElementById("events-toggle").style.display="flex",document.getElementById("car-pooling-toggle").style.display="flex",document.getElementById("seat-toggle").style.display="none",document.getElementById("drink-toggle").style.display="none");var i=document.getElementById("account-image");null!=i&&(i.src=r.imageUrl),document.getElementById("name-and-surname").innerHTML=r.name,document.getElementById("description").innerHTML=r.description,document.getElementById("username").innerHTML="@"+r.username,this.getElements("events")}}goToChangeSelection(){this.firebaseService.getPrivateUserData(),document.getElementById("change-account-data-selection").style.display="flex"}getElements(r){document.getElementById("elements-container").style.display="flex",document.getElementById("drinks-container").style.display="none",document.getElementById("spots-container").style.display="none",document.getElementById("car-pooling-data-container").style.display="none",document.getElementById("commercial-activity-data-container").style.display="none",this.currentFetchingElementType=r,this.firestore.collection(r,i=>i.limit(3).where("creator_id","==",this.currentUserPublicData.uid)).get().subscribe(i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));3===o.length?this.lastVisible=i.docs[i.docs.length-1]:this.nextPageAvailable=!1,this.data$.next(o)})}getMoreElements(){this.lastVisible&&this.firestore.collection(this.currentFetchingElementType,r=>r.limit(3).where("creator_id","==",this.currentUserPublicData.uid).startAfter(this.lastVisible)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));if(i.length>0){const s=[...this.data$.getValue(),...i];this.data$.next(s),3===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}getAccountSpots(){document.getElementById("elements-container").style.display="none",document.getElementById("drinks-container").style.display="none",document.getElementById("spots-container").style.display="flex",document.getElementById("car-pooling-data-container").style.display="none",document.getElementById("commercial-activity-data-container").style.display="none",this.firestore.collection("spots",r=>r.limit(2).where("creator_id","==",this.currentUserPublicData.uid)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));2===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1,this.spotsData$.next(i)})}getMoreAccountSpots(){this.lastVisible&&this.firestore.collection("spots",r=>r.limit(3).where("creator_id","==",this.currentUserPublicData.uid).startAfter(this.lastVisible)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));if(i.length>0){const s=[...this.spotsData$.getValue(),...i];this.spotsData$.next(s),3===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}formatDate(r){const i=new Date(r);return`${i.getDate()}/${i.getMonth()+1}/${i.getFullYear()} alle ${i.getHours()}:${i.getMinutes()}`}getAccountActivityInfo(){document.getElementById("elements-container").style.display="none",document.getElementById("spots-container").style.display="none",document.getElementById("car-pooling-data-container").style.display="none",document.getElementById("drinks-container").style.display="none",document.getElementById("commercial-activity-data-container").style.display="flex",this.commercialActivityData$=Qn(this.firestore.collection("places_datas").doc(this.currentUserPublicData.uid).get()).pipe(_t(r=>r.exists?[r.data()]:[]))}getAccountCarPooling(){document.getElementById("elements-container").style.display="none",document.getElementById("drinks-container").style.display="none",document.getElementById("spots-container").style.display="none",document.getElementById("car-pooling-data-container").style.display="flex",document.getElementById("commercial-activity-data-container").style.display="none",this.carPoolingData$=Qn(this.firestore.collection("car-pooling").doc(this.currentUserPublicData.uid).get()).pipe(_t(r=>r.exists?[r.data()]:[]),Xi(r=>{document.getElementById("book-car-pooling-button").style.display="available"==r[0].available?"flex":"none"}))}getDrinks(){document.getElementById("elements-container").style.display="none",document.getElementById("drinks-container").style.display="flex",document.getElementById("spots-container").style.display="none",document.getElementById("car-pooling-data-container").style.display="none",document.getElementById("commercial-activity-data-container").style.display="none",this.firestore.collection("drinks",r=>r.limit(3).where("creator_id","==",this.currentUserPublicData.uid)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));3===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1,this.drinksData$.next(i)})}getMoreDrinks(){this.lastVisible&&this.firestore.collection("drinks",r=>r.limit(3).where("creator_id","==",this.currentUserPublicData.uid).startAfter(this.lastVisible)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));if(i.length>0){const s=[...this.drinksData$.getValue(),...i];this.drinksData$.next(s),3===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}}return(t=e).\u0275fac=function(r){return new(r||t)(E(fl),E(Es),E(nc),E(Ta),E(mb),E(vr),E(Ia))},t.\u0275cmp=Ke({type:t,selectors:[["app-account"]],decls:92,vars:15,consts:[[1,"body1"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","padding-bottom","3.5rem","pointer-events","all","overflow-x","hidden"],[1,"up_bar",2,"width","100%","min-height","3.5rem","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["id","username",2,"margin-left","1rem"],[1,"my-account-actions",2,"display","flex","flex-direction","row","align-items","center","height","100%"],["name","pencil",2,"font-size","1.8rem","margin-right","1rem",3,"click"],[2,"width","100%","height","auto"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","justify-content","start","gap","1rem","margin-top","1rem","margin-bottom","1rem","padding-left","1rem"],["id","account-image","src","assets\\icon\\favicon.png",2,"width","5rem","height","5rem","object-fit","cover","border-radius","50%"],[2,"height","100%","display","flex","flex-direction","column"],["id","name-and-surname",2,"font-size","1.2rem"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","gap","0.8rem","overflow-y","hidden","overflow-x","auto","margin-top","1rem"],["id","followers",2,"margin-bottom","0rem","margin-top","0rem"],[2,"margin-top","0.3rem","font-weight","200","color","#FFFFFF80","margin-bottom","0rem"],["id","followings",2,"margin-bottom","0rem","margin-top","0rem"],["id","description",2,"width","100%","padding-left","1rem","font-weight","200","color","#FFFFFF80","padding-right","0.5rem"],[1,"external-account-actions",2,"width","100%","display","flex","flex-direction","row","align-items","center","justify-content","space-between","margin-bottom","1rem","margin-top","1rem","padding-left","0.5rem","padding-right","0.5rem"],[1,"button2",2,"width","48%","height","2rem","border-radius","1rem","gap","0.5rem"],["name","add-outline",2,"font-size","1.8rem"],["id","send-message-button","target","_blank",1,"button2",2,"width","48%","height","2rem","border-radius","1rem","gap","0.5rem","color","white","cursor","pointer","text-decoration","none"],["name","send",2,"font-size","1.2rem"],[1,"card1",2,"width","95%","border-radius","2rem","min-height","2.5rem","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["id","events-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem",3,"click"],["name","id-card-outline",2,"font-size","1.8rem"],["id","spots-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem",3,"click"],["name","pricetags-outline",2,"font-size","1.8rem"],["id","car-pooling-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem",3,"click"],["name","car",2,"font-size","1.8rem"],["id","seat-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem",3,"click"],[1,"material-symbols-outlined","notranslate"],["id","drink-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem",3,"click"],["id","commercial-activity-data-container",2,"display","none","flex-direction","unset","flex-wrap","wrap","justify-content","space-between","width","100%","height","100%","padding-left","1rem","padding-right","1rem"],[2,"width","100%"],["style","width: 100%; display: flex; flex-direction: column;",4,"ngFor","ngForOf"],["id","car-pooling-data-container",2,"display","none","flex-direction","unset","flex-wrap","wrap","justify-content","space-between","width","100%","height","100%","padding-left","1rem","padding-right","1rem"],["id","book-car-pooling-button",1,"button2",2,"width","100%","height","2.5rem","margin-top","1rem","margin-bottom","1rem"],["id","spots-container",2,"width","100%","display","none","flex-direction","column","align-items","center"],[2,"width","100%","padding-left","1rem"],["style","width: 100%; border-bottom: 1px solid rgba(255, 255, 255, 0.082);",4,"ngFor","ngForOf"],[2,"width","95%","height","2.5rem","border-radius","0.5rem","margin-top","1rem","margin-bottom","1rem",3,"click"],["id","elements-container",2,"display","flex","flex-direction","unset","flex-wrap","wrap","justify-content","space-between","width","100%","height","100%","padding-left","1rem","padding-right","1rem"],["style","width: 48%; height: 15rem; border-radius: 0.5rem; object-fit: cover; margin-top: 1rem; object-fit: cover;",3,"src",4,"ngFor","ngForOf"],[2,"width","48%","height","15rem","border-radius","0.5rem","object-fit","cover","margin-top","1rem","object-fit","cover",3,"click"],["id","drinks-container",2,"display","flex","flex-direction","unset","flex-wrap","wrap","justify-content","space-between","width","100%","height","100%","padding-left","1rem","padding-right","1rem"],["style","width: 48%; height: 15rem; border-radius: 0.5rem;  margin-top: 1rem; object-fit: cover;",3,"src",4,"ngFor","ngForOf"],[2,"width","48%","height","15rem","border-radius","0.5rem","margin-top","1rem",3,"click"],["id","change-account-data-selection",2,"position","absolute","z-index","2","display","none","flex-direction","column","align-items","center","width","100%","height","100%","background","black","pointer-events","all"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","0rem","padding-bottom","0rem","padding-left","0.5rem"],["onclick","document.getElementById('change-account-data-selection').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],["routerLink","/account/change-account-data",1,"button3"],["routerLink","/account/change-place-data",1,"button3"],["routerLink","/account/change-car-pooling",1,"button3"],[1,"overflow1"],["id","spacer"],[2,"width","100%","display","flex","flex-direction","column"],[2,"width","100%","border-radius","0.5rem","object-fit","contain","margin-top","0rem","object-fit","cover",3,"src"],[2,"width","100%","margin-bottom","0rem"],[1,"button2",2,"width","100%","height","2.5rem","margin-top","1rem","margin-bottom","1rem"],[2,"width","100%","border-bottom","1px solid rgba(255, 255, 255, 0.082)"],[2,"width","100%","height","2.8rem","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["name","ellipsis-vertical",2,"font-size","1.8rem","padding-right","0.5rem"],[2,"width","100%","padding-left","0.5rem"],[2,"margin-top","0rem","font-weight","200","max-height","5rem","overflow","hidden","padding-left","0.5rem"],[2,"padding-left","0.5rem","padding-top","0.5rem"],[2,"width","100%","height","2rem","display","flex","flex-direction","row","gap","0.8rem","margin-bottom","0.3rem"],["name","chatbubble-outline",2,"font-size","1.8rem"],[2,"width","48%","height","15rem","border-radius","0.5rem","object-fit","cover","margin-top","1rem","object-fit","cover",3,"src"],[2,"width","48%","height","15rem","border-radius","0.5rem","margin-top","1rem","object-fit","cover",3,"src"]],template:function(r,i){1&r&&(x(0,"body",0)(1,"div",1)(2,"div",2)(3,"strong",3),ae(4,"username"),k(),x(5,"div",4)(6,"ion-icon",5),kt("click",function(){return i.goToChangeSelection()}),k()()(),x(7,"div",6)(8,"div",7),$e(9,"img",8),x(10,"div",9)(11,"strong",10),ae(12,"Name and surname"),k(),x(13,"div",11)(14,"div",9)(15,"p",12),ae(16,"0"),k(),x(17,"p",13),ae(18,"Followers"),k()(),x(19,"div",9)(20,"p",14),ae(21,"0"),k(),x(22,"p",13),ae(23,"Followings"),k()()()()(),$e(24,"p",15),x(25,"div",16)(26,"button",17),$e(27,"ion-icon",18),ae(28,"Segui"),k(),x(29,"a",19),$e(30,"ion-icon",20),ae(31,"Messaggio"),k()()(),x(32,"div",21)(33,"div",22),kt("click",function(){return i.getElements("events")}),$e(34,"ion-icon",23),k(),x(35,"div",24),kt("click",function(){return i.getAccountSpots()}),$e(36,"ion-icon",25),k(),x(37,"div",26),kt("click",function(){return i.getAccountCarPooling()}),$e(38,"ion-icon",27),k(),x(39,"div",28),kt("click",function(){return i.getAccountActivityInfo()}),x(40,"span",29),ae(41,"chair"),k()(),x(42,"div",30),kt("click",function(){return i.getDrinks()}),x(43,"span",29),ae(44,"liquor"),k()()(),x(45,"div",31)(46,"h5",32),ae(47,"Piantina del locale"),k(),Mr(48,pIe,8,2,"div",33),kl(49,"async"),k(),x(50,"div",34)(51,"h5",32),ae(52,"Car-pooling"),k(),Mr(53,gIe,41,10,"div",33),kl(54,"async"),x(55,"button",35),ae(56,"Prenota"),k()(),x(57,"div",36)(58,"h5",37),ae(59,"Spot"),k(),Mr(60,mIe,18,3,"div",38),kl(61,"async"),x(62,"button",39),kt("click",function(){return i.getMoreAccountSpots()}),ae(63,"Carica altri"),k()(),x(64,"div",40)(65,"h5",32),ae(66,"Eventi"),k(),Mr(67,_Ie,1,1,"img",41),kl(68,"async"),x(69,"button",42),kt("click",function(){return i.getMoreElements()}),ae(70,"Carica altri"),k()(),x(71,"div",43)(72,"h5",32),ae(73,"Drink e Bottiglie"),k(),Mr(74,vIe,1,1,"img",44),kl(75,"async"),x(76,"button",45),kt("click",function(){return i.getMoreDrinks()}),ae(77,"Carica altri"),k()()(),x(78,"div",46)(79,"div",47)(80,"h3"),ae(81,"Il mio account"),k(),$e(82,"ion-icon",48),k(),x(83,"button",49),ae(84,"Profilo"),k(),x(85,"button",50),ae(86,"Attivit\xe0"),k(),x(87,"button",51),ae(88,"Car Pooling"),k()(),x(89,"div",52),$e(90,"div",53)(91,"app-footer"),k()()),2&r&&(zt(48),Zn("ngForOf",Ol(49,5,i.commercialActivityData$)),zt(5),Zn("ngForOf",Ol(54,7,i.carPoolingData$)),zt(7),Zn("ngForOf",Ol(61,9,i.spotsData$)),zt(7),Zn("ngForOf",Ol(68,11,i.data$)),zt(7),Zn("ngForOf",Ol(75,13,i.drinksData$)))},dependencies:[g_,el,qc,Ks,ih,m_]}),e})();function IIe(t,e){1&t&&$e(0,"img",19),2&t&&Zn("src",gi().imageSrc,ma)}let EIe=(()=>{var t;class e{constructor(r,i,o,s){this.firestore=r,this.afAuth=i,this.firebaseService=o,this.storage=s,this.selectedImage=null,this.uploadProgress=null}ngOnInit(){const r=this.firebaseService.public_user_data,i=this.firebaseService.private_user_data;if(i){const o=document.getElementById("account-phone-number-change");i.phone&&(o.value=i.phone)}if(r){const o=document.getElementById("account-name-and-surname-change"),s=document.getElementById("account-username-change"),a=document.getElementById("account-description-change"),l=document.getElementById("account-image-change");o.value=r.name,s.value=r.username,r.imageUrl&&(l.src=r.imageUrl),r.description&&(a.value=r.description)}}onFileSelected(r){document.getElementById("changed-image-preview").style.display="flex";const i=r.target.files[0];if(i){const o=new FileReader;o.onload=s=>{this.imageSrc=s.target.result},o.readAsDataURL(i)}this.selectedImage=i}updateAccountDatas(){var r=this;return(0,y.A)(function*(){const i=document.getElementById("account-name-and-surname-change").value,o=document.getElementById("account-username-change").value,s=document.getElementById("account-description-change").value,a=document.getElementById("account-phone-number-change").value;r.afAuth.authState.subscribe(function(){var l=(0,y.A)(function*(c){if(c)try{const h={phone:a};if(r.selectedImage){const _=r.storage.ref("account-images/").child(r.selectedImage.name).put(r.selectedImage);_.percentageChanges().subscribe(U=>{r.uploadProgress=U});const T=yield(yield _).ref.getDownloadURL(),S={name:i,description:s,username:o,phone:a,imageUrl:T};yield r.firestore.collection("public_users_data").doc(c.uid).set(S,{merge:!0}),yield r.firestore.collection("private_users_data").doc(c.uid).set(h,{merge:!0})}else{const p={name:i,description:s,username:o};yield r.firestore.collection("public_users_data").doc(c.uid).set(p,{merge:!0}),yield r.firestore.collection("private_users_data").doc(c.uid).set(h,{merge:!0})}r.firebaseService.initialize(),alert("Dati dell'account aggiornati con successo")}catch(h){console.error("Si \xe8 verificato un errore durante l'aggiornamento dei dati dell'account:",h),alert("Si \xe8 verificato un errore durante l'aggiornamento dei dati dell'account"+h)}else alert("Per aggiornare i dati dell'account \xe8 necessario effettuare il login")});return function(c){return l.apply(this,arguments)}}())})()}}return(t=e).\u0275fac=function(r){return new(r||t)(E(fl),E(Es),E(nc),E(mb))},t.\u0275cmp=Ke({type:t,selectors:[["app-change-account-data"]],decls:24,vars:1,consts:[[2,"height","100%","width","100%","display","flex","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black"],[1,"up_bar",2,"width","100%","display","flex","align-items","center","justify-content","start","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["routerLink","/account","name","chevron-back-outline",2,"font-size","2rem"],[2,"width","100%","display","flex","flex-direction","column","align-items","center","margin-bottom","2rem","margin-top","2rem"],["for","spot-image-input",2,"width","100%","display","flex","flex-direction","row","align-items","center","justify-content","center","padding-left","1rem","padding-right","1rem","margin-bottom","1rem"],["id","account-image-change",2,"width","8rem","height","8rem","object-fit","cover","border-radius","50%"],["id","changed-image-preview",2,"display","none","flex-direction","row","align-items","center"],["name","chevron-forward-outline",2,"font-size","2rem","margin-left","1rem"],["style","width: 8rem; height: 8rem; border-radius: 50%; margin-left: 1rem;",3,"src",4,"ngIf"],["id","spot-image-input","type","file","accept","image/*",2,"display","none","position","relative","width","100%","height","100%","z-index","1",3,"change"],[1,"input1",2,"margin-top","1rem","width","95%"],["src","assets\\img\\octicon_person-24 (1).png",1,"input1_img1"],["type","text","id","account-name-and-surname-change","placeholder","Nome e cognome",1,"field1"],["name","at-outline",2,"color","rgb(190, 190, 190)","font-size","1.5rem","margin-left","0.5rem","margin-right","0.5rem"],["type","text","id","account-username-change","placeholder","Username",1,"field1"],["name","call-outline",2,"color","rgb(190, 190, 190)","font-size","1.3rem","margin-left","0.5rem","margin-right","0.5rem"],["type","number","id","account-phone-number-change","placeholder","Numero di telefono",1,"field1"],["id","account-description-change","type","text","placeholder","Descrizione",1,"card3","field2",2,"width","95%","min-height","8rem","resize","vertical","background","rgb(114, 114, 114)","border-radius","1rem"],[1,"button2",2,"width","95%","height","3rem","margin-top","1rem",3,"click"],[2,"width","8rem","height","8rem","border-radius","50%","margin-left","1rem",3,"src"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"div",1),$e(2,"ion-icon",2),x(3,"h3"),ae(4,"Profilo utente"),k()(),x(5,"div",3)(6,"label",4),$e(7,"img",5),x(8,"div",6),$e(9,"ion-icon",7),Mr(10,IIe,1,1,"img",8),k(),x(11,"input",9),kt("change",function(s){return i.onFileSelected(s)}),k()(),x(12,"div",10),$e(13,"img",11)(14,"input",12),k(),x(15,"div",10),$e(16,"ion-icon",13)(17,"input",14),k(),x(18,"div",10),$e(19,"ion-icon",15)(20,"input",16),k(),$e(21,"textarea",17),x(22,"button",18),kt("click",function(){return i.updateAccountDatas()}),ae(23,"Applica"),k()()()),2&r&&(zt(10),Zn("ngIf",i.imageSrc))},dependencies:[hd,el,qc,Ks]}),e})(),wIe=(()=>{var t;class e{constructor(r,i){this.afAuth=r,this.router=i}login(){const i=document.getElementById("login-email").value,s=document.getElementById("login-password").value;return this.afAuth.signInWithEmailAndPassword(i,s).then(()=>{alert("Login riuscito!"),this.router.navigate(["/home"])}).catch(a=>{alert("Errore durante il login: "+a.message)})}toRegister(){this.router.navigate(["/register"])}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Es),E(vr))},t.\u0275cmp=Ke({type:t,selectors:[["app-login"]],decls:18,vars:0,consts:[["src","assets/img/extended_logo.jpg",2,"width","90%","height","20rem","object-fit","contain"],[1,"card1",2,"width","90%"],[1,"input1",2,"margin-top","1rem"],["src","assets\\img\\mdi_password-outline.png",1,"input1_img1"],["type","email","id","login-email","placeholder","Email",1,"field1"],["src","assets\\img\\octicon_person-24 (1).png",1,"input1_img1"],["type","password","id","login-password","placeholder","Password",1,"field1"],[1,"button1",2,"width","90%","margin-top","1rem","margin-bottom","1rem","justify-content","center","height","2.5rem",3,"click"],[1,"div1",2,"margin-left","0rem"],["src","assets/img/Vector.png"],[1,"general_paragraph1",2,"margin-left","0.5rem"],[2,"width","100%","text-align","center"],[2,"cursor","pointer",3,"click"]],template:function(r,i){1&r&&(x(0,"body"),$e(1,"img",0),x(2,"div",1)(3,"div",2),$e(4,"img",3)(5,"input",4),k(),x(6,"div",2),$e(7,"img",5)(8,"input",6),k(),x(9,"button",7),kt("click",function(){return i.login()}),x(10,"div",8),$e(11,"img",9),x(12,"p",10),ae(13,"Login"),k()()()(),x(14,"p",11),ae(15,"Non possiedi un account?"),x(16,"strong",12),kt("click",function(){return i.toRegister()}),ae(17,"Registrati"),k()()())}}),e})(),CIe=(()=>{var t;class e{constructor(r,i,o){this.afAuth=r,this.router=i,this.firestore=o}register(r){var i=this;return(0,y.A)(function*(){const s=document.getElementById("register-email").value;if("pro"==r)var a="pro";else a="normal";const c=document.getElementById("password1").value;if(c===document.getElementById("password2").value)try{const _=(yield i.afAuth.createUserWithEmailAndPassword(s,c)).user;if(_){const w=_.uid,S=document.getElementById("name_input1").value,H=document.getElementById("username_input1").value,ve=document.getElementById("phone_input1").value,Ye=_.uid,At={uid:w,name:S,username:H,phone:ve,type:a},_n={uid:w,mail:s,phone:ve};yield i.firestore.collection("public_users_data").doc(Ye).set(At),yield i.firestore.collection("private_users_data").doc(Ye).set(_n),console.log("Account registrato con successo"),i.router.navigate(["/home"])}else console.error("L'utente \xe8 null")}catch(m){alert("Errore durante la registrazione: "+m.message)}else alert("Le password inserite non corrispondono")})()}toLogin(){this.router.navigate(["/login"])}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Es),E(vr),E(fl))},t.\u0275cmp=Ke({type:t,selectors:[["app-register"]],decls:37,vars:0,consts:[["src","assets/img/extended_logo.jpg",2,"height","18rem","object-fit","contain"],[1,"card1",2,"width","90%","margin-bottom","1.5rem"],[1,"input1",2,"margin-top","1rem"],["src","assets\\img\\octicon_person-24 (1).png",1,"input1_img1"],["id","name_input1","type","text","placeholder","Nome",1,"field1"],["id","username_input1","type","text","placeholder","Username",1,"field1"],["src","assets\\img\\mdi_password-outline.png",1,"input1_img1"],["id","register-email","type","email","placeholder","Email",1,"field1"],["id","phone_input1","type","number","placeholder","Cellulare",1,"field1"],["id","password1","type","password","placeholder","Password",1,"field1"],["id","password2","type","password","placeholder","Conferma Password",1,"field1"],[1,"button1",2,"width","90%","margin-top","1rem","margin-bottom","1rem","justify-content","center",3,"click"],[1,"div1",2,"margin-left","0rem"],["src","assets/img/Vector.png"],[1,"general_paragraph1",2,"margin-left","0.5rem"],[2,"width","100%","text-align","center","margin-top","0rem","margin-bottom","0rem"],[1,"button1",2,"width","90%","margin-top","1rem","margin-bottom","1rem","background","white",3,"click"],[1,"div1"],["src","assets/img/Vector (1).png"],[1,"general_paragraph1",2,"margin-left","0.5rem","color","black"],[2,"width","100%","text-align","center"],[2,"cursor","pointer",3,"click"]],template:function(r,i){1&r&&(x(0,"body"),$e(1,"img",0),x(2,"div",1)(3,"div",2),$e(4,"img",3)(5,"input",4),k(),x(6,"div",2),$e(7,"img",3)(8,"input",5),k(),x(9,"div",2),$e(10,"img",6)(11,"input",7),k(),x(12,"div",2),$e(13,"img",3)(14,"input",8),k(),x(15,"div",2),$e(16,"img",6)(17,"input",9),k(),x(18,"div",2),$e(19,"img",6)(20,"input",10),k(),x(21,"button",11),kt("click",function(){return i.register("normal")}),x(22,"div",12),$e(23,"img",13),x(24,"p",14),ae(25,"Registrati"),k()()(),x(26,"p",15),ae(27,"Oppure:"),k(),x(28,"button",16),kt("click",function(){return i.register("pro")}),x(29,"div",17),$e(30,"img",18),x(31,"p",19),ae(32,"Registrati come organizzatore"),k()()()(),x(33,"p",20),ae(34,"Hai gi\xe0 un account?"),x(35,"strong",21),kt("click",function(){return i.toLogin()}),ae(36,"Accedi"),k()()())}}),e})(),bIe=(()=>{var t;class e{constructor(r){this.router=r}ngOnInit(){}toLogin(){this.router.navigate(["/login"])}toRegister(){this.router.navigate(["/register"])}}return(t=e).\u0275fac=function(r){return new(r||t)(E(vr))},t.\u0275cmp=Ke({type:t,selectors:[["app-log"]],decls:18,vars:0,consts:[["src","assets/img/extended_logo.jpg",2,"width","90%","height","20rem","object-fit","contain"],[1,"card1",2,"width","90%"],[1,"button1",2,"width","90%","margin-top","1rem",3,"click"],[1,"div1"],["src","assets/img/Vector.png"],[1,"general_paragraph1",2,"margin-left","0.5rem"],[1,"button1",2,"width","90%","margin-top","1rem","margin-bottom","1rem","background","white",3,"click"],["src","assets/img/Vector (1).png"],[1,"general_paragraph1",2,"margin-left","0.5rem","color","black"]],template:function(r,i){1&r&&(x(0,"body"),$e(1,"img",0),x(2,"div",1)(3,"button",2),kt("click",function(){return i.toLogin()}),x(4,"div",3),$e(5,"img",4),x(6,"p",5),ae(7,"Accedi al tuo account"),k()()(),x(8,"button",2),kt("click",function(){return i.toRegister()}),x(9,"div",3),$e(10,"img",4),x(11,"p",5),ae(12,"Iscriviti come utente"),k()()(),x(13,"button",6),kt("click",function(){return i.toRegister()}),x(14,"div",3),$e(15,"img",7),x(16,"p",8),ae(17,"Iscriviti come organizzatore"),k()()()()())},styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:start;font-family:Public Sans;background:#000;overflow-x:hidden;overflow-y:auto}.button1[_ngcontent-%COMP%]{font-family:Public Sans;background:#000;padding:.5rem;border-radius:.5rem;display:flex;flex-direction:row;align-items:center;justify-content:start}.div1[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-items:start;margin-left:2rem;height:100%}.card1[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background:#474747;border-radius:1rem}"]}),e})();function TIe(t,e){if(1&t&&(x(0,"div",10)(1,"strong"),ae(2),k(),x(3,"div",11)(4,"span",12),ae(5,"airline_seat_recline_extra"),k(),x(6,"p",13),ae(7),k()(),x(8,"div",14)(9,"span",12),ae(10,"location_on"),k(),x(11,"p",13),ae(12),k()(),x(13,"div",14)(14,"span",12),ae(15,"directions_car"),k(),x(16,"p",13),ae(17),k()(),x(18,"div",14)(19,"span",12),ae(20,"palette"),k(),x(21,"p",13),ae(22),k()(),x(23,"div",14)(24,"span",12),ae(25,"blur_short"),k(),x(26,"p",13),ae(27),k()(),x(28,"div",14)(29,"span",12),ae(30,"more_horiz"),k(),x(31,"p",13),ae(32),k()(),x(33,"div",14)(34,"span",12),ae(35,"euro_symbol"),k(),x(36,"p",13),ae(37),k()(),x(38,"div",15)(39,"a",16),ae(40,"Contatta"),k()()()),2&t){const n=e.$implicit;zt(2),Ur(n.name),zt(5),Ko("Posti disponibili: ",n.seats,""),zt(5),Ko("Zona: ",n.location,""),zt(5),Ko("Marchio/modello: ",n.brand_model,""),zt(5),Ko("Colore: ",n.color,""),zt(5),Ko("Tipologia: ",n.type,""),zt(5),Ko("Targa: ",n.signature,""),zt(5),Ko("Quota: ",n.money,"\u20ac"),zt(2),KE("href","https://wa.me/+39",n.phone,"",ma)}}function AIe(t,e){if(1&t){const n=Mf();x(0,"button",17),kt("click",function(){return hs(n),fs(gi().loadOtherCarPoolers())}),ae(1,"Carica altri"),k()}}let DIe=(()=>{var t;class e{constructor(r){this.firestore=r,this.data$=new K([]),this.nextPageAvailable=!0}ngOnInit(){this.load3CarPoolers()}load3CarPoolers(){this.firestore.collection("car-pooling",r=>r.limit(3).where("available","==","available")).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));3===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1,this.data$.next(i)})}loadOtherCarPoolers(){this.lastVisible&&this.firestore.collection("car-pooling",r=>r.limit(3).where("available","==","available").startAfter(this.lastVisible)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));if(i.length>0){const s=[...this.data$.getValue(),...i];this.data$.next(s),3===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}}return(t=e).\u0275fac=function(r){return new(r||t)(E(fl))},t.\u0275cmp=Ke({type:t,selectors:[["app-car-pooling"]],decls:14,vars:4,consts:[[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","overflow-y","auto","padding-bottom","4rem"],[1,"up_bar",2,"width","100%","min-height","3.5rem","display","flex","flex-direction","row","align-items","center","justify-content","center"],[2,"width","100%","padding-left","1rem","font-size","1.6rem"],[1,"input1",2,"width","95%","margin-top","1rem","margin-bottom","1rem","min-height","2.5rem"],["type","text","id","","placeholder","Cerca",1,"field1"],["name","search",2,"color","rgb(190, 190, 190)","font-size","1.5rem","margin-left","0.5rem","margin-right","0.5rem"],["style","width: 100%; flex-direction: column; border-bottom: 1px solid rgba(255, 255, 255, 0.148); padding-left: 0.5rem; padding-bottom: 0.5rem; padding-top: 0.2rem;",4,"ngFor","ngForOf"],["class","button3",3,"click",4,"ngIf"],[1,"overflow1"],["id","spacer"],[2,"width","100%","flex-direction","column","border-bottom","1px solid rgba(255, 255, 255, 0.148)","padding-left","0.5rem","padding-bottom","0.5rem","padding-top","0.2rem"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","margin-top","0.5rem"],[1,"material-symbols-outlined","notranslate"],[2,"margin-top","0.2rem","margin-bottom","0.2rem"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","margin-top","0.2rem"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","padding-top","0.5rem","gap","0.5rem"],["target","_blank",1,"button2",2,"padding-left","-0.5rem","height","2rem","text-decoration","none","color","white",3,"href"],[1,"button3",3,"click"]],template:function(r,i){1&r&&(x(0,"body")(1,"div",0)(2,"div",1)(3,"strong",2),ae(4,"Car Pooling"),k()(),x(5,"div",3),$e(6,"input",4)(7,"ion-icon",5),k(),Mr(8,TIe,41,10,"div",6),kl(9,"async"),Mr(10,AIe,2,0,"button",7),k(),x(11,"div",8),$e(12,"div",9)(13,"app-footer"),k()()),2&r&&(zt(8),Zn("ngForOf",Ol(9,2,i.data$)),zt(2),Zn("ngIf",i.nextPageAvailable))},dependencies:[g_,hd,el,ih,m_]}),e})();function SIe(t,e){if(1&t){const n=Mf();x(0,"div",28)(1,"div",29)(2,"ion-icon",30),kt("click",function(){const i=hs(n).$implicit;return fs(gi().goToAccountFromSpot(i.creator_id))}),k(),$e(3,"ion-icon",31),k(),x(4,"strong",32),ae(5,"Dove:"),k(),x(6,"p",33),ae(7),k(),x(8,"strong",32),ae(9,"Quando:"),k(),x(10,"p",33),ae(11),k(),x(12,"strong",32),ae(13,"Descrizione:"),k(),x(14,"p",33),ae(15),k(),x(16,"div",34)(17,"div",35),$e(18,"ion-icon",36),k()()()}if(2&t){const n=e.$implicit,r=gi();zt(7),Ur(n.where),zt(4),Ur(r.formatDate(n.datetime)),zt(4),Ur(n.description)}}let RIe=(()=>{var t;class e{constructor(r,i,o){this.firestore=r,this.firebaseService=i,this.router=o}ngOnInit(){this.documents=this.firestore.collection("spots").valueChanges({idField:"id"}).pipe(_t(r=>r.map(i=>({id:i.id,...i}))))}formatDate(r){const i=new Date(r);return`${i.getDate()}/${i.getMonth()+1}/${i.getFullYear()} alle ${i.getHours()}:${i.getMinutes()}`}showDetails(r){document.getElementById("post-details").style.display="flex",document.getElementById("post-img-details").src=r.imageUrl,document.getElementById("post-title-details").innerHTML=r.title,document.getElementById("post-description-details").innerHTML=r.description}goToAccountFromSpot(r){this.router.navigate(["/account"],{queryParams:{uid:r}})}getAllSpots(){this.documents=this.firestore.collection("spots").valueChanges({idField:"id"}).pipe(_t(r=>r.map(i=>({id:i.id,...i}))))}getTodaySpots(){const r=new Date;r.setHours(0,0,0,0),this.firestore.collection("spots",i=>i.where("datetime",">=",r).where("datetime","<=",r)).get().subscribe(i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));this.documents=Wt(o)})}addLikeToSpot(r){this.firebaseService.addLikeToSpot(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(E(fl),E(nc),E(vr))},t.\u0275cmp=Ke({type:t,selectors:[["app-spot"]],decls:44,vars:3,consts:[[1,"body1"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","padding-bottom","3.5rem","overflow-y","auto"],[1,"up_bar",2,"width","100%","min-height","6.5rem","display","flex","flex-direction","column","align-items","center","overflow","hidden"],[2,"width","100%","padding-left","0.5rem","margin-top","0.5rem","margin-bottom","0rem","display","flex","flex-direction","row","align-items","center"],["src","assets\\img\\icon-logo.jpg","alt","",2,"width","2.5rem","height","2.5rem","object-fit","contain"],[1,"notranslate",2,"font-size","1.6rem","padding-top","0.4rem","padding-left","0.2rem"],[2,"flex","1"],["routerLink","/search","name","search",2,"font-size","1.8rem"],["routerLink","/notifications","name","notifications",2,"font-size","1.8rem","padding-right","0.5rem","padding-left","0.5rem"],[2,"width","100%","height","3rem","display","flex","flex-direction","row","align-items","center","justify-content","space-evenly"],[3,"click"],[2,"background","rgba(255, 255, 255, 0.082)","width","1px","height","70%"],["style","width: 100%; border-bottom: 1px solid rgba(255, 255, 255, 0.082);",4,"ngFor","ngForOf"],[1,"overflow1"],["id","spacer"],["id","post-details",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["id","post-title-details"],["onclick","document.getElementById('post-details').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],[2,"width","100%","display","flex","align-items","center","justify-content","center","padding-left","1rem","padding-right","1rem"],["id","post-img-details",2,"width","100%"],[2,"width","100%","display","flex","padding-left","1rem"],["id","post-description-details"],[2,"width","100%","display","flex","flex-direction","column","align-items","center","margin-bottom","2rem"],["onclick","document.getElementById('reserve-details').style.display = 'flex'; ",1,"button2",2,"width","95%","height","2.5rem"],["id","reserve-details",2,"position","absolute","z-index","1000","height","100%","width","100%","display","none","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black"],["onclick","document.getElementById('reserve-details').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],[1,"button2",2,"width","95%","height","2.5rem"],[2,"width","100%","border-bottom","1px solid rgba(255, 255, 255, 0.082)"],[2,"width","100%","height","2.8rem","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["name","person-circle-outline",2,"font-size","1.8rem","padding-left","0.5rem",3,"click"],["name","ellipsis-vertical",2,"font-size","1.8rem","padding-right","0.5rem"],[2,"width","100%","padding-left","0.5rem"],[2,"margin-top","0rem","font-weight","200","max-height","5rem","overflow","hidden","padding-left","0.5rem"],[2,"padding-left","0.5rem","padding-top","0.5rem"],[2,"width","100%","height","2rem","display","flex","flex-direction","row","gap","0.8rem","margin-bottom","0.3rem"],["name","chatbubble-outline",2,"font-size","1.8rem"]],template:function(r,i){1&r&&(x(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3),$e(4,"img",4),x(5,"strong",5),ae(6,"Spot"),k(),$e(7,"div",6)(8,"ion-icon",7)(9,"ion-icon",8),k(),x(10,"div",9)(11,"strong",10),kt("click",function(){return i.getAllSpots()}),ae(12,"Tutti"),k(),$e(13,"div",11),x(14,"strong",10),kt("click",function(){return i.getTodaySpots()}),ae(15,"Oggi"),k()()(),Mr(16,SIe,19,3,"div",12),kl(17,"async"),k(),x(18,"div",13),$e(19,"div",14)(20,"app-footer"),k(),x(21,"div",15)(22,"div",16),$e(23,"h3",17)(24,"ion-icon",18),k(),x(25,"div",19),$e(26,"img",20),k(),x(27,"div",21),$e(28,"p",22),k(),x(29,"div",23)(30,"button",24),ae(31,"Prenota"),k()()(),x(32,"div",25)(33,"div",16)(34,"h3"),ae(35,"Prenota l'evento"),k(),$e(36,"ion-icon",26),k(),x(37,"div",19),$e(38,"img",20),k(),x(39,"div",21),$e(40,"p",22),k(),x(41,"div",23)(42,"button",27),ae(43,"Conferma"),k()()()()),2&r&&(zt(16),Zn("ngForOf",Ol(17,1,i.documents)))},dependencies:[g_,el,qc,Ks,ih,m_]}),e})();function PIe(t,e){1&t&&$e(0,"img",17),2&t&&Zn("src",gi().imageSrc,ma)}const xIe=[{path:"",redirectTo:"splash",pathMatch:"full"},{path:"splash",component:nme},{path:"account",component:yIe},{path:"account/change-account-data",component:EIe},{path:"account/change-place-data",component:(()=>{var t;class e{constructor(r,i,o,s){this.firestore=r,this.afAuth=i,this.firebaseService=o,this.storage=s,this.selectedImage=null,this.imageUrl=null,this.uploadProgress=null}ngOnInit(){}onFileSelected(r){const i=r.target.files[0];if(i){const o=new FileReader;o.onload=s=>{this.imageSrc=s.target.result},o.readAsDataURL(i)}this.selectedImage=i}saveActivityDatas(){var r=this,i=document.getElementById("account-local-total-seats-input").value,o=document.getElementById("account-local-status-selector").value;this.afAuth.authState.subscribe(function(){var a=(0,y.A)(function*(l){if(l)if(r.selectedImage)try{const p=r.storage.ref("commercial_activity-images/").child(r.selectedImage.name).put(r.selectedImage);p.percentageChanges().subscribe(T=>{r.uploadProgress=T});const _=yield(yield p).ref.getDownloadURL(),w={creator_id:l.uid,seats_number:i,status:o,imageUrl:_,timestamp:Ci.A.firestore.FieldValue.serverTimestamp()};r.firestore.collection("places_datas").doc(l.uid).set(w,{merge:!0}).then(()=>{alert("Dati del locale salvati con successo")}).catch(T=>{alert("Errore durante l'aggiunta deli dati del locale: "+T.message.toString())})}catch(c){console.error("Errore durante il caricamento dell'immagine:",c)}else alert("Nessuna immagine selezionata");else alert("Per salvare le informazioni del proprio locale \xe8 necessario effettuare il login o la registrazione")});return function(l){return a.apply(this,arguments)}}())}}return(t=e).\u0275fac=function(r){return new(r||t)(E(fl),E(Es),E(nc),E(mb))},t.\u0275cmp=Ke({type:t,selectors:[["app-change-place-data"]],decls:27,vars:1,consts:[["id","my-seats-container",2,"height","100%","width","100%","display","flex","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black","align-items","center"],[1,"up_bar",2,"width","100%","display","flex","align-items","center","justify-content","start","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["routerLink","/account","name","chevron-back-outline",2,"font-size","2rem"],[1,"card1",2,"width","95%","padding-top","0.5rem","padding-bottom","1rem","margin-top","3rem"],["style","width: 90%; height: 8rem; object-fit: contain; margin-top: 1rem;",3,"src",4,"ngIf"],["for","local-seats-image-input",1,"card3",2,"width","90%","display","flex","flex-direction","row","align-items","center","justify-content","center","overflow","hidden","height","4rem"],["src","assets\\img\\material-symbols_perm-media.svg",2,"width","1.5rem","height","1.5rem","margin-right","0.2rem"],["id","local-seats-image-input","type","file","accept","image/*",2,"display","none","position","relative","width","100%","height","100%","pointer-events","all","z-index","1",3,"change"],[2,"color","#FFFFFF80"],["for","account-total-seats-input",2,"width","100%","padding-left","0.5rem","margin-top","1rem"],[1,"input1",2,"margin-top","0rem","width","95%","padding-left","0.5rem","margin-top","0.5rem"],[1,"material-symbols-outlined","notranslate"],["type","number","id","account-local-total-seats-input","placeholder","Numero di posti totali",1,"field1"],["id","account-local-status-selector",1,"input1",2,"width","95%","margin-top","0.5rem"],["value","open"],["value","closed"],[1,"button2",2,"width","95%","height","2.5rem","margin-top","1rem",3,"click"],[2,"width","90%","height","8rem","object-fit","contain","margin-top","1rem",3,"src"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"div",1),$e(2,"ion-icon",2),x(3,"h3"),ae(4,"La mia attivit\xe0"),k()(),x(5,"div",3),Mr(6,PIe,1,1,"img",4),x(7,"label",5),$e(8,"img",6),x(9,"input",7),kt("change",function(s){return i.onFileSelected(s)}),k(),x(10,"p",8),ae(11,"Seleziona piantina locale"),k()(),x(12,"label",9),ae(13,"Numero di posti totali"),k(),x(14,"div",10)(15,"span",11),ae(16,"chair"),k(),$e(17,"input",12),k(),x(18,"label",9),ae(19,"Stato del locale"),k(),x(20,"select",13)(21,"option",14),ae(22,"In attivit\xe0"),k(),x(23,"option",15),ae(24,"Chiuso"),k()(),x(25,"button",16),kt("click",function(){return i.saveActivityDatas()}),ae(26,"Salva"),k()()()),2&r&&(zt(6),Zn("ngIf",i.imageSrc))},dependencies:[hd,el,qc,Ks,IS,wS]}),e})()},{path:"account/change-car-pooling",component:(()=>{var t;class e{constructor(r,i,o){this.firestore=r,this.afAuth=i,this.firebaseService=o}ngOnInit(){var r=this.firebaseService.private_user_data,i=document.getElementById("account-car-pooling-name-input"),o=document.getElementById("account-car-pooling-phone-input");r.phone&&(o.value=r.phone),r.name&&(i.value=r.name)}saveCarPooling(){var r=document.getElementById("account-car-pooling-seats-input"),i=document.getElementById("account-car-pooling-location-input"),o=document.getElementById("account-car-pooling-brand-model-input"),s=document.getElementById("account-car-pooling-color-input"),a=document.getElementById("account-car-pooling-type-input"),l=document.getElementById("account-car-pooling-car-signature-input"),c=document.getElementById("account-car-pooling-money-input"),h=document.getElementById("account-car-pooling-phone-input"),p=document.getElementById("account-car-pooling-name-input"),m=document.getElementById("car-pooling-available-selector");const _={seats:r.value,location:i.value,brand_model:o.value,color:s.value,type:a.value,signature:l.value,money:c.value,phone:h.value,name:p.value,available:m.value,timestamp:Ci.A.firestore.FieldValue.serverTimestamp()};this.afAuth.authState.subscribe(w=>{w&&this.firestore.collection("car-pooling").doc(w.uid).set(_,{merge:!0}).then(()=>{alert("Car pooling salvato con successo")}).catch(T=>{console.error("Errore durante il salvataggio del car pooling:",T)})})}}return(t=e).\u0275fac=function(r){return new(r||t)(E(fl),E(Es),E(nc))},t.\u0275cmp=Ke({type:t,selectors:[["app-change-car-pooling"]],decls:49,vars:0,consts:[[2,"height","100%","width","100%","display","flex","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black","align-items","center"],[1,"up_bar",2,"width","100%","display","flex","align-items","center","justify-content","start","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["routerLink","/account","name","chevron-back-outline",2,"font-size","2rem"],[1,"card1",2,"width","95%","padding-top","0.5rem","padding-bottom","1rem","margin-top","1rem","margin-bottom","1rem"],[1,"input1",2,"margin-top","0rem","width","95%","padding-left","0.5rem"],[1,"material-symbols-outlined","notranslate"],["type","text","id","account-car-pooling-name-input","placeholder","Nome e Cognome",1,"field1"],[1,"input1",2,"margin-top","0rem","width","95%","padding-left","0.5rem","margin-top","0.5rem"],["type","number","id","account-car-pooling-seats-input","placeholder","Posti disponibili",1,"field1"],["type","text","id","account-car-pooling-location-input","placeholder","Zona",1,"field1"],["type","text","id","account-car-pooling-brand-model-input","placeholder","Marchio/modello",1,"field1"],["type","text","id","account-car-pooling-color-input","placeholder","Colore",1,"field1"],["type","text","id","account-car-pooling-type-input","placeholder","Tipologia",1,"field1"],["type","text","id","account-car-pooling-car-signature-input","placeholder","Targa",1,"field1"],["type","number","id","account-car-pooling-phone-input","placeholder","Numero di telefono contatto",1,"field1"],["type","number","id","account-car-pooling-money-input","placeholder","Quota",1,"field1"],["id","car-pooling-available-selector",1,"input1",2,"width","95%","margin-top","0.5rem"],["value","not-available"],["value","available"],[1,"button2",2,"width","95%","height","2.5rem","margin-top","1rem",3,"click"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"div",1),$e(2,"ion-icon",2),x(3,"h3"),ae(4,"La mia auto"),k()(),x(5,"div",3)(6,"div",4)(7,"span",5),ae(8,"person"),k(),$e(9,"input",6),k(),x(10,"div",7)(11,"span",5),ae(12,"airline_seat_recline_extra"),k(),$e(13,"input",8),k(),x(14,"div",7)(15,"span",5),ae(16,"location_on"),k(),$e(17,"input",9),k(),x(18,"div",7)(19,"span",5),ae(20,"directions_car"),k(),$e(21,"input",10),k(),x(22,"div",7)(23,"span",5),ae(24,"palette"),k(),$e(25,"input",11),k(),x(26,"div",7)(27,"span",5),ae(28,"blur_short"),k(),$e(29,"input",12),k(),x(30,"div",7)(31,"span",5),ae(32,"more_horiz"),k(),$e(33,"input",13),k(),x(34,"div",7)(35,"span",5),ae(36,"phone"),k(),$e(37,"input",14),k(),x(38,"div",7)(39,"span",5),ae(40,"euro_symbol"),k(),$e(41,"input",15),k(),x(42,"select",16)(43,"option",17),ae(44,"Non disponibile"),k(),x(45,"option",18),ae(46,"Disponibile"),k()(),x(47,"button",19),kt("click",function(){return i.saveCarPooling()}),ae(48,"Salva"),k()()())},dependencies:[el,qc,Ks,IS,wS]}),e})()},{path:"log",component:bIe},{path:"login",component:wIe},{path:"register",component:CIe},{path:"home",component:Jye},{path:"add",component:fIe},{path:"search",component:eIe},{path:"car-pooling",component:DIe},{path:"spot",component:RIe},{path:"notifications",component:tIe}];let MIe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Uo({type:t,bootstrap:[sj]}),t.\u0275inj=On({imports:[tR.forRoot(xIe,{preloadingStrategy:Qie}),tR]}),e})();const mW_firebaseConfig={apiKey:"AIzaSyCBAWFeVOqgBOCrTH9pDMjG_1DA6lbJZdA",authDomain:"codb-54514.firebaseapp.com",databaseURL:"https://codb-54514-default-rtdb.europe-west1.firebasedatabase.app",projectId:"codb-54514",storageBucket:"codb-54514.appspot.com",messagingSenderId:"377890774552",appId:"1:377890774552:web:4f408209f000ade59ead6d",measurementId:"G-CJ7SJDWPXP"};let NIe=(()=>{var t;class e{constructor(r){this.firebaseService=r,this.firebaseService.initialize()}}return(t=e).\u0275fac=function(r){return new(r||t)(Ve(nc))},t.\u0275mod=Uo({type:t,bootstrap:[sj]}),t.\u0275inj=On({providers:[{provide:Ia,useClass:T2}],imports:[cte,fle.forRoot(),MIe,Ole.initializeApp(mW_firebaseConfig),jle,tR,Mne]}),e})();ate().bootstrapModule(NIe).catch(t=>console.log(t))},8996:(zn,Vt,ce)=>{var y={"./ion-accordion_2.entry.js":[2375,2076,2375],"./ion-action-sheet.entry.js":[8814,2076,8814],"./ion-alert.entry.js":[5222,2076,5222],"./ion-app_8.entry.js":[7720,2076,7720],"./ion-avatar_3.entry.js":[1049,1049],"./ion-back-button.entry.js":[3162,2076,3162],"./ion-backdrop.entry.js":[7240,7240],"./ion-breadcrumb_2.entry.js":[8314,2076,8314],"./ion-button_2.entry.js":[4591,4591],"./ion-card_5.entry.js":[8584,8584],"./ion-checkbox.entry.js":[3511,2076,3511],"./ion-chip.entry.js":[6024,6024],"./ion-col_3.entry.js":[5100,5100],"./ion-datetime-button.entry.js":[7428,771,7428],"./ion-datetime_3.entry.js":[5266,771,2076,2885],"./ion-fab_3.entry.js":[4463,2076,4463],"./ion-img.entry.js":[4183,4183],"./ion-infinite-scroll_2.entry.js":[4171,2076,4171],"./ion-input.entry.js":[9344,2076,9344],"./ion-item-option_3.entry.js":[5949,2076,5949],"./ion-item_8.entry.js":[3506,2076,3506],"./ion-loading.entry.js":[7372,2076,7372],"./ion-menu_3.entry.js":[2075,2076,2075],"./ion-modal.entry.js":[441,2076,441],"./ion-nav_2.entry.js":[5712,2076,5712],"./ion-picker-column-internal.entry.js":[1433,2076,1433],"./ion-picker-internal.entry.js":[2628,2628],"./ion-popover.entry.js":[6433,2076,6433],"./ion-progress-bar.entry.js":[9977,9977],"./ion-radio_2.entry.js":[8066,2076,8066],"./ion-range.entry.js":[8477,2076,8477],"./ion-refresher_2.entry.js":[5197,2076,5197],"./ion-reorder_2.entry.js":[7030,2076,7030],"./ion-ripple-effect.entry.js":[964,964],"./ion-route_4.entry.js":[8970,8970],"./ion-searchbar.entry.js":[8193,2076,8193],"./ion-segment_2.entry.js":[2560,2076,2560],"./ion-select_3.entry.js":[7076,2076,7076],"./ion-spinner.entry.js":[8805,2076,8805],"./ion-split-pane.entry.js":[5887,5887],"./ion-tab-bar_2.entry.js":[4406,2076,4406],"./ion-tab_2.entry.js":[1102,1102],"./ion-text.entry.js":[1577,1577],"./ion-textarea.entry.js":[2348,2076,2348],"./ion-toast.entry.js":[2415,2076,2415],"./ion-toggle.entry.js":[3814,2076,3814]};function Fe(G){if(!ce.o(y,G))return Promise.resolve().then(()=>{var Ze=new Error("Cannot find module '"+G+"'");throw Ze.code="MODULE_NOT_FOUND",Ze});var We=y[G],Pt=We[0];return Promise.all(We.slice(1).map(ce.e)).then(()=>ce(Pt))}Fe.keys=()=>Object.keys(y),Fe.id=8996,zn.exports=Fe},3345:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{A:()=>be});var y=ce(1076),Fe=ce(1362),G=ce(7852),We=ce(8041);class Pt{constructor(J,Q){this._delegate=J,this.firebase=Q,(0,G._addComponent)(J,new Fe.uA("app-compat",()=>this,"PUBLIC")),this.container=J.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this._delegate.automaticDataCollectionEnabled=J}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(J=>{this._delegate.checkDestroyed(),J()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(J,Q=G._DEFAULT_ENTRY_NAME){var Z;this._delegate.checkDestroyed();const Oe=this._delegate.container.getProvider(J);return!Oe.isInitialized()&&"EXPLICIT"===(null===(Z=Oe.getComponent())||void 0===Z?void 0:Z.instantiationMode)&&Oe.initialize(),Oe.getImmediate({identifier:Q})}_removeServiceInstance(J,Q=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(J).clearInstance(Q)}_addComponent(J){(0,G._addComponent)(this._delegate,J)}_addOrOverwriteComponent(J){(0,G._addOrOverwriteComponent)(this._delegate,J)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const q=new y.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ne=function ot(){const Pe=function Je(Pe){const J={},Q={__esModule:!0,initializeApp:function Ne(P,O={}){const D=G.initializeApp(P,O);if((0,y.gR)(J,D.name))return J[D.name];const j=new Pe(D,Q);return J[D.name]=j,j},app:Oe,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function ke(P){const O=P.name,D=O.replace("-compat","");if(G._registerComponent(P)&&"PUBLIC"===P.type){const j=(ee=Oe())=>{if("function"!=typeof ee[D])throw q.create("invalid-app-argument",{appName:O});return ee[D]()};void 0!==P.serviceProps&&(0,y.zw)(j,P.serviceProps),Q[D]=j,Pe.prototype[D]=function(...ee){return this._getService.bind(this,O).apply(this,P.multipleInstances?ee:[])}}return"PUBLIC"===P.type?Q[D]:null},removeApp:function Z(P){delete J[P]},useAsService:function nt(P,O){return"serverAuth"===O?null:O},modularAPIs:G}};function Oe(P){if(!(0,y.gR)(J,P=P||G._DEFAULT_ENTRY_NAME))throw q.create("no-app",{appName:P});return J[P]}return Q.default=Q,Object.defineProperty(Q,"apps",{get:function ze(){return Object.keys(J).map(P=>J[P])}}),Oe.App=Pe,Q}(Pt);return Pe.INTERNAL=Object.assign(Object.assign({},Pe.INTERNAL),{createFirebaseNamespace:ot,extendNamespace:function J(Q){(0,y.zw)(Pe,Q)},createSubscribe:y.tD,ErrorFactory:y.FA,deepExtend:y.zw}),Pe}(),X=new We.Vy("@firebase/app-compat");if((0,y.Bd)()&&void 0!==self.firebase){X.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pe=self.firebase.SDK_VERSION;Pe&&Pe.indexOf("LITE")>=0&&X.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=ne;!function Ie(Pe){(0,G.registerVersion)("@firebase/app-compat","0.2.29",Pe)}()},7852:(zn,Vt,ce)=>{"use strict";ce.r(Vt),ce.d(Vt,{FirebaseError:()=>We.g,SDK_VERSION:()=>Wi,_DEFAULT_ENTRY_NAME:()=>Qt,_addComponent:()=>Ai,_addOrOverwriteComponent:()=>Lr,_apps:()=>Nn,_clearComponents:()=>yi,_components:()=>Gr,_getProvider:()=>Di,_registerComponent:()=>io,_removeServiceInstance:()=>Gi,deleteApp:()=>Si,getApp:()=>os,getApps:()=>Rs,initializeApp:()=>is,onLog:()=>$o,registerVersion:()=>Bo,setLogLevel:()=>Un});var y=ce(467),Fe=ce(1362),G=ce(8041),We=ce(1076);const Pt=(Ee,se)=>se.some(Le=>Ee instanceof Le);let Ze,q;const ne=new WeakMap,X=new WeakMap,we=new WeakMap,de=new WeakMap,Ie=new WeakMap;let J={get(Ee,se,Le){if(Ee instanceof IDBTransaction){if("done"===se)return X.get(Ee);if("objectStoreNames"===se)return Ee.objectStoreNames||we.get(Ee);if("store"===se)return Le.objectStoreNames[1]?void 0:Le.objectStore(Le.objectStoreNames[0])}return Ne(Ee[se])},set:(Ee,se,Le)=>(Ee[se]=Le,!0),has:(Ee,se)=>Ee instanceof IDBTransaction&&("done"===se||"store"===se)||se in Ee};function Oe(Ee){return"function"==typeof Ee?function Z(Ee){return Ee!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ot(){return q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ee)?function(...se){return Ee.apply(ze(this),se),Ne(ne.get(this))}:function(...se){return Ne(Ee.apply(ze(this),se))}:function(se,...Le){const vt=Ee.call(ze(this),se,...Le);return we.set(vt,se.sort?se.sort():[se]),Ne(vt)}}(Ee):(Ee instanceof IDBTransaction&&function Pe(Ee){if(X.has(Ee))return;const se=new Promise((Le,vt)=>{const Ht=()=>{Ee.removeEventListener("complete",Ft),Ee.removeEventListener("error",an),Ee.removeEventListener("abort",an)},Ft=()=>{Le(),Ht()},an=()=>{vt(Ee.error||new DOMException("AbortError","AbortError")),Ht()};Ee.addEventListener("complete",Ft),Ee.addEventListener("error",an),Ee.addEventListener("abort",an)});X.set(Ee,se)}(Ee),Pt(Ee,function Je(){return Ze||(Ze=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ee,J):Ee)}function Ne(Ee){if(Ee instanceof IDBRequest)return function be(Ee){const se=new Promise((Le,vt)=>{const Ht=()=>{Ee.removeEventListener("success",Ft),Ee.removeEventListener("error",an)},Ft=()=>{Le(Ne(Ee.result)),Ht()},an=()=>{vt(Ee.error),Ht()};Ee.addEventListener("success",Ft),Ee.addEventListener("error",an)});return se.then(Le=>{Le instanceof IDBCursor&&ne.set(Le,Ee)}).catch(()=>{}),Ie.set(se,Ee),se}(Ee);if(de.has(Ee))return de.get(Ee);const se=Oe(Ee);return se!==Ee&&(de.set(Ee,se),Ie.set(se,Ee)),se}const ze=Ee=>Ie.get(Ee),P=["get","getKey","getAll","getAllKeys","count"],O=["put","add","delete","clear"],D=new Map;function j(Ee,se){if(!(Ee instanceof IDBDatabase)||se in Ee||"string"!=typeof se)return;if(D.get(se))return D.get(se);const Le=se.replace(/FromIndex$/,""),vt=se!==Le,Ht=O.includes(Le);if(!(Le in(vt?IDBIndex:IDBObjectStore).prototype)||!Ht&&!P.includes(Le))return;const Ft=function(){var an=(0,y.A)(function*(fr,...jn){const Xn=this.transaction(fr,Ht?"readwrite":"readonly");let ss=Xn.store;return vt&&(ss=ss.index(jn.shift())),(yield Promise.all([ss[Le](...jn),Ht&&Xn.done]))[0]});return function(jn){return an.apply(this,arguments)}}();return D.set(se,Ft),Ft}!function Q(Ee){J=Ee(J)}(Ee=>({...Ee,get:(se,Le,vt)=>j(se,Le)||Ee.get(se,Le,vt),has:(se,Le)=>!!j(se,Le)||Ee.has(se,Le)}));class ee{constructor(se){this.container=se}getPlatformInfoString(){return this.container.getProviders().map(Le=>{if(function re(Ee){const se=Ee.getComponent();return"VERSION"===(null==se?void 0:se.type)}(Le)){const vt=Le.getImmediate();return`${vt.library}/${vt.version}`}return null}).filter(Le=>Le).join(" ")}}const pe="@firebase/app",Dt=new G.Vy("@firebase/app"),Qt="[DEFAULT]",ur={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Nn=new Map,Gr=new Map;function Ai(Ee,se){try{Ee.container.addComponent(se)}catch(Le){Dt.debug(`Component ${se.name} failed to register with FirebaseApp ${Ee.name}`,Le)}}function Lr(Ee,se){Ee.container.addOrOverwriteComponent(se)}function io(Ee){const se=Ee.name;if(Gr.has(se))return Dt.debug(`There were multiple attempts to register component ${se}.`),!1;Gr.set(se,Ee);for(const Le of Nn.values())Ai(Le,Ee);return!0}function Di(Ee,se){const Le=Ee.container.getProvider("heartbeat").getImmediate({optional:!0});return Le&&Le.triggerHeartbeat(),Ee.container.getProvider(se)}function Gi(Ee,se,Le=Qt){Di(Ee,se).clearInstance(Le)}function yi(){Gr.clear()}const Zr=new We.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class $n{constructor(se,Le,vt){this._isDeleted=!1,this._options=Object.assign({},se),this._config=Object.assign({},Le),this._name=Le.name,this._automaticDataCollectionEnabled=Le.automaticDataCollectionEnabled,this._container=vt,this.container.addComponent(new Fe.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(se){this.checkDestroyed(),this._automaticDataCollectionEnabled=se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(se){this._isDeleted=se}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}const Wi="10.9.0";function is(Ee,se={}){let Le=Ee;"object"!=typeof se&&(se={name:se});const vt=Object.assign({name:Qt,automaticDataCollectionEnabled:!1},se),Ht=vt.name;if("string"!=typeof Ht||!Ht)throw Zr.create("bad-app-name",{appName:String(Ht)});if(Le||(Le=(0,We.T9)()),!Le)throw Zr.create("no-options");const Ft=Nn.get(Ht);if(Ft){if((0,We.bD)(Le,Ft.options)&&(0,We.bD)(vt,Ft.config))return Ft;throw Zr.create("duplicate-app",{appName:Ht})}const an=new Fe.h1(Ht);for(const jn of Gr.values())an.addComponent(jn);const fr=new $n(Le,vt,an);return Nn.set(Ht,fr),fr}function os(Ee=Qt){const se=Nn.get(Ee);if(!se&&Ee===Qt&&(0,We.T9)())return is();if(!se)throw Zr.create("no-app",{appName:Ee});return se}function Rs(){return Array.from(Nn.values())}function Si(Ee){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,y.A)(function*(Ee){const se=Ee.name;Nn.has(se)&&(Nn.delete(se),yield Promise.all(Ee.container.getProviders().map(Le=>Le.delete())),Ee.isDeleted=!0)})).apply(this,arguments)}function Bo(Ee,se,Le){var vt;let Ht=null!==(vt=ur[Ee])&&void 0!==vt?vt:Ee;Le&&(Ht+=`-${Le}`);const Ft=Ht.match(/\s|\//),an=se.match(/\s|\//);if(Ft||an){const fr=[`Unable to register library "${Ht}" with version "${se}":`];return Ft&&fr.push(`library name "${Ht}" contains illegal characters (whitespace or "/")`),Ft&&an&&fr.push("and"),an&&fr.push(`version name "${se}" contains illegal characters (whitespace or "/")`),void Dt.warn(fr.join(" "))}io(new Fe.uA(`${Ht}-version`,()=>({library:Ht,version:se}),"VERSION"))}function $o(Ee,se){if(null!==Ee&&"function"!=typeof Ee)throw Zr.create("invalid-log-argument");(0,G.Ey)(Ee,se)}function Un(Ee){(0,G.He)(Ee)}const Ps="firebase-heartbeat-database",ta=1,B="firebase-heartbeat-store";let M=null;function $(){return M||(M=function ke(Ee,se,{blocked:Le,upgrade:vt,blocking:Ht,terminated:Ft}={}){const an=indexedDB.open(Ee,se),fr=Ne(an);return vt&&an.addEventListener("upgradeneeded",jn=>{vt(Ne(an.result),jn.oldVersion,jn.newVersion,Ne(an.transaction),jn)}),Le&&an.addEventListener("blocked",jn=>Le(jn.oldVersion,jn.newVersion,jn)),fr.then(jn=>{Ft&&jn.addEventListener("close",()=>Ft()),Ht&&jn.addEventListener("versionchange",Xn=>Ht(Xn.oldVersion,Xn.newVersion,Xn))}).catch(()=>{}),fr}(Ps,ta,{upgrade:(Ee,se)=>{if(0===se)try{Ee.createObjectStore(B)}catch(Le){console.warn(Le)}}}).catch(Ee=>{throw Zr.create("idb-open",{originalErrorMessage:Ee.message})})),M}function K(){return(K=(0,y.A)(function*(Ee){try{const Le=(yield $()).transaction(B),vt=yield Le.objectStore(B).get(Ot(Ee));return yield Le.done,vt}catch(se){if(se instanceof We.g)Dt.warn(se.message);else{const Le=Zr.create("idb-get",{originalErrorMessage:null==se?void 0:se.message});Dt.warn(Le.message)}}})).apply(this,arguments)}function ut(Ee,se){return bt.apply(this,arguments)}function bt(){return(bt=(0,y.A)(function*(Ee,se){try{const vt=(yield $()).transaction(B,"readwrite");yield vt.objectStore(B).put(se,Ot(Ee)),yield vt.done}catch(Le){if(Le instanceof We.g)Dt.warn(Le.message);else{const vt=Zr.create("idb-set",{originalErrorMessage:null==Le?void 0:Le.message});Dt.warn(vt.message)}}})).apply(this,arguments)}function Ot(Ee){return`${Ee.name}!${Ee.options.appId}`}class Vr{constructor(se){this.container=se,this._heartbeatsCache=null;const Le=this.container.getProvider("app").getImmediate();this._storage=new li(Le),this._heartbeatsCachePromise=this._storage.read().then(vt=>(this._heartbeatsCache=vt,vt))}triggerHeartbeat(){var se=this;return(0,y.A)(function*(){var Le,vt;const Ft=se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),an=on();if((null!=(null===(Le=se._heartbeatsCache)||void 0===Le?void 0:Le.heartbeats)||(se._heartbeatsCache=yield se._heartbeatsCachePromise,null!=(null===(vt=se._heartbeatsCache)||void 0===vt?void 0:vt.heartbeats)))&&se._heartbeatsCache.lastSentHeartbeatDate!==an&&!se._heartbeatsCache.heartbeats.some(fr=>fr.date===an))return se._heartbeatsCache.heartbeats.push({date:an,agent:Ft}),se._heartbeatsCache.heartbeats=se._heartbeatsCache.heartbeats.filter(fr=>{const jn=new Date(fr.date).valueOf();return Date.now()-jn<=2592e6}),se._storage.overwrite(se._heartbeatsCache)})()}getHeartbeatsHeader(){var se=this;return(0,y.A)(function*(){var Le;if(null===se._heartbeatsCache&&(yield se._heartbeatsCachePromise),null==(null===(Le=se._heartbeatsCache)||void 0===Le?void 0:Le.heartbeats)||0===se._heartbeatsCache.heartbeats.length)return"";const vt=on(),{heartbeatsToSend:Ht,unsentEntries:Ft}=function Se(Ee,se=1024){const Le=[];let vt=Ee.slice();for(const Ht of Ee){const Ft=Le.find(an=>an.agent===Ht.agent);if(Ft){if(Ft.dates.push(Ht.date),qi(Le)>se){Ft.dates.pop();break}}else if(Le.push({agent:Ht.agent,dates:[Ht.date]}),qi(Le)>se){Le.pop();break}vt=vt.slice(1)}return{heartbeatsToSend:Le,unsentEntries:vt}}(se._heartbeatsCache.heartbeats),an=(0,We.Uj)(JSON.stringify({version:2,heartbeats:Ht}));return se._heartbeatsCache.lastSentHeartbeatDate=vt,Ft.length>0?(se._heartbeatsCache.heartbeats=Ft,yield se._storage.overwrite(se._heartbeatsCache)):(se._heartbeatsCache.heartbeats=[],se._storage.overwrite(se._heartbeatsCache)),an})()}}function on(){return(new Date).toISOString().substring(0,10)}class li{constructor(se){this.app=se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.A)(function*(){return!!(0,We.zW)()&&(0,We.eX)().then(()=>!0).catch(()=>!1)})()}read(){var se=this;return(0,y.A)(function*(){if(yield se._canUseIndexedDBPromise){const vt=yield function Ce(Ee){return K.apply(this,arguments)}(se.app);return null!=vt&&vt.heartbeats?vt:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(se){var Le=this;return(0,y.A)(function*(){var vt;if(yield Le._canUseIndexedDBPromise){const Ft=yield Le.read();return ut(Le.app,{lastSentHeartbeatDate:null!==(vt=se.lastSentHeartbeatDate)&&void 0!==vt?vt:Ft.lastSentHeartbeatDate,heartbeats:se.heartbeats})}})()}add(se){var Le=this;return(0,y.A)(function*(){var vt;if(yield Le._canUseIndexedDBPromise){const Ft=yield Le.read();return ut(Le.app,{lastSentHeartbeatDate:null!==(vt=se.lastSentHeartbeatDate)&&void 0!==vt?vt:Ft.lastSentHeartbeatDate,heartbeats:[...Ft.heartbeats,...se.heartbeats]})}})()}}function qi(Ee){return(0,We.Uj)(JSON.stringify({version:2,heartbeats:Ee})).length}!function xs(Ee){io(new Fe.uA("platform-logger",se=>new ee(se),"PRIVATE")),io(new Fe.uA("heartbeat",se=>new Vr(se),"PRIVATE")),Bo(pe,"0.9.29",Ee),Bo(pe,"0.9.29","esm2017"),Bo("fire-js","")}("")},1362:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{Kq:()=>Pt,h1:()=>Je,uA:()=>G});var y=ce(467),Fe=ce(1076);class G{constructor(ne,X,we){this.name=ne,this.instanceFactory=X,this.type=we,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ne){return this.instantiationMode=ne,this}setMultipleInstances(ne){return this.multipleInstances=ne,this}setServiceProps(ne){return this.serviceProps=ne,this}setInstanceCreatedCallback(ne){return this.onInstanceCreated=ne,this}}const We="[DEFAULT]";class Pt{constructor(ne,X){this.name=ne,this.container=X,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ne){const X=this.normalizeInstanceIdentifier(ne);if(!this.instancesDeferred.has(X)){const we=new Fe.cY;if(this.instancesDeferred.set(X,we),this.isInitialized(X)||this.shouldAutoInitialize())try{const de=this.getOrInitializeService({instanceIdentifier:X});de&&we.resolve(de)}catch{}}return this.instancesDeferred.get(X).promise}getImmediate(ne){var X;const we=this.normalizeInstanceIdentifier(null==ne?void 0:ne.identifier),de=null!==(X=null==ne?void 0:ne.optional)&&void 0!==X&&X;if(!this.isInitialized(we)&&!this.shouldAutoInitialize()){if(de)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:we})}catch(Ie){if(de)return null;throw Ie}}getComponent(){return this.component}setComponent(ne){if(ne.name!==this.name)throw Error(`Mismatching Component ${ne.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ne,this.shouldAutoInitialize()){if(function q(ot){return"EAGER"===ot.instantiationMode}(ne))try{this.getOrInitializeService({instanceIdentifier:We})}catch{}for(const[X,we]of this.instancesDeferred.entries()){const de=this.normalizeInstanceIdentifier(X);try{const Ie=this.getOrInitializeService({instanceIdentifier:de});we.resolve(Ie)}catch{}}}}clearInstance(ne=We){this.instancesDeferred.delete(ne),this.instancesOptions.delete(ne),this.instances.delete(ne)}delete(){var ne=this;return(0,y.A)(function*(){const X=Array.from(ne.instances.values());yield Promise.all([...X.filter(we=>"INTERNAL"in we).map(we=>we.INTERNAL.delete()),...X.filter(we=>"_delete"in we).map(we=>we._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ne=We){return this.instances.has(ne)}getOptions(ne=We){return this.instancesOptions.get(ne)||{}}initialize(ne={}){const{options:X={}}=ne,we=this.normalizeInstanceIdentifier(ne.instanceIdentifier);if(this.isInitialized(we))throw Error(`${this.name}(${we}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const de=this.getOrInitializeService({instanceIdentifier:we,options:X});for(const[Ie,be]of this.instancesDeferred.entries())we===this.normalizeInstanceIdentifier(Ie)&&be.resolve(de);return de}onInit(ne,X){var we;const de=this.normalizeInstanceIdentifier(X),Ie=null!==(we=this.onInitCallbacks.get(de))&&void 0!==we?we:new Set;Ie.add(ne),this.onInitCallbacks.set(de,Ie);const be=this.instances.get(de);return be&&ne(be,de),()=>{Ie.delete(ne)}}invokeOnInitCallbacks(ne,X){const we=this.onInitCallbacks.get(X);if(we)for(const de of we)try{de(ne,X)}catch{}}getOrInitializeService({instanceIdentifier:ne,options:X={}}){let we=this.instances.get(ne);if(!we&&this.component&&(we=this.component.instanceFactory(this.container,{instanceIdentifier:(ot=ne,ot===We?void 0:ot),options:X}),this.instances.set(ne,we),this.instancesOptions.set(ne,X),this.invokeOnInitCallbacks(we,ne),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ne,we)}catch{}var ot;return we||null}normalizeInstanceIdentifier(ne=We){return this.component?this.component.multipleInstances?ne:We:ne}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Je{constructor(ne){this.name=ne,this.providers=new Map}addComponent(ne){const X=this.getProvider(ne.name);if(X.isComponentSet())throw new Error(`Component ${ne.name} has already been registered with ${this.name}`);X.setComponent(ne)}addOrOverwriteComponent(ne){this.getProvider(ne.name).isComponentSet()&&this.providers.delete(ne.name),this.addComponent(ne)}getProvider(ne){if(this.providers.has(ne))return this.providers.get(ne);const X=new Pt(ne,this);return this.providers.set(ne,X),X}getProviders(){return Array.from(this.providers.values())}}},8041:(zn,Vt,ce)=>{"use strict";ce.d(Vt,{$b:()=>Fe,Ey:()=>ot,He:()=>Je,Vy:()=>q});const y=[];var Fe=function(ne){return ne[ne.DEBUG=0]="DEBUG",ne[ne.VERBOSE=1]="VERBOSE",ne[ne.INFO=2]="INFO",ne[ne.WARN=3]="WARN",ne[ne.ERROR=4]="ERROR",ne[ne.SILENT=5]="SILENT",ne}(Fe||{});const G={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},We=Fe.INFO,Pt={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},Ze=(ne,X,...we)=>{if(X<ne.logLevel)return;const de=(new Date).toISOString(),Ie=Pt[X];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${X})`);console[Ie](`[${de}]  ${ne.name}:`,...we)};class q{constructor(X){this.name=X,this._logLevel=We,this._logHandler=Ze,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(X){if(!(X in Fe))throw new TypeError(`Invalid value "${X}" assigned to \`logLevel\``);this._logLevel=X}setLogLevel(X){this._logLevel="string"==typeof X?G[X]:X}get logHandler(){return this._logHandler}set logHandler(X){if("function"!=typeof X)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=X}get userLogHandler(){return this._userLogHandler}set userLogHandler(X){this._userLogHandler=X}debug(...X){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...X),this._logHandler(this,Fe.DEBUG,...X)}log(...X){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...X),this._logHandler(this,Fe.VERBOSE,...X)}info(...X){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...X),this._logHandler(this,Fe.INFO,...X)}warn(...X){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...X),this._logHandler(this,Fe.WARN,...X)}error(...X){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...X),this._logHandler(this,Fe.ERROR,...X)}}function Je(ne){y.forEach(X=>{X.setLogLevel(ne)})}function ot(ne,X){for(const we of y){let de=null;X&&X.level&&(de=G[X.level]),we.userLogHandler=null===ne?null:(Ie,be,...Pe)=>{const J=Pe.map(Q=>{if(null==Q)return null;if("string"==typeof Q)return Q;if("number"==typeof Q||"boolean"==typeof Q)return Q.toString();if(Q instanceof Error)return Q.message;try{return JSON.stringify(Q)}catch{return null}}).filter(Q=>Q).join(" ");be>=(null!=de?de:Ie.logLevel)&&ne({level:Fe[be].toLowerCase(),message:J,args:Pe,type:Ie.name})}}}},6020:(zn,Vt,ce)=>{"use strict";ce.r(Vt);var y=ce(467),Fe=ce(3345),G=ce(1076),We=ce(7852),Pt=ce(8041),Ze=ce(1635),q=ce(1362);const ot={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const be=function de(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Pe=function Ie(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},J=new G.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Z=new Pt.Vy("@firebase/auth");function Ne(f,...u){Z.logLevel<=Pt.$b.ERROR&&Z.error(`Auth (${We.SDK_VERSION}): ${f}`,...u)}function ze(f,...u){throw O(f,...u)}function ke(f,...u){return O(f,...u)}function nt(f,u,d){const g=Object.assign(Object.assign({},Pe()),{[u]:d});return new G.FA("auth","Firebase",g).create(u,{appName:f.name})}function P(f,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&ze(f,"argument-error"),nt(f,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function O(f,...u){if("string"!=typeof f){const d=u[0],g=[...u.slice(1)];return g[0]&&(g[0].appName=f.name),f._errorFactory.create(d,...g)}return J.create(f,...u)}function D(f,u,...d){if(!f)throw O(u,...d)}function j(f){const u="INTERNAL ASSERTION FAILED: "+f;throw Ne(u),new Error(u)}function ee(f,u){f||j(u)}function re(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function pe(){return"http:"===et()||"https:"===et()}function et(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Te{constructor(u,d){this.shortDelay=u,this.longDelay=d,ee(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,G.jZ)()||(0,G.lV)()}get(){return function Dt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pe()||(0,G.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function L(f,u){ee(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class R{static initialize(u,d,g){this.fetchImpl=u,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void j("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void j("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void j("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const N={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},W=new Te(3e4,6e4);function le(f,u){return f.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:f.tenantId}):u}function Y(f,u,d,g){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,y.A)(function*(f,u,d,g,v={}){return dt(f,v,(0,y.A)(function*(){let C={},F={};g&&("GET"===u?F=g:C={body:JSON.stringify(g)});const te=(0,G.Am)(Object.assign({key:f.config.apiKey},F)).slice(1),Me=yield f._getAdditionalHeaders();return Me["Content-Type"]="application/json",f.languageCode&&(Me["X-Firebase-Locale"]=f.languageCode),R.fetch()(pn(f,f.config.apiHost,d,te),Object.assign({method:u,headers:Me,referrerPolicy:"no-referrer"},C))}))})).apply(this,arguments)}function dt(f,u,d){return rt.apply(this,arguments)}function rt(){return(rt=(0,y.A)(function*(f,u,d){f._canInitEmulator=!1;const g=Object.assign(Object.assign({},N),u);try{const v=new un(f),C=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const F=yield C.json();if("needConfirmation"in F)throw jt(f,"account-exists-with-different-credential",F);if(C.ok&&!("errorMessage"in F))return F;{const te=C.ok?F.errorMessage:F.error.message,[Me,pt]=te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Me)throw jt(f,"credential-already-in-use",F);if("EMAIL_EXISTS"===Me)throw jt(f,"email-already-in-use",F);if("USER_DISABLED"===Me)throw jt(f,"user-disabled",F);const Rt=g[Me]||Me.toLowerCase().replace(/[_\s]+/g,"-");if(pt)throw nt(f,Rt,pt);ze(f,Rt)}}catch(v){if(v instanceof G.g)throw v;ze(f,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function ft(f,u,d,g){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,y.A)(function*(f,u,d,g,v={}){const C=yield Y(f,u,d,g,v);return"mfaPendingCredential"in C&&ze(f,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function pn(f,u,d,g){const v=`${u}${d}?${g}`;return f.config.emulator?L(f.config,v):`${f.config.apiScheme}://${v}`}function wt(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class un{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(ke(this.auth,"network-request-failed")),W.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jt(f,u,d){const g={appName:f.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=ke(f,u,g);return v.customData._tokenResponse=d,v}function Ae(f){return void 0!==f&&void 0!==f.getResponse}function ue(f){return void 0!==f&&void 0!==f.enterprise}class ye{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return wt(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function qt(){return(qt=(0,y.A)(function*(f){return(yield Y(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function gn(f,u){return tn.apply(this,arguments)}function tn(){return(tn=(0,y.A)(function*(f,u){return Y(f,"GET","/v2/recaptchaConfig",le(f,u))})).apply(this,arguments)}function Qt(){return(Qt=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function Nn(){return(Nn=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Ai(){return(Ai=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function Lr(f){if(f)try{const u=new Date(Number(f));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function Gi(){return(Gi=(0,y.A)(function*(f,u=!1){const d=(0,G.Ku)(f),g=yield d.getIdToken(u),v=si(g);D(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const C="object"==typeof v.firebase?v.firebase:void 0,F=null==C?void 0:C.sign_in_provider;return{claims:v,token:g,authTime:Lr(yi(v.auth_time)),issuedAtTime:Lr(yi(v.iat)),expirationTime:Lr(yi(v.exp)),signInProvider:F||null,signInSecondFactor:(null==C?void 0:C.sign_in_second_factor)||null}})).apply(this,arguments)}function yi(f){return 1e3*Number(f)}function si(f){const[u,d,g]=f.split(".");if(void 0===u||void 0===d||void 0===g)return Ne("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,G.u)(d);return v?JSON.parse(v):(Ne("Failed to decode base64 JWT payload"),null)}catch(v){return Ne("Caught error parsing JWT payload as JSON",null==v?void 0:v.toString()),null}}function $n(f,u){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,y.A)(function*(f,u,d=!1){if(d)return u;try{return yield u}catch(g){throw g instanceof G.g&&function is({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(g)&&f.auth.currentUser===f&&(yield f.auth.signOut()),g}})).apply(this,arguments)}class os{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(u);this.timerId=setTimeout((0,y.A)(function*(){yield d.iteration()}),g)}iteration(){var u=this;return(0,y.A)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===(null==d?void 0:d.code)&&u.schedule(!0))}u.schedule()})()}}class Rs{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lr(this.lastLoginAt),this.creationTime=Lr(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Si(f){return Cr.apply(this,arguments)}function Cr(){return Cr=(0,y.A)(function*(f){var u;const d=f.auth,g=yield f.getIdToken(),v=yield $n(f,function Gr(f,u){return Ai.apply(this,arguments)}(d,{idToken:g}));D(null==v?void 0:v.users.length,d,"internal-error");const C=v.users[0];f._notifyReloadListener(C);const F=null!==(u=C.providerUserInfo)&&void 0!==u&&u.length?function Ps(f){return f.map(u=>{var{providerId:d}=u,g=(0,Ze.Tt)(u,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}(C.providerUserInfo):[],te=function Un(f,u){return[...f.filter(g=>!u.some(v=>v.providerId===g.providerId)),...u]}(f.providerData,F),Rt=!!f.isAnonymous&&!(f.email&&C.passwordHash||null!=te&&te.length),tt={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:te,metadata:new Rs(C.createdAt,C.lastLoginAt),isAnonymous:Rt};Object.assign(f,tt)}),Cr.apply(this,arguments)}function $o(){return($o=(0,y.A)(function*(f){const u=(0,G.Ku)(f);yield Si(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function B(){return(B=(0,y.A)(function*(f,u){const d=yield dt(f,{},(0,y.A)(function*(){const g=(0,G.Am)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:v,apiKey:C}=f.config,F=pn(f,v,"/v1/token",`key=${C}`),te=yield f._getAdditionalHeaders();return te["Content-Type"]="application/x-www-form-urlencoded",R.fetch()(F,{method:"POST",headers:te,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function $(){return($=(0,y.A)(function*(f,u){return Y(f,"POST","/v2/accounts:revokeToken",le(f,u))})).apply(this,arguments)}class Ce{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){D(u.idToken,"internal-error"),D(typeof u.idToken<"u","internal-error"),D(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):function Zr(f){const u=si(f);return D(u,"internal-error"),D(typeof u.exp<"u","internal-error"),D(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}getToken(u,d=!1){var g=this;return(0,y.A)(function*(){return D(!g.accessToken||g.refreshToken,u,"user-token-expired"),d||!g.accessToken||g.isExpired?g.refreshToken?(yield g.refresh(u,g.refreshToken),g.accessToken):null:g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var g=this;return(0,y.A)(function*(){const{accessToken:v,refreshToken:C,expiresIn:F}=yield function ta(f,u){return B.apply(this,arguments)}(u,d);g.updateTokensAndExpiration(v,C,Number(F))})()}updateTokensAndExpiration(u,d,g){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(u,d){const{refreshToken:g,accessToken:v,expirationTime:C}=d,F=new Ce;return g&&(D("string"==typeof g,"internal-error",{appName:u}),F.refreshToken=g),v&&(D("string"==typeof v,"internal-error",{appName:u}),F.accessToken=v),C&&(D("number"==typeof C,"internal-error",{appName:u}),F.expirationTime=C),F}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new Ce,this.toJSON())}_performRefresh(){return j("not implemented")}}function K(f,u){D("string"==typeof f||typeof f>"u","internal-error",{appName:u})}class ut{constructor(u){var{uid:d,auth:g,stsTokenManager:v}=u,C=(0,Ze.Tt)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new os(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new Rs(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,y.A)(function*(){const g=yield $n(d,d.stsTokenManager.getToken(d.auth,u));return D(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(u){return function Di(f){return Gi.apply(this,arguments)}(this,u)}reload(){return function Bo(f){return $o.apply(this,arguments)}(this)}_assign(u){this!==u&&(D(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new ut(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){D(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var g=this;return(0,y.A)(function*(){let v=!1;u.idToken&&u.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(u),v=!0),d&&(yield Si(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var u=this;return(0,y.A)(function*(){const d=yield u.getIdToken();return yield $n(u,function Cn(f,u){return Qt.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var g,v,C,F,te,Me,pt,Rt;const tt=null!==(g=d.displayName)&&void 0!==g?g:void 0,xr=null!==(v=d.email)&&void 0!==v?v:void 0,Ho=null!==(C=d.phoneNumber)&&void 0!==C?C:void 0,gm=null!==(F=d.photoURL)&&void 0!==F?F:void 0,ef=null!==(te=d.tenantId)&&void 0!==te?te:void 0,zo=null!==(Me=d._redirectEventId)&&void 0!==Me?Me:void 0,mm=null!==(pt=d.createdAt)&&void 0!==pt?pt:void 0,Pl=null!==(Rt=d.lastLoginAt)&&void 0!==Rt?Rt:void 0,{uid:_m,emailVerified:qI,isAnonymous:vm,providerData:KI,stsTokenManager:hT}=d;D(_m&&hT,u,"internal-error");const mN=Ce.fromJSON(this.name,hT);D("string"==typeof _m,u,"internal-error"),K(tt,u.name),K(xr,u.name),D("boolean"==typeof qI,u,"internal-error"),D("boolean"==typeof vm,u,"internal-error"),K(Ho,u.name),K(gm,u.name),K(ef,u.name),K(zo,u.name),K(mm,u.name),K(Pl,u.name);const QI=new ut({uid:_m,auth:u,email:xr,emailVerified:qI,displayName:tt,isAnonymous:vm,photoURL:gm,phoneNumber:Ho,tenantId:ef,stsTokenManager:mN,createdAt:mm,lastLoginAt:Pl});return KI&&Array.isArray(KI)&&(QI.providerData=KI.map(_N=>Object.assign({},_N))),zo&&(QI._redirectEventId=zo),QI}static _fromIdTokenResponse(u,d,g=!1){return(0,y.A)(function*(){const v=new Ce;v.updateFromServerResponse(d);const C=new ut({uid:d.localId,auth:u,stsTokenManager:v,isAnonymous:g});return yield Si(C),C})()}}const bt=new Map;function Ot(f){ee(f instanceof Function,"Expected a class definition");let u=bt.get(f);return u?(ee(u instanceof f,"Instance stored in cache mismatched with class"),u):(u=new f,bt.set(f,u),u)}const _t=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.A)(function*(){return!0})()}_set(d,g){var v=this;return(0,y.A)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,y.A)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,y.A)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return f.type="NONE",f})();function Vr(f,u,d){return`firebase:${f}:${u}:${d}`}class on{constructor(u,d,g){this.persistence=u,this.auth=d,this.userKey=g;const{config:v,name:C}=this.auth;this.fullUserKey=Vr(this.userKey,v.apiKey,C),this.fullPersistenceKey=Vr("persistence",v.apiKey,C),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,y.A)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?ut._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,y.A)(function*(){if(d.persistence===u)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,g="authUser"){return(0,y.A)(function*(){if(!d.length)return new on(Ot(_t),u,g);const v=(yield Promise.all(d.map(function(){var pt=(0,y.A)(function*(Rt){if(yield Rt._isAvailable())return Rt});return function(Rt){return pt.apply(this,arguments)}}()))).filter(pt=>pt);let C=v[0]||Ot(_t);const F=Vr(g,u.config.apiKey,u.name);let te=null;for(const pt of d)try{const Rt=yield pt._get(F);if(Rt){const tt=ut._fromJSON(u,Rt);pt!==C&&(te=tt),C=pt;break}}catch{}const Me=v.filter(pt=>pt._shouldAllowMigration);return C._shouldAllowMigration&&Me.length?(C=Me[0],te&&(yield C._set(F,te.toJSON())),yield Promise.all(d.map(function(){var pt=(0,y.A)(function*(Rt){if(Rt!==C)try{yield Rt._remove(F)}catch{}});return function(Rt){return pt.apply(this,arguments)}}())),new on(C,u,g)):new on(C,u,g)})()}}function Se(f){const u=f.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(Ee(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(li(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(Le(u))return"Blackberry";if(vt(u))return"Webos";if(qi(u))return"Safari";if((u.includes("chrome/")||xs(u))&&!u.includes("edge/"))return"Chrome";if(se(u))return"Android";{const g=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==g?void 0:g.length))return g[1]}return"Other"}function li(f=(0,G.ZQ)()){return/firefox\//i.test(f)}function qi(f=(0,G.ZQ)()){const u=f.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function xs(f=(0,G.ZQ)()){return/crios\//i.test(f)}function Ee(f=(0,G.ZQ)()){return/iemobile/i.test(f)}function se(f=(0,G.ZQ)()){return/android/i.test(f)}function Le(f=(0,G.ZQ)()){return/blackberry/i.test(f)}function vt(f=(0,G.ZQ)()){return/webos/i.test(f)}function Ht(f=(0,G.ZQ)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function jn(f=(0,G.ZQ)()){return Ht(f)||se(f)||vt(f)||Le(f)||/windows phone/i.test(f)||Ee(f)}function ss(f,u=[]){let d;switch(f){case"Browser":d=Se((0,G.ZQ)());break;case"Worker":d=`${Se((0,G.ZQ)())}-${f}`;break;default:d=f}const g=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${We.SDK_VERSION}/${g}`}class bn{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const g=C=>new Promise((F,te)=>{try{F(u(C))}catch(Me){te(Me)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,y.A)(function*(){if(d.auth.currentUser===u)return;const g=[];try{for(const v of d.queue)yield v(u),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const C of g)try{C()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:null==v?void 0:v.message})}})()}}function vl(){return(vl=(0,y.A)(function*(f,u={}){return Y(f,"GET","/v2/passwordPolicy",le(f,u))})).apply(this,arguments)}class br{constructor(u){var d,g,v,C;const F=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=F.minPasswordLength)&&void 0!==d?d:6,F.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=F.maxPasswordLength),void 0!==F.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=F.containsLowercaseCharacter),void 0!==F.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=F.containsUppercaseCharacter),void 0!==F.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=F.containsNumericCharacter),void 0!==F.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=F.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=u.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(C=u.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,g,v,C,F,te;const Me={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,Me),this.validatePasswordCharacterOptions(u,Me),Me.isValid&&(Me.isValid=null===(d=Me.meetsMinPasswordLength)||void 0===d||d),Me.isValid&&(Me.isValid=null===(g=Me.meetsMaxPasswordLength)||void 0===g||g),Me.isValid&&(Me.isValid=null===(v=Me.containsLowercaseLetter)||void 0===v||v),Me.isValid&&(Me.isValid=null===(C=Me.containsUppercaseLetter)||void 0===C||C),Me.isValid&&(Me.isValid=null===(F=Me.containsNumericCharacter)||void 0===F||F),Me.isValid&&(Me.isValid=null===(te=Me.containsNonAlphanumericCharacter)||void 0===te||te),Me}validatePasswordLengthOptions(u,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=u.length>=g),v&&(d.meetsMaxPasswordLength=u.length<=v)}validatePasswordCharacterOptions(u,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<u.length;v++)g=u.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(u,d,g,v,C){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=C))}}class Kt{constructor(u,d,g,v){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Du(this),this.idTokenSubscription=new Du(this),this.beforeStateQueue=new bn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(u,d){var g=this;return d&&(this._popupRedirectResolver=Ot(d)),this._initializationPromise=this.queue((0,y.A)(function*(){var v,C;if(!g._deleted&&(g.persistenceManager=yield on.create(g,u),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(C=g.currentUser)||void 0===C?void 0:C.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,y.A)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUser(u){var d=this;return(0,y.A)(function*(){var g;const v=yield d.assertedPersistence.getCurrentUser();let C=v,F=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const te=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,Me=null==C?void 0:C._redirectEventId,pt=yield d.tryRedirectSignIn(u);(!te||te===Me)&&null!=pt&&pt.user&&(C=pt.user,F=!0)}if(!C)return d.directlySetCurrentUser(null);if(!C._redirectEventId){if(F)try{yield d.beforeStateQueue.runMiddleware(C)}catch(te){C=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(te))}return C?d.reloadAndSetCurrentUserOrClear(C):d.directlySetCurrentUser(null)}return D(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===C._redirectEventId?d.directlySetCurrentUser(C):d.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(u){var d=this;return(0,y.A)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,y.A)(function*(){try{yield Si(u)}catch(g){if("auth/network-request-failed"!==(null==g?void 0:g.code))return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function en(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var u=this;return(0,y.A)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,y.A)(function*(){const g=u?(0,G.Ku)(u):null;return g&&D(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(u,d=!1){var g=this;return(0,y.A)(function*(){if(!g._deleted)return u&&D(g.tenantId===u.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(u)),g.queue((0,y.A)(function*(){yield g.directlySetCurrentUser(u),g.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,y.A)(function*(){return yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0)})()}setPersistence(u){var d=this;return this.queue((0,y.A)(function*(){yield d.assertedPersistence.setPersistence(Ot(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,y.A)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,y.A)(function*(){const d=yield function ci(f){return vl.apply(this,arguments)}(u),g=new br(d);null===u.tenantId?u._projectPasswordPolicy=g:u._tenantPasswordPolicies[u.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new G.FA("auth","Firebase",u())}onAuthStateChanged(u,d,g){return this.registerStateListener(this.authStateSubscription,u,d,g)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,g){return this.registerStateListener(this.idTokenSubscription,u,d,g)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const g=this.onAuthStateChanged(()=>{g(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,y.A)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function M(f,u){return $.apply(this,arguments)}(d,v)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var g=this;return(0,y.A)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===u?v.removeCurrentUser():v.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,y.A)(function*(){if(!d.redirectPersistenceManager){const g=u&&Ot(u)||d._popupRedirectResolver;D(g,d,"argument-error"),d.redirectPersistenceManager=yield on.create(d,[Ot(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,y.A)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,y.A)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===u?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,y.A)(function*(){if(u===d.currentUser)return d.queue((0,y.A)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,g,v){if(this._deleted)return()=>{};const C="function"==typeof d?d:d.next.bind(d);let F=!1;const te=this._isInitialized?Promise.resolve():this._initializationPromise;if(D(te,this,"internal-error"),te.then(()=>{F||C(this.currentUser)}),"function"==typeof d){const Me=u.addObserver(d,g,v);return()=>{F=!0,Me()}}{const Me=u.addObserver(d);return()=>{F=!0,Me()}}}directlySetCurrentUser(u){var d=this;return(0,y.A)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return D(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=ss(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,y.A)(function*(){var d;const g={"X-Client-Version":u.clientVersion};u.app.options.appId&&(g["X-Firebase-gmpid"]=u.app.options.appId);const v=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const C=yield u._getAppCheckToken();return C&&(g["X-Firebase-AppCheck"]=C),g})()}_getAppCheckToken(){var u=this;return(0,y.A)(function*(){var d;const g=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return null!=g&&g.error&&function Oe(f,...u){Z.logLevel<=Pt.$b.WARN&&Z.warn(`Auth (${We.SDK_VERSION}): ${f}`,...u)}(`Error while retrieving App Check token: ${g.error}`),null==g?void 0:g.token})()}}function Ln(f){return(0,G.Ku)(f)}class Du{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,G.tD)(d=>this.observer=d)}get next(){return D(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let as={loadJS:()=>(0,y.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gt(f){return as.loadJS(f)}function yl(f){return`__${f}${Math.floor(1e6*Math.random())}`}class oh{constructor(u){this.type="recaptcha-enterprise",this.auth=Ln(u)}verify(u="verify",d=!1){var g=this;return(0,y.A)(function*(){function C(){return C=(0,y.A)(function*(te){if(!d){if(null==te.tenantId&&null!=te._agentRecaptchaConfig)return te._agentRecaptchaConfig.siteKey;if(null!=te.tenantId&&void 0!==te._tenantRecaptchaConfigs[te.tenantId])return te._tenantRecaptchaConfigs[te.tenantId].siteKey}return new Promise(function(){var Me=(0,y.A)(function*(pt,Rt){gn(te,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tt=>{if(void 0!==tt.recaptchaKey){const xr=new ye(tt);return null==te.tenantId?te._agentRecaptchaConfig=xr:te._tenantRecaptchaConfigs[te.tenantId]=xr,pt(xr.siteKey)}Rt(new Error("recaptcha Enterprise site key undefined"))}).catch(tt=>{Rt(tt)})});return function(pt,Rt){return Me.apply(this,arguments)}}())}),C.apply(this,arguments)}function F(te,Me,pt){const Rt=window.grecaptcha;ue(Rt)?Rt.enterprise.ready(()=>{Rt.enterprise.execute(te,{action:u}).then(tt=>{Me(tt)}).catch(()=>{Me("NO_RECAPTCHA")})}):pt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((te,Me)=>{(function v(te){return C.apply(this,arguments)})(g.auth).then(pt=>{if(!d&&ue(window.grecaptcha))F(pt,te,Me);else{if(typeof window>"u")return void Me(new Error("RecaptchaVerifier is only supported in browser"));let Rt=function ui(){return as.recaptchaEnterpriseScript}();0!==Rt.length&&(Rt+=pt),Gt(Rt).then(()=>{F(pt,te,Me)}).catch(tt=>{Me(tt)})}}).catch(pt=>{Me(pt)})})})()}}function he(f,u,d){return I.apply(this,arguments)}function I(){return(I=(0,y.A)(function*(f,u,d,g=!1){const v=new oh(f);let C;try{C=yield v.verify(d)}catch{C=yield v.verify(d,!0)}const F=Object.assign({},u);return Object.assign(F,g?{captchaResp:C}:{captchaResponse:C}),Object.assign(F,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(F,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),F})).apply(this,arguments)}function b(f,u,d,g){return V.apply(this,arguments)}function V(){return V=(0,y.A)(function*(f,u,d,g){var v;if(null!==(v=f._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield he(f,u,d,"getOobCode"===d);return g(f,C)}return g(f,u).catch(function(){var C=(0,y.A)(function*(F){if("auth/missing-recaptcha-token"===F.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const te=yield he(f,u,d,"getOobCode"===d);return g(f,te)}return Promise.reject(F)});return function(F){return C.apply(this,arguments)}}())}),V.apply(this,arguments)}function Qe(f){const u=f.indexOf(":");return u<0?"":f.substr(0,u+1)}function st(f){if(!f)return null;const u=Number(f);return isNaN(u)?null:u}class Nt{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return j("not implemented")}_getIdTokenResponse(u){return j("not implemented")}_linkToIdToken(u,d){return j("not implemented")}_getReauthenticationResolver(u){return j("not implemented")}}function je(f,u){return ir.apply(this,arguments)}function ir(){return(ir=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:resetPassword",le(f,u))})).apply(this,arguments)}function er(){return(er=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function di(f,u){return ka.apply(this,arguments)}function ka(){return(ka=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function ls(){return(ls=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:update",le(f,u))})).apply(this,arguments)}function sc(f,u){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signInWithPassword",le(f,u))})).apply(this,arguments)}function Su(f,u){return yg.apply(this,arguments)}function yg(){return(yg=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:sendOobCode",le(f,u))})).apply(this,arguments)}function Ru(){return(Ru=(0,y.A)(function*(f,u){return Su(f,u)})).apply(this,arguments)}function Ig(f,u){return sh.apply(this,arguments)}function sh(){return(sh=(0,y.A)(function*(f,u){return Su(f,u)})).apply(this,arguments)}function Eg(f,u){return wg.apply(this,arguments)}function wg(){return(wg=(0,y.A)(function*(f,u){return Su(f,u)})).apply(this,arguments)}function Oy(){return(Oy=(0,y.A)(function*(f,u){return Su(f,u)})).apply(this,arguments)}function Fy(){return(Fy=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signInWithEmailLink",le(f,u))})).apply(this,arguments)}function Pu(){return(Pu=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signInWithEmailLink",le(f,u))})).apply(this,arguments)}class na extends Nt{constructor(u,d,g,v=null){super("password",g),this._email=u,this._password=d,this._tenantId=v}static _fromEmailAndPassword(u,d){return new na(u,d,"password")}static _fromEmailAndCode(u,d,g=null){return new na(u,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(null!=d&&d.email&&null!=d&&d.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,y.A)(function*(){switch(d.signInMethod){case"password":return b(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",sc);case"emailLink":return function XM(f,u){return Fy.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:ze(u,"internal-error")}})()}_linkToIdToken(u,d){var g=this;return(0,y.A)(function*(){switch(g.signInMethod){case"password":return b(u,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",di);case"emailLink":return function ZM(f,u){return Pu.apply(this,arguments)}(u,{idToken:d,email:g._email,oobCode:g._password});default:ze(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function cs(f,u){return xu.apply(this,arguments)}function xu(){return(xu=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signInWithIdp",le(f,u))})).apply(this,arguments)}class hi extends Nt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new hi(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):ze("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:v}=d,C=(0,Ze.Tt)(d,["providerId","signInMethod"]);if(!g||!v)return null;const F=new hi(g,v);return F.idToken=C.idToken||void 0,F.accessToken=C.accessToken||void 0,F.secret=C.secret,F.nonce=C.nonce,F.pendingToken=C.pendingToken||null,F}_getIdTokenResponse(u){return cs(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,cs(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,cs(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,G.Am)(d)}return u}}function ah(){return(ah=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:sendVerificationCode",le(f,u))})).apply(this,arguments)}function Pn(){return(Pn=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signInWithPhoneNumber",le(f,u))})).apply(this,arguments)}function bg(){return(bg=(0,y.A)(function*(f,u){const d=yield ft(f,"POST","/v1/accounts:signInWithPhoneNumber",le(f,u));if(d.temporaryProof)throw jt(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const _b={USER_NOT_FOUND:"user-not-found"};function Tg(){return(Tg=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signInWithPhoneNumber",le(f,Object.assign(Object.assign({},u),{operation:"REAUTH"})),_b)})).apply(this,arguments)}class ra extends Nt{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new ra({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new ra({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function Zt(f,u){return Pn.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function JM(f,u){return bg.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function eN(f,u){return Tg.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}=u;return g||d||v||C?new ra({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}):null}}class ac{constructor(u){var d,g,v,C,F,te;const Me=(0,G.I9)((0,G.hp)(u)),pt=null!==(d=Me.apiKey)&&void 0!==d?d:null,Rt=null!==(g=Me.oobCode)&&void 0!==g?g:null,tt=function vn(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=Me.mode)&&void 0!==v?v:null);D(pt&&Rt&&tt,"argument-error"),this.apiKey=pt,this.operation=tt,this.code=Rt,this.continueUrl=null!==(C=Me.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==(F=Me.languageCode)&&void 0!==F?F:null,this.tenantId=null!==(te=Me.tenantId)&&void 0!==te?te:null}static parseLink(u){const d=function Ag(f){const u=(0,G.I9)((0,G.hp)(f)).link,d=u?(0,G.I9)((0,G.hp)(u)).deep_link_id:null,g=(0,G.I9)((0,G.hp)(f)).deep_link_id;return(g?(0,G.I9)((0,G.hp)(g)).link:null)||g||d||u||f}(u);try{return new ac(d)}catch{return null}}}let lh=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,g){return na._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=ac.parseLink(g);return D(v,"argument-error"),na._fromEmailAndCode(d,v.code,v.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class Oa{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class Nu extends Oa{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class ks extends Nu{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return D("providerId"in d&&"signInMethod"in d,"argument-error"),hi._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return D(u.idToken||u.accessToken,"argument-error"),hi._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return ks.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return ks.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:C,nonce:F,providerId:te}=u;if(!g&&!v&&!d&&!C||!te)return null;try{return new ks(te)._credential({idToken:d,accessToken:g,nonce:F,pendingToken:C})}catch{return null}}}let ch=(()=>{class f extends Nu{constructor(){super("facebook.com")}static credential(d){return hi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),ku=(()=>{class f extends Nu{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return hi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return f.credential(g,v)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),Vy=(()=>{class f extends Nu{constructor(){super("github.com")}static credential(d){return hi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class lc extends Nt{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return cs(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,cs(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,cs(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:v,pendingToken:C}=d;return g&&v&&C&&g===v?new lc(g,C):null}static _create(u,d){return new lc(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ia extends Oa{constructor(u){D(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return ia.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return ia.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=lc.fromJSON(u);return D(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:g}=u;if(!d||!g)return null;try{return lc._create(g,d)}catch{return null}}}let $y=(()=>{class f extends Nu{constructor(){super("twitter.com")}static credential(d,g){return hi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return f.credential(g,v)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function oa(f,u){return Dg.apply(this,arguments)}function Dg(){return(Dg=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signUp",le(f,u))})).apply(this,arguments)}class Ve{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,g,v=!1){return(0,y.A)(function*(){const C=yield ut._fromIdTokenResponse(u,g,v),F=Sg(g);return new Ve({user:C,providerId:F,_tokenResponse:g,operationType:d})})()}static _forOperation(u,d,g){return(0,y.A)(function*(){yield u._updateTokensIfNecessary(g,!0);const v=Sg(g);return new Ve({user:u,providerId:v,_tokenResponse:g,operationType:d})})()}}function Sg(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function cc(){return(cc=(0,y.A)(function*(f){var u;const d=Ln(f);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new Ve({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield oa(d,{returnSecureToken:!0}),v=yield Ve._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class uc extends G.g{constructor(u,d,g,v){var C;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,uc.prototype),this.customData={appName:u.name,tenantId:null!==(C=u.tenantId)&&void 0!==C?C:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(u,d,g,v){return new uc(u,d,g,v)}}function dc(f,u,d,g){return("reauthenticate"===u?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?uc._fromErrorAndOperation(f,C,u,g):C})}function Uy(f){return new Set(f.map(({providerId:u})=>u).filter(u=>!!u))}function Rg(){return Rg=(0,y.A)(function*(f,u){const d=(0,G.Ku)(f);yield uh(!0,d,u);const{providerUserInfo:g}=yield function ur(f,u){return Nn.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),v=Uy(g||[]);return d.providerData=d.providerData.filter(C=>v.has(C.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Rg.apply(this,arguments)}function Pg(f,u){return El.apply(this,arguments)}function El(){return(El=(0,y.A)(function*(f,u,d=!1){const g=yield $n(f,u._linkToIdToken(f.auth,yield f.getIdToken()),d);return Ve._forOperation(f,"link",g)})).apply(this,arguments)}function uh(f,u,d){return hc.apply(this,arguments)}function hc(){return(hc=(0,y.A)(function*(f,u,d){yield Si(u);const v=!1===f?"provider-already-linked":"no-such-provider";D(Uy(u.providerData).has(d)===f,u.auth,v)})).apply(this,arguments)}function jy(f,u){return sa.apply(this,arguments)}function sa(){return(sa=(0,y.A)(function*(f,u,d=!1){const{auth:g}=f,v="reauthenticate";try{const C=yield $n(f,dc(g,v,u,f),d);D(C.idToken,g,"internal-error");const F=si(C.idToken);D(F,g,"internal-error");const{sub:te}=F;return D(f.uid===te,g,"user-mismatch"),Ve._forOperation(f,v,C)}catch(C){throw"auth/user-not-found"===(null==C?void 0:C.code)&&ze(g,"user-mismatch"),C}})).apply(this,arguments)}function Hy(f,u){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,y.A)(function*(f,u,d=!1){const g="signIn",v=yield dc(f,g,u),C=yield Ve._fromIdTokenResponse(f,g,v);return d||(yield f._updateCurrentUser(C.user)),C})).apply(this,arguments)}function aa(f,u){return dh.apply(this,arguments)}function dh(){return(dh=(0,y.A)(function*(f,u){return Hy(Ln(f),u)})).apply(this,arguments)}function Ou(f,u){return fc.apply(this,arguments)}function fc(){return(fc=(0,y.A)(function*(f,u){const d=(0,G.Ku)(f);return yield uh(!1,d,u.providerId),Pg(d,u)})).apply(this,arguments)}function hh(f,u){return zy.apply(this,arguments)}function zy(){return(zy=(0,y.A)(function*(f,u){return jy((0,G.Ku)(f),u)})).apply(this,arguments)}function Wy(){return(Wy=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signInWithCustomToken",le(f,u))})).apply(this,arguments)}function Fu(){return Fu=(0,y.A)(function*(f,u){const d=Ln(f),g=yield function Gy(f,u){return Wy.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),v=yield Ve._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),Fu.apply(this,arguments)}class Os{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?qy._fromServerResponse(u,d):"totpInfo"in d?fh._fromServerResponse(u,d):ze(u,"internal-error")}}class qy extends Os{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new qy(d)}}class fh extends Os{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new fh(d)}}function Co(f,u,d){var g;D((null===(g=d.url)||void 0===g?void 0:g.length)>0,f,"invalid-continue-uri"),D(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(D(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(D(d.android.packageName.length>0,f,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function Tn(f){return la.apply(this,arguments)}function la(){return(la=(0,y.A)(function*(f){const u=Ln(f);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function Lu(){return(Lu=(0,y.A)(function*(f,u,d){const g=Ln(f),v={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&Co(g,v,d),yield b(g,v,"getOobCode",Ig)})).apply(this,arguments)}function pc(){return pc=(0,y.A)(function*(f,u,d){yield je((0,G.Ku)(f),{oobCode:u,newPassword:d}).catch(function(){var g=(0,y.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Tn(f),v});return function(v){return g.apply(this,arguments)}}())}),pc.apply(this,arguments)}function tr(){return tr=(0,y.A)(function*(f,u){yield function Io(f,u){return ls.apply(this,arguments)}((0,G.Ku)(f),{oobCode:u})}),tr.apply(this,arguments)}function Qy(f,u){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,y.A)(function*(f,u){const d=(0,G.Ku)(f),g=yield je(d,{oobCode:u}),v=g.requestType;switch(D(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":D(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":D(g.mfaInfo,d,"internal-error");default:D(g.email,d,"internal-error")}let C=null;return g.mfaInfo&&(C=Os._fromServerResponse(Ln(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:C},operation:v}})).apply(this,arguments)}function gh(){return(gh=(0,y.A)(function*(f,u){const{data:d}=yield Qy((0,G.Ku)(f),u);return d.email})).apply(this,arguments)}function mh(){return(mh=(0,y.A)(function*(f,u,d){const g=Ln(f),F=yield b(g,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oa).catch(Me=>{throw"auth/password-does-not-meet-requirements"===Me.code&&Tn(f),Me}),te=yield Ve._fromIdTokenResponse(g,"signIn",F);return yield g._updateCurrentUser(te.user),te})).apply(this,arguments)}function $u(){return($u=(0,y.A)(function*(f,u,d){const g=Ln(f),v={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function C(F,te){D(te.handleCodeInApp,g,"argument-error"),te&&Co(g,F,te)})(v,d),yield b(g,v,"getOobCode",Eg)})).apply(this,arguments)}function bo(){return(bo=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f),v=lh.credentialWithLink(u,d||re());return D(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),aa(g,v)})).apply(this,arguments)}function _h(){return(_h=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:createAuthUri",le(f,u))})).apply(this,arguments)}function xg(){return xg=(0,y.A)(function*(f,u){const g={identifier:u,continueUri:pe()?re():"http://localhost"},{signinMethods:v}=yield function Cb(f,u){return _h.apply(this,arguments)}((0,G.Ku)(f),g);return v||[]}),xg.apply(this,arguments)}function Mg(){return Mg=(0,y.A)(function*(f,u){const d=(0,G.Ku)(f),v={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};u&&Co(d.auth,v,u);const{email:C}=yield function lt(f,u){return Ru.apply(this,arguments)}(d.auth,v);C!==f.email&&(yield f.reload())}),Mg.apply(this,arguments)}function Ng(){return Ng=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:u};d&&Co(g.auth,C,d);const{email:F}=yield function Cg(f,u){return Oy.apply(this,arguments)}(g.auth,C);F!==f.email&&(yield f.reload())}),Ng.apply(this,arguments)}function kg(){return(kg=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Og(){return Og=(0,y.A)(function*(f,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const g=(0,G.Ku)(f),C={idToken:yield g.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},F=yield $n(g,function Ab(f,u){return kg.apply(this,arguments)}(g.auth,C));g.displayName=F.displayName||null,g.photoURL=F.photoUrl||null;const te=g.providerData.find(({providerId:Me})=>"password"===Me);te&&(te.displayName=g.displayName,te.photoURL=g.photoURL),yield g._updateTokensIfNecessary(F)}),Og.apply(this,arguments)}function Fg(f,u,d){return xt.apply(this,arguments)}function xt(){return xt=(0,y.A)(function*(f,u,d){const{auth:g}=f,C={idToken:yield f.getIdToken(),returnSecureToken:!0};u&&(C.email=u),d&&(C.password=d);const F=yield $n(f,function On(f,u){return er.apply(this,arguments)}(g,C));yield f._updateTokensIfNecessary(F,!0)}),xt.apply(this,arguments)}class nn{constructor(u,d,g={}){this.isNewUser=u,this.providerId=d,this.profile=g}}class Wr extends nn{constructor(u,d,g,v){super(u,d,g),this.username=v}}class Ii extends nn{constructor(u,d){super(u,"facebook.com",d)}}class Fa extends Wr{constructor(u,d){super(u,"github.com",d,"string"==typeof(null==d?void 0:d.login)?null==d?void 0:d.login:null)}}class Pi extends nn{constructor(u,d){super(u,"google.com",d)}}class Jy extends Wr{constructor(u,d,g){super(u,"twitter.com",d,g)}}function eI(f){const{user:u,_tokenResponse:d}=f;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function oo(f){var u,d;if(!f)return null;const{providerId:g}=f,v=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},C=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!g&&null!=f&&f.idToken){const F=null===(d=null===(u=si(f.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(F)return new nn(C,"anonymous"!==F&&"custom"!==F?F:null)}if(!g)return null;switch(g){case"facebook.com":return new Ii(C,v);case"github.com":return new Fa(C,v);case"google.com":return new Pi(C,v);case"twitter.com":return new Jy(C,v,f.screenName||null);case"custom":case"anonymous":return new nn(C,null);default:return new nn(C,g,v)}}(d)}class La{constructor(u,d,g){this.type=u,this.credential=d,this.user=g}static _fromIdtoken(u,d){return new La("enroll",u,d)}static _fromMfaPendingCredential(u){return new La("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,g;if(null!=u&&u.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return La._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(g=u.multiFactorSession)&&void 0!==g&&g.idToken)return La._fromIdtoken(u.multiFactorSession.idToken)}return null}}class ca{constructor(u,d,g){this.session=u,this.hints=d,this.signInResolver=g}static _fromError(u,d){const g=Ln(u),v=d.customData._serverResponse,C=(v.mfaInfo||[]).map(te=>Os._fromServerResponse(g,te));D(v.mfaPendingCredential,g,"internal-error");const F=La._fromMfaPendingCredential(v.mfaPendingCredential);return new ca(F,C,function(){var te=(0,y.A)(function*(Me){const pt=yield Me._process(g,F);delete v.mfaInfo,delete v.mfaPendingCredential;const Rt=Object.assign(Object.assign({},v),{idToken:pt.idToken,refreshToken:pt.refreshToken});switch(d.operationType){case"signIn":const tt=yield Ve._fromIdTokenResponse(g,d.operationType,Rt);return yield g._updateCurrentUser(tt.user),tt;case"reauthenticate":return D(d.user,g,"internal-error"),Ve._forOperation(d.user,d.operationType,Rt);default:ze(g,"internal-error")}});return function(Me){return te.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,y.A)(function*(){return d.signInResolver(u)})()}}class qr{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>Os._fromServerResponse(u.auth,g)))})}static _fromUser(u){return new qr(u)}getSession(){var u=this;return(0,y.A)(function*(){return La._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var g=this;return(0,y.A)(function*(){const v=u,C=yield g.getSession(),F=yield $n(g.user,v._process(g.user.auth,C,d));return yield g.user._updateTokensIfNecessary(F),g.user.reload()})()}unenroll(u){var d=this;return(0,y.A)(function*(){const g="string"==typeof u?u:u.uid,v=yield d.user.getIdToken();try{const C=yield $n(d.user,function Ih(f,u){return Y(f,"POST","/v2/accounts/mfaEnrollment:withdraw",le(f,u))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:F})=>F!==g),yield d.user._updateTokensIfNecessary(C),yield d.user.reload()}catch(C){throw C}})()}}const Va=new WeakMap,Eh="__sak";class rI{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Eh,"1"),this.storage.removeItem(Eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const wh=(()=>{class f extends rI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function iI(){const f=(0,G.ZQ)();return qi(f)||Ht(f)}()&&function Xn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=jn(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),C=this.localCache[g];v!==C&&d(g,C,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((te,Me,pt)=>{this.notifyListeners(te,pt)});const v=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const te=this.storage.getItem(v);if(d.newValue!==te)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!g)return}const C=()=>{const te=this.storage.getItem(v);!g&&this.localCache[v]===te||this.notifyListeners(v,te)},F=this.storage.getItem(v);!function fr(){return(0,G.lT)()&&10===document.documentMode}()||F===d.newValue||d.newValue===d.oldValue?C():setTimeout(C,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,C=this;return(0,y.A)(function*(){yield v().call(C,d,g),C.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,y.A)(function*(){const C=yield g().call(v,d);return v.localCache[d]=JSON.stringify(C),C})()}_remove(d){var g=()=>super._remove,v=this;return(0,y.A)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return f.type="LOCAL",f})(),xi=(()=>{class f extends rI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return f.type="SESSION",f})();let Ch=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(C=>C.isListeningto(d));if(g)return g;const v=new f(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,y.A)(function*(){const v=d,{eventId:C,eventType:F,data:te}=v.data,Me=g.handlersMap[F];if(null==Me||!Me.size)return;v.ports[0].postMessage({status:"ack",eventId:C,eventType:F});const pt=Array.from(Me).map(function(){var tt=(0,y.A)(function*(xr){return xr(v.origin,te)});return function(xr){return tt.apply(this,arguments)}}()),Rt=yield function sI(f){return Promise.all(f.map(function(){var u=(0,y.A)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return u.apply(this,arguments)}}()))}(pt);v.ports[0].postMessage({status:"done",eventId:C,eventType:F,response:Rt})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function Fs(f="",u=10){let d="";for(let g=0;g<u;g++)d+=Math.floor(10*Math.random());return f+d}class Mb{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,g=50){var v=this;return(0,y.A)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let F,te;return new Promise((Me,pt)=>{const Rt=Fs("",20);C.port1.start();const tt=setTimeout(()=>{pt(new Error("unsupported_event"))},g);te={messageChannel:C,onMessage(xr){const Ho=xr;if(Ho.data.eventId===Rt)switch(Ho.data.status){case"ack":clearTimeout(tt),F=setTimeout(()=>{pt(new Error("timeout"))},3e3);break;case"done":clearTimeout(F),Me(Ho.data.response);break;default:clearTimeout(tt),clearTimeout(F),pt(new Error("invalid_response"))}}},v.handlers.add(te),C.port1.addEventListener("message",te.onMessage),v.target.postMessage({eventType:u,eventId:Rt,data:d},[C.port2])}).finally(()=>{te&&v.removeMessageHandler(te)})})()}}function Kr(){return window}function bh(){return typeof Kr().WorkerGlobalScope<"u"&&"function"==typeof Kr().importScripts}function wl(){return(wl=(0,y.A)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const aI="firebaseLocalStorageDb",Th="firebaseLocalStorage",lI="fbase_key";class Cl{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function bl(f,u){return f.transaction([Th],u?"readwrite":"readonly").objectStore(Th)}function it(){const f=indexedDB.open(aI,1);return new Promise((u,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const g=f.result;try{g.createObjectStore(Th,{keyPath:lI})}catch(v){d(v)}}),f.addEventListener("success",(0,y.A)(function*(){const g=f.result;g.objectStoreNames.contains(Th)?u(g):(g.close(),yield function pr(){const f=indexedDB.deleteDatabase(aI);return new Cl(f).toPromise()}(),u(yield it()))}))})}function $t(f,u,d){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,y.A)(function*(f,u,d){const g=bl(f,!0).put({[lI]:u,value:d});return new Cl(g).toPromise()})).apply(this,arguments)}function fi(){return(fi=(0,y.A)(function*(f,u){const d=bl(f,!1).get(u),g=yield new Cl(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function so(f,u){const d=bl(f,!0).delete(u);return new Cl(d).toPromise()}const Ni=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,y.A)(function*(){return d.db||(d.db=yield it()),d.db})()}_withRetries(d){var g=this;return(0,y.A)(function*(){let v=0;for(;;)try{const C=yield g._openDb();return yield d(C)}catch(C){if(v++>3)throw C;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,y.A)(function*(){return bh()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,y.A)(function*(){d.receiver=Ch._getInstance(function Ob(){return bh()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,y.A)(function*(v,C){return{keyProcessed:(yield d._poll()).includes(C.key)}});return function(v,C){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,y.A)(function*(v,C){return["keyChanged"]});return function(v,C){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,y.A)(function*(){var g,v;if(d.activeServiceWorker=yield function Nb(){return wl.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Mb(d.activeServiceWorker);const C=yield d.sender._send("ping",{},800);C&&null!==(g=C[0])&&void 0!==g&&g.fulfilled&&null!==(v=C[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,y.A)(function*(){if(g.sender&&g.activeServiceWorker&&function kb(){var f;return(null===(f=null==navigator?void 0:navigator.serviceWorker)||void 0===f?void 0:f.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.A)(function*(){try{if(!indexedDB)return!1;const d=yield it();return yield $t(d,Eh,"1"),yield so(d,Eh),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,y.A)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,y.A)(function*(){return v._withPendingWrite((0,y.A)(function*(){return yield v._withRetries(C=>$t(C,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,y.A)(function*(){const v=yield g._withRetries(C=>function ds(f,u){return fi.apply(this,arguments)}(C,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,y.A)(function*(){return g._withPendingWrite((0,y.A)(function*(){return yield g._withRetries(v=>so(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,y.A)(function*(){const g=yield d._withRetries(F=>{const te=bl(F,!1).getAll();return new Cl(te).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],C=new Set;if(0!==g.length)for(const{fbase_key:F,value:te}of g)C.add(F),JSON.stringify(d.localCache[F])!==JSON.stringify(te)&&(d.notifyListeners(F,te),v.push(F));for(const F of Object.keys(d.localCache))d.localCache[F]&&!C.has(F)&&(d.notifyListeners(F,null),v.push(F));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,y.A)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),Ba=1e12;class yc{constructor(u){this.auth=u,this.counter=Ba,this._widgets=new Map}render(u,d){const g=this.counter;return this._widgets.set(g,new Ls(u,this.auth.name,d||{})),this.counter++,g}reset(u){var d;const g=u||Ba;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(u){var d;return(null===(d=this._widgets.get(u||Ba))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,y.A)(function*(){var g;return null===(g=d._widgets.get(u||Ba))||void 0===g||g.execute(),""})()}}class Ls{constructor(u,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof u?document.getElementById(u):u;D(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ju(f){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<f;g++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ah=yl("rcb"),$a=new Te(3e4,6e4);class Hu{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=Kr().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return D(function Tl(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&Ae(Kr().grecaptcha)?Promise.resolve(Kr().grecaptcha):new Promise((g,v)=>{const C=Kr().setTimeout(()=>{v(ke(u,"network-request-failed"))},$a.get());Kr()[Ah]=()=>{Kr().clearTimeout(C),delete Kr()[Ah];const te=Kr().grecaptcha;if(!te||!Ae(te))return void v(ke(u,"internal-error"));const Me=te.render;te.render=(pt,Rt)=>{const tt=Me(pt,Rt);return this.counter++,tt},this.hostLanguage=d,g(te)},Gt(`${function Ms(){return as.recaptchaV2Script}()}?${(0,G.Am)({onload:Ah,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(C),v(ke(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=Kr().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Jt{load(u){return(0,y.A)(function*(){return new yc(u)})()}clearedOneInstance(){}}const Dh="recaptcha",zu={theme:"light",type:"image"};class Vs{constructor(u,d,g=Object.assign({},zu)){this.parameters=g,this.type=Dh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ln(u),this.isInvisible="invisible"===this.parameters.size,D(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;D(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Jt:new Hu,this.validateStartingState()}verify(){var u=this;return(0,y.A)(function*(){u.assertNotDestroyed();const d=yield u.render(),g=u.getAssertedRecaptcha();return g.getResponse(d)||new Promise(C=>{const F=te=>{te&&(u.tokenChangeListeners.delete(F),C(te))};u.tokenChangeListeners.add(F),u.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){D(!this.parameters.sitekey,this.auth,"argument-error"),D(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),D(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof u)u(d);else if("string"==typeof u){const g=Kr()[u];"function"==typeof g&&g(d)}}}assertNotDestroyed(){D(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,y.A)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,y.A)(function*(){D(pe()&&!bh(),u.auth,"internal-error"),yield function Sh(){let f=null;return new Promise(u=>{"complete"!==document.readyState?(f=()=>u(),window.addEventListener("load",f)):u()}).catch(u=>{throw f&&window.removeEventListener("load",f),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function Et(f){return qt.apply(this,arguments)}(u.auth);D(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return D(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ua{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=ra._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function Gu(){return(Gu=(0,y.A)(function*(f,u,d){const g=Ln(f),v=yield Al(g,u,(0,G.Ku)(d));return new Ua(v,C=>aa(g,C))})).apply(this,arguments)}function pi(){return(pi=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f);yield uh(!1,g,"phone");const v=yield Al(g.auth,u,(0,G.Ku)(d));return new Ua(v,C=>Ou(g,C))})).apply(this,arguments)}function ua(){return(ua=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f),v=yield Al(g.auth,u,(0,G.Ku)(d));return new Ua(v,C=>hh(g,C))})).apply(this,arguments)}function Al(f,u,d){return To.apply(this,arguments)}function To(){return To=(0,y.A)(function*(f,u,d){var g;const v=yield d.verify();try{let C;if(D("string"==typeof v,f,"argument-error"),D(d.type===Dh,f,"argument-error"),C="string"==typeof u?{phoneNumber:u}:u,"session"in C){const F=C.session;if("phoneNumber"in C)return D("enroll"===F.type,f,"internal-error"),(yield function $g(f,u){return Y(f,"POST","/v2/accounts/mfaEnrollment:start",le(f,u))}(f,{idToken:F.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{D("signin"===F.type,f,"internal-error");const te=(null===(g=C.multiFactorHint)||void 0===g?void 0:g.uid)||C.multiFactorUid;return D(te,f,"missing-multi-factor-info"),(yield function Yt(f,u){return Y(f,"POST","/v2/accounts/mfaSignIn:start",le(f,u))}(f,{mfaPendingCredential:F.credential,mfaEnrollmentId:te,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:F}=yield function Mu(f,u){return ah.apply(this,arguments)}(f,{phoneNumber:C.phoneNumber,recaptchaToken:v});return F}}finally{d._reset()}}),To.apply(this,arguments)}function Gg(){return(Gg=(0,y.A)(function*(f,u){yield Pg((0,G.Ku)(f),u)})).apply(this,arguments)}let Wu=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=Ln(d)}verifyPhoneNumber(d,g){return Al(this.auth,d,(0,G.Ku)(g))}static credential(d,g){return ra._fromVerification(d,g)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?ra._fromTokenResponse(g,v):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function da(f,u){return u?Ot(u):(D(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class Rh extends Nt{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return cs(u,this._buildIdpRequest())}_linkToIdToken(u,d){return cs(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return cs(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function Lb(f){return Hy(f.auth,new Rh(f),f.bypassAuthState)}function Wg(f){const{auth:u,user:d}=f;return D(d,u,"internal-error"),jy(d,new Rh(f),f.bypassAuthState)}function sN(f){return uI.apply(this,arguments)}function uI(){return(uI=(0,y.A)(function*(f){const{auth:u,user:d}=f;return D(d,u,"internal-error"),Pg(d,new Rh(f),f.bypassAuthState)})).apply(this,arguments)}class Vb{constructor(u,d,g,v,C=!1){this.auth=u,this.resolver=g,this.user=v,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,y.A)(function*(g,v){u.pendingPromise={resolve:g,reject:v};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(C){u.reject(C)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,y.A)(function*(){const{urlResponse:g,sessionId:v,postBody:C,tenantId:F,error:te,type:Me}=u;if(te)return void d.reject(te);const pt={auth:d.auth,requestUri:g,sessionId:v,tenantId:F||void 0,postBody:C||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(Me)(pt))}catch(Rt){d.reject(Rt)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return Lb;case"linkViaPopup":case"linkViaRedirect":return sN;case"reauthViaPopup":case"reauthViaRedirect":return Wg;default:ze(this.auth,"internal-error")}}resolve(u){ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const aN=new Te(2e3,1e4);function dI(){return(dI=(0,y.A)(function*(f,u,d){const g=Ln(f);P(f,u,Oa);const v=da(g,d);return new pI(g,"signInViaPopup",u,v).executeNotNull()})).apply(this,arguments)}function hI(){return(hI=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f);P(g.auth,u,Oa);const v=da(g.auth,d);return new pI(g.auth,"reauthViaPopup",u,v,g).executeNotNull()})).apply(this,arguments)}function fI(){return(fI=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f);P(g.auth,u,Oa);const v=da(g.auth,d);return new pI(g.auth,"linkViaPopup",u,v,g).executeNotNull()})).apply(this,arguments)}let pI=(()=>{class f extends Vb{constructor(d,g,v,C,F){super(d,g,C,F),this.provider=v,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,y.A)(function*(){const g=yield d.execute();return D(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,y.A)(function*(){ee(1===d.filter.length,"Popup operations only handle one event");const g=Fs();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(ke(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(ke(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ke(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,aN.get())};d()}}return f.currentPopupAction=null,f})();const dN="pendingRedirect",Ic=new Map;class gI extends Vb{constructor(u,d,g=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,y.A)(function*(){let g=Ic.get(d.auth._key());if(!g){try{const C=(yield function hN(f,u){return mI.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;g=()=>Promise.resolve(C)}catch(v){g=()=>Promise.reject(v)}Ic.set(d.auth._key(),g)}return d.bypassAuthState||Ic.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,g=this;return(0,y.A)(function*(){if("signInViaRedirect"===u.type)return d().call(g,u);if("unknown"!==u.type){if(u.eventId){const v=yield g.auth._redirectUserForId(u.eventId);if(v)return g.user=v,d().call(g,u);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,y.A)(function*(){})()}cleanUp(){}}function mI(){return(mI=(0,y.A)(function*(f,u){const d=qg(u),g=Ki(f);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function _I(f,u){return vI.apply(this,arguments)}function vI(){return(vI=(0,y.A)(function*(f,u){return Ki(f)._set(qg(u),"true")})).apply(this,arguments)}function Ph(f,u){Ic.set(f._key(),u)}function Ki(f){return Ot(f._redirectPersistence)}function qg(f){return Vr(dN,f.config.apiKey,f.name)}function $b(f,u,d){return function Ub(f,u,d){return xh.apply(this,arguments)}(f,u,d)}function xh(){return(xh=(0,y.A)(function*(f,u,d){const g=Ln(f);P(f,u,Oa),yield g._initializationPromise;const v=da(g,d);return yield _I(v,g),v._openRedirect(g,u,"signInViaRedirect")})).apply(this,arguments)}function yI(f,u,d){return function jb(f,u,d){return qu.apply(this,arguments)}(f,u,d)}function qu(){return(qu=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f);P(g.auth,u,Oa),yield g.auth._initializationPromise;const v=da(g.auth,d);yield _I(v,g.auth);const C=yield Gn(g);return v._openRedirect(g.auth,u,"reauthViaRedirect",C)})).apply(this,arguments)}function Hb(f,u,d){return function Bs(f,u,d){return Mh.apply(this,arguments)}(f,u,d)}function Mh(){return(Mh=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f);P(g.auth,u,Oa),yield g.auth._initializationPromise;const v=da(g.auth,d);yield uh(!1,g,u.providerId),yield _I(v,g.auth);const C=yield Gn(g);return v._openRedirect(g.auth,u,"linkViaRedirect",C)})).apply(this,arguments)}function Nh(){return(Nh=(0,y.A)(function*(f,u){return yield Ln(f)._initializationPromise,kh(f,u,!1)})).apply(this,arguments)}function kh(f,u){return EI.apply(this,arguments)}function EI(){return(EI=(0,y.A)(function*(f,u,d=!1){const g=Ln(f),v=da(g,u),F=yield new gI(g,v,d).execute();return F&&!d&&(delete F.user._redirectEventId,yield g._persistUserIfCurrent(F.user),yield g._setRedirectUser(null,u)),F})).apply(this,arguments)}function Gn(f){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,y.A)(function*(f){const u=Fs(`${f.uid}:::`);return f._redirectEventId=u,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),u})).apply(this,arguments)}class Oi{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(u,g)&&(d=!0,this.sendToConsumer(u,g),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function wc(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ec(f);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var g;if(u.error&&!Ec(u)){const v=(null===(g=u.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(ke(this.auth,v))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const g=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&g}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wI(u))}saveEventToCache(u){this.cachedEventUids.add(wI(u)),this.lastProcessedEventTime=Date.now()}}function wI(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(u=>u).join("-")}function Ec({type:f,error:u}){return"unknown"===f&&"auth/no-auth-event"===(null==u?void 0:u.code)}function ao(f){return Kg.apply(this,arguments)}function Kg(){return(Kg=(0,y.A)(function*(f,u={}){return Y(f,"GET","/v1/projects",u)})).apply(this,arguments)}const Qg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zb=/^https?/;function Oh(){return(Oh=(0,y.A)(function*(f){if(f.config.emulator)return;const{authorizedDomains:u}=yield ao(f);for(const d of u)try{if(Gb(d))return}catch{}ze(f,"unauthorized-domain")})).apply(this,arguments)}function Gb(f){const u=re(),{protocol:d,hostname:g}=new URL(u);if(f.startsWith("chrome-extension://")){const F=new URL(f);return""===F.hostname&&""===g?"chrome-extension:"===d&&f.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&F.hostname===g}if(!zb.test(d))return!1;if(Qg.test(f))return g===f;const v=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const CI=new Te(3e4,6e4);function Fh(){const f=Kr().___jsl;if(null!=f&&f.H)for(const u of Object.keys(f.H))if(f.H[u].r=f.H[u].r||[],f.H[u].L=f.H[u].L||[],f.H[u].r=[...f.H[u].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let ja=null;const Xg=new Te(5e3,15e3),Dl="__/auth/iframe",Xt="emulator/auth/iframe",bI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wb(f){const u=f.config;D(u.authDomain,f,"auth-domain-config-required");const d=u.emulator?L(u,Xt):`https://${f.config.authDomain}/${Dl}`,g={apiKey:u.apiKey,appName:f.name,v:We.SDK_VERSION},v=fN.get(f.config.apiHost);v&&(g.eid=v);const C=f._getFrameworks();return C.length&&(g.fw=C.join(",")),`${d}?${(0,G.Am)(g).slice(1)}`}function Zg(){return Zg=(0,y.A)(function*(f){const u=yield function Lh(f){return ja=ja||function Yg(f){return new Promise((u,d)=>{var g,v,C;function F(){Fh(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{Fh(),d(ke(f,"network-request-failed"))},timeout:CI.get()})}if(null!==(v=null===(g=Kr().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)u(gapi.iframes.getContext());else{if(null===(C=Kr().gapi)||void 0===C||!C.load){const te=yl("iframefcb");return Kr()[te]=()=>{gapi.load?F():d(ke(f,"network-request-failed"))},Gt(`${function oc(){return as.gapiScript}()}?onload=${te}`).catch(Me=>d(Me))}F()}}).catch(u=>{throw ja=null,u})}(f),ja}(f),d=Kr().gapi;return D(d,f,"internal-error"),u.open({where:document.body,url:Wb(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bI,dontclear:!0},g=>new Promise(function(){var v=(0,y.A)(function*(C,F){yield g.restyle({setHideOnLeave:!1});const te=ke(f,"network-request-failed"),Me=Kr().setTimeout(()=>{F(te)},Xg.get());function pt(){Kr().clearTimeout(Me),C(g)}g.ping(pt).then(pt,()=>{F(te)})});return function(C,F){return v.apply(this,arguments)}}()))}),Zg.apply(this,arguments)}const TI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class AI{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const yn="__/auth/handler",hs="emulator/auth/handler",fs=encodeURIComponent("fac");function Vn(f,u,d,g,v,C){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,y.A)(function*(f,u,d,g,v,C){D(f.config.authDomain,f,"auth-domain-config-required"),D(f.config.apiKey,f,"invalid-api-key");const F={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:g,v:We.SDK_VERSION,eventId:v};if(u instanceof Oa){u.setDefaultLanguage(f.languageCode),F.providerId=u.providerId||"",(0,G.Im)(u.getCustomParameters())||(F.customParameters=JSON.stringify(u.getCustomParameters()));for(const[Rt,tt]of Object.entries(C||{}))F[Rt]=tt}if(u instanceof Nu){const Rt=u.getScopes().filter(tt=>""!==tt);Rt.length>0&&(F.scopes=Rt.join(","))}f.tenantId&&(F.tid=f.tenantId);const te=F;for(const Rt of Object.keys(te))void 0===te[Rt]&&delete te[Rt];const Me=yield f._getAppCheckToken(),pt=Me?`#${fs}=${encodeURIComponent(Me)}`:"";return`${function Yu({config:f}){return f.emulator?L(f,hs):`https://${f.authDomain}/${yn}`}(f)}?${(0,G.Am)(te).slice(1)}${pt}`})).apply(this,arguments)}const jo="webStorageSupport",Bh=class Jg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xi,this._completeRedirectFn=kh,this._overrideRedirectResult=Ph}_openPopup(u,d,g,v){var C=this;return(0,y.A)(function*(){var F;ee(null===(F=C.eventManagers[u._key()])||void 0===F?void 0:F.manager,"_initialize() not called before _openPopup()");const te=yield Vn(u,d,g,re(),v);return function Xb(f,u,d,g=500,v=600){const C=Math.max((window.screen.availHeight-v)/2,0).toString(),F=Math.max((window.screen.availWidth-g)/2,0).toString();let te="";const Me=Object.assign(Object.assign({},TI),{width:g.toString(),height:v.toString(),top:C,left:F}),pt=(0,G.ZQ)().toLowerCase();d&&(te=xs(pt)?"_blank":d),li(pt)&&(u=u||"http://localhost",Me.scrollbars="yes");const Rt=Object.entries(Me).reduce((xr,[Ho,gm])=>`${xr}${Ho}=${gm},`,"");if(function an(f=(0,G.ZQ)()){var u;return Ht(f)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(pt)&&"_self"!==te)return function De(f,u){const d=document.createElement("a");d.href=f,d.target=u;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(u||"",te),new AI(null);const tt=window.open(u||"",te,Rt);D(tt,f,"popup-blocked");try{tt.focus()}catch{}return new AI(tt)}(u,te,Fs())})()}_openRedirect(u,d,g,v){var C=this;return(0,y.A)(function*(){return yield C._originValidation(u),function Jr(f){Kr().location.href=f}(yield Vn(u,d,g,re(),v)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:v,promise:C}=this.eventManagers[d];return v?Promise.resolve(v):(ee(C,"If manager is not set, promise should be"),C)}const g=this.initAndGetManager(u);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(u){var d=this;return(0,y.A)(function*(){const g=yield function qb(f){return Zg.apply(this,arguments)}(u),v=new Oi(u);return g.register("authEvent",C=>(D(null==C?void 0:C.authEvent,u,"invalid-auth-event"),{status:v.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:v},d.iframes[u._key()]=g,v})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send(jo,{type:jo},v=>{var C;const F=null===(C=null==v?void 0:v[0])||void 0===C?void 0:C[jo];void 0!==F&&d(!!F),ze(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function $s(f){return Oh.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return jn()||qi()||Ht()}};class DI{constructor(u){this.factorId=u}_process(u,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,g);case"signin":return this._finalizeSignIn(u,d.credential);default:return j("unexpected MultiFactorSessionType")}}}class SI extends DI{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new SI(u)}_finalizeEnroll(u,d,g){return function yh(f,u){return Y(f,"POST","/v2/accounts/mfaEnrollment:finalize",le(f,u))}(u,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function Uu(f,u){return Y(f,"POST","/v2/accounts/mfaSignIn:finalize",le(f,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let RI=(()=>{class f{constructor(){}static assertion(d){return SI._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var Us="@firebase/auth";class xI{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,y.A)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(g=>{u((null==g?void 0:g.stsTokenManager.accessToken)||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){D(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ha(){return window}(0,G.XA)("authIdTokenMaxAge"),function kn(f){as=f}({loadJS:f=>new Promise((u,d)=>{const g=document.createElement("script");g.setAttribute("src",f),g.onload=u,g.onerror=v=>{const C=ke("internal-error");C.customData=v,d(C)},g.type="text/javascript",g.charset="UTF-8",function MI(){var f,u;return null!==(u=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==u?u:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Jb(f){(0,We._registerComponent)(new q.uA("auth",(u,{options:d})=>{const g=u.getProvider("app").getImmediate(),v=u.getProvider("heartbeat"),C=u.getProvider("app-check-internal"),{apiKey:F,authDomain:te}=g.options;D(F&&!F.includes(":"),"invalid-api-key",{appName:g.name});const Me={apiKey:F,authDomain:te,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ss(f)},pt=new Kt(g,v,C,Me);return function Re(f,u){const d=(null==u?void 0:u.persistence)||[],g=(Array.isArray(d)?d:[d]).map(Ot);null!=u&&u.errorMap&&f._updateErrorMap(u.errorMap),f._initializeWithPersistence(g,null==u?void 0:u.popupRedirectResolver)}(pt,d),pt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,g)=>{u.getProvider("auth-internal").initialize()})),(0,We._registerComponent)(new q.uA("auth-internal",u=>{const d=Ln(u.getProvider("auth").getImmediate());return new xI(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,We.registerVersion)(Us,"1.6.2",function Zb(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,We.registerVersion)(Us,"1.6.2","esm2017")}("Browser");function jh(){return jh=(0,y.A)(function*(f,u,d){var g;const{BuildInfo:v}=ha();ee(u.sessionId,"AuthEvent did not contain a session ID");const C=yield function tT(f){return rm.apply(this,arguments)}(u.sessionId),F={};return Ht()?F.ibi=v.packageName:se()?F.apn=v.packageName:ze(f,"operation-not-supported-in-this-environment"),v.displayName&&(F.appDisplayName=v.displayName),F.sessionId=C,Vn(f,d,u.type,void 0,null!==(g=u.eventId)&&void 0!==g?g:void 0,F)}),jh.apply(this,arguments)}function Xu(){return(Xu=(0,y.A)(function*(f){const{BuildInfo:u}=ha(),d={};Ht()?d.iosBundleId=u.packageName:se()?d.androidPackageName=u.packageName:ze(f,"operation-not-supported-in-this-environment"),yield ao(f,d)})).apply(this,arguments)}function fa(){return(fa=(0,y.A)(function*(f,u,d){const{cordova:g}=ha();let v=()=>{};try{yield new Promise((C,F)=>{let te=null;function Me(){var tt;C();const xr=null===(tt=g.plugins.browsertab)||void 0===tt?void 0:tt.close;"function"==typeof xr&&xr(),"function"==typeof(null==d?void 0:d.close)&&d.close()}function pt(){te||(te=window.setTimeout(()=>{F(ke(f,"redirect-cancelled-by-user"))},2e3))}function Rt(){"visible"===(null==document?void 0:document.visibilityState)&&pt()}u.addPassiveListener(Me),document.addEventListener("resume",pt,!1),se()&&document.addEventListener("visibilitychange",Rt,!1),v=()=>{u.removePassiveListener(Me),document.removeEventListener("resume",pt,!1),document.removeEventListener("visibilitychange",Rt,!1),te&&window.clearTimeout(te)}})}finally{v()}})).apply(this,arguments)}function rm(){return(rm=(0,y.A)(function*(f){const u=function nT(f){if(ee(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const u=new ArrayBuffer(f.length),d=new Uint8Array(u);for(let g=0;g<f.length;g++)d[g]=f.charCodeAt(g);return d}(f),d=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(d)).map(v=>v.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class FI extends Oi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInialized(),this.passiveListeners.forEach(d=>d(u)),super.onEvent(u)}initialized(){var u=this;return(0,y.A)(function*(){yield u.initPromise})()}}function gs(f){return im.apply(this,arguments)}function im(){return(im=(0,y.A)(function*(f){const u=yield bc()._get(Ju(f));return u&&(yield bc()._remove(Ju(f))),u})).apply(this,arguments)}function zh(){const f=[];for(let d=0;d<20;d++){const g=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(g))}return f.join("")}function bc(){return Ot(wh)}function Ju(f){return Vr("authEvent",f.config.apiKey,f.name)}function Gh(f){if(null==f||!f.includes("?"))return{};const[u,...d]=f.split("?");return(0,G.I9)(d.join("?"))}const iT=class ed{constructor(){this._redirectPersistence=xi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=kh,this._overrideRedirectResult=Ph}_initialize(u){var d=this;return(0,y.A)(function*(){const g=u._key();let v=d.eventManagers.get(g);return v||(v=new FI(u),d.eventManagers.set(g,v),d.attachCallbackListeners(u,v)),v})()}_openPopup(u){ze(u,"operation-not-supported-in-this-environment")}_openRedirect(u,d,g,v){var C=this;return(0,y.A)(function*(){!function sr(f){var u,d,g,v,C,F,te,Me,pt,Rt;const tt=ha();D("function"==typeof(null===(u=null==tt?void 0:tt.universalLinks)||void 0===u?void 0:u.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),D(typeof(null===(d=null==tt?void 0:tt.BuildInfo)||void 0===d?void 0:d.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),D("function"==typeof(null===(C=null===(v=null===(g=null==tt?void 0:tt.cordova)||void 0===g?void 0:g.plugins)||void 0===v?void 0:v.browsertab)||void 0===C?void 0:C.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),D("function"==typeof(null===(Me=null===(te=null===(F=null==tt?void 0:tt.cordova)||void 0===F?void 0:F.plugins)||void 0===te?void 0:te.browsertab)||void 0===Me?void 0:Me.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),D("function"==typeof(null===(Rt=null===(pt=null==tt?void 0:tt.cordova)||void 0===pt?void 0:pt.InAppBrowser)||void 0===Rt?void 0:Rt.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const F=yield C._initialize(u);yield F.initialized(),F.resetRedirect(),function Bb(){Ic.clear()}(),yield C._originValidation(u);const te=function LI(f,u,d=null){return{type:u,eventId:d,urlResponse:null,sessionId:zh(),postBody:null,tenantId:f.tenantId,error:ke(f,"no-auth-event")}}(u,g,v);yield function Zu(f,u){return bc()._set(Ju(f),u)}(u,te);const Me=yield function kI(f,u,d){return jh.apply(this,arguments)}(u,te,d),pt=yield function eT(f){const{cordova:u}=ha();return new Promise(d=>{u.plugins.browsertab.isAvailable(g=>{let v=null;g?u.plugins.browsertab.openUrl(f):v=u.InAppBrowser.open(f,function Ft(f=(0,G.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),d(v)})})}(Me);return function Fi(f,u,d){return fa.apply(this,arguments)}(u,F,pt)})()}_isIframeWebStorageSupported(u,d){throw new Error("Method not implemented.")}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function OI(f){return Xu.apply(this,arguments)}(u)),this.originValidationPromises[d]}attachCallbackListeners(u,d){const{universalLinks:g,handleOpenURL:v,BuildInfo:C}=ha(),F=setTimeout((0,y.A)(function*(){yield gs(u),d.onEvent(Wh())}),500),te=function(){var Rt=(0,y.A)(function*(tt){clearTimeout(F);const xr=yield gs(u);let Ho=null;xr&&null!=tt&&tt.url&&(Ho=function Hh(f,u){var d,g;const v=function BI(f){const u=Gh(f),d=u.link?decodeURIComponent(u.link):void 0,g=Gh(d).link,v=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return Gh(v).link||v||g||d||f}(u);if(v.includes("/__/auth/callback")){const C=Gh(v),F=C.firebaseError?function VI(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(C.firebaseError)):null,te=null===(g=null===(d=null==F?void 0:F.code)||void 0===d?void 0:d.split("auth/"))||void 0===g?void 0:g[1],Me=te?ke(te):null;return Me?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:Me,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:v,postBody:null}}return null}(xr,tt.url)),d.onEvent(Ho||Wh())});return function(xr){return Rt.apply(this,arguments)}}();typeof g<"u"&&"function"==typeof g.subscribe&&g.subscribe(null,te);const Me=v,pt=`${C.packageName.toLowerCase()}://`;ha().handleOpenURL=function(){var Rt=(0,y.A)(function*(tt){if(tt.toLowerCase().startsWith(pt)&&te({url:tt}),"function"==typeof Me)try{Me(tt)}catch(xr){console.error(xr)}});return function(tt){return Rt.apply(this,arguments)}}()}};function Wh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ke("no-auth-event")}}function qh(){var f;return(null===(f=null==self?void 0:self.location)||void 0===f?void 0:f.protocol)||null}function Ac(f=(0,G.ZQ)()){return!("file:"!==qh()&&"ionic:"!==qh()&&"capacitor:"!==qh()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function cT(){try{const f=self.localStorage,u=Fs();if(f)return f.setItem(u,"1"),f.removeItem(u),!function Kh(f=(0,G.ZQ)()){return function td(){return(0,G.lT)()&&11===(null==document?void 0:document.documentMode)}()||function sm(f=(0,G.ZQ)()){return/Edge\/\d+/.test(f)}(f)}()||(0,G.zW)()}catch{return Qh()&&(0,G.zW)()}return!1}function Qh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Yh(){return(function om(){return"http:"===qh()||"https:"===qh()}()||(0,G.sr)()||Ac())&&!function lT(){return(0,G.lV)()||(0,G.Ll)()}()&&cT()&&!Qh()}function $I(){return Ac()&&typeof document<"u"}function am(){return(am=(0,y.A)(function*(){return!!$I()&&new Promise(f=>{const u=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),f(!0)})})})).apply(this,arguments)}const Qi={LOCAL:"local",NONE:"none",SESSION:"session"},Dc=D,nd="persistence";function cm(f){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,y.A)(function*(f){yield f._initializationPromise;const u=um(),d=Vr(nd,f.config.apiKey,f.name);u&&u.setItem(d,f._getPersistence())})).apply(this,arguments)}function um(){var f;try{return(null===(f=function Xh(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const jI=D;class Ha{constructor(){this.browserResolver=Ot(Bh),this.cordovaResolver=Ot(iT),this.underlyingResolver=null,this._redirectPersistence=xi,this._completeRedirectFn=kh,this._overrideRedirectResult=Ph}_initialize(u){var d=this;return(0,y.A)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,d,g,v){var C=this;return(0,y.A)(function*(){return yield C.selectUnderlyingResolver(),C.assertedUnderlyingResolver._openPopup(u,d,g,v)})()}_openRedirect(u,d,g,v){var C=this;return(0,y.A)(function*(){return yield C.selectUnderlyingResolver(),C.assertedUnderlyingResolver._openRedirect(u,d,g,v)})()}_isIframeWebStorageSupported(u,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,d)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return $I()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return jI(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,y.A)(function*(){if(u.underlyingResolver)return;const d=yield function js(){return am.apply(this,arguments)}();u.underlyingResolver=d?u.cordovaResolver:u.browserResolver})()}}function rd(f){return f.unwrap()}function uT(f){return dm(f)}function dm(f){const{_tokenResponse:u}=f instanceof G.g?f.customData:f;if(!u)return null;if(!(f instanceof G.g)&&"temporaryProof"in u&&"phoneNumber"in u)return Wu.credentialFromResult(f);const d=u.providerId;if(!d||d===ot.PASSWORD)return null;let g;switch(d){case ot.GOOGLE:g=ku;break;case ot.FACEBOOK:g=ch;break;case ot.GITHUB:g=Vy;break;case ot.TWITTER:g=$y;break;default:const{oauthIdToken:v,oauthAccessToken:C,oauthTokenSecret:F,pendingToken:te,nonce:Me}=u;return C||F||v||te?te?d.startsWith("saml.")?lc._create(d,te):hi._fromParams({providerId:d,signInMethod:d,pendingToken:te,idToken:v,accessToken:C}):new ks(d).credential({idToken:v,accessToken:C,rawNonce:Me}):null}return f instanceof G.g?g.credentialFromError(f):g.credentialFromResult(f)}function ei(f,u){return u.catch(d=>{throw d instanceof G.g&&function HI(f,u){var d;const g=null===(d=u.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===(null==u?void 0:u.code))u.resolver=new dT(f,function Pb(f,u){var d;const g=(0,G.Ku)(f),v=u;return D(u.customData.operationType,g,"argument-error"),D(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),ca._fromError(g,v)}(f,u));else if(g){const v=dm(u),C=u;v&&(C.credential=v,C.tenantId=g.tenantId||void 0,C.email=g.email||void 0,C.phoneNumber=g.phoneNumber||void 0)}}(f,d),d}).then(d=>{const v=d.user;return{operationType:d.operationType,credential:uT(d),additionalUserInfo:eI(d),user:xn.getOrCreate(v)}})}function za(f,u){return $r.apply(this,arguments)}function $r(){return($r=(0,y.A)(function*(f,u){const d=yield u;return{verificationId:d.verificationId,confirm:g=>ei(f,d.confirm(g))}})).apply(this,arguments)}class dT{constructor(u,d){this.resolver=d,this.auth=function Sl(f){return f.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return ei(rd(this.auth),this.resolver.resolveSignIn(u))}}class xn{constructor(u){this._delegate=u,this.multiFactor=function jg(f){const u=(0,G.Ku)(f);return Va.has(u)||Va.set(u,qr._fromUser(u)),Va.get(u)}(u)}static getOrCreate(u){return xn.USER_MAP.has(u)||xn.USER_MAP.set(u,new xn(u)),xn.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var d=this;return(0,y.A)(function*(){return ei(d.auth,Ou(d._delegate,u))})()}linkWithPhoneNumber(u,d){var g=this;return(0,y.A)(function*(){return za(g.auth,function ki(f,u,d){return pi.apply(this,arguments)}(g._delegate,u,d))})()}linkWithPopup(u){var d=this;return(0,y.A)(function*(){return ei(d.auth,function uN(f,u,d){return fI.apply(this,arguments)}(d._delegate,u,Ha))})()}linkWithRedirect(u){var d=this;return(0,y.A)(function*(){return yield cm(Ln(d.auth)),Hb(d._delegate,u,Ha)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var d=this;return(0,y.A)(function*(){return ei(d.auth,hh(d._delegate,u))})()}reauthenticateWithPhoneNumber(u,d){return za(this.auth,function Hg(f,u,d){return ua.apply(this,arguments)}(this._delegate,u,d))}reauthenticateWithPopup(u){return ei(this.auth,function cN(f,u,d){return hI.apply(this,arguments)}(this._delegate,u,Ha))}reauthenticateWithRedirect(u){var d=this;return(0,y.A)(function*(){return yield cm(Ln(d.auth)),yI(d._delegate,u,Ha)})()}sendEmailVerification(u){return function Tb(f,u){return Mg.apply(this,arguments)}(this._delegate,u)}unlink(u){var d=this;return(0,y.A)(function*(){return yield function yb(f,u){return Rg.apply(this,arguments)}(d._delegate,u),d})()}updateEmail(u){return function Db(f,u){return Fg((0,G.Ku)(f),u,null)}(this._delegate,u)}updatePassword(u){return function Uo(f,u){return Fg((0,G.Ku)(f),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function zg(f,u){return Gg.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function Ke(f,u){return Og.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,d){return function Zy(f,u,d){return Ng.apply(this,arguments)}(this._delegate,u,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}xn.USER_MAP=new WeakMap;const Rl=D;let zI=(()=>{class f{constructor(d,g){if(this.app=d,g.isInitialized())return this._delegate=g.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:v}=d.options;Rl(v,"invalid-api-key",{appName:d.name}),Rl(v,"invalid-api-key",{appName:d.name});const C=typeof window<"u"?Ha:void 0;this._delegate=g.initialize({options:{persistence:pa(v,d.name),popupRedirectResolver:C}}),this._delegate._updateErrorMap(be),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?xn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,g){!function fe(f,u,d){const g=Ln(f);D(g._canInitEmulator,g,"emulator-config-failed"),D(/^https?:\/\//.test(u),g,"invalid-emulator-scheme");const v=!(null==d||!d.disableWarnings),C=Qe(u),{host:F,port:te}=function qe(f){const u=Qe(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(u.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const C=v[1];return{host:C,port:st(g.substr(C.length+1))}}{const[C,F]=g.split(":");return{host:C,port:st(F)}}}(u);g.config.emulator={url:`${C}//${F}${null===te?"":`:${te}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:F,port:te,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function St(){function f(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,d,g)}applyActionCode(d){return function us(f,u){return tr.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return Qy(this._delegate,d)}confirmPasswordReset(d,g){return function ph(f,u,d){return pc.apply(this,arguments)}(this._delegate,d,g)}createUserWithEmailAndPassword(d,g){var v=this;return(0,y.A)(function*(){return ei(v._delegate,function Bu(f,u,d){return mh.apply(this,arguments)}(v._delegate,d,g))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function bb(f,u){return xg.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function Eb(f,u){const d=ac.parseLink(u);return"EMAIL_SIGNIN"===(null==d?void 0:d.operation)}(0,d)}getRedirectResult(){var d=this;return(0,y.A)(function*(){Rl(Yh(),d._delegate,"operation-not-supported-in-this-environment");const g=yield function II(f,u){return Nh.apply(this,arguments)}(d._delegate,Ha);return g?ei(d._delegate,Promise.resolve(g)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function oT(f,u){Ln(f)._logFramework(u)}(this._delegate,d)}onAuthStateChanged(d,g,v){const{next:C,error:F,complete:te}=hm(d,g,v);return this._delegate.onAuthStateChanged(C,F,te)}onIdTokenChanged(d,g,v){const{next:C,error:F,complete:te}=hm(d,g,v);return this._delegate.onIdTokenChanged(C,F,te)}sendSignInLinkToEmail(d,g){return function Ib(f,u,d){return $u.apply(this,arguments)}(this._delegate,d,g)}sendPasswordResetEmail(d,g){return function Ky(f,u,d){return Lu.apply(this,arguments)}(this._delegate,d,g||void 0)}setPersistence(d){var g=this;return(0,y.A)(function*(){let v;switch(function lm(f,u){Dc(Object.values(Qi).includes(u),f,"invalid-persistence-type"),(0,G.lV)()?Dc(u!==Qi.SESSION,f,"unsupported-persistence-type"):(0,G.Ll)()?Dc(u===Qi.NONE,f,"unsupported-persistence-type"):Qh()?Dc(u===Qi.NONE||u===Qi.LOCAL&&(0,G.zW)(),f,"unsupported-persistence-type"):Dc(u===Qi.NONE||cT(),f,"unsupported-persistence-type")}(g._delegate,d),d){case Qi.SESSION:v=xi;break;case Qi.LOCAL:v=(yield Ot(Ni)._isAvailable())?Ni:wh;break;case Qi.NONE:v=_t;break;default:return ze("argument-error",{appName:g._delegate.name})}return g._delegate.setPersistence(v)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return ei(this._delegate,function Be(f){return cc.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return ei(this._delegate,aa(this._delegate,d))}signInWithCustomToken(d){return ei(this._delegate,function wo(f,u){return Fu.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,g){return ei(this._delegate,function Xy(f,u,d){return aa((0,G.Ku)(f),lh.credential(u,d)).catch(function(){var g=(0,y.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Tn(f),v});return function(v){return g.apply(this,arguments)}}())}(this._delegate,d,g))}signInWithEmailLink(d,g){return ei(this._delegate,function wb(f,u,d){return bo.apply(this,arguments)}(this._delegate,d,g))}signInWithPhoneNumber(d,g){return za(this._delegate,function Br(f,u,d){return Gu.apply(this,arguments)}(this._delegate,d,g))}signInWithPopup(d){var g=this;return(0,y.A)(function*(){return Rl(Yh(),g._delegate,"operation-not-supported-in-this-environment"),ei(g._delegate,function lN(f,u,d){return dI.apply(this,arguments)}(g._delegate,d,Ha))})()}signInWithRedirect(d){var g=this;return(0,y.A)(function*(){return Rl(Yh(),g._delegate,"operation-not-supported-in-this-environment"),yield cm(g._delegate),$b(g._delegate,d,Ha)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function Yy(f,u){return gh.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=Qi,f})();function hm(f,u,d){let g=f;"function"!=typeof f&&({next:g,error:u,complete:d}=f);const v=g;return{next:F=>v(F&&xn.getOrCreate(F)),error:u,complete:d}}function pa(f,u){const d=function UI(f,u){const d=um();if(!d)return[];const g=Vr(nd,f,u);switch(d.getItem(g)){case Qi.NONE:return[_t];case Qi.LOCAL:return[Ni,xi];case Qi.SESSION:return[xi];default:return[]}}(f,u);if(typeof self<"u"&&!d.includes(Ni)&&d.push(Ni),typeof window<"u")for(const g of[wh,xi])d.includes(g)||d.push(g);return d.includes(_t)||d.push(_t),d}class fm{constructor(){this.providerId="phone",this._delegate=new Wu(rd(Fe.A.auth()))}static credential(u,d){return Wu.credential(u,d)}verifyPhoneNumber(u,d){return this._delegate.verifyPhoneNumber(u,d)}unwrap(){return this._delegate}}fm.PHONE_SIGN_IN_METHOD=Wu.PHONE_SIGN_IN_METHOD,fm.PROVIDER_ID=Wu.PROVIDER_ID;const GI=D;class pm{constructor(u,d,g=Fe.A.app()){var v;GI(null===(v=g.options)||void 0===v?void 0:v.apiKey,"invalid-api-key",{appName:g.name}),this._delegate=new Vs(g.auth(),u,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function WI(f){f.INTERNAL.registerComponent(new q.uA("auth-compat",u=>{const d=u.getProvider("app-compat").getImmediate(),g=u.getProvider("auth");return new zI(d,g)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:lh,FacebookAuthProvider:ch,GithubAuthProvider:Vy,GoogleAuthProvider:ku,OAuthProvider:ks,SAMLAuthProvider:ia,PhoneAuthProvider:fm,PhoneMultiFactorGenerator:RI,RecaptchaVerifier:pm,TwitterAuthProvider:$y,Auth:zI,AuthCredential:Nt,Error:G.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.4")}(Fe.A)},467:(zn,Vt,ce)=>{"use strict";function y(G,We,Pt,Ze,q,Je,ot){try{var ne=G[Je](ot),X=ne.value}catch(we){return void Pt(we)}ne.done?We(X):Promise.resolve(X).then(Ze,q)}function Fe(G){return function(){var We=this,Pt=arguments;return new Promise(function(Ze,q){var Je=G.apply(We,Pt);function ot(X){y(Je,Ze,q,ot,ne,"next",X)}function ne(X){y(Je,Ze,q,ot,ne,"throw",X)}ot(void 0)})}}ce.d(Vt,{A:()=>Fe})},1635:(zn,Vt,ce)=>{"use strict";function We(L,R){var N={};for(var W in L)Object.prototype.hasOwnProperty.call(L,W)&&R.indexOf(W)<0&&(N[W]=L[W]);if(null!=L&&"function"==typeof Object.getOwnPropertySymbols){var le=0;for(W=Object.getOwnPropertySymbols(L);le<W.length;le++)R.indexOf(W[le])<0&&Object.prototype.propertyIsEnumerable.call(L,W[le])&&(N[W[le]]=L[W[le]])}return N}function Pt(L,R,N,W){var Xe,le=arguments.length,Y=le<3?R:null===W?W=Object.getOwnPropertyDescriptor(R,N):W;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Y=Reflect.decorate(L,R,N,W);else for(var dt=L.length-1;dt>=0;dt--)(Xe=L[dt])&&(Y=(le<3?Xe(Y):le>3?Xe(R,N,Y):Xe(R,N))||Y);return le>3&&Y&&Object.defineProperty(R,N,Y),Y}function we(L,R,N,W){return new(N||(N=Promise))(function(Y,Xe){function dt(Bt){try{ft(W.next(Bt))}catch(pn){Xe(pn)}}function rt(Bt){try{ft(W.throw(Bt))}catch(pn){Xe(pn)}}function ft(Bt){Bt.done?Y(Bt.value):function le(Y){return Y instanceof N?Y:new N(function(Xe){Xe(Y)})}(Bt.value).then(dt,rt)}ft((W=W.apply(L,R||[])).next())})}function Ne(L){return this instanceof Ne?(this.v=L,this):new Ne(L)}function ze(L,R,N){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,W=N.apply(L,R||[]),Y=[];return le={},Xe("next"),Xe("throw"),Xe("return"),le[Symbol.asyncIterator]=function(){return this},le;function Xe(wt){W[wt]&&(le[wt]=function(un){return new Promise(function(jt,Ae){Y.push([wt,un,jt,Ae])>1||dt(wt,un)})})}function dt(wt,un){try{!function rt(wt){wt.value instanceof Ne?Promise.resolve(wt.value.v).then(ft,Bt):pn(Y[0][2],wt)}(W[wt](un))}catch(jt){pn(Y[0][3],jt)}}function ft(wt){dt("next",wt)}function Bt(wt){dt("throw",wt)}function pn(wt,un){wt(un),Y.shift(),Y.length&&dt(Y[0][0],Y[0][1])}}function nt(L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,R=L[Symbol.asyncIterator];return R?R.call(L):(L=function Pe(L){var R="function"==typeof Symbol&&Symbol.iterator,N=R&&L[R],W=0;if(N)return N.call(L);if(L&&"number"==typeof L.length)return{next:function(){return L&&W>=L.length&&(L=void 0),{value:L&&L[W++],done:!L}}};throw new TypeError(R?"Object is not iterable.":"Symbol.iterator is not defined.")}(L),N={},W("next"),W("throw"),W("return"),N[Symbol.asyncIterator]=function(){return this},N);function W(Y){N[Y]=L[Y]&&function(Xe){return new Promise(function(dt,rt){!function le(Y,Xe,dt,rt){Promise.resolve(rt).then(function(ft){Y({value:ft,done:dt})},Xe)}(dt,rt,(Xe=L[Y](Xe)).done,Xe.value)})}}}ce.d(Vt,{AQ:()=>ze,Cg:()=>Pt,N3:()=>Ne,Tt:()=>We,sH:()=>we,xN:()=>nt}),"function"==typeof SuppressedError&&SuppressedError}},zn=>{zn(zn.s=3635)}]);