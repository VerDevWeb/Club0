(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8792],{1076:(zn,Vt,le)=>{"use strict";le.d(Vt,{$L:()=>rt,$g:()=>Jt,A4:()=>X,Am:()=>Cn,As:()=>ft,Bd:()=>U,Cv:()=>cn,FA:()=>Y,Fy:()=>nt,HN:()=>Bn,Hk:()=>G,I9:()=>Kt,Im:()=>_e,K3:()=>Ze,KA:()=>Je,Ku:()=>Xs,Ll:()=>D,OE:()=>ns,T9:()=>ke,Uj:()=>ot,XA:()=>ze,ZQ:()=>P,bD:()=>Wt,cY:()=>Oe,dI:()=>_i,eX:()=>R,g:()=>ae,gR:()=>Ae,gz:()=>Nn,hp:()=>cr,jZ:()=>k,kH:()=>It,kj:()=>Hi,lT:()=>et,lV:()=>re,nr:()=>Te,oD:()=>Yr,od:()=>ji,qc:()=>jt,sr:()=>ee,tD:()=>Hr,u:()=>ne,vA:()=>Le,yw:()=>ce,zW:()=>F,zw:()=>we});const y={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Le=function(V,x){if(!V)throw G(x)},G=function(V){return new Error("Firebase Database ("+y.SDK_VERSION+") INTERNAL ASSERT FAILED: "+V)},We=function(V){const x=[];let $=0;for(let Ce=0;Ce<V.length;Ce++){let K=V.charCodeAt(Ce);K<128?x[$++]=K:K<2048?(x[$++]=K>>6|192,x[$++]=63&K|128):55296==(64512&K)&&Ce+1<V.length&&56320==(64512&V.charCodeAt(Ce+1))?(K=65536+((1023&K)<<10)+(1023&V.charCodeAt(++Ce)),x[$++]=K>>18|240,x[$++]=K>>12&63|128,x[$++]=K>>6&63|128,x[$++]=63&K|128):(x[$++]=K>>12|224,x[$++]=K>>6&63|128,x[$++]=63&K|128)}return x},Ze={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,x){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=x?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let K=0;K<V.length;K+=3){const ut=V[K],bt=K+1<V.length,kt=bt?V[K+1]:0,si=K+2<V.length,Et=si?V[K+2]:0;let Se=(15&kt)<<2|Et>>6,ai=63&Et;si||(ai=64,bt||(Se=64)),Ce.push($[ut>>2],$[(3&ut)<<4|kt>>4],$[Se],$[ai])}return Ce.join("")},encodeString(V,x){return this.HAS_NATIVE_SUPPORT&&!x?btoa(V):this.encodeByteArray(We(V),x)},decodeString(V,x){return this.HAS_NATIVE_SUPPORT&&!x?atob(V):function(V){const x=[];let $=0,Ce=0;for(;$<V.length;){const K=V[$++];if(K<128)x[Ce++]=String.fromCharCode(K);else if(K>191&&K<224){const ut=V[$++];x[Ce++]=String.fromCharCode((31&K)<<6|63&ut)}else if(K>239&&K<365){const si=((7&K)<<18|(63&V[$++])<<12|(63&V[$++])<<6|63&V[$++])-65536;x[Ce++]=String.fromCharCode(55296+(si>>10)),x[Ce++]=String.fromCharCode(56320+(1023&si))}else{const ut=V[$++],bt=V[$++];x[Ce++]=String.fromCharCode((15&K)<<12|(63&ut)<<6|63&bt)}}return x.join("")}(this.decodeStringToByteArray(V,x))},decodeStringToByteArray(V,x){this.init_();const $=x?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let K=0;K<V.length;){const ut=$[V.charAt(K++)],kt=K<V.length?$[V.charAt(K)]:0;++K;const Et=K<V.length?$[V.charAt(K)]:64;++K;const rn=K<V.length?$[V.charAt(K)]:64;if(++K,null==ut||null==kt||null==Et||null==rn)throw new q;Ce.push(ut<<2|kt>>4),64!==Et&&(Ce.push(kt<<4&240|Et>>2),64!==rn&&Ce.push(Et<<6&192|rn))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}};class q extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Je=function(V){const x=We(V);return Ze.encodeByteArray(x,!0)},ot=function(V){return Je(V).replace(/\./g,"")},ne=function(V){try{return Ze.decodeString(V,!0)}catch(x){console.error("base64Decode failed: ",x)}return null};function X(V){return we(void 0,V)}function we(V,x){if(!(x instanceof Object))return x;switch(x.constructor){case Date:return new Date(x.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return x}for(const $ in x)!x.hasOwnProperty($)||!ue($)||(V[$]=we(V[$],x[$]));return V}function ue(V){return"__proto__"!==V}const Q=()=>{try{return function Ie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const V=process.env.__FIREBASE_DEFAULTS__;return V?JSON.parse(V):void 0})()||(()=>{if(typeof document>"u")return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const x=V&&ne(V[1]);return x&&JSON.parse(x)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},ke=()=>{var V;return null===(V=Q())||void 0===V?void 0:V.config},ze=V=>{var x;return null===(x=Q())||void 0===x?void 0:x[`_${V}`]};class Oe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((x,$)=>{this.resolve=x,this.reject=$})}wrapCallback(x){return($,Ce)=>{$?this.reject($):this.resolve(Ce),"function"==typeof x&&(this.promise.catch(()=>{}),1===x.length?x($):x($,Ce))}}}function nt(V,x){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=x||"demo-project",K=V.iat||0,ut=V.sub||V.user_id;if(!ut)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const bt=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:K,exp:K+3600,auth_time:K,sub:ut,user_id:ut,firebase:{sign_in_provider:"custom",identities:{}}},V);return[ot(JSON.stringify({alg:"none",type:"JWT"})),ot(JSON.stringify(bt)),""].join(".")}function P(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function k(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(P())}function D(){var V;const x=null===(V=Q())||void 0===V?void 0:V.forceEnvironment;if("node"===x)return!0;if("browser"===x)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function U(){return"object"==typeof self&&self.self===self}function ee(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function re(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function et(){const V=P();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function Jt(){return!0===y.NODE_CLIENT||!0===y.NODE_ADMIN}function Te(){return!D()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F(){try{return"object"==typeof indexedDB}catch{return!1}}function R(){return new Promise((V,x)=>{try{let $=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(Ce);K.onsuccess=()=>{K.result.close(),$||self.indexedDB.deleteDatabase(Ce),V(!0)},K.onupgradeneeded=()=>{$=!1},K.onerror=()=>{var ut;x((null===(ut=K.error)||void 0===ut?void 0:ut.message)||"")}}catch($){x($)}})}class ae extends Error{constructor(x,$,Ce){super($),this.code=x,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Y.prototype.create)}}class Y{constructor(x,$,Ce){this.service=x,this.serviceName=$,this.errors=Ce}create(x,...$){const Ce=$[0]||{},K=`${this.service}/${x}`,ut=this.errors[x],bt=ut?function Ye(V,x){return V.replace(dt,($,Ce)=>{const K=x[Ce];return null!=K?String(K):`<${Ce}?>`})}(ut,Ce):"Error";return new ae(K,`${this.serviceName}: ${bt} (${K}).`,Ce)}}const dt=/\{\$([^}]+)}/g;function rt(V){return JSON.parse(V)}function ft(V){return JSON.stringify(V)}const Bt=function(V){let x={},$={},Ce={},K="";try{const ut=V.split(".");x=rt(ne(ut[0])||""),$=rt(ne(ut[1])||""),K=ut[2],Ce=$.d||{},delete $.d}catch{}return{header:x,claims:$,data:Ce,signature:K}},cn=function(V){const $=Bt(V).claims;return!!$&&"object"==typeof $&&$.hasOwnProperty("iat")},jt=function(V){const x=Bt(V).claims;return"object"==typeof x&&!0===x.admin};function Ae(V,x){return Object.prototype.hasOwnProperty.call(V,x)}function ce(V,x){if(Object.prototype.hasOwnProperty.call(V,x))return V[x]}function _e(V){for(const x in V)if(Object.prototype.hasOwnProperty.call(V,x))return!1;return!0}function It(V,x,$){const Ce={};for(const K in V)Object.prototype.hasOwnProperty.call(V,K)&&(Ce[K]=x.call($,V[K],K,V));return Ce}function Wt(V,x){if(V===x)return!0;const $=Object.keys(V),Ce=Object.keys(x);for(const K of $){if(!Ce.includes(K))return!1;const ut=V[K],bt=x[K];if(gn(ut)&&gn(bt)){if(!Wt(ut,bt))return!1}else if(ut!==bt)return!1}for(const K of Ce)if(!$.includes(K))return!1;return!0}function gn(V){return null!==V&&"object"==typeof V}function Cn(V){const x=[];for(const[$,Ce]of Object.entries(V))Array.isArray(Ce)?Ce.forEach(K=>{x.push(encodeURIComponent($)+"="+encodeURIComponent(K))}):x.push(encodeURIComponent($)+"="+encodeURIComponent(Ce));return x.length?"&"+x.join("&"):""}function Kt(V){const x={};return V.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[K,ut]=Ce.split("=");x[decodeURIComponent(K)]=decodeURIComponent(ut)}}),x}function cr(V){const x=V.indexOf("?");if(!x)return"";const $=V.indexOf("#",x);return V.substring(x,$>0?$:void 0)}class Nn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let x=1;x<this.blockSize;++x)this.pad_[x]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(x,$){$||($=0);const Ce=this.W_;if("string"==typeof x)for(let rn=0;rn<16;rn++)Ce[rn]=x.charCodeAt($)<<24|x.charCodeAt($+1)<<16|x.charCodeAt($+2)<<8|x.charCodeAt($+3),$+=4;else for(let rn=0;rn<16;rn++)Ce[rn]=x[$]<<24|x[$+1]<<16|x[$+2]<<8|x[$+3],$+=4;for(let rn=16;rn<80;rn++){const Se=Ce[rn-3]^Ce[rn-8]^Ce[rn-14]^Ce[rn-16];Ce[rn]=4294967295&(Se<<1|Se>>>31)}let Et,Lr,K=this.chain_[0],ut=this.chain_[1],bt=this.chain_[2],kt=this.chain_[3],si=this.chain_[4];for(let rn=0;rn<80;rn++){rn<40?rn<20?(Et=kt^ut&(bt^kt),Lr=1518500249):(Et=ut^bt^kt,Lr=1859775393):rn<60?(Et=ut&bt|kt&(ut|bt),Lr=2400959708):(Et=ut^bt^kt,Lr=3395469782);const Se=(K<<5|K>>>27)+Et+si+Lr+Ce[rn]&4294967295;si=kt,kt=bt,bt=4294967295&(ut<<30|ut>>>2),ut=K,K=Se}this.chain_[0]=this.chain_[0]+K&4294967295,this.chain_[1]=this.chain_[1]+ut&4294967295,this.chain_[2]=this.chain_[2]+bt&4294967295,this.chain_[3]=this.chain_[3]+kt&4294967295,this.chain_[4]=this.chain_[4]+si&4294967295}update(x,$){if(null==x)return;void 0===$&&($=x.length);const Ce=$-this.blockSize;let K=0;const ut=this.buf_;let bt=this.inbuf_;for(;K<$;){if(0===bt)for(;K<=Ce;)this.compress_(x,K),K+=this.blockSize;if("string"==typeof x){for(;K<$;)if(ut[bt]=x.charCodeAt(K),++bt,++K,bt===this.blockSize){this.compress_(ut),bt=0;break}}else for(;K<$;)if(ut[bt]=x[K],++bt,++K,bt===this.blockSize){this.compress_(ut),bt=0;break}}this.inbuf_=bt,this.total_+=$}digest(){const x=[];let $=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let K=this.blockSize-1;K>=56;K--)this.buf_[K]=255&$,$/=256;this.compress_(this.buf_);let Ce=0;for(let K=0;K<5;K++)for(let ut=24;ut>=0;ut-=8)x[Ce]=this.chain_[K]>>ut&255,++Ce;return x}}function Hr(V,x){const $=new Ci(V,x);return $.subscribe.bind($)}class Ci{constructor(x,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{x(this)}).catch(Ce=>{this.error(Ce)})}next(x){this.forEachObserver($=>{$.next(x)})}error(x){this.forEachObserver($=>{$.error(x)}),this.close(x)}complete(){this.forEachObserver(x=>{x.complete()}),this.close()}subscribe(x,$,Ce){let K;if(void 0===x&&void 0===$&&void 0===Ce)throw new Error("Missing Observer.");K=function no(V,x){if("object"!=typeof V||null===V)return!1;for(const $ of x)if($ in V&&"function"==typeof V[$])return!0;return!1}(x,["next","error","complete"])?x:{next:x,error:$,complete:Ce},void 0===K.next&&(K.next=bi),void 0===K.error&&(K.error=bi),void 0===K.complete&&(K.complete=bi);const ut=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),ut}unsubscribeOne(x){void 0===this.observers||void 0===this.observers[x]||(delete this.observers[x],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(x){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,x)}sendOne(x,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[x])try{$(this.observers[x])}catch(Ce){typeof console<"u"&&console.error&&console.error(Ce)}})}close(x){this.finalized||(this.finalized=!0,void 0!==x&&(this.finalError=x),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bi(){}const ji=function(V,x,$,Ce){let K;if(Ce<x?K="at least "+x:Ce>$&&(K=0===$?"none":"no more than "+$),K)throw new Error(V+" failed: Was called with "+Ce+(1===Ce?" argument.":" arguments.")+" Expects "+K+".")};function _i(V,x){return`${V} failed: ${x} argument `}function Yr(V,x,$,Ce){if((!Ce||$)&&"function"!=typeof $)throw new Error(_i(V,x)+"must be a valid function.")}function Bn(V,x,$,Ce){if((!Ce||$)&&("object"!=typeof $||null===$))throw new Error(_i(V,x)+"must be a valid context object.")}const Hi=function(V){const x=[];let $=0;for(let Ce=0;Ce<V.length;Ce++){let K=V.charCodeAt(Ce);if(K>=55296&&K<=56319){const ut=K-55296;Ce++,Le(Ce<V.length,"Surrogate pair missing trail surrogate."),K=65536+(ut<<10)+(V.charCodeAt(Ce)-56320)}K<128?x[$++]=K:K<2048?(x[$++]=K>>6|192,x[$++]=63&K|128):K<65536?(x[$++]=K>>12|224,x[$++]=K>>6&63|128,x[$++]=63&K|128):(x[$++]=K>>18|240,x[$++]=K>>12&63|128,x[$++]=K>>6&63|128,x[$++]=63&K|128)}return x},ns=function(V){let x=0;for(let $=0;$<V.length;$++){const Ce=V.charCodeAt($);Ce<128?x++:Ce<2048?x+=2:Ce>=55296&&Ce<=56319?(x+=4,$++):x+=3}return x};function Xs(V){return V&&V._delegate?V._delegate:V}},1656:(zn,Vt,le)=>{"use strict";le.d(Vt,{c:()=>G,r:()=>X});const G=(P,k)=>{P.componentOnReady?P.componentOnReady().then(D=>k(D)):X(()=>k(P))},X=P=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(P):"function"==typeof requestAnimationFrame?requestAnimationFrame(P):setTimeout(P)},6031:(zn,Vt,le)=>{"use strict";le.d(Vt,{L:()=>y,a:()=>Le,b:()=>G,c:()=>We,d:()=>Pt,g:()=>P});const y="ionViewWillEnter",Le="ionViewDidEnter",G="ionViewWillLeave",We="ionViewDidLeave",Pt="ionViewWillUnload",P=k=>k.classList.contains("ion-page")?k:k.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||k},3503:(zn,Vt,le)=>{"use strict";le.d(Vt,{c:()=>Pe});var y=le(8476),Le=le(5638);let G;const Pt=J=>J.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ze=J=>(void 0===G&&(G=void 0===J.style.animationName&&void 0!==J.style.webkitAnimationName?"-webkit-":""),G),q=(J,Q,Z)=>{const Fe=Q.startsWith("animation")?Ze(J):"";J.style.setProperty(Fe+Q,Z)},Je=(J,Q)=>{const Z=Q.startsWith("animation")?Ze(J):"";J.style.removeProperty(Z+Q)},X=[],be=(J=[],Q)=>{if(void 0!==Q){const Z=Array.isArray(Q)?Q:[Q];return[...J,...Z]}return J},Pe=J=>{let Q,Z,Fe,ke,ze,Oe,U,F,R,N,W,dt,rt,nt=[],P=[],k=[],D=!1,ee={},re=[],fe=[],et={},Dt=0,Jt=!1,Te=!1,ae=!0,Y=!1,Ye=!0,ft=!1;const Bt=J,pn=[],wt=[],cn=[],jt=[],Ae=[],ce=[],_e=[],It=[],Wt=[],gn=[],en=[],Cn="function"==typeof AnimationEffect||void 0!==y.w&&"function"==typeof y.w.AnimationEffect,Kt="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Cn,Nn=()=>en,bi=(de,I)=>{const b=I.findIndex(L=>L.c===de);b>-1&&I.splice(b,1)},_i=(de,I)=>((null!=I&&I.oneTimeCallback?wt:pn).push({c:de,o:I}),rt),Yr=()=>{if(Kt)en.forEach(de=>{de.cancel()}),en.length=0;else{const de=jt.slice();(0,Le.r)(()=>{de.forEach(I=>{Je(I,"animation-name"),Je(I,"animation-duration"),Je(I,"animation-timing-function"),Je(I,"animation-iteration-count"),Je(I,"animation-delay"),Je(I,"animation-play-state"),Je(I,"animation-fill-mode"),Je(I,"animation-direction")})})}},Bn=()=>{ce.forEach(de=>{null!=de&&de.parentNode&&de.parentNode.removeChild(de)}),ce.length=0},x=()=>void 0!==ze?ze:U?U.getFill():"both",$=()=>void 0!==R?R:void 0!==Oe?Oe:U?U.getDirection():"normal",Ce=()=>Jt?"linear":void 0!==Fe?Fe:U?U.getEasing():"linear",K=()=>Te?0:void 0!==N?N:void 0!==Z?Z:U?U.getDuration():0,ut=()=>void 0!==ke?ke:U?U.getIterations():1,bt=()=>void 0!==W?W:void 0!==Q?Q:U?U.getDelay():0,Ot=()=>{0!==Dt&&(Dt--,0===Dt&&((()=>{os(),Wt.forEach(z=>z()),gn.forEach(z=>z());const de=ae?1:0,I=re,b=fe,L=et;jt.forEach(z=>{const ie=z.classList;I.forEach(pe=>ie.add(pe)),b.forEach(pe=>ie.remove(pe));for(const pe in L)L.hasOwnProperty(pe)&&q(z,pe,L[pe])}),N=void 0,R=void 0,W=void 0,pn.forEach(z=>z.c(de,rt)),wt.forEach(z=>z.c(de,rt)),wt.length=0,Ye=!0,ae&&(Y=!0),ae=!0})(),U&&U.animationFinish()))},sn=(de=!0)=>{Bn();const I=(J=>(J.forEach(Q=>{for(const Z in Q)if(Q.hasOwnProperty(Z)){const Fe=Q[Z];if("easing"===Z)Q["animation-timing-function"]=Fe,delete Q[Z];else{const ke=Pt(Z);ke!==Z&&(Q[ke]=Fe,delete Q[Z])}}}),J))(nt);jt.forEach(b=>{if(I.length>0){const L=((J=[])=>J.map(Q=>{const Z=Q.offset,Fe=[];for(const ke in Q)Q.hasOwnProperty(ke)&&"offset"!==ke&&Fe.push(`${ke}: ${Q[ke]};`);return`${100*Z}% { ${Fe.join(" ")} }`}).join(" "))(I);dt=void 0!==J?J:(J=>{let Q=X.indexOf(J);return Q<0&&(Q=X.push(J)-1),`ion-animation-${Q}`})(L);const z=((J,Q,Z)=>{var Fe;const ke=(J=>{const Q=void 0!==J.getRootNode?J.getRootNode():J;return Q.head||Q})(Z),ze=Ze(Z),Oe=ke.querySelector("#"+J);if(Oe)return Oe;const nt=(null!==(Fe=Z.ownerDocument)&&void 0!==Fe?Fe:document).createElement("style");return nt.id=J,nt.textContent=`@${ze}keyframes ${J} { ${Q} } @${ze}keyframes ${J}-alt { ${Q} }`,ke.appendChild(nt),nt})(dt,L,b);ce.push(z),q(b,"animation-duration",`${K()}ms`),q(b,"animation-timing-function",Ce()),q(b,"animation-delay",`${bt()}ms`),q(b,"animation-fill-mode",x()),q(b,"animation-direction",$());const ie=ut()===1/0?"infinite":ut().toString();q(b,"animation-iteration-count",ie),q(b,"animation-play-state","paused"),de&&q(b,"animation-name",`${z.id}-alt`),(0,Le.r)(()=>{q(b,"animation-name",z.id||null)})}})},Un=(de=!0)=>{(()=>{_e.forEach(L=>L()),It.forEach(L=>L());const de=P,I=k,b=ee;jt.forEach(L=>{const z=L.classList;de.forEach(ie=>z.add(ie)),I.forEach(ie=>z.remove(ie));for(const ie in b)b.hasOwnProperty(ie)&&q(L,ie,b[ie])})})(),nt.length>0&&(Kt?(jt.forEach(de=>{const I=de.animate(nt,{id:Bt,delay:bt(),duration:K(),easing:Ce(),iterations:ut(),fill:x(),direction:$()});I.pause(),en.push(I)}),en.length>0&&(en[0].onfinish=()=>{Ot()})):sn(de)),D=!0},Yn=de=>{if(de=Math.min(Math.max(de,0),.9999),Kt)en.forEach(I=>{I.currentTime=I.effect.getComputedTiming().delay+K()*de,I.pause()});else{const I=`-${K()*de}ms`;jt.forEach(b=>{nt.length>0&&(q(b,"animation-delay",I),q(b,"animation-play-state","paused"))})}},is=de=>{en.forEach(I=>{I.effect.updateTiming({delay:bt(),duration:K(),easing:Ce(),iterations:ut(),fill:x(),direction:$()})}),void 0!==de&&Yn(de)},bn=(de=!0,I)=>{(0,Le.r)(()=>{jt.forEach(b=>{q(b,"animation-name",dt||null),q(b,"animation-duration",`${K()}ms`),q(b,"animation-timing-function",Ce()),q(b,"animation-delay",void 0!==I?`-${I*K()}ms`:`${bt()}ms`),q(b,"animation-fill-mode",x()||null),q(b,"animation-direction",$()||null);const L=ut()===1/0?"infinite":ut().toString();q(b,"animation-iteration-count",L),de&&q(b,"animation-name",`${dt}-alt`),(0,Le.r)(()=>{q(b,"animation-name",dt||null)})})})},li=(de=!1,I=!0,b)=>(de&&Ae.forEach(L=>{L.update(de,I,b)}),Kt?is(b):bn(I,b),rt),qt=()=>{D&&(Kt?en.forEach(de=>{de.pause()}):jt.forEach(de=>{q(de,"animation-play-state","paused")}),ft=!0)},bu=()=>{F=void 0,Ot()},os=()=>{F&&clearTimeout(F)},ec=de=>new Promise(I=>{null!=de&&de.sync&&(Te=!0,_i(()=>Te=!1,{oneTimeCallback:!0})),D||Un(),Y&&(Kt?(Yn(0),is()):bn(),Y=!1),Ye&&(Dt=Ae.length+1,Ye=!1);const b=()=>{bi(L,wt),I()},L=()=>{bi(b,cn),I()};_i(L,{oneTimeCallback:!0}),((de,I)=>{cn.push({c:de,o:{oneTimeCallback:!0}})})(b),Ae.forEach(z=>{z.play()}),Kt?(en.forEach(de=>{de.play()}),(0===nt.length||0===jt.length)&&Ot()):(()=>{if(os(),(0,Le.r)(()=>{jt.forEach(de=>{nt.length>0&&q(de,"animation-play-state","running")})}),0===nt.length||0===jt.length)Ot();else{const de=bt()||0,I=K()||0,b=ut()||1;isFinite(b)&&(F=setTimeout(bu,de+I*b+100)),((J,Q)=>{let Z;const Fe={passive:!0},ze=Oe=>{J===Oe.target&&(Z&&Z(),os(),(0,Le.r)(()=>{jt.forEach(de=>{Je(de,"animation-duration"),Je(de,"animation-delay"),Je(de,"animation-play-state")}),(0,Le.r)(Ot)}))};J&&(J.addEventListener("webkitAnimationEnd",ze,Fe),J.addEventListener("animationend",ze,Fe),Z=()=>{J.removeEventListener("webkitAnimationEnd",ze,Fe),J.removeEventListener("animationend",ze,Fe)})})(jt[0])}})(),ft=!1}),gl=(de,I)=>{const b=nt[0];return void 0===b||void 0!==b.offset&&0!==b.offset?nt=[{offset:0,[de]:I},...nt]:b[de]=I,rt};return rt={parentAnimation:U,elements:jt,childAnimations:Ae,id:Bt,animationFinish:Ot,from:gl,to:(de,I)=>{const b=nt[nt.length-1];return void 0===b||void 0!==b.offset&&1!==b.offset?nt=[...nt,{offset:1,[de]:I}]:b[de]=I,rt},fromTo:(de,I,b)=>gl(de,I).to(de,b),parent:de=>(U=de,rt),play:ec,pause:()=>(Ae.forEach(de=>{de.pause()}),qt(),rt),stop:()=>{Ae.forEach(de=>{de.stop()}),D&&(Yr(),D=!1),Jt=!1,Te=!1,Ye=!0,R=void 0,N=void 0,W=void 0,Dt=0,Y=!1,ae=!0,ft=!1,cn.forEach(de=>de.c(0,rt)),cn.length=0},destroy:de=>(Ae.forEach(I=>{I.destroy(de)}),(de=>{Yr(),de&&Bn()})(de),jt.length=0,Ae.length=0,nt.length=0,pn.length=0,wt.length=0,D=!1,Ye=!0,rt),keyframes:de=>{const I=nt!==de;return nt=de,I&&(de=>{Kt?Nn().forEach(I=>{const b=I.effect;if(b.setKeyframes)b.setKeyframes(de);else{const L=new KeyframeEffect(b.target,de,b.getTiming());I.effect=L}}):sn()})(nt),rt},addAnimation:de=>{if(null!=de)if(Array.isArray(de))for(const I of de)I.parent(rt),Ae.push(I);else de.parent(rt),Ae.push(de);return rt},addElement:de=>{if(null!=de)if(1===de.nodeType)jt.push(de);else if(de.length>=0)for(let I=0;I<de.length;I++)jt.push(de[I]);else console.error("Invalid addElement value");return rt},update:li,fill:de=>(ze=de,li(!0),rt),direction:de=>(Oe=de,li(!0),rt),iterations:de=>(ke=de,li(!0),rt),duration:de=>(!Kt&&0===de&&(de=1),Z=de,li(!0),rt),easing:de=>(Fe=de,li(!0),rt),delay:de=>(Q=de,li(!0),rt),getWebAnimations:Nn,getKeyframes:()=>nt,getFill:x,getDirection:$,getDelay:bt,getIterations:ut,getEasing:Ce,getDuration:K,afterAddRead:de=>(Wt.push(de),rt),afterAddWrite:de=>(gn.push(de),rt),afterClearStyles:(de=[])=>{for(const I of de)et[I]="";return rt},afterStyles:(de={})=>(et=de,rt),afterRemoveClass:de=>(fe=be(fe,de),rt),afterAddClass:de=>(re=be(re,de),rt),beforeAddRead:de=>(_e.push(de),rt),beforeAddWrite:de=>(It.push(de),rt),beforeClearStyles:(de=[])=>{for(const I of de)ee[I]="";return rt},beforeStyles:(de={})=>(ee=de,rt),beforeRemoveClass:de=>(k=be(k,de),rt),beforeAddClass:de=>(P=be(P,de),rt),onFinish:_i,isRunning:()=>0!==Dt&&!ft,progressStart:(de=!1,I)=>(Ae.forEach(b=>{b.progressStart(de,I)}),qt(),Jt=de,D||Un(),li(!1,!0,I),rt),progressStep:de=>(Ae.forEach(I=>{I.progressStep(de)}),Yn(de),rt),progressEnd:(de,I,b)=>(Jt=!1,Ae.forEach(L=>{L.progressEnd(de,I,b)}),void 0!==b&&(N=b),Y=!1,ae=!0,0===de?(R="reverse"===$()?"normal":"reverse","reverse"===R&&(ae=!1),Kt?(li(),Yn(1-I)):(W=(1-I)*K()*-1,li(!1,!1))):1===de&&(Kt?(li(),Yn(I)):(W=I*K()*-1,li(!1,!1))),void 0!==de&&!U&&ec(),rt)}}},464:(zn,Vt,le)=>{"use strict";le.d(Vt,{E:()=>ne,a:()=>y,s:()=>Je});const y=X=>{try{if(X instanceof q)return X.value;if(!We()||"string"!=typeof X||""===X)return X;if(X.includes("onload="))return"";const we=document.createDocumentFragment(),ue=document.createElement("div");we.appendChild(ue),ue.innerHTML=X,Ze.forEach(J=>{const Q=we.querySelectorAll(J);for(let Z=Q.length-1;Z>=0;Z--){const Fe=Q[Z];Fe.parentNode?Fe.parentNode.removeChild(Fe):we.removeChild(Fe);const ke=G(Fe);for(let ze=0;ze<ke.length;ze++)Le(ke[ze])}});const Ie=G(we);for(let J=0;J<Ie.length;J++)Le(Ie[J]);const be=document.createElement("div");be.appendChild(we);const Pe=be.querySelector("div");return null!==Pe?Pe.innerHTML:be.innerHTML}catch(we){return console.error(we),""}},Le=X=>{if(X.nodeType&&1!==X.nodeType)return;if(typeof NamedNodeMap<"u"&&!(X.attributes instanceof NamedNodeMap))return void X.remove();for(let ue=X.attributes.length-1;ue>=0;ue--){const Ie=X.attributes.item(ue),be=Ie.name;if(!Pt.includes(be.toLowerCase())){X.removeAttribute(be);continue}const Pe=Ie.value,J=X[be];(null!=Pe&&Pe.toLowerCase().includes("javascript:")||null!=J&&J.toLowerCase().includes("javascript:"))&&X.removeAttribute(be)}const we=G(X);for(let ue=0;ue<we.length;ue++)Le(we[ue])},G=X=>null!=X.children?X.children:X.childNodes,We=()=>{var X;const we=window,ue=null===(X=null==we?void 0:we.Ionic)||void 0===X?void 0:X.config;return!ue||(ue.get?ue.get("sanitizerEnabled",!0):!0===ue.sanitizerEnabled||void 0===ue.sanitizerEnabled)},Pt=["class","id","href","src","name","slot"],Ze=["script","style","iframe","meta","link","object","embed"];class q{constructor(we){this.value=we}}const Je=X=>{const we=window,ue=we.Ionic;if(!ue||!ue.config||"Object"===ue.config.constructor.name)return we.Ionic=we.Ionic||{},we.Ionic.config=Object.assign(Object.assign({},we.Ionic.config),X),we.Ionic.config},ne=!1},5938:(zn,Vt,le)=>{"use strict";le.d(Vt,{C:()=>Pt,a:()=>G,d:()=>We});var y=le(467),Le=le(5638);const G=function(){var Ze=(0,y.A)(function*(q,Je,ot,ne,X,we){var ue;if(q)return q.attachViewToDom(Je,ot,X,ne);if(!(we||"string"==typeof ot||ot instanceof HTMLElement))throw new Error("framework delegate is missing");const Ie="string"==typeof ot?null===(ue=Je.ownerDocument)||void 0===ue?void 0:ue.createElement(ot):ot;return ne&&ne.forEach(be=>Ie.classList.add(be)),X&&Object.assign(Ie,X),Je.appendChild(Ie),yield new Promise(be=>(0,Le.c)(Ie,be)),Ie});return function(Je,ot,ne,X,we,ue){return Ze.apply(this,arguments)}}(),We=(Ze,q)=>{if(q){if(Ze)return Ze.removeViewFromDom(q.parentElement,q);q.remove()}return Promise.resolve()},Pt=()=>{let Ze,q;return{attachViewToDom:function(){var ne=(0,y.A)(function*(X,we,ue={},Ie=[]){var be,Pe;let J;if(Ze=X,we){const Z="string"==typeof we?null===(be=Ze.ownerDocument)||void 0===be?void 0:be.createElement(we):we;Ie.forEach(Fe=>Z.classList.add(Fe)),Object.assign(Z,ue),Ze.appendChild(Z),J=Z,yield new Promise(Fe=>(0,Le.c)(Z,Fe))}else if(Ze.children.length>0&&("ION-MODAL"===Ze.tagName||"ION-POPOVER"===Ze.tagName)&&!(J=Ze.children[0]).classList.contains("ion-delegate-host")){const Fe=null===(Pe=Ze.ownerDocument)||void 0===Pe?void 0:Pe.createElement("div");Fe.classList.add("ion-delegate-host"),Ie.forEach(ke=>Fe.classList.add(ke)),Fe.append(...Ze.children),Ze.appendChild(Fe),J=Fe}const Q=document.querySelector("ion-app")||document.body;return q=document.createComment("ionic teleport"),Ze.parentNode.insertBefore(q,Ze),Q.appendChild(Ze),null!=J?J:Ze});return function(we,ue){return ne.apply(this,arguments)}}(),removeViewFromDom:()=>(Ze&&q&&(q.parentNode.insertBefore(Ze,q),q.remove()),Promise.resolve())}}},8221:(zn,Vt,le)=>{"use strict";le.d(Vt,{G:()=>Pt});class Le{constructor(q,Je,ot,ne,X){this.id=Je,this.name=ot,this.disableScroll=X,this.priority=1e6*ne+Je,this.ctrl=q}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const q=this.ctrl.capture(this.name,this.id,this.priority);return q&&this.disableScroll&&this.ctrl.disableScroll(this.id),q}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class G{constructor(q,Je,ot,ne){this.id=Je,this.disable=ot,this.disableScroll=ne,this.ctrl=q}block(){if(this.ctrl){if(this.disable)for(const q of this.disable)this.ctrl.disableGesture(q,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const q of this.disable)this.ctrl.enableGesture(q,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const We="backdrop-no-scroll",Pt=new class y{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(q){var Je;return new Le(this,this.newID(),q.name,null!==(Je=q.priority)&&void 0!==Je?Je:0,!!q.disableScroll)}createBlocker(q={}){return new G(this,this.newID(),q.disable,!!q.disableScroll)}start(q,Je,ot){return this.canStart(q)?(this.requestedStart.set(Je,ot),!0):(this.requestedStart.delete(Je),!1)}capture(q,Je,ot){if(!this.start(q,Je,ot))return!1;const ne=this.requestedStart;let X=-1e4;if(ne.forEach(we=>{X=Math.max(X,we)}),X===ot){this.capturedId=Je,ne.clear();const we=new CustomEvent("ionGestureCaptured",{detail:{gestureName:q}});return document.dispatchEvent(we),!0}return ne.delete(Je),!1}release(q){this.requestedStart.delete(q),this.capturedId===q&&(this.capturedId=void 0)}disableGesture(q,Je){let ot=this.disabledGestures.get(q);void 0===ot&&(ot=new Set,this.disabledGestures.set(q,ot)),ot.add(Je)}enableGesture(q,Je){const ot=this.disabledGestures.get(q);void 0!==ot&&ot.delete(Je)}disableScroll(q){this.disabledScroll.add(q),1===this.disabledScroll.size&&document.body.classList.add(We)}enableScroll(q){this.disabledScroll.delete(q),0===this.disabledScroll.size&&document.body.classList.remove(We)}canStart(q){return!(void 0!==this.capturedId||this.isDisabled(q))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(q){const Je=this.disabledGestures.get(q);return!!(Je&&Je.size>0)}newID(){return this.gestureId++,this.gestureId}}},9457:(zn,Vt,le)=>{"use strict";le.r(Vt),le.d(Vt,{MENU_BACK_BUTTON_PRIORITY:()=>ot,OVERLAY_BACK_BUTTON_PRIORITY:()=>Je,blockHardwareBackButton:()=>Ze,shouldUseCloseWatcher:()=>Pt,startHardwareBackButton:()=>q});var y=le(467),Le=le(8476),G=le(8436);le(9081);const Pt=()=>G.c.get("experimentalCloseWatcher",!1)&&void 0!==Le.w&&"CloseWatcher"in Le.w,Ze=()=>{document.addEventListener("backbutton",()=>{})},q=()=>{const ne=document;let X=!1;const we=()=>{if(X)return;let ue=0,Ie=[];const be=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Q,Z){Ie.push({priority:Q,handler:Z,id:ue++})}}});ne.dispatchEvent(be);const Pe=function(){var Q=(0,y.A)(function*(Z){try{if(null!=Z&&Z.handler){const Fe=Z.handler(J);null!=Fe&&(yield Fe)}}catch(Fe){console.error(Fe)}});return function(Fe){return Q.apply(this,arguments)}}(),J=()=>{if(Ie.length>0){let Q={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Ie.forEach(Z=>{Z.priority>=Q.priority&&(Q=Z)}),X=!0,Ie=Ie.filter(Z=>Z.id!==Q.id),Pe(Q).then(()=>X=!1)}};J()};if(Pt()){let ue;const Ie=()=>{null==ue||ue.destroy(),ue=new Le.w.CloseWatcher,ue.onclose=()=>{we(),Ie()}};Ie()}else ne.addEventListener("backbutton",we)},Je=100,ot=99},5638:(zn,Vt,le)=>{"use strict";le.d(Vt,{a:()=>Je,b:()=>ot,c:()=>G,d:()=>Pe,e:()=>be,f:()=>Ie,g:()=>ne,h:()=>ue,i:()=>q,j:()=>ze,k:()=>Pt,l:()=>J,m:()=>We,n:()=>we,o:()=>Q,p:()=>ke,q:()=>Oe,r:()=>X,s:()=>nt,t:()=>y,u:()=>Z,v:()=>Fe});const y=(P,k=0)=>new Promise(D=>{Le(P,k,D)}),Le=(P,k=0,D)=>{let U,ee;const re={passive:!0},et=()=>{U&&U()},Dt=Jt=>{(void 0===Jt||P===Jt.target)&&(et(),D(Jt))};return P&&(P.addEventListener("webkitTransitionEnd",Dt,re),P.addEventListener("transitionend",Dt,re),ee=setTimeout(Dt,k+500),U=()=>{void 0!==ee&&(clearTimeout(ee),ee=void 0),P.removeEventListener("webkitTransitionEnd",Dt,re),P.removeEventListener("transitionend",Dt,re)}),et},G=(P,k)=>{P.componentOnReady?P.componentOnReady().then(D=>k(D)):X(()=>k(P))},We=P=>void 0!==P.componentOnReady,Pt=(P,k=[])=>{const D={};return k.forEach(U=>{P.hasAttribute(U)&&(null!==P.getAttribute(U)&&(D[U]=P.getAttribute(U)),P.removeAttribute(U))}),D},Ze=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],q=(P,k)=>{let D=Ze;return k&&k.length>0&&(D=D.filter(U=>!k.includes(U))),Pt(P,D)},Je=(P,k,D,U)=>{var ee;if(typeof window<"u"){const re=window,fe=null===(ee=null==re?void 0:re.Ionic)||void 0===ee?void 0:ee.config;if(fe){const et=fe.get("_ael");if(et)return et(P,k,D,U);if(fe._ael)return fe._ael(P,k,D,U)}}return P.addEventListener(k,D,U)},ot=(P,k,D,U)=>{var ee;if(typeof window<"u"){const re=window,fe=null===(ee=null==re?void 0:re.Ionic)||void 0===ee?void 0:ee.config;if(fe){const et=fe.get("_rel");if(et)return et(P,k,D,U);if(fe._rel)return fe._rel(P,k,D,U)}}return P.removeEventListener(k,D,U)},ne=(P,k=P)=>P.shadowRoot||k,X=P=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(P):"function"==typeof requestAnimationFrame?requestAnimationFrame(P):setTimeout(P),we=P=>!!P.shadowRoot&&!!P.attachShadow,ue=P=>{const k=P.closest("ion-item");return k?k.querySelector("ion-label"):null},Ie=P=>{if(P.focus(),P.classList.contains("ion-focusable")){const k=P.closest("ion-app");k&&k.setFocus([P])}},be=(P,k)=>{let D;const U=P.getAttribute("aria-labelledby"),ee=P.id;let re=null!==U&&""!==U.trim()?U:k+"-lbl",fe=null!==U&&""!==U.trim()?document.getElementById(U):ue(P);return fe?(null===U&&(fe.id=re),D=fe.textContent,fe.setAttribute("aria-hidden","true")):""!==ee.trim()&&(fe=document.querySelector(`label[for="${ee}"]`),fe&&(""!==fe.id?re=fe.id:fe.id=re=`${ee}-lbl`,D=fe.textContent)),{label:fe,labelId:re,labelText:D}},Pe=(P,k,D,U,ee)=>{if(P||we(k)){let re=k.querySelector("input.aux-input");re||(re=k.ownerDocument.createElement("input"),re.type="hidden",re.classList.add("aux-input"),k.appendChild(re)),re.disabled=ee,re.name=D,re.value=U||""}},J=(P,k,D)=>Math.max(P,Math.min(k,D)),Q=(P,k)=>{if(!P){const D="ASSERT: "+k;throw console.error(D),new Error(D)}},Z=P=>P.timeStamp||Date.now(),Fe=P=>{if(P){const k=P.changedTouches;if(k&&k.length>0){const D=k[0];return{x:D.clientX,y:D.clientY}}if(void 0!==P.pageX)return{x:P.pageX,y:P.pageY}}return{x:0,y:0}},ke=P=>{const k="rtl"===document.dir;switch(P){case"start":return k;case"end":return!k;default:throw new Error(`"${P}" is not a valid value for [side]. Use "start" or "end" instead.`)}},ze=(P,k)=>{const D=P._original||P;return{_original:P,emit:Oe(D.emit.bind(D),k)}},Oe=(P,k=0)=>{let D;return(...U)=>{clearTimeout(D),D=setTimeout(P,k,...U)}},nt=(P,k)=>{if(null!=P||(P={}),null!=k||(k={}),P===k)return!0;const D=Object.keys(P);if(D.length!==Object.keys(k).length)return!1;for(const U of D)if(!(U in k)||P[U]!==k[U])return!1;return!0}},405:(zn,Vt,le)=>{"use strict";le.r(Vt),le.d(Vt,{GESTURE_CONTROLLER:()=>y.G,createGesture:()=>ot});var y=le(8221);const Le=(ue,Ie,be,Pe)=>{const J=G(ue)?{capture:!!Pe.capture,passive:!!Pe.passive}:!!Pe.capture;let Q,Z;return ue.__zone_symbol__addEventListener?(Q="__zone_symbol__addEventListener",Z="__zone_symbol__removeEventListener"):(Q="addEventListener",Z="removeEventListener"),ue[Q](Ie,be,J),()=>{ue[Z](Ie,be,J)}},G=ue=>{if(void 0===We)try{const Ie=Object.defineProperty({},"passive",{get:()=>{We=!0}});ue.addEventListener("optsTest",()=>{},Ie)}catch{We=!1}return!!We};let We;const q=ue=>ue instanceof Document?ue:ue.ownerDocument,ot=ue=>{let Ie=!1,be=!1,Pe=!0,J=!1;const Q=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},ue),Z=Q.canStart,Fe=Q.onWillStart,ke=Q.onStart,ze=Q.onEnd,Oe=Q.notCaptured,nt=Q.onMove,P=Q.threshold,k=Q.passive,D=Q.blurOnStart,U={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},ee=((ue,Ie,be)=>{const Pe=be*(Math.PI/180),J="x"===ue,Q=Math.cos(Pe),Z=Ie*Ie;let Fe=0,ke=0,ze=!1,Oe=0;return{start(nt,P){Fe=nt,ke=P,Oe=0,ze=!0},detect(nt,P){if(!ze)return!1;const k=nt-Fe,D=P-ke,U=k*k+D*D;if(U<Z)return!1;const ee=Math.sqrt(U),re=(J?k:D)/ee;return Oe=re>Q?1:re<-Q?-1:0,ze=!1,!0},isGesture:()=>0!==Oe,getDirection:()=>Oe}})(Q.direction,Q.threshold,Q.maxAngle),re=y.G.createGesture({name:ue.gestureName,priority:ue.gesturePriority,disableScroll:ue.disableScroll}),Dt=()=>{Ie&&(J=!1,nt&&nt(U))},Jt=()=>!!re.capture()&&(Ie=!0,Pe=!1,U.startX=U.currentX,U.startY=U.currentY,U.startTime=U.currentTime,Fe?Fe(U).then(F):F(),!0),F=()=>{D&&(()=>{if(typeof document<"u"){const Y=document.activeElement;null!=Y&&Y.blur&&Y.blur()}})(),ke&&ke(U),Pe=!0},R=()=>{Ie=!1,be=!1,J=!1,Pe=!0,re.release()},N=Y=>{const Ye=Ie,dt=Pe;if(R(),dt){if(ne(U,Y),Ye)return void(ze&&ze(U));Oe&&Oe(U)}},W=((ue,Ie,be,Pe,J)=>{let Q,Z,Fe,ke,ze,Oe,nt,P=0;const k=Te=>{P=Date.now()+2e3,Ie(Te)&&(!Z&&be&&(Z=Le(ue,"touchmove",be,J)),Fe||(Fe=Le(Te.target,"touchend",U,J)),ke||(ke=Le(Te.target,"touchcancel",U,J)))},D=Te=>{P>Date.now()||Ie(Te)&&(!Oe&&be&&(Oe=Le(q(ue),"mousemove",be,J)),nt||(nt=Le(q(ue),"mouseup",ee,J)))},U=Te=>{re(),Pe&&Pe(Te)},ee=Te=>{fe(),Pe&&Pe(Te)},re=()=>{Z&&Z(),Fe&&Fe(),ke&&ke(),Z=Fe=ke=void 0},fe=()=>{Oe&&Oe(),nt&&nt(),Oe=nt=void 0},et=()=>{re(),fe()},Dt=(Te=!0)=>{Te?(Q||(Q=Le(ue,"touchstart",k,J)),ze||(ze=Le(ue,"mousedown",D,J))):(Q&&Q(),ze&&ze(),Q=ze=void 0,et())};return{enable:Dt,stop:et,destroy:()=>{Dt(!1),Pe=be=Ie=void 0}}})(Q.el,Y=>{const Ye=we(Y);return!(be||!Pe||(X(Y,U),U.startX=U.currentX,U.startY=U.currentY,U.startTime=U.currentTime=Ye,U.velocityX=U.velocityY=U.deltaX=U.deltaY=0,U.event=Y,Z&&!1===Z(U))||(re.release(),!re.start()))&&(be=!0,0===P?Jt():(ee.start(U.startX,U.startY),!0))},Y=>{Ie?!J&&Pe&&(J=!0,ne(U,Y),requestAnimationFrame(Dt)):(ne(U,Y),ee.detect(U.currentX,U.currentY)&&(!ee.isGesture()||!Jt())&&ae())},N,{capture:!1,passive:k}),ae=()=>{R(),W.stop(),Oe&&Oe(U)};return{enable(Y=!0){Y||(Ie&&N(void 0),R()),W.enable(Y)},destroy(){re.destroy(),W.destroy()}}},ne=(ue,Ie)=>{if(!Ie)return;const be=ue.currentX,Pe=ue.currentY,J=ue.currentTime;X(Ie,ue);const Q=ue.currentX,Z=ue.currentY,ke=(ue.currentTime=we(Ie))-J;if(ke>0&&ke<100){const Oe=(Z-Pe)/ke;ue.velocityX=(Q-be)/ke*.7+.3*ue.velocityX,ue.velocityY=.7*Oe+.3*ue.velocityY}ue.deltaX=Q-ue.startX,ue.deltaY=Z-ue.startY,ue.event=Ie},X=(ue,Ie)=>{let be=0,Pe=0;if(ue){const J=ue.changedTouches;if(J&&J.length>0){const Q=J[0];be=Q.clientX,Pe=Q.clientY}else void 0!==ue.pageX&&(be=ue.pageX,Pe=ue.pageY)}Ie.currentX=be,Ie.currentY=Pe},we=ue=>ue.timeStamp||Date.now()},7818:(zn,Vt,le)=>{"use strict";le.d(Vt,{m:()=>ue});var y=le(467),Le=le(8476),G=le(9457),We=le(4929),Pt=le(5638),Ze=le(8436),q=le(3503);const Je=Ie=>(0,q.c)().duration(Ie?400:300),ot=Ie=>{let be,Pe;const J=Ie.width+8,Q=(0,q.c)(),Z=(0,q.c)();Ie.isEndSide?(be=J+"px",Pe="0px"):(be=-J+"px",Pe="0px"),Q.addElement(Ie.menuInnerEl).fromTo("transform",`translateX(${be})`,`translateX(${Pe})`);const ke="ios"===(0,Ze.b)(Ie),ze=ke?.2:.25;return Z.addElement(Ie.backdropEl).fromTo("opacity",.01,ze),Je(ke).addAnimation([Q,Z])},ne=Ie=>{let be,Pe;const J=(0,Ze.b)(Ie),Q=Ie.width;Ie.isEndSide?(be=-Q+"px",Pe=Q+"px"):(be=Q+"px",Pe=-Q+"px");const Z=(0,q.c)().addElement(Ie.menuInnerEl).fromTo("transform",`translateX(${Pe})`,"translateX(0px)"),Fe=(0,q.c)().addElement(Ie.contentEl).fromTo("transform","translateX(0px)",`translateX(${be})`),ke=(0,q.c)().addElement(Ie.backdropEl).fromTo("opacity",.01,.32);return Je("ios"===J).addAnimation([Z,Fe,ke])},X=Ie=>{const be=(0,Ze.b)(Ie),Pe=Ie.width*(Ie.isEndSide?-1:1)+"px",J=(0,q.c)().addElement(Ie.contentEl).fromTo("transform","translateX(0px)",`translateX(${Pe})`);return Je("ios"===be).addAnimation(J)},ue=(()=>{const Ie=new Map,be=[],Pe=function(){var R=(0,y.A)(function*(N){const W=yield Oe(N,!0);return!!W&&W.open()});return function(W){return R.apply(this,arguments)}}(),J=function(){var R=(0,y.A)(function*(N){const W=yield void 0!==N?Oe(N,!0):nt();return void 0!==W&&W.close()});return function(W){return R.apply(this,arguments)}}(),Q=function(){var R=(0,y.A)(function*(N){const W=yield Oe(N,!0);return!!W&&W.toggle()});return function(W){return R.apply(this,arguments)}}(),Z=function(){var R=(0,y.A)(function*(N,W){const ae=yield Oe(W);return ae&&(ae.disabled=!N),ae});return function(W,ae){return R.apply(this,arguments)}}(),Fe=function(){var R=(0,y.A)(function*(N,W){const ae=yield Oe(W);return ae&&(ae.swipeGesture=N),ae});return function(W,ae){return R.apply(this,arguments)}}(),ke=function(){var R=(0,y.A)(function*(N){if(null!=N){const W=yield Oe(N);return void 0!==W&&W.isOpen()}return void 0!==(yield nt())});return function(W){return R.apply(this,arguments)}}(),ze=function(){var R=(0,y.A)(function*(N){const W=yield Oe(N);return!!W&&!W.disabled});return function(W){return R.apply(this,arguments)}}(),Oe=function(){var R=(0,y.A)(function*(N,W=!1){if(yield F(),"start"===N||"end"===N){const Y=be.filter(dt=>dt.side===N&&!dt.disabled);if(Y.length>=1)return Y.length>1&&W&&(0,We.p)(`menuController queried for a menu on the "${N}" side, but ${Y.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,Y.map(dt=>dt.el)),Y[0].el;const Ye=be.filter(dt=>dt.side===N);if(Ye.length>=1)return Ye.length>1&&W&&(0,We.p)(`menuController queried for a menu on the "${N}" side, but ${Ye.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,Ye.map(dt=>dt.el)),Ye[0].el}else if(null!=N)return Te(Y=>Y.menuId===N);return Te(Y=>!Y.disabled)||(be.length>0?be[0].el:void 0)});return function(W){return R.apply(this,arguments)}}(),nt=function(){var R=(0,y.A)(function*(){return yield F(),et()});return function(){return R.apply(this,arguments)}}(),P=function(){var R=(0,y.A)(function*(){return yield F(),Dt()});return function(){return R.apply(this,arguments)}}(),k=function(){var R=(0,y.A)(function*(){return yield F(),Jt()});return function(){return R.apply(this,arguments)}}(),D=(R,N)=>{Ie.set(R,N)},re=function(){var R=(0,y.A)(function*(N,W,ae){if(Jt())return!1;if(W){const Y=yield nt();Y&&N.el!==Y&&(yield Y.setOpen(!1,!1))}return N._setOpen(W,ae)});return function(W,ae,Y){return R.apply(this,arguments)}}(),et=()=>Te(R=>R._isOpen),Dt=()=>be.map(R=>R.el),Jt=()=>be.some(R=>R.isAnimating),Te=R=>{const N=be.find(R);if(void 0!==N)return N.el},F=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(R=>new Promise(N=>(0,Pt.c)(R,N))));return D("reveal",X),D("push",ne),D("overlay",ot),null==Le.d||Le.d.addEventListener("ionBackButton",R=>{const N=et();N&&R.detail.register(G.MENU_BACK_BUTTON_PRIORITY,()=>N.close())}),{registerAnimation:D,get:Oe,getMenus:P,getOpen:nt,isEnabled:ze,swipeGesture:Fe,isAnimating:k,isOpen:ke,enable:Z,toggle:Q,close:J,open:Pe,_getOpenSync:et,_createAnimation:(R,N)=>{const W=Ie.get(R);if(!W)throw new Error("animation not registered");return W(N)},_register:R=>{be.indexOf(R)<0&&be.push(R)},_unregister:R=>{const N=be.indexOf(R);N>-1&&be.splice(N,1)},_setOpen:re}})()},1497:(zn,Vt,le)=>{"use strict";le.d(Vt,{b:()=>Ze,c:()=>q,d:()=>Je,e:()=>P,g:()=>U,l:()=>Oe,s:()=>k,t:()=>X,w:()=>nt});var y=le(467),Le=le(9081),G=le(5638);const Ze="ionViewWillLeave",q="ionViewDidLeave",Je="ionViewWillUnload",X=ee=>new Promise((re,fe)=>{(0,Le.w)(()=>{we(ee),ue(ee).then(et=>{et.animation&&et.animation.destroy(),Ie(ee),re(et)},et=>{Ie(ee),fe(et)})})}),we=ee=>{const re=ee.enteringEl,fe=ee.leavingEl;D(re,fe,ee.direction),ee.showGoBack?re.classList.add("can-go-back"):re.classList.remove("can-go-back"),k(re,!1),re.style.setProperty("pointer-events","none"),fe&&(k(fe,!1),fe.style.setProperty("pointer-events","none"))},ue=function(){var ee=(0,y.A)(function*(re){const fe=yield be(re);return fe&&Le.B.isBrowser?Pe(fe,re):J(re)});return function(fe){return ee.apply(this,arguments)}}(),Ie=ee=>{const re=ee.enteringEl,fe=ee.leavingEl;re.classList.remove("ion-page-invisible"),re.style.removeProperty("pointer-events"),void 0!==fe&&(fe.classList.remove("ion-page-invisible"),fe.style.removeProperty("pointer-events"))},be=function(){var ee=(0,y.A)(function*(re){return re.leavingEl&&re.animated&&0!==re.duration?re.animationBuilder?re.animationBuilder:"ios"===re.mode?(yield Promise.resolve().then(le.bind(le,2604))).iosTransitionAnimation:(yield Promise.resolve().then(le.bind(le,3003))).mdTransitionAnimation:void 0});return function(fe){return ee.apply(this,arguments)}}(),Pe=function(){var ee=(0,y.A)(function*(re,fe){yield Q(fe,!0);const et=re(fe.baseEl,fe);ke(fe.enteringEl,fe.leavingEl);const Dt=yield Fe(et,fe);return fe.progressCallback&&fe.progressCallback(void 0),Dt&&ze(fe.enteringEl,fe.leavingEl),{hasCompleted:Dt,animation:et}});return function(fe,et){return ee.apply(this,arguments)}}(),J=function(){var ee=(0,y.A)(function*(re){const fe=re.enteringEl,et=re.leavingEl;return yield Q(re,!1),ke(fe,et),ze(fe,et),{hasCompleted:!0}});return function(fe){return ee.apply(this,arguments)}}(),Q=function(){var ee=(0,y.A)(function*(re,fe){(void 0!==re.deepWait?re.deepWait:fe)&&(yield Promise.all([P(re.enteringEl),P(re.leavingEl)])),yield Z(re.viewIsReady,re.enteringEl)});return function(fe,et){return ee.apply(this,arguments)}}(),Z=function(){var ee=(0,y.A)(function*(re,fe){re&&(yield re(fe))});return function(fe,et){return ee.apply(this,arguments)}}(),Fe=(ee,re)=>{const fe=re.progressCallback,et=new Promise(Dt=>{ee.onFinish(Jt=>Dt(1===Jt))});return fe?(ee.progressStart(!0),fe(ee)):ee.play(),et},ke=(ee,re)=>{Oe(re,Ze),Oe(ee,"ionViewWillEnter")},ze=(ee,re)=>{Oe(ee,"ionViewDidEnter"),Oe(re,q)},Oe=(ee,re)=>{if(ee){const fe=new CustomEvent(re,{bubbles:!1,cancelable:!1});ee.dispatchEvent(fe)}},nt=()=>new Promise(ee=>(0,G.r)(()=>(0,G.r)(()=>ee()))),P=function(){var ee=(0,y.A)(function*(re){const fe=re;if(fe){if(null!=fe.componentOnReady){if(null!=(yield fe.componentOnReady()))return}else if(null!=fe.__registerHost)return void(yield new Promise(Dt=>(0,G.r)(Dt)));yield Promise.all(Array.from(fe.children).map(P))}});return function(fe){return ee.apply(this,arguments)}}(),k=(ee,re)=>{re?(ee.setAttribute("aria-hidden","true"),ee.classList.add("ion-page-hidden")):(ee.hidden=!1,ee.removeAttribute("aria-hidden"),ee.classList.remove("ion-page-hidden"))},D=(ee,re,fe)=>{void 0!==ee&&(ee.style.zIndex="back"===fe?"99":"101"),void 0!==re&&(re.style.zIndex="100")},U=ee=>ee.classList.contains("ion-page")?ee:ee.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||ee},4929:(zn,Vt,le)=>{"use strict";le.d(Vt,{a:()=>Le,b:()=>G,p:()=>y});const y=(We,...Pt)=>console.warn(`[Ionic Warning]: ${We}`,...Pt),Le=(We,...Pt)=>console.error(`[Ionic Error]: ${We}`,...Pt),G=(We,...Pt)=>console.error(`<${We.tagName.toLowerCase()}> must be used inside ${Pt.join(" or ")}.`)},8476:(zn,Vt,le)=>{"use strict";le.d(Vt,{d:()=>Le,w:()=>y});const y=typeof window<"u"?window:void 0,Le=typeof document<"u"?document:void 0},9081:(zn,Vt,le)=>{"use strict";le.d(Vt,{B:()=>we,H:()=>Jt,a:()=>Ln,b:()=>zi,c:()=>dt,d:()=>pn,e:()=>nh,f:()=>Bt,g:()=>rt,h:()=>et,i:()=>x,j:()=>ue,r:()=>sn,w:()=>de});var y=le(467);let We,Pt,Ze,q=!1,Je=!1,ot=!1,ne=!1,X=!1;const we={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},ue=I=>{const b=new URL(I,qt.$resourcesUrl$);return b.origin!==mn.location.origin?b.href:b.pathname},Fe="s-id",ke="sty-id",nt="slot-fb{display:contents}slot-fb[hidden]{display:none}",P="http://www.w3.org/1999/xlink",k={},re=I=>"object"==(I=typeof I)||"function"===I;function fe(I){var b,L,z;return null!==(z=null===(L=null===(b=I.head)||void 0===b?void 0:b.querySelector('meta[name="csp-nonce"]'))||void 0===L?void 0:L.getAttribute("content"))&&void 0!==z?z:void 0}const et=(I,b,...L)=>{let z=null,ie=null,pe=null,Re=!1,he=!1;const Qe=[],qe=St=>{for(let Nt=0;Nt<St.length;Nt++)z=St[Nt],Array.isArray(z)?qe(z):null!=z&&"boolean"!=typeof z&&((Re="function"!=typeof I&&!re(z))&&(z=String(z)),Re&&he?Qe[Qe.length-1].$text$+=z:Qe.push(Re?Dt(null,z):z),he=Re)};if(qe(L),b){b.key&&(ie=b.key),b.name&&(pe=b.name);{const St=b.className||b.class;St&&(b.class="object"!=typeof St?St:Object.keys(St).filter(Nt=>St[Nt]).join(" "))}}if("function"==typeof I)return I(null===b?{}:b,Qe,F);const st=Dt(I,null);return st.$attrs$=b,Qe.length>0&&(st.$children$=Qe),st.$key$=ie,st.$name$=pe,st},Dt=(I,b)=>({$flags$:0,$tag$:I,$text$:b,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Jt={},F={forEach:(I,b)=>I.map(R).forEach(b),map:(I,b)=>I.map(R).map(b).map(N)},R=I=>({vattrs:I.$attrs$,vchildren:I.$children$,vkey:I.$key$,vname:I.$name$,vtag:I.$tag$,vtext:I.$text$}),N=I=>{if("function"==typeof I.vtag){const L=Object.assign({},I.vattrs);return I.vkey&&(L.key=I.vkey),I.vname&&(L.name=I.vname),et(I.vtag,L,...I.vchildren||[])}const b=Dt(I.vtag,I.vtext);return b.$attrs$=I.vattrs,b.$children$=I.vchildren,b.$key$=I.vkey,b.$name$=I.vname,b},ae=(I,b,L,z,ie,pe,Re)=>{let he,Qe,qe,st;if(1===pe.nodeType){for(he=pe.getAttribute("c-id"),he&&(Qe=he.split("."),(Qe[0]===Re||"0"===Qe[0])&&(qe={$flags$:0,$hostId$:Qe[0],$nodeId$:Qe[1],$depth$:Qe[2],$index$:Qe[3],$tag$:pe.tagName.toLowerCase(),$elm$:pe,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},b.push(qe),pe.removeAttribute("c-id"),I.$children$||(I.$children$=[]),I.$children$[qe.$index$]=qe,I=qe,z&&"0"===qe.$depth$&&(z[qe.$index$]=qe.$elm$))),st=pe.childNodes.length-1;st>=0;st--)ae(I,b,L,z,ie,pe.childNodes[st],Re);if(pe.shadowRoot)for(st=pe.shadowRoot.childNodes.length-1;st>=0;st--)ae(I,b,L,z,ie,pe.shadowRoot.childNodes[st],Re)}else if(8===pe.nodeType)Qe=pe.nodeValue.split("."),(Qe[1]===Re||"0"===Qe[1])&&(he=Qe[0],qe={$flags$:0,$hostId$:Qe[1],$nodeId$:Qe[2],$depth$:Qe[3],$index$:Qe[4],$elm$:pe,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===he?(qe.$elm$=pe.nextSibling,qe.$elm$&&3===qe.$elm$.nodeType&&(qe.$text$=qe.$elm$.textContent,b.push(qe),pe.remove(),I.$children$||(I.$children$=[]),I.$children$[qe.$index$]=qe,z&&"0"===qe.$depth$&&(z[qe.$index$]=qe.$elm$))):qe.$hostId$===Re&&("s"===he?(qe.$tag$="slot",pe["s-sn"]=Qe[5]?qe.$name$=Qe[5]:"",pe["s-sr"]=!0,z&&(qe.$elm$=br.createElement(qe.$tag$),qe.$name$&&qe.$elm$.setAttribute("name",qe.$name$),pe.parentNode.insertBefore(qe.$elm$,pe),pe.remove(),"0"===qe.$depth$&&(z[qe.$index$]=qe.$elm$)),L.push(qe),I.$children$||(I.$children$=[]),I.$children$[qe.$index$]=qe):"r"===he&&(z?pe.remove():(ie["s-cr"]=pe,pe["s-cn"]=!0))));else if(I&&"style"===I.$tag$){const St=Dt(null,pe.textContent);St.$elm$=pe,St.$index$="0",I.$children$=[St]}},Y=(I,b)=>{if(1===I.nodeType){let L=0;for(;L<I.childNodes.length;L++)Y(I.childNodes[L],b);if(I.shadowRoot)for(L=0;L<I.shadowRoot.childNodes.length;L++)Y(I.shadowRoot.childNodes[L],b)}else if(8===I.nodeType){const L=I.nodeValue.split(".");"o"===L[0]&&(b.set(L[1]+"."+L[2],I),I.nodeValue="",I["s-en"]=L[3])}},dt=I=>fl.push(I),rt=I=>Ot(I).$modeName$,Bt=I=>Ot(I).$hostElement$,pn=(I,b,L)=>{const z=Bt(I);return{emit:ie=>wt(z,b,{bubbles:!!(4&L),composed:!!(2&L),cancelable:!!(1&L),detail:ie})}},wt=(I,b,L)=>{const z=qt.ce(b,L);return I.dispatchEvent(z),z},cn=new WeakMap,jt=(I,b,L)=>{let z=li.get(I);zt&&L?(z=z||new CSSStyleSheet,"string"==typeof z?z=b:z.replaceSync(b)):z=b,li.set(I,z)},Ae=(I,b,L)=>{var z;const ie=_e(b,L),pe=li.get(ie);if(I=11===I.nodeType?I:br,pe)if("string"==typeof pe){let he,Re=cn.get(I=I.head||I);if(Re||cn.set(I,Re=new Set),!Re.has(ie)){if(I.host&&(he=I.querySelector(`[${ke}="${ie}"]`)))he.innerHTML=pe;else{he=br.createElement("style"),he.innerHTML=pe;const Qe=null!==(z=qt.$nonce$)&&void 0!==z?z:fe(br);null!=Qe&&he.setAttribute("nonce",Qe),I.insertBefore(he,I.querySelector("link"))}4&b.$flags$&&(he.innerHTML+=nt),Re&&Re.add(ie)}}else I.adoptedStyleSheets.includes(pe)||(I.adoptedStyleSheets=[...I.adoptedStyleSheets,pe]);return ie},_e=(I,b)=>"sc-"+(b&&32&I.$flags$?I.$tagName$+"-"+b:I.$tagName$),It=I=>I.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Wt=(I,b,L,z,ie,pe)=>{if(L!==z){let Re=Un(I,b),he=b.toLowerCase();if("class"===b){const Qe=I.classList,qe=en(L),st=en(z);Qe.remove(...qe.filter(St=>St&&!st.includes(St))),Qe.add(...st.filter(St=>St&&!qe.includes(St)))}else if("style"===b){for(const Qe in L)(!z||null==z[Qe])&&(Qe.includes("-")?I.style.removeProperty(Qe):I.style[Qe]="");for(const Qe in z)(!L||z[Qe]!==L[Qe])&&(Qe.includes("-")?I.style.setProperty(Qe,z[Qe]):I.style[Qe]=z[Qe])}else if("key"!==b)if("ref"===b)z&&z(I);else if(Re||"o"!==b[0]||"n"!==b[1]){const Qe=re(z);if((Re||Qe&&null!==z)&&!ie)try{if(I.tagName.includes("-"))I[b]=z;else{const st=null==z?"":z;"list"===b?Re=!1:(null==L||I[b]!=st)&&(I[b]=st)}}catch{}let qe=!1;he!==(he=he.replace(/^xlink\:?/,""))&&(b=he,qe=!0),null==z||!1===z?(!1!==z||""===I.getAttribute(b))&&(qe?I.removeAttributeNS(P,b):I.removeAttribute(b)):(!Re||4&pe||ie)&&!Qe&&(z=!0===z?"":z,qe?I.setAttributeNS(P,b,z):I.setAttribute(b,z))}else if(b="-"===b[2]?b.slice(3):Un(mn,he)?he.slice(2):he[2]+b.slice(3),L||z){const Qe=b.endsWith(Cn);b=b.replace(Kt,""),L&&qt.rel(I,b,L,Qe),z&&qt.ael(I,b,z,Qe)}}},gn=/\s/,en=I=>I?I.split(gn):[],Cn="Capture",Kt=new RegExp(Cn+"$"),cr=(I,b,L,z)=>{const ie=11===b.$elm$.nodeType&&b.$elm$.host?b.$elm$.host:b.$elm$,pe=I&&I.$attrs$||k,Re=b.$attrs$||k;for(z in pe)z in Re||Wt(ie,z,pe[z],void 0,L,b.$flags$);for(z in Re)Wt(ie,z,pe[z],Re[z],L,b.$flags$)},Nn=(I,b,L,z)=>{const ie=b.$children$[L];let Re,he,Qe,pe=0;if(q||(ot=!0,"slot"===ie.$tag$&&(We&&z.classList.add(We+"-s"),ie.$flags$|=ie.$children$?2:1)),null!==ie.$text$)Re=ie.$elm$=br.createTextNode(ie.$text$);else if(1&ie.$flags$)Re=ie.$elm$=br.createTextNode("");else{if(ne||(ne="svg"===ie.$tag$),Re=ie.$elm$=br.createElementNS(ne?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&ie.$flags$?"slot-fb":ie.$tag$),ne&&"foreignObject"===ie.$tag$&&(ne=!1),cr(null,ie,ne),(I=>null!=I)(We)&&Re["s-si"]!==We&&Re.classList.add(Re["s-si"]=We),ie.$children$)for(pe=0;pe<ie.$children$.length;++pe)he=Nn(I,ie,pe,Re),he&&Re.appendChild(he);"svg"===ie.$tag$?ne=!1:"foreignObject"===Re.tagName&&(ne=!0)}return Re["s-hn"]=Ze,3&ie.$flags$&&(Re["s-sr"]=!0,Re["s-cr"]=Pt,Re["s-sn"]=ie.$name$||"",Qe=I&&I.$children$&&I.$children$[L],Qe&&Qe.$tag$===ie.$tag$&&I.$elm$&&Hr(I.$elm$,!1)),Re},Hr=(I,b)=>{qt.$flags$|=1;const L=I.childNodes;for(let z=L.length-1;z>=0;z--){const ie=L[z];ie["s-hn"]!==Ze&&ie["s-ol"]&&(_i(ie).insertBefore(ie,ji(ie)),ie["s-ol"].remove(),ie["s-ol"]=void 0,ie["s-sh"]=void 0,ot=!0),b&&Hr(ie,b)}qt.$flags$&=-2},Ci=(I,b,L,z,ie,pe)=>{let he,Re=I["s-cr"]&&I["s-cr"].parentNode||I;for(Re.shadowRoot&&Re.tagName===Ze&&(Re=Re.shadowRoot);ie<=pe;++ie)z[ie]&&(he=Nn(null,L,ie,I),he&&(z[ie].$elm$=he,Re.insertBefore(he,ji(b))))},Fr=(I,b,L)=>{for(let z=b;z<=L;++z){const ie=I[z];if(ie){const pe=ie.$elm$;rs(ie),pe&&(Je=!0,pe["s-ol"]?pe["s-ol"].remove():Hr(pe,!0),pe.remove())}}},bi=(I,b,L=!1)=>I.$tag$===b.$tag$&&("slot"===I.$tag$?I.$name$===b.$name$:!!L||I.$key$===b.$key$),ji=I=>I&&I["s-ol"]||I,_i=I=>(I["s-ol"]?I["s-ol"]:I).parentNode,oi=(I,b,L=!1)=>{const z=b.$elm$=I.$elm$,ie=I.$children$,pe=b.$children$,Re=b.$tag$,he=b.$text$;let Qe;null===he?(ne="svg"===Re||"foreignObject"!==Re&&ne,"slot"===Re&&!q||cr(I,b,ne),null!==ie&&null!==pe?((I,b,L,z,ie=!1)=>{let On,Zn,pe=0,Re=0,he=0,Qe=0,qe=b.length-1,st=b[0],St=b[qe],Nt=z.length-1,je=z[0],rr=z[Nt];for(;pe<=qe&&Re<=Nt;)if(null==st)st=b[++pe];else if(null==St)St=b[--qe];else if(null==je)je=z[++Re];else if(null==rr)rr=z[--Nt];else if(bi(st,je,ie))oi(st,je,ie),st=b[++pe],je=z[++Re];else if(bi(St,rr,ie))oi(St,rr,ie),St=b[--qe],rr=z[--Nt];else if(bi(st,rr,ie))("slot"===st.$tag$||"slot"===rr.$tag$)&&Hr(st.$elm$.parentNode,!1),oi(st,rr,ie),I.insertBefore(st.$elm$,St.$elm$.nextSibling),st=b[++pe],rr=z[--Nt];else if(bi(St,je,ie))("slot"===st.$tag$||"slot"===rr.$tag$)&&Hr(St.$elm$.parentNode,!1),oi(St,je,ie),I.insertBefore(St.$elm$,st.$elm$),St=b[--qe],je=z[++Re];else{for(he=-1,Qe=pe;Qe<=qe;++Qe)if(b[Qe]&&null!==b[Qe].$key$&&b[Qe].$key$===je.$key$){he=Qe;break}he>=0?(Zn=b[he],Zn.$tag$!==je.$tag$?On=Nn(b&&b[Re],L,he,I):(oi(Zn,je,ie),b[he]=void 0,On=Zn.$elm$),je=z[++Re]):(On=Nn(b&&b[Re],L,Re,I),je=z[++Re]),On&&_i(st.$elm$).insertBefore(On,ji(st.$elm$))}pe>qe?Ci(I,null==z[Nt+1]?null:z[Nt+1].$elm$,L,z,Re,Nt):Re>Nt&&Fr(b,pe,qe)})(z,ie,b,pe,L):null!==pe?(null!==I.$text$&&(z.textContent=""),Ci(z,null,b,pe,0,pe.length-1)):null!==ie&&Fr(ie,0,ie.length-1),ne&&"svg"===Re&&(ne=!1)):(Qe=z["s-cr"])?Qe.parentNode.textContent=he:I.$text$!==he&&(z.data=he)},Yr=I=>{const b=I.childNodes;for(const L of b)if(1===L.nodeType){if(L["s-sr"]){const z=L["s-sn"];L.hidden=!1;for(const ie of b)if(ie!==L)if(ie["s-hn"]!==L["s-hn"]||""!==z){if(1===ie.nodeType&&(z===ie.getAttribute("slot")||z===ie["s-sn"])){L.hidden=!0;break}}else if(1===ie.nodeType||3===ie.nodeType&&""!==ie.textContent.trim()){L.hidden=!0;break}}Yr(L)}},Bn=[],Hi=I=>{let b,L,z;for(const ie of I.childNodes){if(ie["s-sr"]&&(b=ie["s-cr"])&&b.parentNode){L=b.parentNode.childNodes;const pe=ie["s-sn"];for(z=L.length-1;z>=0;z--)if(b=L[z],!b["s-cn"]&&!b["s-nr"]&&b["s-hn"]!==ie["s-hn"])if(ns(b,pe)){let Re=Bn.find(he=>he.$nodeToRelocate$===b);Je=!0,b["s-sn"]=b["s-sn"]||pe,Re?(Re.$nodeToRelocate$["s-sh"]=ie["s-hn"],Re.$slotRefNode$=ie):(b["s-sh"]=ie["s-hn"],Bn.push({$slotRefNode$:ie,$nodeToRelocate$:b})),b["s-sr"]&&Bn.map(he=>{ns(he.$nodeToRelocate$,b["s-sn"])&&(Re=Bn.find(Qe=>Qe.$nodeToRelocate$===b),Re&&!he.$slotRefNode$&&(he.$slotRefNode$=Re.$slotRefNode$))})}else Bn.some(Re=>Re.$nodeToRelocate$===b)||Bn.push({$nodeToRelocate$:b})}1===ie.nodeType&&Hi(ie)}},ns=(I,b)=>1===I.nodeType?null===I.getAttribute("slot")&&""===b||I.getAttribute("slot")===b:I["s-sn"]===b||""===b,rs=I=>{I.$attrs$&&I.$attrs$.ref&&I.$attrs$.ref(null),I.$children$&&I.$children$.map(rs)},Ti=(I,b)=>{b&&!I.$onRenderResolve$&&b["s-p"]&&b["s-p"].push(new Promise(L=>I.$onRenderResolve$=L))},Cr=(I,b)=>{if(I.$flags$|=16,!(4&I.$flags$))return Ti(I,I.$ancestorComponent$),de(()=>Bo(I,b));I.$flags$|=512},Bo=(I,b)=>{const z=I.$lazyInstance$;let ie;return b&&(I.$flags$|=256,I.$queuedListeners$&&(I.$queuedListeners$.map(([pe,Re])=>Ce(z,pe,Re)),I.$queuedListeners$=void 0),ie=Ce(z,"componentWillLoad")),ie=$o(ie,()=>Ce(z,"componentWillRender")),$o(ie,()=>As(I,z,b))},$o=(I,b)=>$n(I)?I.then(b):b(),$n=I=>I instanceof Promise||I&&I.then&&"function"==typeof I.then,As=function(){var I=(0,y.A)(function*(b,L,z){var ie;const pe=b.$hostElement$,he=pe["s-rc"];z&&(I=>{const b=I.$cmpMeta$,L=I.$hostElement$,z=b.$flags$,pe=Ae(L.shadowRoot?L.shadowRoot:L.getRootNode(),b,I.$modeName$);10&z&&(L["s-sc"]=pe,L.classList.add(pe+"-h"),2&z&&L.classList.add(pe+"-s"))})(b);Xs(b,L,pe,z),he&&(he.map(qe=>qe()),pe["s-rc"]=void 0);{const qe=null!==(ie=pe["s-p"])&&void 0!==ie?ie:[],st=()=>V(b);0===qe.length?st():(Promise.all(qe).then(st),b.$flags$|=4,qe.length=0)}});return function(L,z,ie){return I.apply(this,arguments)}}(),Xs=(I,b,L,z)=>{try{b=b.render&&b.render(),I.$flags$&=-17,I.$flags$|=2,((I,b,L=!1)=>{var z,ie,pe,Re;const he=I.$hostElement$,Qe=I.$cmpMeta$,qe=I.$vnode$||Dt(null,null),st=(I=>I&&I.$tag$===Jt)(b)?b:et(null,null,b);if(Ze=he.tagName,Qe.$attrsToReflect$&&(st.$attrs$=st.$attrs$||{},Qe.$attrsToReflect$.map(([St,Nt])=>st.$attrs$[Nt]=he[St])),L&&st.$attrs$)for(const St of Object.keys(st.$attrs$))he.hasAttribute(St)&&!["key","ref","style","class"].includes(St)&&(st.$attrs$[St]=he[St]);if(st.$tag$=null,st.$flags$|=4,I.$vnode$=st,st.$elm$=qe.$elm$=he.shadowRoot||he,We=he["s-sc"],q=!!(1&Qe.$flags$),Pt=he["s-cr"],Je=!1,oi(qe,st,L),qt.$flags$|=1,ot){Hi(st.$elm$);for(const St of Bn){const Nt=St.$nodeToRelocate$;if(!Nt["s-ol"]){const je=br.createTextNode("");je["s-nr"]=Nt,Nt.parentNode.insertBefore(Nt["s-ol"]=je,Nt)}}for(const St of Bn){const Nt=St.$nodeToRelocate$,je=St.$slotRefNode$;if(je){const rr=je.parentNode;let On=je.nextSibling;{let Zn=null===(z=Nt["s-ol"])||void 0===z?void 0:z.previousSibling;for(;Zn;){let ui=null!==(ie=Zn["s-nr"])&&void 0!==ie?ie:null;if(ui&&ui["s-sn"]===Nt["s-sn"]&&rr===ui.parentNode&&(ui=ui.nextSibling,!ui||!ui["s-nr"])){On=ui;break}Zn=Zn.previousSibling}}(!On&&rr!==Nt.parentNode||Nt.nextSibling!==On)&&Nt!==On&&(!Nt["s-hn"]&&Nt["s-ol"]&&(Nt["s-hn"]=Nt["s-ol"].parentNode.nodeName),rr.insertBefore(Nt,On),1===Nt.nodeType&&(Nt.hidden=null!==(pe=Nt["s-ih"])&&void 0!==pe&&pe))}else 1===Nt.nodeType&&(L&&(Nt["s-ih"]=null!==(Re=Nt.hidden)&&void 0!==Re&&Re),Nt.hidden=!0)}}Je&&Yr(st.$elm$),qt.$flags$&=-2,Bn.length=0,Pt=void 0})(I,b,z)}catch(ie){Yn(ie,I.$hostElement$)}return null},V=I=>{const L=I.$hostElement$,ie=I.$lazyInstance$,pe=I.$ancestorComponent$;Ce(ie,"componentDidRender"),64&I.$flags$?Ce(ie,"componentDidUpdate"):(I.$flags$|=64,K(L),Ce(ie,"componentDidLoad"),I.$onReadyResolve$(L),pe||$()),I.$onInstanceResolve$(L),I.$onRenderResolve$&&(I.$onRenderResolve$(),I.$onRenderResolve$=void 0),512&I.$flags$&&vo(()=>Cr(I,!1)),I.$flags$&=-517},x=I=>{{const b=Ot(I),L=b.$hostElement$.isConnected;return L&&2==(18&b.$flags$)&&Cr(b,!1),L}},$=I=>{K(br.documentElement),vo(()=>wt(mn,"appload",{detail:{namespace:"ionic"}}))},Ce=(I,b,L)=>{if(I&&I[b])try{return I[b](L)}catch(z){Yn(z)}},K=I=>I.classList.add("hydrated"),kt=(I,b,L)=>{var z;const ie=I.prototype;if(b.$members$){I.watchers&&(b.$watchers$=I.watchers);const pe=Object.entries(b.$members$);if(pe.map(([Re,[he]])=>{31&he||2&L&&32&he?Object.defineProperty(ie,Re,{get(){return((I,b)=>Ot(this).$instanceValues$.get(b))(0,Re)},set(Qe){((I,b,L,z)=>{const ie=Ot(I),pe=ie.$hostElement$,Re=ie.$instanceValues$.get(b),he=ie.$flags$,Qe=ie.$lazyInstance$;L=((I,b)=>null==I||re(I)?I:4&b?"false"!==I&&(""===I||!!I):2&b?parseFloat(I):1&b?String(I):I)(L,z.$members$[b][0]);const qe=Number.isNaN(Re)&&Number.isNaN(L);if((!(8&he)||void 0===Re)&&L!==Re&&!qe&&(ie.$instanceValues$.set(b,L),Qe)){if(z.$watchers$&&128&he){const St=z.$watchers$[b];St&&St.map(Nt=>{try{Qe[Nt](L,Re,b)}catch(je){Yn(je,pe)}})}2==(18&he)&&Cr(ie,!1)}})(this,Re,Qe,b)},configurable:!0,enumerable:!0}):1&L&&64&he&&Object.defineProperty(ie,Re,{value(...Qe){var qe;const st=Ot(this);return null===(qe=null==st?void 0:st.$onInstancePromise$)||void 0===qe?void 0:qe.then(()=>{var St;return null===(St=st.$lazyInstance$)||void 0===St?void 0:St[Re](...Qe)})}})}),1&L){const Re=new Map;ie.attributeChangedCallback=function(he,Qe,qe){qt.jmp(()=>{var st;const St=Re.get(he);if(this.hasOwnProperty(St))qe=this[St],delete this[St];else{if(ie.hasOwnProperty(St)&&"number"==typeof this[St]&&this[St]==qe)return;if(null==St){const Nt=Ot(this),je=null==Nt?void 0:Nt.$flags$;if(je&&!(8&je)&&128&je&&qe!==Qe){const rr=Nt.$lazyInstance$,On=null===(st=b.$watchers$)||void 0===st?void 0:st[he];null==On||On.forEach(Zn=>{null!=rr[Zn]&&rr[Zn].call(rr,qe,Qe,he)})}return}}this[St]=(null!==qe||"boolean"!=typeof this[St])&&qe})},I.observedAttributes=Array.from(new Set([...Object.keys(null!==(z=b.$watchers$)&&void 0!==z?z:{}),...pe.filter(([he,Qe])=>15&Qe[0]).map(([he,Qe])=>{var qe;const st=Qe[1]||he;return Re.set(st,he),512&Qe[0]&&(null===(qe=b.$attrsToReflect$)||void 0===qe||qe.push([he,st])),st})]))}}return I},si=function(){var I=(0,y.A)(function*(b,L,z,ie){let pe;if(!(32&L.$flags$)){if(L.$flags$|=32,z.$lazyBundleId$){if(pe=bn(z),pe.then){const st=()=>{};pe=yield pe,st()}pe.isProxied||(z.$watchers$=pe.watchers,kt(pe,z,2),pe.isProxied=!0);const qe=()=>{};L.$flags$|=8;try{new pe(L)}catch(st){Yn(st)}L.$flags$&=-9,L.$flags$|=128,qe(),Et(L.$lazyInstance$)}else pe=b.constructor,customElements.whenDefined(z.$tagName$).then(()=>L.$flags$|=128);if(pe.style){let qe=pe.style;"string"!=typeof qe&&(qe=qe[L.$modeName$=(I=>fl.map(b=>b(I)).find(b=>!!b))(b)]);const st=_e(z,L.$modeName$);if(!li.has(st)){const St=()=>{};jt(st,qe,!!(1&z.$flags$)),St()}}}const Re=L.$ancestorComponent$,he=()=>Cr(L,!0);Re&&Re["s-rc"]?Re["s-rc"].push(he):he()});return function(L,z,ie,pe){return I.apply(this,arguments)}}(),Et=I=>{Ce(I,"connectedCallback")},rn=I=>{const b=I["s-cr"]=br.createComment("");b["s-cn"]=!0,I.insertBefore(b,I.firstChild)},Se=I=>{Ce(I,"disconnectedCallback")},ai=function(){var I=(0,y.A)(function*(b){if(!(1&qt.$flags$)){const L=Ot(b);L.$rmListeners$&&(L.$rmListeners$.map(z=>z()),L.$rmListeners$=void 0),null!=L&&L.$lazyInstance$?Se(L.$lazyInstance$):null!=L&&L.$onReadyPromise$&&L.$onReadyPromise$.then(()=>Se(L.$lazyInstance$))}});return function(L){return I.apply(this,arguments)}}(),zi=(I,b={})=>{var L;const ie=[],pe=b.exclude||[],Re=mn.customElements,he=br.head,Qe=he.querySelector("meta[charset]"),qe=br.createElement("style"),st=[],St=br.querySelectorAll(`[${ke}]`);let Nt,je=!0,rr=0;for(Object.assign(qt,b),qt.$resourcesUrl$=new URL(b.resourcesUrl||"./",br.baseURI).href,qt.$flags$|=2;rr<St.length;rr++)jt(St[rr].getAttribute(ke),It(St[rr].innerHTML),!0);let On=!1;if(I.map(Zn=>{Zn[1].map(ui=>{var xa;const yo={$flags$:ui[0],$tagName$:ui[1],$members$:ui[2],$listeners$:ui[3]};4&yo.$flags$&&(On=!0),yo.$members$=ui[2],yo.$listeners$=ui[3],yo.$attrsToReflect$=[],yo.$watchers$=null!==(xa=ui[4])&&void 0!==xa?xa:{};const ss=yo.$tagName$,tc=class extends HTMLElement{constructor(Rs){super(Rs),pr(Rs=this,yo),1&yo.$flags$&&Rs.attachShadow({mode:"open",delegatesFocus:!!(16&yo.$flags$)})}connectedCallback(){Nt&&(clearTimeout(Nt),Nt=null),je?st.push(this):qt.jmp(()=>(I=>{if(!(1&qt.$flags$)){const b=Ot(I),L=b.$cmpMeta$,z=()=>{};if(1&b.$flags$)Ds(I,b,L.$listeners$),null!=b&&b.$lazyInstance$?Et(b.$lazyInstance$):null!=b&&b.$onReadyPromise$&&b.$onReadyPromise$.then(()=>Et(b.$lazyInstance$));else{let ie;if(b.$flags$|=1,ie=I.getAttribute(Fe),ie){if(1&L.$flags$){const pe=Ae(I.shadowRoot,L,I.getAttribute("s-mode"));I.classList.remove(pe+"-h",pe+"-s")}((I,b,L,z)=>{const pe=I.shadowRoot,Re=[],Qe=pe?[]:null,qe=z.$vnode$=Dt(b,null);qt.$orgLocNodes$||Y(br.body,qt.$orgLocNodes$=new Map),I[Fe]=L,I.removeAttribute(Fe),ae(qe,Re,[],Qe,I,I,L),Re.map(st=>{const St=st.$hostId$+"."+st.$nodeId$,Nt=qt.$orgLocNodes$.get(St),je=st.$elm$;Nt&&bu&&""===Nt["s-en"]&&Nt.parentNode.insertBefore(je,Nt.nextSibling),pe||(je["s-hn"]=b,Nt&&(je["s-ol"]=Nt,je["s-ol"]["s-nr"]=je)),qt.$orgLocNodes$.delete(St)}),pe&&Qe.map(st=>{st&&pe.appendChild(st)})})(I,L.$tagName$,ie,b)}ie||12&L.$flags$&&rn(I);{let pe=I;for(;pe=pe.parentNode||pe.host;)if(1===pe.nodeType&&pe.hasAttribute("s-id")&&pe["s-p"]||pe["s-p"]){Ti(b,b.$ancestorComponent$=pe);break}}L.$members$&&Object.entries(L.$members$).map(([pe,[Re]])=>{if(31&Re&&I.hasOwnProperty(pe)){const he=I[pe];delete I[pe],I[pe]=he}}),si(I,b,L)}z()}})(this))}disconnectedCallback(){qt.jmp(()=>ai(this))}componentOnReady(){return Ot(this).$onReadyPromise$}};yo.$lazyBundleId$=Zn[0],!pe.includes(ss)&&!Re.get(ss)&&(ie.push(ss),Re.define(ss,kt(tc,yo,1)))})}),ie.length>0&&(On&&(qe.textContent+=nt),qe.textContent+=ie+"{visibility:hidden}.hydrated{visibility:inherit}",qe.innerHTML.length)){qe.setAttribute("data-styles","");const Zn=null!==(L=qt.$nonce$)&&void 0!==L?L:fe(br);null!=Zn&&qe.setAttribute("nonce",Zn),he.insertBefore(qe,Qe?Qe.nextSibling:he.firstChild)}je=!1,st.length?st.map(Zn=>Zn.connectedCallback()):qt.jmp(()=>Nt=setTimeout($,30))},Ds=(I,b,L,z)=>{L&&L.map(([ie,pe,Re])=>{const he=se(I,ie),Qe=Ee(b,Re),qe=Ve(ie);qt.ael(he,pe,Qe,qe),(b.$rmListeners$=b.$rmListeners$||[]).push(()=>qt.rel(he,pe,Qe,qe))})},Ee=(I,b)=>L=>{try{256&I.$flags$?I.$lazyInstance$[b](L):(I.$queuedListeners$=I.$queuedListeners$||[]).push([b,L])}catch(z){Yn(z)}},se=(I,b)=>4&b?br:8&b?mn:16&b?br.body:I,Ve=I=>os?{passive:!!(1&I),capture:!!(2&I)}:!!(2&I),Ht=new WeakMap,Ot=I=>Ht.get(I),sn=(I,b)=>Ht.set(b.$lazyInstance$=I,b),pr=(I,b)=>{const L={$flags$:0,$hostElement$:I,$cmpMeta$:b,$instanceValues$:new Map};return L.$onInstancePromise$=new Promise(z=>L.$onInstanceResolve$=z),L.$onReadyPromise$=new Promise(z=>L.$onReadyResolve$=z),I["s-p"]=[],I["s-rc"]=[],Ds(I,L,b.$listeners$),Ht.set(I,L)},Un=(I,b)=>b in I,Yn=(I,b)=>(0,console.error)(I,b),is=new Map,bn=(I,b,L)=>{const z=I.$tagName$.replace(/-/g,"_"),ie=I.$lazyBundleId$,pe=is.get(ie);return pe?pe[z]:le(8996)(`./${ie}.entry.js`).then(Re=>(is.set(ie,Re),Re[z]),Yn)},li=new Map,fl=[],mn=typeof window<"u"?window:{},br=mn.document||{head:{}},qt={$flags$:0,$resourcesUrl$:"",jmp:I=>I(),raf:I=>requestAnimationFrame(I),ael:(I,b,L,z)=>I.addEventListener(b,L,z),rel:(I,b,L,z)=>I.removeEventListener(b,L,z),ce:(I,b)=>new CustomEvent(I,b)},Ln=I=>{Object.assign(qt,I)},bu=!0,os=(()=>{let I=!1;try{br.addEventListener("e",null,Object.defineProperty({},"passive",{get(){I=!0}}))}catch{}return I})(),zt=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),Ss=[],ci=[],ec=(I,b)=>L=>{I.push(L),X||(X=!0,b&&4&qt.$flags$?vo(gl):qt.raf(gl))},pl=I=>{for(let b=0;b<I.length;b++)try{I[b](performance.now())}catch(L){Yn(L)}I.length=0},gl=()=>{pl(Ss),pl(ci),(X=Ss.length>0)&&qt.raf(gl)},vo=I=>Promise.resolve(void 0).then(I),nh=ec(Ss,!1),de=ec(ci,!0)},8436:(zn,Vt,le)=>{"use strict";le.d(Vt,{a:()=>X,b:()=>Dt,c:()=>G,i:()=>Jt});var y=le(9081);class Le{constructor(){this.m=new Map}reset(F){this.m=new Map(Object.entries(F))}get(F,R){const N=this.m.get(F);return void 0!==N?N:R}getBoolean(F,R=!1){const N=this.m.get(F);return void 0===N?R:"string"==typeof N?"true"===N:!!N}getNumber(F,R){const N=parseFloat(this.m.get(F));return isNaN(N)?void 0!==R?R:NaN:N}set(F,R){this.m.set(F,R)}}const G=new Le,ot="ionic-persist-config",X=(Te,F)=>("string"==typeof Te&&(F=Te,Te=void 0),(Te=>we(Te))(Te).includes(F)),we=(Te=window)=>{if(typeof Te>"u")return[];Te.Ionic=Te.Ionic||{};let F=Te.Ionic.platforms;return null==F&&(F=Te.Ionic.platforms=ue(Te),F.forEach(R=>Te.document.documentElement.classList.add(`plt-${R}`))),F},ue=Te=>{const F=G.get("platform");return Object.keys(fe).filter(R=>{const N=null==F?void 0:F[R];return"function"==typeof N?N(Te):fe[R](Te)})},be=Te=>!!(ee(Te,/iPad/i)||ee(Te,/Macintosh/i)&&ze(Te)),Q=Te=>ee(Te,/android|sink/i),ze=Te=>re(Te,"(any-pointer:coarse)"),nt=Te=>P(Te)||k(Te),P=Te=>!!(Te.cordova||Te.phonegap||Te.PhoneGap),k=Te=>{const F=Te.Capacitor;return!(null==F||!F.isNative)},ee=(Te,F)=>F.test(Te.navigator.userAgent),re=(Te,F)=>{var R;return null===(R=Te.matchMedia)||void 0===R?void 0:R.call(Te,F).matches},fe={ipad:be,iphone:Te=>ee(Te,/iPhone/i),ios:Te=>ee(Te,/iPhone|iPod/i)||be(Te),android:Q,phablet:Te=>{const F=Te.innerWidth,R=Te.innerHeight,N=Math.min(F,R),W=Math.max(F,R);return N>390&&N<520&&W>620&&W<800},tablet:Te=>{const F=Te.innerWidth,R=Te.innerHeight,N=Math.min(F,R),W=Math.max(F,R);return be(Te)||(Te=>Q(Te)&&!ee(Te,/mobile/i))(Te)||N>460&&N<820&&W>780&&W<1400},cordova:P,capacitor:k,electron:Te=>ee(Te,/electron/i),pwa:Te=>{var F;return!!(null!==(F=Te.matchMedia)&&void 0!==F&&F.call(Te,"(display-mode: standalone)").matches||Te.navigator.standalone)},mobile:ze,mobileweb:Te=>ze(Te)&&!nt(Te),desktop:Te=>!ze(Te),hybrid:nt};let et;const Dt=Te=>Te&&(0,y.g)(Te)||et,Jt=(Te={})=>{if(typeof window>"u")return;const F=window.document,R=window,N=R.Ionic=R.Ionic||{},W={};Te._ael&&(W.ael=Te._ael),Te._rel&&(W.rel=Te._rel),Te._ce&&(W.ce=Te._ce),(0,y.a)(W);const ae=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Te=>{try{const F=Te.sessionStorage.getItem(ot);return null!==F?JSON.parse(F):{}}catch{return{}}})(R)),{persistConfig:!1}),N.config),(Te=>{const F={};return Te.location.search.slice(1).split("&").map(R=>R.split("=")).map(([R,N])=>[decodeURIComponent(R),decodeURIComponent(N)]).filter(([R])=>((Te,F)=>Te.substr(0,F.length)===F)(R,"ionic:")).map(([R,N])=>[R.slice(6),N]).forEach(([R,N])=>{F[R]=N}),F})(R)),Te);G.reset(ae),G.getBoolean("persistConfig")&&((Te,F)=>{try{Te.sessionStorage.setItem(ot,JSON.stringify(F))}catch{return}})(R,ae),we(R),N.config=G,N.mode=et=G.get("mode",F.documentElement.getAttribute("mode")||(X(R,"ios")?"ios":"md")),G.set("mode",et),F.documentElement.setAttribute("mode",et),F.documentElement.classList.add(et),G.getBoolean("_testing")&&G.set("animated",!1);const Y=dt=>{var rt;return null===(rt=dt.tagName)||void 0===rt?void 0:rt.startsWith("ION-")},Ye=dt=>["ios","md"].includes(dt);(0,y.c)(dt=>{for(;dt;){const rt=dt.mode||dt.getAttribute("mode");if(rt){if(Ye(rt))return rt;Y(dt)&&console.warn('Invalid ionic mode: "'+rt+'", expected: "ios" or "md"')}dt=dt.parentElement}return et})}},2604:(zn,Vt,le)=>{"use strict";le.r(Vt),le.d(Vt,{iosTransitionAnimation:()=>ue,shadow:()=>q});var y=le(3503),Le=le(1497);le(8476),le(9081);const Ze=be=>document.querySelector(`${be}.ion-cloned-element`),q=be=>be.shadowRoot||be,Je=be=>{const Pe="ION-TABS"===be.tagName?be:be.querySelector("ion-tabs"),J="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Pe){const Q=Pe.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Q?Q.querySelector(J):null}return be.querySelector(J)},ot=(be,Pe)=>{const J="ION-TABS"===be.tagName?be:be.querySelector("ion-tabs");let Q=[];if(null!=J){const Z=J.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Z&&(Q=Z.querySelectorAll("ion-buttons"))}else Q=be.querySelectorAll("ion-buttons");for(const Z of Q){const Fe=Z.closest("ion-header"),ke=Fe&&!Fe.classList.contains("header-collapse-condense-inactive"),ze=Z.querySelector("ion-back-button"),Oe=Z.classList.contains("buttons-collapse");if(null!==ze&&("start"===Z.slot||""===Z.slot)&&(Oe&&ke&&Pe||!Oe))return ze}return null},X=(be,Pe,J,Q,Z,Fe,ke,ze,Oe)=>{var nt,P;const k=Pe?`calc(100% - ${Z.right+4}px)`:Z.left-4+"px",D=Pe?"right":"left",U=Pe?"left":"right",ee=Pe?"right":"left",re=(null===(nt=Fe.textContent)||void 0===nt?void 0:nt.trim())===(null===(P=ze.textContent)||void 0===P?void 0:P.trim()),et=(Oe.height-Ie)/ke.height,Dt=re?`scale(${Oe.width/ke.width}, ${et})`:`scale(${et})`,Jt="scale(1)",F=q(Q).querySelector("ion-icon").getBoundingClientRect(),R=Pe?F.width/2-(F.right-Z.right)+"px":Z.left-F.width/2+"px",N=Pe?`-${window.innerWidth-Z.right}px`:`${Z.left}px`,W=`${Oe.top}px`,ae=`${Z.top}px`,dt=J?[{offset:0,transform:`translate3d(${N}, ${ae}, 0)`},{offset:1,transform:`translate3d(${R}, ${W}, 0)`}]:[{offset:0,transform:`translate3d(${R}, ${W}, 0)`},{offset:1,transform:`translate3d(${N}, ${ae}, 0)`}],Bt=J?[{offset:0,opacity:1,transform:Jt},{offset:1,opacity:0,transform:Dt}]:[{offset:0,opacity:0,transform:Dt},{offset:1,opacity:1,transform:Jt}],cn=J?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],jt=(0,y.c)(),Ae=(0,y.c)(),ce=(0,y.c)(),_e=Ze("ion-back-button"),It=q(_e).querySelector(".button-text"),Wt=q(_e).querySelector("ion-icon");_e.text=Q.text,_e.mode=Q.mode,_e.icon=Q.icon,_e.color=Q.color,_e.disabled=Q.disabled,_e.style.setProperty("display","block"),_e.style.setProperty("position","fixed"),Ae.addElement(Wt),jt.addElement(It),ce.addElement(_e),ce.beforeStyles({position:"absolute",top:"0px",[ee]:"0px"}).keyframes(dt),jt.beforeStyles({"transform-origin":`${D} top`}).beforeAddWrite(()=>{Q.style.setProperty("display","none"),_e.style.setProperty(D,k)}).afterAddWrite(()=>{Q.style.setProperty("display",""),_e.style.setProperty("display","none"),_e.style.removeProperty(D)}).keyframes(Bt),Ae.beforeStyles({"transform-origin":`${U} center`}).keyframes(cn),be.addAnimation([jt,Ae,ce])},we=(be,Pe,J,Q,Z,Fe,ke,ze)=>{var Oe,nt;const P=Pe?"right":"left",k=Pe?`calc(100% - ${Z.right}px)`:`${Z.left}px`,U=`${Z.top}px`,re=Pe?`-${window.innerWidth-ze.right-8}px`:ze.x-8+"px",et=ze.y-2+"px",Dt=(null===(Oe=ke.textContent)||void 0===Oe?void 0:Oe.trim())===(null===(nt=Q.textContent)||void 0===nt?void 0:nt.trim()),Te=ze.height/(Fe.height-Ie),F="scale(1)",R=Dt?`scale(${ze.width/Fe.width}, ${Te})`:`scale(${Te})`,ae=J?[{offset:0,opacity:0,transform:`translate3d(${re}, ${et}, 0) ${R}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${U}, 0) ${F}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${U}, 0) ${F}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${re}, ${et}, 0) ${R}`}],Y=Ze("ion-title"),Ye=(0,y.c)();Y.innerText=Q.innerText,Y.size=Q.size,Y.color=Q.color,Ye.addElement(Y),Ye.beforeStyles({"transform-origin":`${P} top`,height:`${Z.height}px`,display:"",position:"relative",[P]:k}).beforeAddWrite(()=>{Q.style.setProperty("opacity","0")}).afterAddWrite(()=>{Q.style.setProperty("opacity",""),Y.style.setProperty("display","none")}).keyframes(ae),be.addAnimation(Ye)},ue=(be,Pe)=>{var J;try{const Q="cubic-bezier(0.32,0.72,0,1)",Z="opacity",Fe="transform",ke="0%",Oe="rtl"===be.ownerDocument.dir,nt=Oe?"-99.5%":"99.5%",P=Oe?"33%":"-33%",k=Pe.enteringEl,D=Pe.leavingEl,U="back"===Pe.direction,ee=k.querySelector(":scope > ion-content"),re=k.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),fe=k.querySelectorAll(":scope > ion-header > ion-toolbar"),et=(0,y.c)(),Dt=(0,y.c)();if(et.addElement(k).duration((null!==(J=Pe.duration)&&void 0!==J?J:0)||540).easing(Pe.easing||Q).fill("both").beforeRemoveClass("ion-page-invisible"),D&&null!=be){const R=(0,y.c)();R.addElement(be),et.addAnimation(R)}if(ee||0!==fe.length||0!==re.length?(Dt.addElement(ee),Dt.addElement(re)):Dt.addElement(k.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),et.addAnimation(Dt),U?Dt.beforeClearStyles([Z]).fromTo("transform",`translateX(${P})`,`translateX(${ke})`).fromTo(Z,.8,1):Dt.beforeClearStyles([Z]).fromTo("transform",`translateX(${nt})`,`translateX(${ke})`),ee){const R=q(ee).querySelector(".transition-effect");if(R){const N=R.querySelector(".transition-cover"),W=R.querySelector(".transition-shadow"),ae=(0,y.c)(),Y=(0,y.c)(),Ye=(0,y.c)();ae.addElement(R).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Y.addElement(N).beforeClearStyles([Z]).fromTo(Z,0,.1),Ye.addElement(W).beforeClearStyles([Z]).fromTo(Z,.03,.7),ae.addAnimation([Y,Ye]),Dt.addAnimation([ae])}}const Jt=k.querySelector("ion-header.header-collapse-condense"),{forward:Te,backward:F}=((be,Pe,J,Q,Z)=>{const Fe=ot(Q,J),ke=Je(Z),ze=Je(Q),Oe=ot(Z,J),nt=null!==Fe&&null!==ke&&!J,P=null!==ze&&null!==Oe&&J;if(nt){const k=ke.getBoundingClientRect(),D=Fe.getBoundingClientRect(),U=q(Fe).querySelector(".button-text"),ee=U.getBoundingClientRect(),fe=q(ke).querySelector(".toolbar-title").getBoundingClientRect();we(be,Pe,J,ke,k,fe,U,ee),X(be,Pe,J,Fe,D,U,ee,ke,fe)}else if(P){const k=ze.getBoundingClientRect(),D=Oe.getBoundingClientRect(),U=q(Oe).querySelector(".button-text"),ee=U.getBoundingClientRect(),fe=q(ze).querySelector(".toolbar-title").getBoundingClientRect();we(be,Pe,J,ze,k,fe,U,ee),X(be,Pe,J,Oe,D,U,ee,ze,fe)}return{forward:nt,backward:P}})(et,Oe,U,k,D);if(fe.forEach(R=>{const N=(0,y.c)();N.addElement(R),et.addAnimation(N);const W=(0,y.c)();W.addElement(R.querySelector("ion-title"));const ae=(0,y.c)(),Y=Array.from(R.querySelectorAll("ion-buttons,[menuToggle]")),Ye=R.closest("ion-header"),dt=null==Ye?void 0:Ye.classList.contains("header-collapse-condense-inactive");let rt;rt=Y.filter(U?cn=>{const jt=cn.classList.contains("buttons-collapse");return jt&&!dt||!jt}:cn=>!cn.classList.contains("buttons-collapse")),ae.addElement(rt);const ft=(0,y.c)();ft.addElement(R.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Bt=(0,y.c)();Bt.addElement(q(R).querySelector(".toolbar-background"));const pn=(0,y.c)(),wt=R.querySelector("ion-back-button");if(wt&&pn.addElement(wt),N.addAnimation([W,ae,ft,Bt,pn]),ae.fromTo(Z,.01,1),ft.fromTo(Z,.01,1),U)dt||W.fromTo("transform",`translateX(${P})`,`translateX(${ke})`).fromTo(Z,.01,1),ft.fromTo("transform",`translateX(${P})`,`translateX(${ke})`),pn.fromTo(Z,.01,1);else if(Jt||W.fromTo("transform",`translateX(${nt})`,`translateX(${ke})`).fromTo(Z,.01,1),ft.fromTo("transform",`translateX(${nt})`,`translateX(${ke})`),Bt.beforeClearStyles([Z,"transform"]),(null==Ye?void 0:Ye.translucent)?Bt.fromTo("transform",Oe?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Bt.fromTo(Z,.01,"var(--opacity)"),Te||pn.fromTo(Z,.01,1),wt&&!Te){const jt=(0,y.c)();jt.addElement(q(wt).querySelector(".button-text")).fromTo("transform",Oe?"translateX(-100px)":"translateX(100px)","translateX(0px)"),N.addAnimation(jt)}}),D){const R=(0,y.c)(),N=D.querySelector(":scope > ion-content"),W=D.querySelectorAll(":scope > ion-header > ion-toolbar"),ae=D.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(N||0!==W.length||0!==ae.length?(R.addElement(N),R.addElement(ae)):R.addElement(D.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),et.addAnimation(R),U){R.beforeClearStyles([Z]).fromTo("transform",`translateX(${ke})`,Oe?"translateX(-100%)":"translateX(100%)");const Y=(0,Le.g)(D);et.afterAddWrite(()=>{"normal"===et.getDirection()&&Y.style.setProperty("display","none")})}else R.fromTo("transform",`translateX(${ke})`,`translateX(${P})`).fromTo(Z,1,.8);if(N){const Y=q(N).querySelector(".transition-effect");if(Y){const Ye=Y.querySelector(".transition-cover"),dt=Y.querySelector(".transition-shadow"),rt=(0,y.c)(),ft=(0,y.c)(),Bt=(0,y.c)();rt.addElement(Y).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),ft.addElement(Ye).beforeClearStyles([Z]).fromTo(Z,.1,0),Bt.addElement(dt).beforeClearStyles([Z]).fromTo(Z,.7,.03),rt.addAnimation([ft,Bt]),R.addAnimation([rt])}}W.forEach(Y=>{const Ye=(0,y.c)();Ye.addElement(Y);const dt=(0,y.c)();dt.addElement(Y.querySelector("ion-title"));const rt=(0,y.c)(),ft=Y.querySelectorAll("ion-buttons,[menuToggle]"),Bt=Y.closest("ion-header"),pn=null==Bt?void 0:Bt.classList.contains("header-collapse-condense-inactive"),wt=Array.from(ft).filter(It=>{const Wt=It.classList.contains("buttons-collapse");return Wt&&!pn||!Wt});rt.addElement(wt);const cn=(0,y.c)(),jt=Y.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");jt.length>0&&cn.addElement(jt);const Ae=(0,y.c)();Ae.addElement(q(Y).querySelector(".toolbar-background"));const ce=(0,y.c)(),_e=Y.querySelector("ion-back-button");if(_e&&ce.addElement(_e),Ye.addAnimation([dt,rt,cn,ce,Ae]),et.addAnimation(Ye),ce.fromTo(Z,.99,0),rt.fromTo(Z,.99,0),cn.fromTo(Z,.99,0),U){if(pn||dt.fromTo("transform",`translateX(${ke})`,Oe?"translateX(-100%)":"translateX(100%)").fromTo(Z,.99,0),cn.fromTo("transform",`translateX(${ke})`,Oe?"translateX(-100%)":"translateX(100%)"),Ae.beforeClearStyles([Z,"transform"]),(null==Bt?void 0:Bt.translucent)?Ae.fromTo("transform","translateX(0px)",Oe?"translateX(-100%)":"translateX(100%)"):Ae.fromTo(Z,"var(--opacity)",0),_e&&!F){const Wt=(0,y.c)();Wt.addElement(q(_e).querySelector(".button-text")).fromTo("transform",`translateX(${ke})`,`translateX(${(Oe?-124:124)+"px"})`),Ye.addAnimation(Wt)}}else pn||dt.fromTo("transform",`translateX(${ke})`,`translateX(${P})`).fromTo(Z,.99,0).afterClearStyles([Fe,Z]),cn.fromTo("transform",`translateX(${ke})`,`translateX(${P})`).afterClearStyles([Fe,Z]),ce.afterClearStyles([Z]),dt.afterClearStyles([Z]),rt.afterClearStyles([Z])})}return et}catch(Q){throw Q}},Ie=10},3003:(zn,Vt,le)=>{"use strict";le.r(Vt),le.d(Vt,{mdTransitionAnimation:()=>Pt});var y=le(3503),Le=le(1497);le(8476),le(9081);const Pt=(Ze,q)=>{var Je,ot,ne;const X="40px",ue="back"===q.direction,be=q.leavingEl,Pe=(0,Le.g)(q.enteringEl),J=Pe.querySelector("ion-toolbar"),Q=(0,y.c)();if(Q.addElement(Pe).fill("both").beforeRemoveClass("ion-page-invisible"),ue?Q.duration((null!==(Je=q.duration)&&void 0!==Je?Je:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Q.duration((null!==(ot=q.duration)&&void 0!==ot?ot:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform",`translateY(${X})`,"translateY(0px)").fromTo("opacity",.01,1),J){const Z=(0,y.c)();Z.addElement(J),Q.addAnimation(Z)}if(be&&ue){Q.duration((null!==(ne=q.duration)&&void 0!==ne?ne:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const Z=(0,y.c)();Z.addElement((0,Le.g)(be)).onFinish(Fe=>{1===Fe&&Z.elements.length>0&&Z.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)",`translateY(${X})`).fromTo("opacity",1,0),Q.addAnimation(Z)}return Q}},4133:(zn,Vt,le)=>{"use strict";le.d(Vt,{B:()=>rt,G:()=>ft,O:()=>Bt,a:()=>we,b:()=>ue,c:()=>J,d:()=>pn,e:()=>wt,f:()=>Jt,g:()=>F,h:()=>W,i:()=>Y,j:()=>Z,k:()=>Fe,m:()=>be,n:()=>nt,o:()=>et,s:()=>dt});var y=le(467),Le=le(8476),G=le(9457),We=le(8436),Pt=le(5938),Ze=le(5638),q=le(4929);let Je=0,ot=0;const ne=new WeakMap,X=Ae=>({create:ce=>ke(Ae,ce),dismiss:(ce,_e,It)=>ee(document,ce,_e,Ae,It),getTop:()=>(0,y.A)(function*(){return et(document,Ae)})()}),we=X("ion-alert"),ue=X("ion-action-sheet"),be=X("ion-modal"),J=X("ion-popover"),Z=Ae=>{typeof document<"u"&&U(document);const ce=Je++;Ae.overlayIndex=ce},Fe=Ae=>(Ae.hasAttribute("id")||(Ae.id="ion-overlay-"+ ++ot),Ae.id),ke=(Ae,ce)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Ae).then(()=>{const _e=document.createElement(Ae);return _e.classList.add("overlay-hidden"),Object.assign(_e,Object.assign(Object.assign({},ce),{hasController:!0})),R(document).appendChild(_e),new Promise(It=>(0,Ze.c)(_e,It))}):Promise.resolve(),ze='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',nt=(Ae,ce)=>{const _e=Ae.querySelector(ze);k(_e,ce)},P=(Ae,ce)=>{const _e=Array.from(Ae.querySelectorAll(ze));k(_e.length>0?_e[_e.length-1]:null,ce)},k=(Ae,ce)=>{let _e=Ae;const It=null==Ae?void 0:Ae.shadowRoot;It&&(_e=It.querySelector(ze)||Ae),_e?(0,Ze.f)(_e):ce.focus()},U=Ae=>{0===Je&&(Je=1,Ae.addEventListener("focus",ce=>{((Ae,ce)=>{const _e=et(ce,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),It=Ae.target;_e&&It&&!_e.classList.contains("ion-disable-focus-trap")&&(_e.shadowRoot?(()=>{if(_e.contains(It))_e.lastFocus=It;else if("ION-TOAST"===It.tagName)k(_e.lastFocus,_e);else{const en=_e.lastFocus;nt(_e,_e),en===ce.activeElement&&P(_e,_e),_e.lastFocus=ce.activeElement}})():(()=>{if(_e===It)_e.lastFocus=void 0;else if("ION-TOAST"===It.tagName)k(_e.lastFocus,_e);else{const en=(0,Ze.g)(_e);if(!en.contains(It))return;const Cn=en.querySelector(".ion-overlay-wrapper");if(!Cn)return;if(Cn.contains(It)||It===en.querySelector("ion-backdrop"))_e.lastFocus=It;else{const Kt=_e.lastFocus;nt(Cn,_e),Kt===ce.activeElement&&P(Cn,_e),_e.lastFocus=ce.activeElement}}})())})(ce,Ae)},!0),Ae.addEventListener("ionBackButton",ce=>{const _e=et(Ae);null!=_e&&_e.backdropDismiss&&ce.detail.register(G.OVERLAY_BACK_BUTTON_PRIORITY,()=>{_e.dismiss(void 0,rt)})}),(0,G.shouldUseCloseWatcher)()||Ae.addEventListener("keydown",ce=>{if("Escape"===ce.key){const _e=et(Ae);null!=_e&&_e.backdropDismiss&&_e.dismiss(void 0,rt)}}))},ee=(Ae,ce,_e,It,Wt)=>{const gn=et(Ae,It,Wt);return gn?gn.dismiss(ce,_e):Promise.reject("overlay does not exist")},fe=(Ae,ce)=>((Ae,ce)=>(void 0===ce&&(ce="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Ae.querySelectorAll(ce)).filter(_e=>_e.overlayIndex>0)))(Ae,ce).filter(_e=>!(Ae=>Ae.classList.contains("overlay-hidden"))(_e)),et=(Ae,ce,_e)=>{const It=fe(Ae,ce);return void 0===_e?It[It.length-1]:It.find(Wt=>Wt.id===_e)},Dt=(Ae=!1)=>{const _e=R(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");_e&&(Ae?_e.setAttribute("aria-hidden","true"):_e.removeAttribute("aria-hidden"))},Jt=function(){var Ae=(0,y.A)(function*(ce,_e,It,Wt,gn){var en,Cn;if(ce.presented)return;Dt(!0),cn(ce.el),ce.presented=!0,ce.willPresent.emit(),null===(en=ce.willPresentShorthand)||void 0===en||en.emit();const Kt=(0,We.b)(ce),cr=ce.enterAnimation?ce.enterAnimation:We.c.get(_e,"ios"===Kt?It:Wt);(yield N(ce,cr,ce.el,gn))&&(ce.didPresent.emit(),null===(Cn=ce.didPresentShorthand)||void 0===Cn||Cn.emit()),"ION-TOAST"!==ce.el.tagName&&Te(ce.el),ce.keyboardClose&&(null===document.activeElement||!ce.el.contains(document.activeElement))&&ce.el.focus(),ce.el.removeAttribute("aria-hidden")});return function(_e,It,Wt,gn,en){return Ae.apply(this,arguments)}}(),Te=function(){var Ae=(0,y.A)(function*(ce){let _e=document.activeElement;if(!_e)return;const It=null==_e?void 0:_e.shadowRoot;It&&(_e=It.querySelector(ze)||_e),yield ce.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&_e.focus()});return function(_e){return Ae.apply(this,arguments)}}(),F=function(){var Ae=(0,y.A)(function*(ce,_e,It,Wt,gn,en,Cn){var Kt,cr;if(!ce.presented)return!1;void 0!==Le.d&&1===fe(Le.d).length&&Dt(!1),ce.presented=!1;try{ce.el.style.setProperty("pointer-events","none"),ce.willDismiss.emit({data:_e,role:It}),null===(Kt=ce.willDismissShorthand)||void 0===Kt||Kt.emit({data:_e,role:It});const Nn=(0,We.b)(ce),Hr=ce.leaveAnimation?ce.leaveAnimation:We.c.get(Wt,"ios"===Nn?gn:en);It!==ft&&(yield N(ce,Hr,ce.el,Cn)),ce.didDismiss.emit({data:_e,role:It}),null===(cr=ce.didDismissShorthand)||void 0===cr||cr.emit({data:_e,role:It}),(ne.get(ce)||[]).forEach(Fr=>Fr.destroy()),ne.delete(ce),ce.el.classList.add("overlay-hidden"),ce.el.style.removeProperty("pointer-events"),void 0!==ce.el.lastFocus&&(ce.el.lastFocus=void 0)}catch(Nn){console.error(Nn)}return ce.el.remove(),jt(),!0});return function(_e,It,Wt,gn,en,Cn,Kt){return Ae.apply(this,arguments)}}(),R=Ae=>Ae.querySelector("ion-app")||Ae.body,N=function(){var Ae=(0,y.A)(function*(ce,_e,It,Wt){It.classList.remove("overlay-hidden");const en=_e(ce.el,Wt);(!ce.animated||!We.c.getBoolean("animated",!0))&&en.duration(0),ce.keyboardClose&&en.beforeAddWrite(()=>{const Kt=It.ownerDocument.activeElement;null!=Kt&&Kt.matches("input,ion-input, ion-textarea")&&Kt.blur()});const Cn=ne.get(ce)||[];return ne.set(ce,[...Cn,en]),yield en.play(),!0});return function(_e,It,Wt,gn){return Ae.apply(this,arguments)}}(),W=(Ae,ce)=>{let _e;const It=new Promise(Wt=>_e=Wt);return ae(Ae,ce,Wt=>{_e(Wt.detail)}),It},ae=(Ae,ce,_e)=>{const It=Wt=>{(0,Ze.b)(Ae,ce,It),_e(Wt)};(0,Ze.a)(Ae,ce,It)},Y=Ae=>"cancel"===Ae||Ae===rt,Ye=Ae=>Ae(),dt=(Ae,ce)=>{if("function"==typeof Ae)return We.c.get("_zoneGate",Ye)(()=>{try{return Ae(ce)}catch(It){throw It}})},rt="backdrop",ft="gesture",Bt=39,pn=Ae=>{let _e,ce=!1;const It=(0,Pt.C)(),Wt=(Cn=!1)=>{if(_e&&!Cn)return{delegate:_e,inline:ce};const{el:Kt,hasController:cr,delegate:Nn}=Ae;return ce=null!==Kt.parentNode&&!cr,_e=ce?Nn||It:Nn,{inline:ce,delegate:_e}};return{attachViewToDom:function(){var Cn=(0,y.A)(function*(Kt){const{delegate:cr}=Wt(!0);if(cr)return yield cr.attachViewToDom(Ae.el,Kt);const{hasController:Nn}=Ae;if(Nn&&void 0!==Kt)throw new Error("framework delegate is missing");return null});return function(cr){return Cn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:Cn}=Wt();Cn&&void 0!==Ae.el&&Cn.removeViewFromDom(Ae.el.parentElement,Ae.el)}}},wt=()=>{let Ae;const ce=()=>{Ae&&(Ae(),Ae=void 0)};return{addClickListener:(It,Wt)=>{ce();const gn=void 0!==Wt?document.getElementById(Wt):null;gn?Ae=((Cn,Kt)=>{const cr=()=>{Kt.present()};return Cn.addEventListener("click",cr),()=>{Cn.removeEventListener("click",cr)}})(gn,It):(0,q.p)(`A trigger element with the ID "${Wt}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,It)},removeClickListener:ce}},cn=Ae=>{var ce;if(void 0===Le.d)return;const _e=fe(Le.d);for(let It=_e.length-1;It>=0;It--){const Wt=_e[It],gn=null!==(ce=_e[It+1])&&void 0!==ce?ce:Ae;(gn.hasAttribute("aria-hidden")||"ION-TOAST"!==gn.tagName)&&Wt.setAttribute("aria-hidden","true")}},jt=()=>{if(void 0===Le.d)return;const Ae=fe(Le.d);for(let ce=Ae.length-1;ce>=0;ce--){const _e=Ae[ce];if(_e.removeAttribute("aria-hidden"),"ION-TOAST"!==_e.tagName)break}}},4493:(zn,Vt,le)=>{"use strict";var y=le(467);let G=null,Pt=1;const Ze=Symbol("SIGNAL");function q(t){const e=G;return G=t,e}function Ie(t){if((!nt(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Pt)){if(!t.producerMustRecompute(t)&&!Fe(t))return t.dirty=!1,void(t.lastCleanEpoch=Pt);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Pt}}function Fe(t){P(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Ie(n),r!==n.version))return!0}return!1}function Oe(t,e){if(function k(t){var e,n;null!==(e=t.liveConsumerNode)&&void 0!==e||(t.liveConsumerNode=[]),null!==(n=t.liveConsumerIndexOfThis)&&void 0!==n||(t.liveConsumerIndexOfThis=[])}(t),P(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)Oe(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];P(i),i.producerIndexOfThis[r]=e}}function nt(t){var e,n;return t.consumerIsAlwaysLive||(null!==(e=null==t||null===(n=t.liveConsumerNode)||void 0===n?void 0:n.length)&&void 0!==e?e:0)>0}function P(t){var e,n,r;null!==(e=t.producerNode)&&void 0!==e||(t.producerNode=[]),null!==(n=t.producerIndexOfThis)&&void 0!==n||(t.producerIndexOfThis=[]),null!==(r=t.producerLastReadVersion)&&void 0!==r||(t.producerLastReadVersion=[])}let Dt=null;function wt(t){return"function"==typeof t}function cn(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const jt=cn(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ae(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ce{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(wt(r))try{r()}catch(o){e=o instanceof jt?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{Wt(o)}catch(s){e=null!=e?e:[],s instanceof jt?e=[...e,...s.errors]:e.push(s)}}if(e)throw new jt(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Wt(e);else{if(e instanceof ce){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ae(n,e)}remove(e){const{_finalizers:n}=this;n&&Ae(n,e),e instanceof ce&&e._removeParent(this)}}ce.EMPTY=(()=>{const t=new ce;return t.closed=!0,t})();const _e=ce.EMPTY;function It(t){return t instanceof ce||t&&"closed"in t&&wt(t.remove)&&wt(t.add)&&wt(t.unsubscribe)}function Wt(t){wt(t)?t():t.unsubscribe()}const gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},en={setTimeout(t,e,...n){const{delegate:r}=en;return null!=r&&r.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=en;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Cn(t){en.setTimeout(()=>{const{onUnhandledError:e}=gn;if(!e)throw t;e(t)})}function Kt(){}const cr=Ci("C",void 0,void 0);function Ci(t,e,n){return{kind:t,value:e,error:n}}let Fr=null;function no(t){if(gn.useDeprecatedSynchronousErrorHandling){const e=!Fr;if(e&&(Fr={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Fr;if(Fr=null,n)throw r}}else t()}class ji extends ce{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,It(e)&&e.add(this)):this.destination=Ts}static create(e,n,r){return new Bn(e,n,r)}next(e){this.isStopped?rs(function Hr(t){return Ci("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?rs(function Nn(t){return Ci("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?rs(cr,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const _i=Function.prototype.bind;function oi(t,e){return _i.call(t,e)}class Yr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Hi(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Hi(r)}else Hi(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Hi(n)}}}class Bn extends ji{constructor(e,n,r){let i;if(super(),wt(e)||!e)i={next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0};else{let o;this&&gn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&oi(e.next,o),error:e.error&&oi(e.error,o),complete:e.complete&&oi(e.complete,o)}):i=e}this.destination=new Yr(i)}}function Hi(t){gn.useDeprecatedSynchronousErrorHandling?function bi(t){gn.useDeprecatedSynchronousErrorHandling&&Fr&&(Fr.errorThrown=!0,Fr.error=t)}(t):Cn(t)}function rs(t,e){const{onStoppedNotification:n}=gn;n&&en.setTimeout(()=>n(t,e))}const Ts={closed:!0,next:Kt,error:function ns(t){throw t},complete:Kt},Ti="function"==typeof Symbol&&Symbol.observable||"@@observable";function Cr(t){return t}function $o(t){return 0===t.length?Cr:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let $n=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function V(t){return t&&t instanceof ji||function Xs(t){return t&&wt(t.next)&&wt(t.error)&&wt(t.complete)}(t)&&It(t)}(n)?n:new Bn(n,r,i);return no(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=As(r))((i,o)=>{const s=new Bn({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Ti](){return this}pipe(...n){return $o(n)(this)}toPromise(n){return new(n=As(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function As(t){var e;return null!==(e=null!=t?t:gn.Promise)&&void 0!==e?e:Promise}const x=cn(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let $=(()=>{class t extends $n{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Ce(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new x}next(n){no(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){no(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){no(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?_e:(this.currentObservers=null,o.push(n),new ce(()=>{this.currentObservers=null,Ae(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new $n;return n.source=this,n}}return t.create=(e,n)=>new Ce(e,n),t})();class Ce extends ${constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:_e}}class K extends ${constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function ut(t){return wt(null==t?void 0:t.lift)}function bt(t){return e=>{if(ut(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function kt(t,e,n,r,i){return new si(t,e,n,r,i)}class si extends ji{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Et(t,e){return bt((n,r)=>{let i=0;n.subscribe(kt(r,o=>{r.next(t.call(e,o,i++))}))})}const rn="https://g.co/ng/security#xss";class Se extends Error{constructor(e,n){super(function ai(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function _t(t){return{toString:t}.toString()}const Ot="__parameters__";function Yn(t,e,n){return _t(()=>{const r=function Un(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(l,c,h){const p=l.hasOwnProperty(Ot)?l[Ot]:Object.defineProperty(l,Ot,{value:[]})[Ot];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const bn=globalThis;function mn(t){for(let e in t)if(t[e]===mn)return e;throw Error("Could not find renamed property on target object.")}function br(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function qt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(qt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Ln(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const os=mn({__forward_ref__:mn});function kn(t){return t.__forward_ref__=kn,t.toString=function(){return qt(this())},t}function zt(t){return Ss(t)?t():t}function Ss(t){return"function"==typeof t&&t.hasOwnProperty(os)&&t.__forward_ref__===kn}function je(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function On(t){return{providers:t.providers||[],imports:t.imports||[]}}function Zn(t){return xa(t,tc)||xa(t,Tu)}function xa(t,e){return t.hasOwnProperty(e)?t[e]:null}function ss(t){return t&&(t.hasOwnProperty(Rs)||t.hasOwnProperty(vg))?t[Rs]:null}const tc=mn({\u0275prov:mn}),Rs=mn({\u0275inj:mn}),Tu=mn({ngInjectableDef:mn}),vg=mn({ngInjectorDef:mn});class lt{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=je({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Du(t){return t&&!!t.\u0275providers}const Zs=mn({\u0275cmp:mn}),as=mn({\u0275dir:mn}),Su=mn({\u0275pipe:mn}),Oy=mn({\u0275mod:mn}),di=mn({\u0275fac:mn}),Ru=mn({__NG_ELEMENT_ID__:mn}),ih=mn({__NG_ENV_ID__:mn});function Xt(t){return"string"==typeof t?t:null==t?"":String(t)}function Js(t,e){throw new Se(-201,!1)}var _n=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(_n||{});let Tg;function nc(){return Tg}function Io(t){const e=Tg;return Tg=t,e}function oh(t,e,n){const r=Zn(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&_n.Optional?null:void 0!==e?e:void Js()}const Ps={},sh="__NG_DI_FLAG__",xu="ngTempTokenPath",_b=/\n/gm,Ly="__source";let ea;function ta(t){const e=ea;return ea=t,e}function Ag(t,e=_n.Default){if(void 0===ea)throw new Se(-203,!1);return null===ea?oh(t,void 0,e):ea.get(t,e&_n.Optional?null:void 0,e)}function Be(t,e=_n.Default){return(nc()||Ag)(zt(t),e)}function $e(t,e=_n.Default){return Be(t,ic(e))}function ic(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function oc(t){const e=[];for(let n=0;n<t.length;n++){const r=zt(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Se(900,!1);let i,o=_n.Default;for(let s=0;s<r.length;s++){const a=r[s],l=By(a);"number"==typeof l?-1===l?i=a.token:o|=l:i=a}e.push(Be(i,o))}else e.push(Be(r))}return e}function sc(t,e){return t[sh]=e,t.prototype[sh]=e,t}function By(t){return t[sh]}const ml=sc(Yn("Optional"),8),ac=sc(Yn("SkipSelf"),4);function na(t,e){return t.hasOwnProperty(di)?t[di]:null}function ra(t,e){t.forEach(n=>Array.isArray(n)?ra(n,e):e(n))}function lh(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Mu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Eo(t,e,n){let r=xs(t,e);return r>=0?t[1|r]=n:(r=~r,function Hy(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Nu(t,e){const n=xs(t,e);if(n>=0)return t[1|n]}function xs(t,e){return function uh(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const wo={},Tn=[],ia=new lt(""),Wy=new lt("",-1),ku=new lt("");class dh{get(e,n=Ps){if(n===Ps){const r=new Error(`NullInjectorError: No provider for ${qt(e)}!`);throw r.name="NullInjectorError",r}return n}}var cc=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(cc||{}),ls=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ls||{}),Jn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Jn||{});function qy(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Ou(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];hh(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function Ky(t){return 3===t||4===t||6===t}function hh(t){return 64===t.charCodeAt(0)}function Fu(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||fh(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function fh(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const Qy="ng-template";function yb(t,e,n,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==qy(e[i+1].toLowerCase(),n,0))return!0}else if(Lu(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===n)return!0}return!1}function Lu(t){return 4===t.type&&t.value!==Qy}function Ib(t,e,n){return e===(4!==t.type||n?t.value:Qy)}function Eb(t,e,n){let r=4;const i=t.attrs,o=null!==i?function Pg(t){for(let e=0;e<t.length;e++)if(Ky(t[e]))return e;return t.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!Ib(t,l,n)||""===l&&1===e.length){if(Co(r))return!1;s=!0}}else if(8&r){if(null===i||!yb(t,i,l,n)){if(Co(r))return!1;s=!0}}else{const c=e[++a],h=wb(l,i,Lu(t),n);if(-1===h){if(Co(r))return!1;s=!0;continue}if(""!==c){let p;if(p=h>o?"":i[h+1].toLowerCase(),2&r&&c!==p){if(Co(r))return!1;s=!0}}}}else{if(!s&&!Co(r)&&!Co(l))return!1;if(s&&Co(l))continue;s=!1,r=l|1&r}}return Co(r)||s}function Co(t){return!(1&t)}function wb(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function bb(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ph(t,e,n=!1){for(let r=0;r<e.length;r++)if(Eb(t,e[r],n))return!0;return!1}function xg(t,e){e:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function Yy(t,e){return t?":not("+e.trim()+")":e}function Mg(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Co(s)&&(e+=Yy(o,i),i=""),r=s,o=o||!Co(r);n++}return""!==i&&(e+=Yy(o,i)),e}function Ke(t){return _t(()=>{var e;const n=Xy(t),r={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===cc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:null!==(e=t.signals)&&void 0!==e&&e,data:t.data||{},encapsulation:t.encapsulation||ls.Emulated,styles:t.styles||Tn,_:null,schemas:t.schemas||null,tView:null,id:""};Zy(r);const i=t.dependencies;return r.directiveDefs=Fg(i,!1),r.pipeDefs=Fg(i,!0),r.id=function eN(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(r),r})}function kg(t){return tn(t)||zr(t)}function Ab(t){return null!==t}function Uo(t){return _t(()=>({type:t.type,bootstrap:t.bootstrap||Tn,declarations:t.declarations||Tn,imports:t.imports||Tn,exports:t.exports||Tn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Og(t,e){if(null==t)return wo;const n={};for(const i in t)if(t.hasOwnProperty(i)){const o=t[i];let s,a,l=Jn.None;var r;Array.isArray(o)?(l=o[0],s=o[1],a=null!==(r=o[2])&&void 0!==r?r:s):(s=o,a=o),e?(n[s]=l!==Jn.None?[i,l]:i,e[s]=a):n[s]=i}return n}function xt(t){return _t(()=>{const e=Xy(t);return Zy(e),e})}function ro(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function tn(t){return t[Zs]||null}function zr(t){return t[as]||null}function vi(t){return t[Su]||null}function Di(t,e){const n=t[Oy]||null;if(!n&&!0===e)throw new Error(`Type ${qt(t)} does not have '\u0275mod' property.`);return n}function Xy(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||wo,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Tn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Og(t.inputs,e),outputs:Og(t.outputs),debugInfo:null}}function Zy(t){var e;null===(e=t.features)||void 0===e||e.forEach(n=>n(t))}function Fg(t,e){if(!t)return null;const n=e?vi:kg;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(Ab)}function Db(...t){return{\u0275providers:Lg(0,t),\u0275fromNgModule:!0}}function Lg(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return ra(e,s=>{const a=s;Vg(a,o,[],r)&&(i||(i=[]),i.push(a))}),void 0!==i&&Sb(i,o),n}function Sb(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];Jy(i,o=>{e(o,r)})}}function Vg(t,e,n,r){if(!(t=zt(t)))return!1;let i=null,o=ss(t);const s=!o&&tn(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const l=t.ngModule;if(o=ss(l),!o)return!1;i=l}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)Vg(c,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{ra(o.imports,h=>{Vg(h,e,n,r)&&(c||(c=[]),c.push(h))})}finally{}void 0!==c&&Sb(c,e)}if(!a){const c=na(i)||(()=>new i);e({provide:i,useFactory:c,deps:Tn},i),e({provide:ku,useValue:i,multi:!0},i),e({provide:ia,useValue:()=>Be(i),multi:!0},i)}const l=o.providers;if(null!=l&&!a){const c=t;Jy(l,h=>{e(h,c)})}}}return i!==t&&void 0!==t.providers}function Jy(t,e){for(let n of t)Du(n)&&(n=n.\u0275providers),Array.isArray(n)?Jy(n,e):e(n)}const tN=mn({provide:String,useValue:mn});function eI(t){return null!==t&&"object"==typeof t&&tN in t}function oa(t){return"function"==typeof t}const Bg=new lt(""),mh={},nN={};let $g;function _h(){return void 0===$g&&($g=new dh),$g}class Gr{}class Oa extends Gr{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rI(e,s=>this.processProvider(s)),this.records.set(Wy,dc(void 0,this)),i.has("environment")&&this.records.set(Gr,dc(void 0,this));const o=this.records.get(Bg);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ku,Tn,_n.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=q(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),q(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=ta(this),r=Io(void 0);try{return e()}finally{ta(n),Io(r)}}get(e,n=Ps,r=_n.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ih))return e[ih](this);r=ic(r);const o=ta(this),s=Io(void 0);try{if(!(r&_n.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function yh(t){return"function"==typeof t||"object"==typeof t&&t instanceof lt}(e)&&Zn(e);l=c&&this.injectableDefInScope(c)?dc(Ug(e),mh):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&_n.Self?_h():this.parent).get(e,n=r&_n.Optional&&n===Ps?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[xu]=a[xu]||[]).unshift(qt(e)),o)throw a;return function vb(t,e,n,r){const i=t[xu];throw e[Ly]&&i.unshift(e[Ly]),t.message=function Sg(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=qt(e);if(Array.isArray(e))i=e.map(qt).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):qt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(_b,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[xu]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Io(s),ta(o)}}resolveInjectorInitializers(){const e=q(null),n=ta(this),r=Io(void 0);try{const o=this.get(ia,Tn,_n.Self);for(const s of o)s()}finally{ta(n),Io(r),q(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(qt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(e){let n=oa(e=zt(e))?e:zt(e&&e.provide);const r=function tI(t){return eI(t)?dc(void 0,t.useValue):dc(nI(t),mh)}(e);if(!oa(e)&&!0===e.multi){let i=this.records.get(n);i||(i=dc(void 0,mh,!0),i.factory=()=>oc(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){const r=q(null);try{return n.value===mh&&(n.value=nN,n.value=n.factory()),"object"==typeof n.value&&n.value&&function rN(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{q(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=zt(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Ug(t){const e=Zn(t),n=null!==e?e.factory:na(t);if(null!==n)return n;if(t instanceof lt)throw new Se(204,!1);if(t instanceof Function)return function vh(t){if(t.length>0)throw new Se(204,!1);const n=function yo(t){return t&&(t[tc]||t[Tu])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Se(204,!1)}function nI(t,e,n){let r;if(oa(t)){const i=zt(t);return na(i)||Ug(i)}if(eI(t))r=()=>zt(t.useValue);else if(function ka(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...oc(t.deps||[]));else if(function gh(t){return!(!t||!t.useExisting)}(t))r=()=>Be(zt(t.useExisting));else{const i=zt(t&&(t.useClass||t.provide));if(!function Pb(t){return!!t.deps}(t))return na(i)||Ug(i);r=()=>new i(...oc(t.deps))}return r}function dc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function rI(t,e){for(const n of t)Array.isArray(n)?rI(n,e):n&&Du(n)?rI(n.\u0275providers,e):e(n)}function Si(t,e){t instanceof Oa&&t.assertNotDestroyed();const r=ta(t),i=Io(void 0);try{return e()}finally{ta(r),Io(i)}}function iI(){return void 0!==nc()||null!=function Vy(){return ea}()}const gr=0,it=1,$t=2,Tr=3,cs=4,hi=5,io=6,hc=7,ir=8,Ri=9,Pi=10,Qt=11,Vu=12,aI=13,fc=14,Ar=15,Fa=16,pc=17,Ns=18,Bu=19,Ch=20,La=21,$u=22,Il=23,Zt=25,bh=1,ks=7,Va=9,Vr=10;var ju=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ju||{});function xi(t){return Array.isArray(t)&&"object"==typeof t[bh]}function fi(t){return Array.isArray(t)&&!0===t[bh]}function jg(t){return!!(4&t.flags)}function sa(t){return t.componentOffset>-1}function El(t){return!(1&~t.flags)}function bo(t){return!!t.template}function Hg(t){return!!(512&t[$t])}class Vb{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Dh(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}function Gi(){return Wg}function Wg(t){return t.type.prototype.ngOnChanges&&(t.setInput=$b),Bb}function Bb(){const t=_I(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===wo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function $b(t,e,n,r,i){const o=this.declaredInputs[r],s=_I(t)||function Ub(t,e){return t[Sh]=e}(t,{previous:wo,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new Vb(c&&c.currentValue,n,l===wo),Dh(t,e,i,n)}Gi.ngInherit=!0;const Sh="__ngSimpleChanges__";function _I(t){return t[Sh]||null}const Os=function(t,e,n){};let Ph=!1;function Gn(t){for(;Array.isArray(t);)t=t[gr];return t}function Wu(t,e){return Gn(e[t])}function Mi(t,e){return Gn(e[t.index])}function mc(t,e){return t.data[e]}function oo(t,e){const n=e[t];return xi(n)?n:n[gr]}function Kg(t){return!(128&~t[$t])}function Fs(t,e){return null==e?null:t[e]}function Mh(t){t[pc]=0}function zb(t){1024&t[$t]||(t[$t]|=1024,Kg(t)&&Ba(t))}function Nh(t){var e;return!!(9216&t[$t]||null!==(e=t[Il])&&void 0!==e&&e.dirty)}function Qg(t){var e;if(null===(e=t[Pi].changeDetectionScheduler)||void 0===e||e.notify(1),Nh(t))Ba(t);else if(64&t[$t])if(function xh(){return Ph}())t[$t]|=1024,Ba(t);else{var n;null===(n=t[Pi].changeDetectionScheduler)||void 0===n||n.notify()}}function Ba(t){var e;null===(e=t[Pi].changeDetectionScheduler)||void 0===e||e.notify();let n=wl(t);for(;null!==n&&!(8192&n[$t])&&(n[$t]|=8192,Kg(n));)n=wl(n)}function kh(t,e){if(!(256&~t[$t]))throw new Se(911,!1);null===t[La]&&(t[La]=[]),t[La].push(e)}function wl(t){const e=t[Tr];return fi(e)?e[Tr]:e}const Yt={lFrame:MI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function CI(){return Yt.bindingsEnabled}function vc(){return null!==Yt.skipHydrationRootTNode}function De(){return Yt.lFrame.lView}function vn(){return Yt.lFrame.tView}function la(t){return Yt.lFrame.contextLView=t,t[ir]}function ca(t){return Yt.lFrame.contextLView=null,t}function Vn(){let t=Oh();for(;null!==t&&64===t.type;)t=t.parent;return t}function Oh(){return Yt.lFrame.currentTNode}function jo(t,e){const n=Yt.lFrame;n.currentTNode=t,n.isParent=e}function Zg(){return Yt.lFrame.isParent}function Fh(){Yt.lFrame.isParent=!1}function ao(){return Yt.lFrame.bindingIndex++}function Xb(t,e){const n=Yt.lFrame;n.bindingIndex=n.bindingRootIndex=t,em(e)}function em(t){Yt.lFrame.currentDirectiveIndex=t}function Vh(t){Yt.lFrame.currentQueryIndex=t}function hN(t){const e=t[it];return 2===e.type?e.declTNode:1===e.type?t[hi]:null}function PI(t,e,n){if(n&_n.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&_n.Host||(i=hN(o),null===i||(o=o[fc],10&i.type))););if(null===i)return!1;e=i,t=o}const r=Yt.lFrame=xI();return r.currentTNode=e,r.lView=t,!0}function ua(t){const e=xI(),n=t[it];Yt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function xI(){const t=Yt.lFrame,e=null===t?null:t.child;return null===e?MI(t):e}function MI(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Bh(){const t=Yt.lFrame;return Yt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const NI=Bh;function Ku(){const t=Bh();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ni(){return Yt.lFrame.selectedIndex}function da(t){Yt.lFrame.selectedIndex=t}function or(){const t=Yt.lFrame;return mc(t.tView,t.selectedIndex)}let OI=!0;function Qu(){return OI}function ds(t){OI=t}function $h(t,e){for(let c=e.directiveStart,h=e.directiveEnd;c<h;c++){const m=t.data[c].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:T,ngAfterViewChecked:S,ngOnDestroy:j}=m;var n,r,i,o,s,a,l;_&&(null!==(n=t.contentHooks)&&void 0!==n?n:t.contentHooks=[]).push(-c,_),w&&((null!==(r=t.contentHooks)&&void 0!==r?r:t.contentHooks=[]).push(c,w),(null!==(i=t.contentCheckHooks)&&void 0!==i?i:t.contentCheckHooks=[]).push(c,w)),T&&(null!==(o=t.viewHooks)&&void 0!==o?o:t.viewHooks=[]).push(-c,T),S&&((null!==(s=t.viewHooks)&&void 0!==s?s:t.viewHooks=[]).push(c,S),(null!==(a=t.viewCheckHooks)&&void 0!==a?a:t.viewCheckHooks=[]).push(c,S)),null!=j&&(null!==(l=t.destroyHooks)&&void 0!==l?l:t.destroyHooks=[]).push(c,j)}}function Uh(t,e,n){FI(t,e,3,n)}function yc(t,e,n,r){(3&t[$t])===n&&FI(t,e,n,r)}function Yu(t,e){let n=t[$t];(3&n)===e&&(n&=16383,n+=1,t[$t]=n)}function FI(t,e,n,r){const o=null!=r?r:-1,s=e.length-1;let a=0;for(let l=void 0!==r?65535&t[pc]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(t[pc]+=65536),(a<o||-1==o)&&(jh(t,n,e,l),t[pc]=(4294901760&t[pc])+l+2),l++}function LI(t,e){Os(4,t,e);const n=q(null);try{e.call(t)}finally{q(n),Os(5,t,e)}}function jh(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[$t]>>14<t[pc]>>16&&(3&t[$t])===e&&(t[$t]+=16384,LI(a,o)):LI(a,o)}const Ic=-1;class Xu{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function im(t){return t!==Ic}function Ec(t){return 32767&t}function Zu(t,e){let n=function aT(t){return t>>16}(t),r=e;for(;n>0;)r=r[fc],n--;return r}let om=!0;function Gh(t){const e=om;return om=t,e}const Wh=255,qh=5;let VI=0;const Vs={};function Kh(t,e){const n=wc(t,e);if(-1!==n)return n;const r=e[it];r.firstCreatePass&&(t.injectorIndex=e.length,Wi(r.data,t),Wi(e,null),Wi(r.blueprint,null));const i=Ju(t,e),o=t.injectorIndex;if(im(i)){const s=Ec(i),a=Zu(i,e),l=a[it].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function Wi(t,e){t.push(0,0,0,0,0,0,0,0,e)}function wc(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ju(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=dm(i),null===r)return Ic;if(n++,i=i[fc],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ic}function am(t,e,n){!function sm(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ru)&&(r=n[Ru]),null==r&&(r=n[Ru]=VI++);const i=r&Wh;e.data[t+(i>>qh)]|=1<<i}(t,e,n)}function Qh(t,e,n){if(n&_n.Optional||void 0!==t)return t;Js()}function BI(t,e,n,r){if(n&_n.Optional&&void 0===r&&(r=null),!(n&(_n.Self|_n.Host))){const i=t[Ri],o=Io(void 0);try{return i?i.get(e,r,n&_n.Optional):oh(e,r,n&_n.Optional)}finally{Io(o)}}return Qh(r,0,n)}function cm(t,e,n,r=_n.Default,i){if(null!==t){if(2048&e[$t]&&!(r&_n.Self)){const s=function jI(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[$t]&&!(512&s[$t]);){const a=$I(o,s,n,r|_n.Self,Vs);if(a!==Vs)return a;let l=o.parent;if(!l){const c=s[Ch];if(c){const h=c.get(n,Vs,r);if(h!==Vs)return h}l=dm(s),s=s[fc]}o=l}return i}(t,e,n,r,Vs);if(s!==Vs)return s}const o=$I(t,e,n,r,Vs);if(o!==Vs)return o}return BI(e,n,r,i)}function $I(t,e,n,r,i){const o=function cT(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ru)?t[Ru]:void 0;return"number"==typeof e?e>=0?e&Wh:uT:e}(n);if("function"==typeof o){if(!PI(e,t,r))return r&_n.Host?Qh(i,0,r):BI(e,n,r,i);try{let s;if(s=o(r),null!=s||r&_n.Optional)return s;Js()}finally{NI()}}else if("number"==typeof o){let s=null,a=wc(t,e),l=Ic,c=r&_n.Host?e[Ar][hi]:null;for((-1===a||r&_n.SkipSelf)&&(l=-1===a?Ju(t,e):e[a+8],l!==Ic&&um(r,!1)?(s=e[it],a=Ec(l),e=Zu(l,e)):a=-1);-1!==a;){const h=e[it];if(UI(o,a,h.data)){const p=$a(a,e,n,s,r,c);if(p!==Vs)return p}l=e[a+8],l!==Ic&&um(r,e[it].data[a+8]===c)&&UI(o,a,e)?(s=h,a=Ec(l),e=Zu(l,e)):a=-1}}return i}function $a(t,e,n,r,i,o){const s=e[it],a=s.data[t+8],h=function ed(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,l=t.directiveStart,h=o>>20,m=i?a+h:t.directiveEnd;for(let _=r?a:a+h;_<m;_++){const w=s[_];if(_<l&&n===w||_>=l&&w.type===n)return _}if(i){const _=s[l];if(_&&bo(_)&&_.type===n)return l}return null}(a,s,n,null==r?sa(a)&&om:r!=s&&!!(3&a.type),i&_n.Host&&o===a);return null!==h?Cl(e,s,h,a):Vs}function Cl(t,e,n,r){let i=t[n];const o=e.data;if(function rT(t){return t instanceof Xu}(i)){const s=i;s.resolving&&function mb(t,e){throw e&&e.join(" > "),new Se(-200,t)}(function Pn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Xt(t)}(o[n]));const a=Gh(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?Io(s.injectImpl):null;PI(t,r,_n.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function rm(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){var s,a;const p=Wg(e);(null!==(s=n.preOrderHooks)&&void 0!==s?s:n.preOrderHooks=[]).push(t,p),(null!==(a=n.preOrderCheckHooks)&&void 0!==a?a:n.preOrderCheckHooks=[]).push(t,p)}var l,c,h;i&&(null!==(l=n.preOrderHooks)&&void 0!==l?l:n.preOrderHooks=[]).push(0-t,i),o&&((null!==(c=n.preOrderHooks)&&void 0!==c?c:n.preOrderHooks=[]).push(t,o),(null!==(h=n.preOrderCheckHooks)&&void 0!==h?h:n.preOrderCheckHooks=[]).push(t,o))}(n,o[n],e)}finally{null!==c&&Io(c),Gh(a),s.resolving=!1,NI()}}return i}function UI(t,e,n){return!!(n[e+(t>>qh)]&1<<t)}function um(t,e){return!(t&_n.Self||t&_n.Host&&e)}class Br{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return cm(this._tNode,this._lView,e,ic(r),n)}}function uT(){return new Br(Vn(),De())}function xn(t){return _t(()=>{const e=t.prototype.constructor,n=e[di]||bl(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[di]||bl(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function bl(t){return Ss(t)?()=>{const e=bl(zt(t));return e&&e()}:na(t)}function dm(t){const e=t[it],n=e.type;return 2===n?e.declTNode:1===n?t[hi]:null}function ha(t){return function lm(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(Ky(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(Vn(),t)}function pt(t,e=null,n=null,r){const i=Rt(t,e,n,r);return i.resolveInjectorInitializers(),i}function Rt(t,e=null,n=null,r,i=new Set){const o=[n||Tn,Db(t)];return r=r||("object"==typeof t?void 0:qt(t)),new Oa(o,e||_h(),r||null,i)}let tt=(()=>{var t;class e{static create(r,i){if(Array.isArray(r))return pt({name:""},i,r,"");{var o;const s=null!==(o=r.name)&&void 0!==o?o:"";return pt({name:s},r.parent,r.providers,s)}}}return(t=e).THROW_IF_NOT_FOUND=Ps,t.NULL=new dh,t.\u0275prov=je({token:t,providedIn:"any",factory:()=>Be(Wy)}),t.__NG_ELEMENT_ID__=-1,e})();function Xh(t){return t.ngOriginalError}class zo{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Xh(e);for(;n&&Xh(n);)n=Xh(n);return n||null}}const gm=new lt("",{providedIn:"root",factory:()=>$e(zo).handleError.bind(void 0)});let Tl=(()=>{var t;class e{}return(t=e).__NG_ELEMENT_ID__=GI,t.__NG_ENV_ID__=n=>n,e})();class mm extends Tl{constructor(e){super(),this._lView=e}onDestroy(e){return kh(this._lView,e),()=>function Yg(t,e){if(null===t[La])return;const n=t[La].indexOf(e);-1!==n&&t[La].splice(n,1)}(this._lView,e)}}function GI(){return new mm(De())}function yW(){return Zh(Vn(),De())}function Zh(t,e){return new He(Mi(t,e))}let He=(()=>{class e{constructor(r){this.nativeElement=r}}return e.__NG_ELEMENT_ID__=yW,e})();function hT(t){return e=>{setTimeout(t,void 0,e)}}const sr=class IW extends ${constructor(e=!1){var n;super(),this.destroyRef=void 0,this.__isAsync=e,iI()&&(this.destroyRef=null!==(n=$e(Tl,{optional:!0}))&&void 0!==n?n:void 0)}emit(e){const n=q(null);try{super.next(e)}finally{q(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){var a,l,c;const p=e;i=null===(a=p.next)||void 0===a?void 0:a.bind(p),o=null===(l=p.error)||void 0===l?void 0:l.bind(p),s=null===(c=p.complete)||void 0===c?void 0:c.bind(p)}this.__isAsync&&(o=hT(o),i&&(i=hT(i)),s&&(s=hT(s)));const h=super.subscribe({next:i,error:o,complete:s});return e instanceof ce&&e.add(h),h}};function KI(t){return!(128&~t.flags)}const pT=new Map;let CW=0;const mT="__ngContext__";function lo(t,e){xi(e)?(t[mT]=e[Bu],function TW(t){pT.set(t[Bu],t)}(e)):t[mT]=e}function AN(t){return SN(t[Vu])}function DN(t){return SN(t[cs])}function SN(t){for(;null!==t&&!fi(t);)t=t[cs];return t}let _T;const XI=new lt("",{providedIn:"root",factory:()=>HW}),HW="ng",FN=new lt(""),fa=new lt("",{providedIn:"platform",factory:()=>"unknown"}),LN=new lt("",{providedIn:"root",factory:()=>{var t;return(null===(t=function Cc(){if(void 0!==_T)return _T;if(typeof document<"u")return document;throw new Se(210,!1)}().body)||void 0===t||null===(t=t.querySelector("[ngCspNonce]"))||void 0===t?void 0:t.getAttribute("ngCspNonce"))||null}});let VN=()=>null;function wT(t,e,n=!1){return VN(t,e,n)}const HN=new lt("",{providedIn:"root",factory:()=>!1});let a0;function qN(t){var e;return(null===(e=function DT(){if(void 0===a0&&(a0=null,bn.trustedTypes))try{a0=bn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return a0}())||void 0===e?void 0:e.createScriptURL(t))||t}class KN{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rn})`}}function bc(t){return t instanceof KN?t.changingThisBreaksApplicationSecurity:t}function Tm(t,e){const n=function lq(t){return t instanceof KN&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${rn})`)}return n===e}const hq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var rf=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(rf||{});function Dl(t){const e=Dm();return e?e.sanitize(rf.URL,t)||"":Tm(t,"URL")?bc(t):function ST(t){return(t=String(t)).match(hq)?t:"unsafe:"+t}(Xt(t))}function rk(t){const e=Dm();if(e)return qN(e.sanitize(rf.RESOURCE_URL,t)||"");if(Tm(t,"ResourceURL"))return qN(bc(t));throw new Se(904,!1)}function Dm(){const t=De();return t&&t[Pi].sanitizer}function hs(t){return t instanceof Function?t():t}var Ac=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ac||{});let OT;function FT(t,e){return OT(t,e)}function af(t,e,n,r,i){if(null!=r){let o,s=!1;fi(r)?o=r:xi(r)&&(s=!0,r=r[gr]);const a=Gn(r);0===t&&null!==n?null==i?mk(e,n,a):td(e,n,a,i||null,!0):1===t&&null!==n?td(e,n,a,i||null,!0):2===t?function Pm(t,e,n){const r=f0(t,e);r&&function Qq(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function Zq(t,e,n,r,i){const o=n[ks];o!==Gn(n)&&af(e,t,r,o,i);for(let a=Vr;a<n.length;a++){const l=n[a];g0(l[it],l,t,e,r,o)}}(e,t,o,n,i)}}function d0(t,e,n){return t.createElement(e,n)}function fk(t,e){var n;null===(n=e[Pi].changeDetectionScheduler)||void 0===n||n.notify(1),g0(t,e,e[Qt],2,null,null)}function pk(t,e){const n=t[Va],r=n.indexOf(e);n.splice(r,1)}function Sm(t,e){if(t.length<=Vr)return;const n=Vr+e,r=t[n];if(r){const i=r[Fa];null!==i&&i!==t&&pk(i,r),e>0&&(t[n-1][cs]=r[cs]);const o=Mu(t,Vr+e);!function jq(t,e){fk(t,e),e[gr]=null,e[hi]=null}(r[it],r);const s=o[Ns];null!==s&&s.detachView(o[it]),r[Tr]=null,r[cs]=null,r[$t]&=-129}return r}function h0(t,e){if(!(256&e[$t])){const n=e[Qt];n.destroyNode&&g0(t,e,n,3,null,null),function zq(t){let e=t[Vu];if(!e)return BT(t[it],t);for(;e;){let n=null;if(xi(e))n=e[Vu];else{const r=e[Vr];r&&(n=r)}if(!n){for(;e&&!e[cs]&&e!==t;)xi(e)&&BT(e[it],e),e=e[Tr];null===e&&(e=t),xi(e)&&BT(e[it],e),n=e&&e[cs]}e=n}}(e)}}function BT(t,e){if(256&e[$t])return;const n=q(null);try{e[$t]&=-129,e[$t]|=256,e[Il]&&function ke(t){if(P(t),nt(t))for(let e=0;e<t.producerNode.length;e++)Oe(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(e[Il]),function Kq(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Xu)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],l=o[s+1];Os(4,a,l);try{l.call(a)}finally{Os(5,a,l)}}else{Os(4,i,o);try{o.call(i)}finally{Os(5,i,o)}}}}}(t,e),function qq(t,e){const n=t.cleanup,r=e[hc];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[hc]=null);const i=e[La];if(null!==i){e[La]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,e),1===e[it].type&&e[Qt].destroy();const r=e[Fa];if(null!==r&&fi(e[Tr])){r!==e[Tr]&&pk(r,e);const i=e[Ns];null!==i&&i.detachView(t)}!function AW(t){pT.delete(t[Bu])}(e)}finally{q(n)}}function $T(t,e,n){return function gk(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[gr];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===ls.None||o===ls.Emulated)return null}return Mi(r,n)}}(t,e.parent,n)}function td(t,e,n,r,i){t.insertBefore(e,n,r,i)}function mk(t,e,n){t.appendChild(e,n)}function _k(t,e,n,r,i){null!==r?td(t,e,n,r,i):mk(t,e,n)}function f0(t,e){return t.parentNode(e)}function vk(t,e,n){return Ik(t,e,n)}let UT,Ik=function yk(t,e,n){return 40&t.type?Mi(t,n):null};function p0(t,e,n,r){const i=$T(t,r,e),o=e[Qt],a=vk(r.parent||e[hi],r,e);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)_k(o,i,n[l],a,!1);else _k(o,i,n,a,!1);void 0!==UT&&UT(o,r,e,n,i)}function Rm(t,e){if(null!==e){const n=e.type;if(3&n)return Mi(e,t);if(4&n)return jT(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Rm(t,r);{const i=t[e.index];return fi(i)?jT(-1,i):Gn(i)}}if(32&n)return FT(e,t)()||Gn(t[e.index]);{const r=wk(t,e);return null!==r?Array.isArray(r)?r[0]:Rm(wl(t[Ar]),r):Rm(t,e.next)}}return null}function wk(t,e){return null!==e?t[Ar][hi].projection[e.projection]:null}function jT(t,e){const n=Vr+t+1;if(n<e.length){const r=e[n],i=r[it].firstChild;if(null!==i)return Rm(r,i)}return e[ks]}function HT(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],l=n.type;if(s&&0===e&&(a&&lo(Gn(a),r),n.flags|=2),32&~n.flags)if(8&l)HT(t,e,n.child,r,i,o,!1),af(e,t,i,a,o);else if(32&l){const c=FT(n,r);let h;for(;h=c();)af(e,t,i,h,o);af(e,t,i,a,o)}else 16&l?bk(t,e,r,n,i,o):af(e,t,i,a,o);n=s?n.projectionNext:n.next}}function g0(t,e,n,r,i,o){HT(n,r,t.firstChild,e,i,o,!1)}function bk(t,e,n,r,i,o){const s=n[Ar],l=s[hi].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)af(e,t,i,l[c],o);else{let c=l;const h=s[Tr];KI(r)&&(c.flags|=128),HT(t,e,c,h,i,o,!0)}}function Tk(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Ak(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&Ou(t,e,r),null!==i&&Tk(t,e,i),null!==o&&function e9(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}const an={};function un(t=1){Dk(vn(),De(),Ni()+t,!1)}function Dk(t,e,n,r){if(!r)if(3&~e[$t]){const o=t.preOrderHooks;null!==o&&yc(e,o,0,n)}else{const o=t.preOrderCheckHooks;null!==o&&Uh(e,o,n)}da(n)}function E(t,e=_n.Default){const n=De();return null===n?Be(t,e):cm(Vn(),n,zt(t),e)}function Rk(t,e,n,r,i,o){const s=q(null);try{let a=null;i&Jn.SignalBased&&(a=e[r][Ze]),null!==a&&void 0!==a.transformFn&&(o=a.transformFn(o)),i&Jn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),null!==t.setInput?t.setInput(e,a,o,n,r):Dh(e,a,r,o)}finally{q(s)}}function m0(t,e,n,r,i,o,s,a,l,c,h){const p=e.blueprint.slice();return p[gr]=i,p[$t]=204|r,(null!==c||t&&2048&t[$t])&&(p[$t]|=2048),Mh(p),p[Tr]=p[fc]=t,p[ir]=n,p[Pi]=s||t&&t[Pi],p[Qt]=a||t&&t[Qt],p[Ri]=l||t&&t[Ri]||null,p[hi]=o,p[Bu]=function bW(){return CW++}(),p[io]=h,p[Ch]=c,p[Ar]=2==e.type?t[Ar]:p,p}function lf(t,e,n,r,i){let o=t.data[e];if(null===o)o=function zT(t,e,n,r,i){const o=Oh(),s=Zg(),l=t.data[e]=function l9(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return vc()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l,l.prev=o)),l}(t,e,n,r,i),function SI(){return Yt.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function qu(){const t=Yt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return jo(o,!0),o}function xm(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Pk(t,e,n,r,i){const o=Ni(),s=2&r;try{da(-1),s&&e.length>Zt&&Dk(t,e,Zt,!1),Os(s?2:0,i),n(r,i)}finally{da(o),Os(s?3:1,i)}}function GT(t,e,n){if(jg(e)){const r=q(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{q(r)}}}function WT(t,e,n){CI()&&(function g9(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;sa(n)&&function w9(t,e,n){const r=Mi(e,t),i=xk(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=_0(t,m0(t,i,null,s,r,e,null,t[Pi].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Kh(n,e),lo(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const l=t.data[a],c=Cl(e,t,a,n);lo(c,e),null!==s&&C9(0,a-i,c,l,0,s),bo(l)&&(oo(n.index,e)[ir]=Cl(e,t,a,n))}}(t,e,n,Mi(n,e)),!(64&~n.flags)&&Fk(t,e,n))}function qT(t,e,n=Mi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function xk(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=KT(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function KT(t,e,n,r,i,o,s,a,l,c,h){const p=Zt+r,m=p+i,_=function n9(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:an);return n}(p,m),w="function"==typeof c?c():c;return _[it]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:w,incompleteFirstPass:!1,ssrId:h}}let Mk=()=>null;function Nk(t,e,n,r,i){for(let s in e){var o;if(!e.hasOwnProperty(s))continue;const a=e[s];if(void 0===a)continue;null!==(o=r)&&void 0!==o||(r={});let l,c=Jn.None;Array.isArray(a)?(l=a[0],c=a[1]):l=a;let h=s;if(null!==i){if(!i.hasOwnProperty(s))continue;h=i[s]}0===t?kk(r,n,h,l,c):kk(r,n,h,l)}return r}function kk(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],void 0!==i&&o.push(i)}function Wo(t,e,n,r,i,o,s,a){const l=Mi(e,n);let h,c=e.inputs;!a&&null!=c&&(h=c[r])?(JT(t,n,h,r,i),sa(e)&&function d9(t,e){const n=oo(e,t);16&n[$t]||(n[$t]|=64)}(n,e.index)):3&e.type&&(r=function u9(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(l,r,i))}function QT(t,e,n,r){if(CI()){const i=null===r?null:{"":-1},o=function _9(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const a=n[s];if(ph(e,a.selectors,!1))if(r||(r=[]),bo(a))if(null!==a.findHostDirectiveDefs){const l=[];i=i||new Map,a.findHostDirectiveDefs(a,l,i),r.unshift(...l,a),YT(t,e,l.length)}else r.unshift(a),YT(t,e,0);else{var o;i=i||new Map,null===(o=a.findHostDirectiveDefs)||void 0===o||o.call(a,a,r,i),r.push(a)}}return null===r?null:[r,i]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&Ok(t,e,n,s,i,a),i&&function v9(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new Se(-301,!1);r.push(e[i],o)}}}(n,r,i)}n.mergedAttrs=Fu(n.mergedAttrs,n.attrs)}function Ok(t,e,n,r,i,o){for(let p=0;p<r.length;p++)am(Kh(n,e),t,r[p].type);!function I9(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let p=0;p<r.length;p++){const m=r[p];m.providersResolver&&m.providersResolver(m)}let s=!1,a=!1,l=xm(t,e,r.length,null);for(let p=0;p<r.length;p++){const m=r[p];n.mergedAttrs=Fu(n.mergedAttrs,m.hostAttrs),E9(t,n,e,l,m),y9(l,m,i),null!==m.contentQueries&&(n.flags|=4),(null!==m.hostBindings||null!==m.hostAttrs||0!==m.hostVars)&&(n.flags|=64);const _=m.type.prototype;var c,h;!s&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((null!==(c=t.preOrderHooks)&&void 0!==c?c:t.preOrderHooks=[]).push(n.index),s=!0),a||!_.ngOnChanges&&!_.ngDoCheck||((null!==(h=t.preOrderCheckHooks)&&void 0!==h?h:t.preOrderCheckHooks=[]).push(n.index),a=!0),l++}!function c9(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let l=null,c=null;for(let h=e.directiveStart;h<i;h++){const p=o[h],m=n?n.get(p):null,w=m?m.outputs:null;l=Nk(0,p.inputs,h,l,m?m.inputs:null),c=Nk(1,p.outputs,h,c,w);const T=null===l||null===s||Lu(e)?null:b9(l,h,s);a.push(T)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(t,n,o)}function Fk(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function Zb(){return Yt.lFrame.currentDirectiveIndex}();try{da(o);for(let a=r;a<i;a++){const l=t.data[a],c=e[a];em(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&m9(l,c)}}finally{da(-1),em(s)}}function m9(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function YT(t,e,n){var r;e.componentOffset=n,(null!==(r=t.components)&&void 0!==r?r:t.components=[]).push(e.index)}function y9(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;bo(e)&&(n[""]=t)}}function E9(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=na(i.type)),s=new Xu(o,bo(i),E);t.blueprint[r]=s,n[r]=s,function f9(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function p9(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,xm(t,n,i.hostVars,an),i)}function ja(t,e,n,r,i,o){const s=Mi(t,e);!function XT(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?Xt(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[Qt],s,o,t.value,n,r,i)}function C9(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)Rk(r,n,s[a++],s[a++],s[a++],s[a++])}function b9(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Lk(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Vk(t,e){const n=t.contentQueries;if(null!==n){const r=q(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=t.data[s];Vh(n[i]),a.contentQueries(2,e[s],s)}}}finally{q(r)}}}function _0(t,e){return t[Vu]?t[aI][cs]=e:t[Vu]=e,t[aI]=e,e}function ZT(t,e,n){Vh(0);const r=q(null);try{e(t,n)}finally{q(r)}}function v0(t,e){const n=t[Ri],r=n?n.get(zo,null):null;r&&r.handleError(e)}function JT(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=n[o++];Rk(t.data[s],e[s],r,a,l,i)}}function T9(t,e){const n=oo(e,t),r=n[it];!function A9(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[gr];null!==i&&null===n[io]&&(n[io]=wT(i,n[Ri])),eA(r,n,n[ir])}function eA(t,e,n){ua(e);try{var r;const i=t.viewQuery;null!==i&&ZT(1,i,n);const o=t.template;null!==o&&Pk(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),null===(r=e[Ns])||void 0===r||r.finishViewCreation(t),t.staticContentQueries&&Vk(t,e),t.staticViewQueries&&ZT(2,t.viewQuery,n);const s=t.components;null!==s&&function D9(t,e){for(let n=0;n<e.length;n++)T9(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[$t]&=-5,Ku()}}function cf(t,e){return!e||null===e.firstChild||KI(t)}function Nm(t,e,n,r=!0){const i=e[it];if(function Gq(t,e,n,r){const i=Vr+r,o=n.length;r>0&&(n[i-1][cs]=e),r<o-Vr?(e[cs]=n[i],lh(n,Vr+r,e)):(n.push(e),e[cs]=null),e[Tr]=n;const s=e[Fa];null!==s&&n!==s&&function Wq(t,e){const n=t[Va];e[Ar]!==e[Tr][Tr][Ar]&&(t[$t]|=ju.HasTransplantedViews),null===n?t[Va]=[e]:n.push(e)}(s,e);const a=e[Ns];null!==a&&a.insertView(t),Qg(e),e[$t]|=128}(i,e,t,n),r){const s=jT(n,t),a=e[Qt],l=f0(a,t[ks]);null!==l&&function Hq(t,e,n,r,i,o){r[gr]=i,r[hi]=e,g0(t,r,n,1,i,o)}(i,t[hi],a,e,l,s)}const o=e[io];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function km(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];null!==o&&r.push(Gn(o)),fi(o)&&Hk(o,r);const s=n.type;if(8&s)km(t,e,n.child,r);else if(32&s){const a=FT(n,e);let l;for(;l=a();)r.push(l)}else if(16&s){const a=wk(e,n);if(Array.isArray(a))r.push(...a);else{const l=wl(e[Ar]);km(l[it],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Hk(t,e){for(let n=Vr;n<t.length;n++){const r=t[n],i=r[it].firstChild;null!==i&&km(r[it],r,i,e)}t[ks]!==t[gr]&&e.push(t[ks])}let zk=[];const x9={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ba(t.lView)},consumerOnSignalRead(){this.lView[Il]=this}},Gk=100;function y0(t,e=!0,n=0){const r=t[Pi],i=r.rendererFactory;var s;null===(s=i.begin)||void 0===s||s.call(i);try{!function M9(t,e){nA(t,e);let n=0;for(;Nh(t);){if(n===Gk)throw new Se(103,!1);n++,nA(t,1)}}(t,n)}catch(c){throw e&&v0(t,c),c}finally{var a,l;null===(a=i.end)||void 0===a||a.call(i),null===(l=r.inlineEffectRunner)||void 0===l||l.flush()}}function N9(t,e,n,r){var i;const o=e[$t];if(!(256&~o))return;null===(i=e[Pi].inlineEffectRunner)||void 0===i||i.flush(),ua(e);let a=null,l=null;(function k9(t){return 2!==t.type})(t)&&(l=function S9(t){var e;return null!==(e=t[Il])&&void 0!==e?e:function R9(t){var e;const n=null!==(e=zk.pop())&&void 0!==e?e:Object.create(x9);return n.lView=t,n}(t)}(e),a=function Q(t){return t&&(t.nextProducerIndex=0),q(t)}(l));try{Mh(e),function Jg(t){return Yt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Pk(t,e,n,2,r);const c=!(3&~o);if(c){const m=t.preOrderCheckHooks;null!==m&&Uh(e,m,null)}else{const m=t.preOrderHooks;null!==m&&yc(e,m,0,null),Yu(e,0)}if(function O9(t){for(let e=AN(t);null!==e;e=DN(e)){if(!(e[$t]&ju.HasTransplantedViews))continue;const n=e[Va];for(let r=0;r<n.length;r++){zb(n[r])}}}(e),Wk(e,0),null!==t.contentQueries&&Vk(t,e),c){const m=t.contentCheckHooks;null!==m&&Uh(e,m)}else{const m=t.contentHooks;null!==m&&yc(e,m,1),Yu(e,1)}!function t9(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)da(~i);else{const o=i,s=n[++r],a=n[++r];Xb(s,o),a(2,e[o])}}}finally{da(-1)}}(t,e);const h=t.components;null!==h&&Kk(e,h,0);const p=t.viewQuery;if(null!==p&&ZT(2,p,r),c){const m=t.viewCheckHooks;null!==m&&Uh(e,m)}else{const m=t.viewHooks;null!==m&&yc(e,m,2),Yu(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[$u]){for(const m of e[$u])m();e[$u]=null}e[$t]&=-73}catch(c){throw Ba(e),c}finally{null!==l&&(function Z(t,e){if(q(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(nt(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Oe(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(l,a),function P9(t){t.lView[Il]!==t&&(t.lView=null,zk.push(t))}(l)),Ku()}}function Wk(t,e){for(let n=AN(t);null!==n;n=DN(n))for(let r=Vr;r<n.length;r++)qk(n[r],e)}function F9(t,e,n){qk(oo(e,t),n)}function qk(t,e){Kg(t)&&nA(t,e)}function nA(t,e){const r=t[it],i=t[$t],o=t[Il];let s=!!(0===e&&16&i);if(s||(s=!!(64&i&&0===e)),s||(s=!!(1024&i)),s||(s=!(null==o||!o.dirty||!Fe(o))),o&&(o.dirty=!1),t[$t]&=-9217,s)N9(r,t,r.template,t[ir]);else if(8192&i){Wk(t,1);const a=r.components;null!==a&&Kk(t,a,1)}}function Kk(t,e,n){for(let r=0;r<e.length;r++)F9(t,e[r],n)}function Om(t){var e;for(null===(e=t[Pi].changeDetectionScheduler)||void 0===e||e.notify();t;){t[$t]|=64;const n=wl(t);if(Hg(t)&&!n)return t;t=n}return null}class Fm{get rootNodes(){const e=this._lView,n=e[it];return km(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ir]}set context(e){this._lView[ir]=e}get destroyed(){return!(256&~this._lView[$t])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Tr];if(fi(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Sm(e,r),Mu(n,r))}this._attachedToViewContainer=!1}h0(this._lView[it],this._lView)}onDestroy(e){kh(this._lView,e)}markForCheck(){Om(this._cdRefInjectingView||this._lView)}detach(){this._lView[$t]&=-129}reattach(){Qg(this._lView),this._lView[$t]|=128}detectChanges(){this._lView[$t]|=1024,y0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,fk(this._lView[it],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=e,Qg(this._lView)}}let pa=(()=>{class e{}return e.__NG_ELEMENT_ID__=B9,e})();const L9=pa,V9=class extends L9{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){var e;return(null===(e=this._declarationTContainer.tView)||void 0===e?void 0:e.ssrId)||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function Mm(t,e,n,r){const i=q(null);try{var o,s,a;const l=e.tView,p=m0(t,l,n,4096&t[$t]?4096:16,null,e,null,null,null!==(o=null==r?void 0:r.injector)&&void 0!==o?o:null,null!==(s=null==r?void 0:r.embeddedViewInjector)&&void 0!==s?s:null,null!==(a=null==r?void 0:r.dehydratedView)&&void 0!==a?a:null);p[Fa]=t[e.index];const _=t[Ns];return null!==_&&(p[Ns]=_.createEmbeddedView(l)),eA(l,p,n),p}finally{q(i)}}(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Fm(i)}};function B9(){return function I0(t,e){return 4&t.type?new V9(e,t,Zh(t,e)):null}(Vn(),De())}class lA{}class c8{}class tO{}class d8{resolveComponentFactory(e){throw function u8(t){const e=Error(`No component factory found for ${qt(t)}.`);return e.ngComponent=t,e}(e)}}let T0=(()=>{class e{}return e.NULL=new d8,e})();class rO{}let Rl=(()=>{class e{constructor(){this.destroyNode=null}}return e.__NG_ELEMENT_ID__=()=>function h8(){const t=De(),n=oo(Vn().index,t);return(xi(n)?n:t)[Qt]}(),e})(),f8=(()=>{var t;class e{}return(t=e).\u0275prov=je({token:t,providedIn:"root",factory:()=>null}),e})();const cA={},iO=new Set;function Ha(t){var e,n;iO.has(t)||(iO.add(t),null===(e=performance)||void 0===e||null===(n=e.mark)||void 0===n||n.call(e,"mark_feature_usage",{detail:{feature:t}}))}function oO(...t){}class xe{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sr(!1),this.onMicrotaskEmpty=new sr(!1),this.onStable=new sr(!1),this.onError=new sr(!1),typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function p8(){const t="function"==typeof bn.requestAnimationFrame;let e=bn[t?"requestAnimationFrame":"setTimeout"],n=bn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function _8(t){const e=()=>{!function m8(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(bn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,dA(t),t.isCheckStableRunning=!0,uA(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),dA(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function v8(t){var e;return!(!Array.isArray(t)||1!==t.length)&&!0===(null===(e=t[0].data)||void 0===e?void 0:e.__ignore_ng_zone__)}(a))return n.invokeTask(i,o,s,a);try{return sO(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),aO(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return sO(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),aO(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,dA(t),uA(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xe.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(xe.isInAngularZone())throw new Se(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,g8,oO,oO);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const g8={};function uA(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function dA(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function sO(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function aO(t){t._nesting--,uA(t)}class lO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sr,this.onMicrotaskEmpty=new sr,this.onStable=new sr,this.onError=new sr}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}var nd=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(nd||{});const cO={destroy(){}};function uO(t,e){var n,r,i;!e&&function Ih(t){if(!iI())throw new Se(-203,!1)}();const o=null!==(n=null==e?void 0:e.injector)&&void 0!==n?n:$e(tt);if(!function Tc(t){return"browser"===(null!=t?t:$e(tt)).get(fa)}(o))return cO;Ha("NgAfterNextRender");const s=o.get(Um),a=null!==(r=s.handler)&&void 0!==r?r:s.handler=new hO,l=null!==(i=null==e?void 0:e.phase)&&void 0!==i?i:nd.MixedReadWrite,c=()=>{a.unregister(p),h()},h=o.get(Tl).onDestroy(c),p=Si(o,()=>new dO(l,()=>{c(),t()}));return a.register(p),{destroy:c}}class dO{constructor(e,n){var r;this.phase=e,this.callbackFn=n,this.zone=$e(xe),this.errorHandler=$e(zo,{optional:!0}),null===(r=$e(lA,{optional:!0}))||void 0===r||r.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){var e;null===(e=this.errorHandler)||void 0===e||e.handleError(n)}}}class hO{constructor(){this.executingCallbacks=!1,this.buckets={[nd.EarlyRead]:new Set,[nd.Write]:new Set,[nd.MixedReadWrite]:new Set,[nd.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const n of e)n.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let Um=(()=>{var t;class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){var r;this.executeInternalCallbacks(),null===(r=this.handler)||void 0===r||r.execute()}executeInternalCallbacks(){const r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of r)i()}ngOnDestroy(){var r;null===(r=this.handler)||void 0===r||r.destroy(),this.handler=null,this.internalCallbacks.length=0}}return(t=e).\u0275prov=je({token:t,providedIn:"root",factory:()=>new t}),e})();function D0(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Ln(i,a):2==o&&(r=Ln(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}class gO extends T0{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=tn(e);return new zm(n,this.ngModule)}}function mO(t){const e=[];for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n];void 0!==r&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}class b8{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ic(r);const i=this.injector.get(e,cA,r);return i!==cA||n===cA?i:this.parentInjector.get(e,n,r)}}class zm extends tO{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=mO(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return mO(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Tb(t){return t.map(Mg).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){const o=q(null);try{var a;let l=(i=i||this.ngModule)instanceof Gr?i:null===(a=i)||void 0===a?void 0:a.injector;l&&null!==this.componentDef.getStandaloneInjector&&(l=this.componentDef.getStandaloneInjector(l)||l);const c=l?new b8(e,l):e,h=c.get(rO,null);if(null===h)throw new Se(407,!1);const p=c.get(f8,null),w={rendererFactory:h,sanitizer:p,inlineEffectRunner:null,afterRenderEventManager:c.get(Um,null),changeDetectionScheduler:c.get(lA,null)},T=h.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",j=r?function r9(t,e,n,r){const o=r.get(HN,!1)||n===ls.ShadowDom,s=t.selectRootElement(e,o);return function i9(t){Mk(t)}(s),s}(T,r,this.componentDef.encapsulation,c):d0(T,S,function C8(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(S));let H=512;this.componentDef.signals?H|=4096:this.componentDef.onPush||(H|=16);let ge=null;null!==j&&(ge=wT(j,c,!0));const ve=KT(0,null,null,1,0,null,null,null,null,null,null),Xe=m0(null,ve,null,H,null,null,w,T,c,null,ge);let At,En;ua(Xe);try{const Hn=this.componentDef;let bs,_g=null;Hn.findHostDirectiveDefs?(bs=[],_g=new Map,Hn.findHostDirectiveDefs(Hn,bs,_g),bs.push(Hn)):bs=[Hn];const MIe=function A8(t,e){const n=t[it],r=Zt;return t[r]=e,lf(n,r,2,"#host",null)}(Xe,j),NIe=function D8(t,e,n,r,i,o,s){const a=i[it];!function S8(t,e,n,r){for(const i of t)e.mergedAttrs=Fu(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(D0(e,e.mergedAttrs,!0),null!==n&&Ak(r,n,e))}(r,t,e,s);let l=null;null!==e&&(l=wT(e,i[Ri]));const c=o.rendererFactory.createRenderer(e,n);let h=16;n.signals?h=4096:n.onPush&&(h=64);const p=m0(i,xk(n),null,h,i[t.index],t,o,c,null,null,l);return a.firstCreatePass&&YT(a,t,r.length-1),_0(i,p),i[t.index]=p}(MIe,j,Hn,bs,Xe,w,T);En=mc(ve,Zt),j&&function P8(t,e,n,r){if(r)Ou(t,n,["ng-version","17.3.1"]);else{const{attrs:i,classes:o}=function Ng(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Co(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Ou(t,n,i),o&&o.length>0&&Tk(t,n,o.join(" "))}}(T,Hn,j,r),void 0!==n&&function x8(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(En,this.ngContentSelectors,n),At=function R8(t,e,n,r,i,o){const s=Vn(),a=i[it],l=Mi(s,i);Ok(a,i,s,n,null,r);for(let h=0;h<n.length;h++)lo(Cl(i,a,s.directiveStart+h,s),i);Fk(a,i,s),l&&lo(l,i);const c=Cl(i,a,s.directiveStart+s.componentOffset,s);if(t[ir]=i[ir]=c,null!==o)for(const h of o)h(c,e);return GT(a,s,i),c}(NIe,Hn,bs,_g,Xe,[M8]),eA(ve,Xe,null)}finally{Ku()}return new T8(this.componentType,At,Zh(En,Xe),Xe,En)}finally{q(o)}}}class T8 extends c8{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Fm(i,void 0,!1),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){var o;if(null!==(o=this.previousInputValues)&&void 0!==o||(this.previousInputValues=new Map),this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;JT(s[it],s,i,e,n),this.previousInputValues.set(e,n),Om(oo(this._tNode.index,s))}}get injector(){return new Br(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function M8(){const t=Vn();$h(De()[it],t)}let Bs=(()=>{class e{}return e.__NG_ELEMENT_ID__=N8,e})();function N8(){return function yO(t,e){let n;const r=e[t.index];return fi(r)?n=r:(n=Lk(r,e,null,t),e[t.index]=n,_0(e,n)),IO(n,e,t,r),new _O(n,t,e)}(Vn(),De())}const k8=Bs,_O=class extends k8{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Zh(this._hostTNode,this._hostLView)}get injector(){return new Br(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ju(this._hostTNode,this._hostLView);if(im(e)){const n=Zu(e,this._hostLView),r=Ec(e);return new Br(n[it].data[r+8],n)}return new Br(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=vO(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Vr}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,cf(this._hostTNode,null)),a}createComponent(e,n,r,i,o){var s,l;const c=e&&!function _l(t){return"function"==typeof t}(e);let h;if(c)h=n;else{const j=n||{};h=j.index,r=j.injector,i=j.projectableNodes,o=j.environmentInjector||j.ngModuleRef}const p=c?e:new zm(tn(e)),m=r||this.parentInjector;if(!o&&null==p.ngModule){const H=(c?m:this.parentInjector).get(Gr,null);H&&(o=H)}const _=tn(null!==(s=p.componentType)&&void 0!==s?s:{}),w=(null==_?void 0:_.id,null),T=null!==(l=null==w?void 0:w.firstChild)&&void 0!==l?l:null,S=p.create(m,i,T,o);return this.insertImpl(S.hostView,h,cf(this._hostTNode,w)),S}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function Hb(t){return fi(t[Tr])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const l=i[Tr],c=new _O(l,l[hi],l[Tr]);c.detach(c.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;return Nm(s,i,o,r),e.attachToViewContainerRef(),lh(gA(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=vO(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Sm(this._lContainer,n);r&&(Mu(gA(this._lContainer),n),h0(r[it],r))}detach(e){const n=this._adjustIndex(e,-1),r=Sm(this._lContainer,n);return r&&null!=Mu(gA(this._lContainer),n)?new Fm(r):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function vO(t){return t[8]}function gA(t){return t[8]||(t[8]=[])}let IO=function wO(t,e,n,r){if(t[ks])return;let i;i=8&n.type?Gn(r):function O8(t,e){const n=t[Qt],r=n.createComment(""),i=Mi(e,t);return td(n,f0(n,i),r,function Yq(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[ks]=i},mA=()=>!1;function MO(t){return function PO(t){return"function"==typeof t&&void 0!==t[Ze]}(t)&&"function"==typeof t.set}function ln(t){let e=function HO(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(bo(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Se(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=R0(t.inputs),s.inputTransforms=R0(t.inputTransforms),s.declaredInputs=R0(t.declaredInputs),s.outputs=R0(t.outputs);const a=i.hostBindings;a&&o7(t,a);const l=i.viewQuery,c=i.contentQueries;if(l&&r7(t,l),c&&i7(t,c),t7(t,i),br(t.outputs,i.outputs),bo(i)&&i.data.animation){const h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===ln&&(n=!1)}}e=Object.getPrototypeOf(e)}!function n7(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fu(i.hostAttrs,n=Fu(n,i.hostAttrs))}}(r)}function t7(t,e){for(const r in e.inputs){if(!e.inputs.hasOwnProperty(r)||t.inputs.hasOwnProperty(r))continue;const i=e.inputs[r];if(void 0!==i&&(t.inputs[r]=i,t.declaredInputs[r]=e.declaredInputs[r],null!==e.inputTransforms)){var n;const o=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(o))continue;null!==(n=t.inputTransforms)&&void 0!==n||(t.inputTransforms={}),t.inputTransforms[o]=e.inputTransforms[o]}}}function R0(t){return t===wo?{}:t===Tn?[]:t}function r7(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function i7(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function o7(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function qO(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}class rd{}class KO{}class TA extends rd{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gO(this);const i=Di(e);this._bootstrapComponents=hs(i.bootstrap),this._r3Injector=Rt(e,n,[{provide:rd,useValue:this},{provide:T0,useValue:this.componentFactoryResolver},...r],qt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class AA extends KO{constructor(e){super(),this.moduleType=e}create(e){return new TA(this.moduleType,e,[])}}class QO extends rd{constructor(e){super(),this.componentFactoryResolver=new gO(this),this.instance=null;const n=new Oa([...e.providers,{provide:rd,useValue:this},{provide:T0,useValue:this.componentFactoryResolver}],e.parent||_h(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function P0(t,e,n=null){return new QO({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let hf=(()=>{var t;class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new K(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function M0(t){return!!function DA(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Jr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ei(t,e,n,r,i,o,s,a){const l=De(),c=vn(),h=t+Zt,p=c.firstCreatePass?function v7(t,e,n,r,i,o,s,a,l){const c=e.consts,h=lf(e,t,4,s||null,Fs(c,a));QT(e,n,h,Fs(c,l)),$h(e,h);const p=h.tView=KT(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}(h,c,l,e,n,r,i,o,s):c.data[h];jo(p,!1);const m=YO(c,l,p,t);Qu()&&p0(c,l,m,p),lo(m,l);const _=Lk(m,l,m,p);return l[h]=_,_0(l,_),function EO(t,e,n){return mA(t,e,n)}(_,p,l),El(p)&&WT(c,l,p),null!=s&&qT(l,p,a),ei}let YO=function XO(t,e,n,r){return ds(!0),e[Qt].createComment("")};function Us(t,e,n,r){const i=De();return Jr(i,ao(),e)&&(vn(),ja(or(),i,t,e,n,r)),Us}function If(t,e,n,r){return Jr(t,ao(),n)?e+Xt(n)+r:an}function B0(t,e){return t<<17|e<<2}function Pc(t){return t>>17&32767}function LA(t){return 2|t}function sd(t){return(131068&t)>>2}function VA(t,e){return-131069&t|e<<2}function BA(t){return 1|t}function SF(t,e,n,r){const i=t[n+1],o=null===e;let s=r?Pc(i):sd(i),a=!1;for(;0!==s&&(!1===a||o);){const c=t[s+1];nK(t[s],e)&&(a=!0,t[s+1]=r?BA(c):LA(c)),s=r?Pc(c):sd(c)}a&&(t[n+1]=r?LA(i):BA(i))}function nK(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&xs(t,e)>=0}function ur(t,e,n){const r=De();return Jr(r,ao(),e)&&Wo(vn(),or(),r,t,e,r[Qt],n,!1),ur}function $A(t,e,n,r,i){const s=i?"class":"style";JT(t,n,e.inputs[s],s,r)}function $0(t,e){return function ga(t,e,n,r){const i=De(),o=vn(),s=function Ls(t){const e=Yt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);o.firstUpdatePass&&function LF(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Ni()],s=function FF(t,e){return e>=t.expandoStartIndex}(t,n);(function UF(t,e){return!!(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function dK(t,e,n,r){const i=function tm(t){const e=Yt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Xm(n=UA(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=UA(i,t,e,n,r),null===o){let l=function hK(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==sd(r))return t[Pc(r)]}(t,e,r);void 0!==l&&Array.isArray(l)&&(l=UA(null,t,e,l[1],r),l=Xm(l,e.attrs,r),function fK(t,e,n,r){t[Pc(n?e.classBindings:e.styleBindings)]=r}(t,e,r,l))}else o=function pK(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Xm(r,t[o].hostAttrs,n);return Xm(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function eK(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Pc(s),l=sd(s);t[r]=n;let h,c=!1;if(Array.isArray(n)?(h=n[1],(null===h||xs(n,h)>0)&&(c=!0)):h=n,i)if(0!==l){const m=Pc(t[a+1]);t[r+1]=B0(m,a),0!==m&&(t[m+1]=VA(t[m+1],r)),t[a+1]=function Z7(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=B0(a,0),0!==a&&(t[a+1]=VA(t[a+1],r)),a=r;else t[r+1]=B0(l,0),0===a?a=r:t[l+1]=VA(t[l+1],r),l=r;c&&(t[r+1]=LA(t[r+1])),SF(t,h,r,!0),SF(t,h,r,!1),function tK(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&xs(o,e)>=0&&(n[r+1]=BA(n[r+1]))}(e,h,t,r,o),s=B0(a,l),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==an&&Jr(i,s,e)&&function BF(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const l=t.data,c=l[a+1],h=function J7(t){return!(1&~t)}(c)?$F(l,e,n,i,sd(c),s):void 0;U0(h)||(U0(o)||function X7(t){return!(2&~t)}(c)&&(o=$F(l,null,n,i,a,s)),function Jq(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Ac.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ac.Important),t.setStyle(n,r,i,o))}}(r,s,Wu(Ni(),n),i,o))}(o,o.data[Ni()],i,i[Qt],t,i[s+1]=function vK(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=qt(bc(t)))),t}(e,n),r,s)}(t,e,null,!0),$0}function UA(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Xm(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Xm(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Eo(t,s,!!n||e[++o]))}return void 0===t?null:t}function $F(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const l=t[i],c=Array.isArray(l),h=c?l[1]:l,p=null===h;let m=n[i+1];m===an&&(m=p?Tn:void 0);let _=p?Nu(m,r):h===r?m:void 0;if(c&&!U0(_)&&(_=Nu(l,r)),U0(_)&&(a=_,s))return a;const w=t[i+1];i=s?Pc(w):sd(w)}if(null!==e){let l=o?e.residualClasses:e.residualStyles;null!=l&&(a=Nu(l,r))}return a}function U0(t){return void 0!==t}function M(t,e,n,r){const i=De(),o=vn(),s=Zt+t,a=i[Qt],l=o.firstCreatePass?function UK(t,e,n,r,i,o){const s=e.consts,l=lf(e,t,2,r,Fs(s,i));return QT(e,n,l,Fs(s,o)),null!==l.attrs&&D0(l,l.attrs,!1),null!==l.mergedAttrs&&D0(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,o,i,e,n,r):o.data[s],c=GF(o,i,l,a,e,t);i[s]=c;const h=El(l);return jo(l,!0),Ak(a,c,l),!function qm(t){return!(32&~t.flags)}(l)&&Qu()&&p0(o,i,c,l),0===function Gb(){return Yt.lFrame.elementDepthCount}()&&lo(c,i),function Wb(){Yt.lFrame.elementDepthCount++}(),h&&(WT(o,i,l),GT(o,l,i)),null!==r&&qT(i,l),M}function B(){let t=Vn();Zg()?Fh():(t=t.parent,jo(t,!1));const e=t;(function qb(t){return Yt.skipHydrationRootTNode===t})(e)&&function Yb(){Yt.skipHydrationRootTNode=null}(),function Xg(){Yt.lFrame.elementDepthCount--}();const n=vn();return n.firstCreatePass&&($h(n,t),jg(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function oT(t){return!!(8&t.flags)}(e)&&$A(n,e,De(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function sT(t){return!!(16&t.flags)}(e)&&$A(n,e,De(),e.stylesWithoutHost,!1),B}function Ne(t,e,n,r){return M(t,e,n,r),B(),Ne}let GF=(t,e,n,r,i,o)=>(ds(!0),d0(r,i,function kI(){return Yt.lFrame.currentNamespace}()));function H0(){return De()}const Pf="en-US";let XF=Pf;function Ft(t,e,n,r){const i=De(),o=vn(),s=Vn();return YA(o,i,i[Qt],s,t,e,r),Ft}function YA(t,e,n,r,i,o,s){const a=El(r),c=t.firstCreatePass&&function $k(t){return t.cleanup||(t.cleanup=[])}(t),h=e[ir],p=function Bk(t){return t[hc]||(t[hc]=[])}(e);let m=!0;if(3&r.type||s){const T=Mi(r,e),S=s?s(T):T,j=p.length,H=s?ve=>s(Gn(ve[r.index])):r.index;let ge=null;if(!s&&a&&(ge=function GQ(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[hc],l=i[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==ge)(ge.__ngLastListenerFn__||ge).__ngNextListenerFn__=o,ge.__ngLastListenerFn__=o,m=!1;else{o=TL(r,e,h,o,!1);const ve=n.listen(S,i,o);p.push(o,ve),c&&c.push(i,H,j,j+1)}}else o=TL(r,e,h,o,!1);const _=r.outputs;let w;if(m&&null!==_&&(w=_[i])){const T=w.length;if(T)for(let S=0;S<T;S+=2){const Xe=e[w[S]][w[S+1]].subscribe(o),At=p.length;p.push(o,Xe),c&&c.push(i,r.index,At,-(At+1))}}}function bL(t,e,n,r){const i=q(null);try{return Os(6,e,n),!1!==n(r)}catch(o){return v0(t,o),!1}finally{Os(7,e,n),q(i)}}function TL(t,e,n,r,i){return function o(s){if(s===Function)return r;Om(t.componentOffset>-1?oo(t.index,e):e);let l=bL(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)l=bL(e,n,c,s)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&s.preventDefault(),l}}function qi(t=1){return function Jb(t){return(Yt.lFrame.contextLView=function EI(t,e){for(;t>0;)e=e[fc],t--;return e}(t,Yt.lFrame.contextLView))[ir]}(t)}function WQ(t,e){let n=null;const r=function Cb(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?ph(t,o,!0):xg(r,o))return i}else n=i}return n}function gt(t){const e=De()[Ar][hi];if(!e.projection){const r=e.projection=function lc(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(t?t.length:1,null),i=r.slice();let o=e.child;for(;null!==o;){const s=t?WQ(o,t):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function ht(t,e=0,n){const r=De(),i=vn(),o=lf(i,Zt+t,16,null,n||null);null===o.projection&&(o.projection=e),Fh(),(!r[io]||vc())&&32&~o.flags&&function Xq(t,e,n){bk(e[Qt],0,e,n,$T(t,n,e),vk(n.parent||e[hi],n,e))}(i,r,o)}function i_(t,e,n){return K0(t,"",e,"",n),i_}function K0(t,e,n,r,i){const o=De(),s=If(o,e,n,r);return s!==an&&Wo(vn(),or(),o,t,s,o[Qt],i,!1),K0}function ye(t,e=""){const n=De(),r=vn(),i=t+Zt,o=r.firstCreatePass?lf(r,i,1,e,null):r.data[i],s=HL(r,n,o,e,t);n[i]=s,Qu()&&p0(r,n,s,o),jo(o,!1)}let HL=(t,e,n,r,i)=>(ds(!0),function LT(t,e){return t.createText(e)}(e[Qt],r));function Pl(t){return Ao("",t,""),Pl}function Ao(t,e,n){const r=De(),i=If(r,t,e,n);return i!==an&&function Sl(t,e,n){const r=Wu(e,t);!function hk(t,e,n){t.setValue(e,n)}(t[Qt],r,n)}(r,Ni(),i),Ao}function ZA(t,e,n){MO(e)&&(e=e());const r=De();return Jr(r,ao(),e)&&Wo(vn(),or(),r,t,e,r[Qt],n,!1),ZA}function JA(t,e){const n=De(),r=vn(),i=Vn();return YA(r,n,n[Qt],i,t,e),JA}function eD(t,e,n,r,i){if(t=zt(t),Array.isArray(t))for(let o=0;o<t.length;o++)eD(t[o],e,n,r,i);else{const o=vn(),s=De(),a=Vn();let l=oa(t)?t:zt(t.provide);const c=nI(t),h=1048575&a.providerIndexes,p=a.directiveStart,m=a.providerIndexes>>20;if(oa(t)||!t.multi){const _=new Xu(c,i,E),w=nD(l,e,i?h:h+m,p);-1===w?(am(Kh(a,s),o,l),tD(o,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(_),s.push(_)):(n[w]=_,s[w]=_)}else{const _=nD(l,e,h+m,p),w=nD(l,e,h,h+m),S=w>=0&&n[w];if(i&&!S||!i&&!(_>=0&&n[_])){am(Kh(a,s),o,l);const j=function hY(t,e,n,r,i){const o=new Xu(t,n,E);return o.multi=[],o.index=e,o.componentProviders=0,JL(o,i,r&&!n),o}(i?dY:uY,n.length,i,r,c);!i&&S&&(n[w].providerFactory=j),tD(o,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(j),s.push(j)}else tD(o,t,_>-1?_:w,JL(n[i?w:_],c,!i&&r));!i&&r&&S&&n[w].componentProviders++}}}function tD(t,e,n,r){const i=oa(e),o=function Rb(t){return!!t.useClass}(e);if(i||o){const l=(o?zt(e.useClass):e).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const h=c.indexOf(n);-1===h?c.push(n,[r,l]):c[h+1].push(r,l)}else c.push(n,l)}}}function JL(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function nD(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function uY(t,e,n,r){return rD(this.multi,[])}function dY(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Cl(n,n[it],this.providerFactory.index,r);o=a.slice(0,s),rD(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],rD(i,o);return o}function rD(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Wn(t,e=[]){return n=>{n.providersResolver=(r,i)=>function cY(t,e,n){const r=vn();if(r.firstCreatePass){const i=bo(t);eD(n,r.data,r.blueprint,i,!0),eD(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}let fY=(()=>{var t;class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){const i=Lg(0,r.type),o=i.length>0?P0([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}}return(t=e).\u0275prov=je({token:t,providedIn:"environment",factory:()=>new t(Be(Gr))}),e})();function eV(t){Ha("NgStandalone"),t.getStandaloneInjector=e=>e.get(fY).getOrCreateStandaloneInjector(t)}function nV(t,e,n,r,i,o){const s=e+n;return Jr(t,s,i)?function za(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function o_(t,e){const n=t[e];return n===an?void 0:n}(t,s+1)}function Mf(t,e){const n=vn();let r;const i=t+Zt;var o;n.firstCreatePass?(r=function AY(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(null!==(o=n.destroyHooks)&&void 0!==o?o:n.destroyHooks=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=na(r.type)),l=Io(E);try{const c=Gh(!1),h=s();return Gh(c),function YQ(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,De(),i,h),h}finally{Io(l)}}function Nf(t,e,n){const r=t+Zt,i=De(),o=function _c(t,e){return t[e]}(i,r);return function s_(t,e){return t[it].data[e].pure}(i,r)?nV(i,function so(){const t=Yt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,o):o.transform(n)}class Ff{constructor(e){this.full=e;const n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}}const JY=new Ff("17.3.1");let wV=(()=>{var t;class e{log(r){console.log(r)}warn(r){console.warn(r)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();const AV=new lt(""),Z0=new lt("");let hD,uD=(()=>{var t;class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,hD||(function TX(t){hD=t}(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(r)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(xe),Be(dD),Be(Z0))},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})(),dD=(()=>{var t;class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){var o,s;return null!==(o=null===(s=hD)||void 0===s?void 0:s.findTestabilityInTree(this,r,i))&&void 0!==o?o:null}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();function c_(t){return!!t&&"function"==typeof t.then}function DV(t){return!!t&&"function"==typeof t.subscribe}const J0=new lt("");let fD=(()=>{var t;class e{constructor(){var r;this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o}),this.appInits=null!==(r=$e(J0,{optional:!0}))&&void 0!==r?r:[]}runInitializers(){if(this.initialized)return;const r=[];for(const o of this.appInits){const s=o();if(c_(s))r.push(s);else if(DV(s)){const a=new Promise((l,c)=>{s.subscribe({complete:l,error:c})});r.push(a)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),0===r.length&&i(),this.initialized=!0}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const pD=new lt("");function PV(t,e){return Array.isArray(e)?e.reduce(PV,t):{...t,...e}}let xl=(()=>{var t;class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$e(gm),this.afterRenderEffectManager=$e(Um),this.externalTestViews=new Set,this.beforeRender=new $,this.afterTick=new $,this.componentTypes=[],this.components=[],this.isStable=$e(hf).hasPendingTasks.pipe(Et(r=>!r)),this._injector=$e(Gr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){const o=r instanceof tO;if(!this._injector.get(fD).done)throw!o&&function Na(t){const e=tn(t)||zr(t)||vi(t);return null!==e&&e.standalone}(r),new Se(405,!1);let a;a=o?r:this._injector.get(T0).resolveComponentFactory(r),this.componentTypes.push(a.componentType);const l=function AX(t){return t.isBoundToModule}(a)?void 0:this._injector.get(rd),h=a.create(tt.NULL,[],i||a.selector,l),p=h.location.nativeElement,m=h.injector.get(AV,null);return null==m||m.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),eE(this.components,h),null==m||m.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Se(101,!1);const i=q(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,q(i)}}detectChangesInAttachedViews(r){let i=0;const o=this.afterRenderEffectManager;for(;;){if(i===Gk)throw new Se(103,!1);if(r){const s=0===i;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:l}of this._views)SX(a,s,l)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>gD(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>gD(s))))break}}attachView(r){const i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){const i=r;eE(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);const i=this._injector.get(pD,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>eE(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Se(406,!1);const r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function eE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function SX(t,e,n){!e&&!gD(t)||function RX(t,e,n){let r;n?(r=0,t[$t]|=1024):r=64&t[$t]?0:1,y0(t,e,r)}(t,n,e)}function gD(t){return Nh(t)}class PX{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let xV=(()=>{var t;class e{compileModuleSync(r){return new AA(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const i=this.compileModuleSync(r),s=hs(Di(r).declarations).reduce((a,l)=>{const c=tn(l);return c&&a.push(new zm(c)),a},[]);return new PX(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),NX=(()=>{var t;class e{constructor(){this.zone=$e(xe),this.applicationRef=$e(xl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var r;null===(r=this._onMicrotaskEmptySubscription)||void 0===r||r.unsubscribe()}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function kX(){const t=$e(xe),e=$e(zo);return n=>t.runOutsideAngular(()=>e.handleError(n))}let FX=(()=>{var t;class e{constructor(){this.subscription=new ce,this.initialized=!1,this.zone=$e(xe),this.pendingTasks=$e(hf)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{null!==r&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{var i;xe.assertInAngularZone(),null!==(i=r)&&void 0!==i||(r=this.pendingTasks.add())}))}ngOnDestroy(){this.subscription.unsubscribe()}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const Ml=new lt("",{providedIn:"root",factory:()=>$e(Ml,_n.Optional|_n.SkipSelf)||function LX(){return typeof $localize<"u"&&$localize.locale||Pf}()}),mD=new lt("");let OV=(()=>{var t;class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){const o=function y8(t="zone.js",e){return"noop"===t?new lO:"zone.js"===t?new xe(e):t}(null==i?void 0:i.ngZone,function kV(t){var e,n;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(e=null==t?void 0:t.eventCoalescing)&&void 0!==e&&e,shouldCoalesceRunChangeDetection:null!==(n=null==t?void 0:t.runCoalescing)&&void 0!==n&&n}}({eventCoalescing:null==i?void 0:i.ngZoneEventCoalescing,runCoalescing:null==i?void 0:i.ngZoneRunCoalescing}));return o.run(()=>{const s=function h7(t,e,n){return new TA(t,e,n)}(r.moduleType,this.injector,function NV(t){return[{provide:xe,useFactory:t},{provide:ia,multi:!0,useFactory:()=>{const e=$e(NX,{optional:!0});return()=>e.initialize()}},{provide:ia,multi:!0,useFactory:()=>{const e=$e(FX);return()=>{e.initialize()}}},{provide:gm,useFactory:kX}]}(()=>o)),a=s.injector.get(zo,null);return o.runOutsideAngular(()=>{const l=o.onError.subscribe({next:c=>{a.handleError(c)}});s.onDestroy(()=>{eE(this._modules,s),l.unsubscribe()})}),function RV(t,e,n){try{const r=n();return c_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(a,o,()=>{const l=s.injector.get(fD);return l.runInitializers(),l.donePromise.then(()=>(function ZF(t){"string"==typeof t&&(XF=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Ml,Pf)||Pf),this._moduleDoBootstrap(s),s))})})}bootstrapModule(r,i=[]){const o=PV({},i);return function MX(t,e,n){const r=new AA(n);return Promise.resolve(r)}(0,0,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){const i=r.injector.get(xl);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else{if(!r.instance.ngDoBootstrap)throw new Se(-403,!1);r.instance.ngDoBootstrap(i)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const r=this._injector.get(mD,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(tt))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})(),Nc=null;const FV=new lt("");function LV(t,e,n=[]){const r=`Platform: ${e}`,i=new lt(r);return(o=[])=>{let s=_D();if(!s||s.injector.get(FV,!1)){const a=[...n,...o,{provide:i,useValue:!0}];t?t(a):function $X(t){if(Nc&&!Nc.get(FV,!1))throw new Se(400,!1);(function SV(){!function Te(t){Dt=t}(()=>{throw new Se(600,!1)})})(),Nc=t;const e=t.get(OV);(function BV(t){const e=t.get(FN,null);null==e||e.forEach(n=>n())})(t)}(function VV(t=[],e){return tt.create({name:e,providers:[{provide:Bg,useValue:"platform"},{provide:mD,useValue:new Set([()=>Nc=null])},...t]})}(a,r))}return function UX(t){const e=_D();if(!e)throw new Se(401,!1);return e}()}}function _D(){var t,e;return null!==(t=null===(e=Nc)||void 0===e?void 0:e.get(OV))&&void 0!==t?t:null}let at=(()=>{class e{}return e.__NG_ELEMENT_ID__=HX,e})();function HX(t){return function zX(t,e,n){if(sa(t)&&!n){const r=oo(t.index,e);return new Fm(r,r)}return 47&t.type?new Fm(e[Ar],e):null}(Vn(),De(),!(16&~t))}class GV{constructor(){}supports(e){return M0(e)}create(e){return new QX(e)}}const KX=(t,e)=>e;class QX{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||KX}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<qV(r,i,o)?n:r,a=qV(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const c=a-i,h=l-i;if(c!=h){for(let m=0;m<c;m++){const _=m<o.length?o[m]:o[m]=0,w=_+m;h<=w&&w<c&&(o[m]=_+1)}o[s.previousIndex]=h-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!M0(e))throw new Se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function m7(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new YX(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new WV),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new WV),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class YX{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class XX{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class WV{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new XX,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qV(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function QV(){return new wD([new GV])}let wD=(()=>{var t;class e{constructor(r){this.factories=r}static create(r,i){if(null!=i){const o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||QV()),deps:[[e,new ac,new ml]]}}find(r){const i=this.factories.find(o=>o.supports(r));if(null!=i)return i;throw new Se(901,!1)}}return(t=e).\u0275prov=je({token:t,providedIn:"root",factory:QV}),e})();const nZ=LV(null,"core",[]);let rZ=(()=>{var t;class e{constructor(r){}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(xl))},t.\u0275mod=Uo({type:t}),t.\u0275inj=On({}),e})();function Vf(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function v2(t){const e=q(null);try{return t()}finally{q(e)}}function y2(t){const e=tn(t);if(!e)return null;const n=new zm(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}let TD=null;function kc(){return TD}class $Z{}const Ko=new lt("");let AD=(()=>{var t;class e{historyGo(r){throw new Error("")}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>$e(jZ),providedIn:"platform"}),e})();const UZ=new lt("");let jZ=(()=>{var t;class e extends AD{constructor(){super(),this._doc=$e(Ko),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kc().getBaseHref(this._doc)}onPopState(r){const i=kc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){const i=kc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>new t,providedIn:"platform"}),e})();function DD(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function I2(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Nl(t){return t&&"?"!==t[0]?"?"+t:t}let js=(()=>{var t;class e{historyGo(r){throw new Error("")}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>$e(w2),providedIn:"root"}),e})();const E2=new lt("");let w2=(()=>{var t;class e extends js{constructor(r,i){var o,s,a;super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=null!==(o=null!==(s=null!=i?i:this._platformLocation.getBaseHrefFromDOM())&&void 0!==s?s:null===(a=$e(Ko).location)||void 0===a?void 0:a.origin)&&void 0!==o?o:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return DD(this._baseHref,r)}path(r=!1){const i=this._platformLocation.pathname+Nl(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){const a=this.prepareExternalUrl(o+Nl(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){const a=this.prepareExternalUrl(o+Nl(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){var i,o;null===(i=(o=this._platformLocation).historyGo)||void 0===i||i.call(o,r)}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(AD),Be(E2,8))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),C2=(()=>{var t;class e extends js{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){var i;const o=null!==(i=this._platformLocation.hash)&&void 0!==i?i:"#";return o.length>0?o.substring(1):o}prepareExternalUrl(r){const i=DD(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Nl(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Nl(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){var i,o;null===(i=(o=this._platformLocation).historyGo)||void 0===i||i.call(o,r)}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(AD),Be(E2,8))},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})(),Oc=(()=>{var t;class e{constructor(r){this._subject=new sr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;const i=this._locationStrategy.getBaseHref();this._basePath=function GZ(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(I2(b2(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){var r;null===(r=this._urlChangeSubscription)||void 0===r||r.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Nl(i))}normalize(r){return e.stripTrailingSlash(function zZ(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,b2(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Nl(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Nl(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){var i,o;null===(i=(o=this._locationStrategy).historyGo)||void 0===i||i.call(o,r)}onUrlChange(r){var i;return this._urlChangeListeners.push(r),null!==(i=this._urlChangeSubscription)&&void 0!==i||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)})),()=>{const o=this._urlChangeListeners.indexOf(r);var s;this._urlChangeListeners.splice(o,1),0===this._urlChangeListeners.length&&(null===(s=this._urlChangeSubscription)||void 0===s||s.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}}return(t=e).normalizeQueryParams=Nl,t.joinWithSlash=DD,t.stripTrailingSlash=I2,t.\u0275fac=function(r){return new(r||t)(Be(js))},t.\u0275prov=je({token:t,factory:()=>function HZ(){return new Oc(Be(js))}(),providedIn:"root"}),e})();function b2(t){return t.replace(/\/index.html$/,"")}class MJ{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cd=(()=>{var t;class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;!this._differ&&r&&(this._differ=this._differs.find(r).create(this.ngForTrackBy))}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(null==o.previousIndex)i.createEmbeddedView(this._template,new MJ(o.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)i.remove(null===s?void 0:s);else if(null!==s){const l=i.get(s);i.move(l,a),O2(l,o)}});for(let o=0,s=i.length;o<s;o++){const l=i.get(o).context;l.index=o,l.count=s,l.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{O2(i.get(o.currentIndex),o)})}static ngTemplateContextGuard(r,i){return!0}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Bs),E(pa),E(wD))},t.\u0275dir=xt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function O2(t,e){t.context.$implicit=e.item}let $f=(()=>{var t;class e{constructor(r,i){this._viewContainer=r,this._context=new NJ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){F2("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){F2("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Bs),E(pa))},t.\u0275dir=xt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class NJ{constructor(){this.$implicit=null,this.ngIf=null}}function F2(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${qt(e)}'.`)}class BJ{createSubscription(e,n){return v2(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){v2(()=>e.unsubscribe())}}class $J{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const UJ=new $J,jJ=new BJ;let Uf=(()=>{var t;class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(c_(r))return UJ;if(DV(r))return jJ;throw function va(t,e){return new Se(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){var o;r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate)&&(null===(o=this._ref)||void 0===o||o.markForCheck())}}return(t=e).\u0275fac=function(r){return new(r||t)(E(at,16))},t.\u0275pipe=ro({name:"async",type:t,pure:!1,standalone:!0}),e})(),B2=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Uo({type:t}),t.\u0275inj=On({}),e})();const $2="browser";function yE(t){return"server"===t}let uee=(()=>{var t;class e{}return(t=e).\u0275prov=je({token:t,providedIn:"root",factory:()=>function cee(t){return t===$2}($e(fa))?new dee($e(Ko),window):new fee}),e})();class dee{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const n=function hee(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}}class fee{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class jee extends $Z{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class zD extends jee{static makeCurrent(){!function BZ(t){var e;null!==(e=TD)&&void 0!==e||(TD=t)}(new zD)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Hee(){return __=__||document.querySelector("base"),__?__.getAttribute("href"):null}();return null==n?null:function zee(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){__=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function RJ(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let __=null,Wee=(()=>{var t;class e{build(){return new XMLHttpRequest}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();const GD=new lt("");let Q2=(()=>{var t;class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new Se(5101,!1);return this._eventNameToPlugin.set(r,i),i}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(GD),Be(xe))},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();class Y2{constructor(e){this._doc=e}}const WD="ng-app-id";let X2=(()=>{var t;class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=yE(s),this.resetHostNodes()}addStyles(r){for(const i of r)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(r){for(const i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(const i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(const i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){var i;const o=this.styleRef;null===(i=o.get(r))||void 0===i||null===(i=i.elements)||void 0===i||i.forEach(s=>s.remove()),o.delete(r)}collectServerRenderedStyles(){var r;const i=null===(r=this.doc.head)||void 0===r?void 0:r.querySelectorAll(`style[${WD}="${this.appId}"]`);if(null!=i&&i.length){const o=new Map;return i.forEach(s=>{null!=s.textContent&&o.set(s.textContent,s)}),o}return null}changeUsageCount(r,i){const o=this.styleRef;if(o.has(r)){const s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){const o=this.styleNodesInDOM,s=null==o?void 0:o.get(i);if((null==s?void 0:s.parentNode)===r)return o.delete(i),s.removeAttribute(WD),s;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(WD,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){var o;const s=this.getStyleElement(r,i),a=this.styleRef,l=null===(o=a.get(i))||void 0===o?void 0:o.elements;l?l.push(s):a.set(i,{elements:[s],usage:1})}resetHostNodes(){const r=this.hostNodes;r.clear(),r.add(this.doc.head)}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(Ko),Be(XI),Be(LN,8),Be(fa))},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();const qD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},KD=/%COMP%/g,Yee=new lt("",{providedIn:"root",factory:()=>!0});function J2(t,e){return e.map(n=>n.replace(KD,t))}let eB=(()=>{var t;class e{constructor(r,i,o,s,a,l,c,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=yE(l),this.defaultRenderer=new QD(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ls.ShadowDom&&(i={...i,encapsulation:ls.Emulated});const o=this.getOrCreateRenderer(r,i);return o instanceof nB?o.applyToHost(r):o instanceof YD&&o.applyStyles(),o}getOrCreateRenderer(r,i){const o=this.rendererByCompId;let s=o.get(i.id);if(!s){const a=this.doc,l=this.ngZone,c=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case ls.Emulated:s=new nB(c,h,i,this.appId,p,a,l,m);break;case ls.ShadowDom:return new ete(c,h,r,i,a,l,this.nonce,m);default:s=new YD(c,h,i,p,a,l,m)}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(Q2),Be(X2),Be(XI),Be(Yee),Be(Ko),Be(fa),Be(xe),Be(LN))},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();class QD{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(qD[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(tB(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(tB(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new Se(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=qD[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=qD[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ac.DashCase|Ac.Important)?e.style.setProperty(n,r,i&Ac.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ac.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=kc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function tB(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class ete extends QD{constructor(e,n,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=J2(i.id,i.styles);for(const h of c){const p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class YD extends QD{constructor(e,n,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?J2(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class nB extends YD{constructor(e,n,r,i,o,s,a,l){const c=i+"-"+r.id;super(e,n,r,o,s,a,l,c),this.contentAttr=function Xee(t){return"_ngcontent-%COMP%".replace(KD,t)}(c),this.hostAttr=function Zee(t){return"_nghost-%COMP%".replace(KD,t)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let tte=(()=>{var t;class e extends Y2{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(Ko))},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();const rB=["alt","control","meta","shift"],nte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rte={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ite=(()=>{var t;class e extends Y2{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,i,o){const s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kc().onAndCancel(r,s.domEventName,a))}static parseEventName(r){const i=r.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const s=e._normalizeKey(i.pop());let a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),rB.forEach(h=>{const p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=nte[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),rB.forEach(a=>{a!==o&&(0,rte[a])(r)&&(s+=a+".")}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(Ko))},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();const oB=[{provide:fa,useValue:$2},{provide:FN,useValue:function ote(){zD.makeCurrent()},multi:!0},{provide:Ko,useFactory:function ate(){return function jW(t){_T=t}(document),document},deps:[]}],lte=LV(nZ,"browser",oB),cte=new lt(""),sB=[{provide:Z0,useClass:class Gee{addToWindow(e){bn.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Se(5103,!1);return o},bn.getAllAngularTestabilities=()=>e.getAllTestabilities(),bn.getAllAngularRootElements=()=>e.getAllRootElements(),bn.frameworkStabilizers||(bn.frameworkStabilizers=[]),bn.frameworkStabilizers.push(r=>{const i=bn.getAllAngularTestabilities();let o=i.length;const s=function(){o--,0==o&&r()};i.forEach(a=>{a.whenStable(s)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const i=e.getTestability(n);return null!=i?i:r?kc().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}},deps:[]},{provide:AV,useClass:uD,deps:[xe,dD,Z0]},{provide:uD,useClass:uD,deps:[xe,dD,Z0]}],aB=[{provide:Bg,useValue:"root"},{provide:zo,useFactory:function ste(){return new zo},deps:[]},{provide:GD,useClass:tte,multi:!0,deps:[Ko,xe,fa]},{provide:GD,useClass:ite,multi:!0,deps:[Ko]},eB,X2,Q2,{provide:rO,useExisting:eB},{provide:class pee{},useClass:Wee,deps:[]},[]];let ute=(()=>{var t;class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:XI,useValue:r.appId}]}}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(cte,12))},t.\u0275mod=Uo({type:t}),t.\u0275inj=On({providers:[...aB,...sB],imports:[B2,rZ]}),e})(),dte=(()=>{var t;class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(Ko))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var ct=le(1635);const XD=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function dB(t){return wt(null==t?void 0:t.then)}function hB(t){return wt(t[Ti])}function fB(t){return Symbol.asyncIterator&&wt(null==t?void 0:t[Symbol.asyncIterator])}function pB(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const gB=function mte(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function mB(t){return wt(null==t?void 0:t[gB])}function _B(t){return(0,ct.AQ)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,ct.N3)(n.read());if(i)return yield(0,ct.N3)(void 0);yield yield(0,ct.N3)(r)}}finally{n.releaseLock()}})}function vB(t){return wt(null==t?void 0:t.getReader)}function Qo(t){if(t instanceof $n)return t;if(null!=t){if(hB(t))return function _te(t){return new $n(e=>{const n=t[Ti]();if(wt(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(XD(t))return function vte(t){return new $n(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(dB(t))return function yte(t){return new $n(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Cn)})}(t);if(fB(t))return yB(t);if(mB(t))return function Ite(t){return new $n(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(vB(t))return function Ete(t){return yB(_B(t))}(t)}throw pB(t)}function yB(t){return new $n(e=>{(function wte(t,e){var n,r,i,o;return(0,ct.sH)(this,void 0,void 0,function*(){try{for(n=(0,ct.xN)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Fl(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Fc(t,e=0){return bt((n,r)=>{n.subscribe(kt(r,i=>Fl(r,t,()=>r.next(i),e),()=>Fl(r,t,()=>r.complete(),e),i=>Fl(r,t,()=>r.error(i),e)))})}function jf(t,e=0){return bt((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function IB(t,e){if(!t)throw new Error("Iterable cannot be null");return new $n(n=>{Fl(n,e,()=>{const r=t[Symbol.asyncIterator]();Fl(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function er(t,e){return e?function Ste(t,e){if(null!=t){if(hB(t))return function Cte(t,e){return Qo(t).pipe(jf(e),Fc(e))}(t,e);if(XD(t))return function Tte(t,e){return new $n(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(dB(t))return function bte(t,e){return Qo(t).pipe(jf(e),Fc(e))}(t,e);if(fB(t))return IB(t,e);if(mB(t))return function Ate(t,e){return new $n(n=>{let r;return Fl(n,e,()=>{r=t[gB](),Fl(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>wt(null==r?void 0:r.return)&&r.return()})}(t,e);if(vB(t))return function Dte(t,e){return IB(_B(t),e)}(t,e)}throw pB(t)}(t,e):Qo(t)}function ZD(t){return t[t.length-1]}function EB(t){return wt(ZD(t))?t.pop():void 0}function y_(t){return function Rte(t){return t&&wt(t.schedule)}(ZD(t))?t.pop():void 0}function Gt(...t){return er(t,y_(t))}const{isArray:xte}=Array,{getPrototypeOf:Mte,prototype:Nte,keys:kte}=Object;function wB(t){if(1===t.length){const e=t[0];if(xte(e))return{args:e,keys:null};if(function Ote(t){return t&&"object"==typeof t&&Mte(t)===Nte}(e)){const n=kte(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:Fte}=Array;function JD(t){return Et(e=>function Lte(t,e){return Fte(e)?t(...e):t(e)}(t,e))}function CB(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function wE(...t){const e=y_(t),n=EB(t),{args:r,keys:i}=wB(t);if(0===r.length)return er([],e);const o=new $n(function Vte(t,e,n=Cr){return r=>{bB(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let l=0;l<i;l++)bB(e,()=>{const c=er(t[l],e);let h=!1;c.subscribe(kt(r,p=>{o[l]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>CB(i,s):Cr));return n?o.pipe(JD(n)):o}function bB(t,e,n){t?Fl(n,t,e):e()}const CE=cn(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Ki(t,e,n=1/0){return wt(e)?Ki((r,i)=>Et((o,s)=>e(r,o,i,s))(Qo(t(r,i))),n):("number"==typeof e&&(n=e),bt((r,i)=>function Bte(t,e,n,r,i,o,s,a){const l=[];let c=0,h=0,p=!1;const m=()=>{p&&!l.length&&!c&&e.complete()},_=T=>c<r?w(T):l.push(T),w=T=>{o&&e.next(T),c++;let S=!1;Qo(n(T,h++)).subscribe(kt(e,j=>{null==i||i(j),o?_(j):e.next(j)},()=>{S=!0},void 0,()=>{if(S)try{for(c--;l.length&&c<r;){const j=l.shift();s?Fl(e,s,()=>w(j)):w(j)}m()}catch(j){e.error(j)}}))};return t.subscribe(kt(e,_,()=>{p=!0,m()})),()=>{null==a||a()}}(r,i,t,n)))}function Hf(t=1/0){return Ki(Cr,t)}function eS(...t){return function $te(){return Hf(1)}()(er(t,y_(t)))}function TB(t){return new $n(e=>{Qo(t()).subscribe(e)})}function bE(t,e){const n=wt(t)?t:()=>t,r=i=>i.error(n());return new $n(e?i=>e.schedule(r,0,i):r)}const ya=new $n(t=>t.complete());function tS(){return bt((t,e)=>{let n=null;t._refCount++;const r=kt(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class AB extends $n{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ut(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ce;const n=this.getSubject();e.add(this.source.subscribe(kt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ce.EMPTY)}return e}refCount(){return tS()(this)}}function $r(t,e){return bt((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(kt(r,l=>{null==i||i.unsubscribe();let c=0;const h=o++;Qo(t(l,h)).subscribe(i=kt(r,p=>r.next(e?e(l,p,h,c++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function zf(t){return t<=0?()=>ya:bt((e,n)=>{let r=0;e.subscribe(kt(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function TE(...t){const e=y_(t);return bt((n,r)=>{(e?eS(t,n,e):eS(t,n)).subscribe(r)})}function gs(t,e){return bt((n,r)=>{let i=0;n.subscribe(kt(r,o=>t.call(e,o,i++)&&r.next(o)))})}function AE(t){return bt((e,n)=>{let r=!1;e.subscribe(kt(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function DB(t=jte){return bt((e,n)=>{let r=!1;e.subscribe(kt(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function jte(){return new CE}function Lc(t,e){const n=arguments.length>=2;return r=>r.pipe(t?gs((i,o)=>t(i,o,r)):Cr,zf(1),n?AE(e):DB(()=>new CE))}function I_(t,e){return wt(e)?Ki(t,e,1):Ki(t,1)}function co(t,e,n){const r=wt(t)||e||n?{next:t,error:e,complete:n}:t;return r?bt((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(kt(o,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),o.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),o.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),o.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Cr}function ud(t){return bt((e,n)=>{let o,r=null,i=!1;r=e.subscribe(kt(n,void 0,void 0,s=>{o=Qo(t(s,ud(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function DE(t,e){return bt(function Hte(t,e,n,r,i){return(o,s)=>{let a=n,l=e,c=0;o.subscribe(kt(s,h=>{const p=c++;l=a?t(l,h,p):(a=!0,h),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}(t,e,arguments.length>=2,!0))}function nS(t){return t<=0?()=>ya:bt((e,n)=>{let r=[];e.subscribe(kt(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function rS(t){return bt((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const dn="primary",E_=Symbol("RouteTitle");class qte{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Gf(t){return new qte(t)}function Kte(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function qa(t,e){const n=t?iS(t):void 0,r=e?iS(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!SB(t[i],e[i]))return!1;return!0}function iS(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function SB(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function RB(t){return t.length>0?t[t.length-1]:null}function Vc(t){return function gte(t){return!!t&&(t instanceof $n||wt(t.lift)&&wt(t.subscribe))}(t)?t:c_(t)?er(Promise.resolve(t)):Gt(t)}const Yte={exact:function MB(t,e,n){if(!dd(t.segments,e.segments)||!SE(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!MB(t.children[r],e.children[r],n))return!1;return!0},subset:NB},PB={exact:function Xte(t,e){return qa(t,e)},subset:function Zte(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>SB(t[n],e[n]))},ignored:()=>!0};function xB(t,e,n){return Yte[n.paths](t.root,e.root,n.matrixParams)&&PB[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function NB(t,e,n){return kB(t,e,e.segments,n)}function kB(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!dd(i,n)||e.hasChildren()||!SE(i,n,r))}if(t.segments.length===n.length){if(!dd(t.segments,n)||!SE(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!NB(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(dd(t.segments,i)&&SE(t.segments,i,r)&&t.children[dn])&&kB(t.children[dn],e,o,r)}}function SE(t,e,n){return e.every((r,i)=>PB[n](t[i].parameters,r.parameters))}class Wf{constructor(e=new ar([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){var e;return null!==(e=this._queryParamMap)&&void 0!==e||(this._queryParamMap=Gf(this.queryParams)),this._queryParamMap}toString(){return tne.serialize(this)}}class ar{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return RE(this)}}class w_{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){var e;return null!==(e=this._parameterMap)&&void 0!==e||(this._parameterMap=Gf(this.parameters)),this._parameterMap}toString(){return LB(this)}}function dd(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let hd=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>new oS,providedIn:"root"}),e})();class oS{parse(e){const n=new hne(e);return new Wf(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${C_(e.root,!0)}`,r=function ine(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${PE(n)}=${PE(i)}`).join("&"):`${PE(n)}=${PE(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function nne(t){return encodeURI(t)}(e.fragment)}`:""}`}}const tne=new oS;function RE(t){return t.segments.map(e=>LB(e)).join("/")}function C_(t,e){if(!t.hasChildren())return RE(t);if(e){const n=t.children[dn]?C_(t.children[dn],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==dn&&r.push(`${i}:${C_(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function ene(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===dn&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==dn&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===dn?[C_(t.children[dn],!1)]:[`${i}:${C_(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[dn]?`${RE(t)}/${n[0]}`:`${RE(t)}/(${n.join("//")})`}}function OB(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function PE(t){return OB(t).replace(/%3B/gi,";")}function sS(t){return OB(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xE(t){return decodeURIComponent(t)}function FB(t){return xE(t.replace(/\+/g,"%20"))}function LB(t){return`${sS(t.path)}${function rne(t){return Object.entries(t).map(([e,n])=>`;${sS(e)}=${sS(n)}`).join("")}(t.parameters)}`}const one=/^[^\/()?;#]+/;function aS(t){const e=t.match(one);return e?e[0]:""}const sne=/^[^\/()?;=#]+/,lne=/^[^=?&#]+/,une=/^[^&#]+/;class hne{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ar([],{}):new ar([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[dn]=new ar(e,n)),r}parseSegment(){const e=aS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Se(4009,!1);return this.capture(e),new w_(xE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function ane(t){const e=t.match(sne);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=aS(this.remaining);i&&(r=i,this.capture(r))}e[xE(n)]=xE(r)}parseQueryParam(e){const n=function cne(t){const e=t.match(lne);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function dne(t){const e=t.match(une);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=FB(n),o=FB(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=aS(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Se(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=dn);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[dn]:new ar([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Se(4011,!1)}}function VB(t){return t.segments.length>0?new ar([],{[dn]:t}):t}function BB(t){const e={};for(const[r,i]of Object.entries(t.children)){const o=BB(i);if(r===dn&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function fne(t){if(1===t.numberOfChildren&&t.children[dn]){const e=t.children[dn];return new ar(t.segments.concat(e.segments),e.children)}return t}(new ar(t.segments,e))}function qf(t){return t instanceof Wf}function $B(t){var e;let n;const o=VB(function r(s){const a={};for(const c of s.children){const h=r(c);a[c.outlet]=h}const l=new ar(s.url,a);return s===t&&(n=l),l}(t.root));return null!==(e=n)&&void 0!==e?e:o}function UB(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return lS(i,i,i,n,r);const o=function gne(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new HB(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new HB(n,e,r)}(e);if(o.toRoot())return lS(i,i,new ar([],{}),n,r);const s=function mne(t,e,n){if(t.isAbsolute)return new NE(e,!0,0);if(!n)return new NE(e,!1,NaN);if(null===n.parent)return new NE(n,!0,0);const r=ME(t.commands[0])?0:1;return function _ne(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Se(4005,!1);i=r.segments.length}return new NE(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?T_(s.segmentGroup,s.index,o.commands):zB(s.segmentGroup,s.index,o.commands);return lS(i,s.segmentGroup,a,n,r)}function ME(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function b_(t){return"object"==typeof t&&null!=t&&t.outlets}function lS(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`}),s=t===e?n:jB(t,e,n);const a=VB(BB(s));return new Wf(a,o,i)}function jB(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:jB(o,e,n)}),new ar(t.segments,r)}class HB{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ME(r[0]))throw new Se(4003,!1);const i=r.find(b_);if(i&&i!==RB(r))throw new Se(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class NE{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function zB(t,e,n){var r;if(null!==(r=t)&&void 0!==r||(t=new ar([],{})),0===t.segments.length&&t.hasChildren())return T_(t,e,n);const i=function yne(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(b_(a))break;const l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!WB(l,c,s))return o;r+=2}else{if(!WB(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),o=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const s=new ar(t.segments.slice(0,i.pathIndex),{});return s.children[dn]=new ar(t.segments.slice(i.pathIndex),t.children),T_(s,0,o)}return i.match&&0===o.length?new ar(t.segments,{}):i.match&&!t.hasChildren()?cS(t,e,n):i.match?T_(t,0,o):cS(t,e,n)}function T_(t,e,n){if(0===n.length)return new ar(t.segments,{});{const r=function vne(t){return b_(t[0])?t[0].outlets:{[dn]:t}}(n),i={};if(Object.keys(r).some(o=>o!==dn)&&t.children[dn]&&1===t.numberOfChildren&&0===t.children[dn].segments.length){const o=T_(t.children[dn],e,n);return new ar(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=zB(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new ar(t.segments,i)}}function cS(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(b_(o)){const l=Ine(o.outlets);return new ar(r,l)}if(0===i&&ME(n[0])){r.push(new w_(t.segments[e].path,GB(n[0]))),i++;continue}const s=b_(o)?o.outlets[dn]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&ME(a)?(r.push(new w_(s,GB(a))),i+=2):(r.push(new w_(s,{})),i++)}return new ar(r,{})}function Ine(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=cS(new ar([],{}),0,r))}),e}function GB(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function WB(t,e,n){return t==n.path&&qa(e,n.parameters)}const A_="imperative";var Mn=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Mn||{});class Ka{constructor(e,n){this.id=e,this.url=n}}class D_ extends Ka{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Mn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ll extends Ka{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Mn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var ms=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ms||{}),kE=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(kE||{});class Kf extends Ka{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Mn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Qf extends Ka{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Mn.NavigationSkipped}}class OE extends Ka{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Mn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qB extends Ka{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Mn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ene extends Ka{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Mn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wne extends Ka{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Mn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Cne extends Ka{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Mn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bne extends Ka{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Mn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tne{constructor(e){this.route=e,this.type=Mn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ane{constructor(e){this.route=e,this.type=Mn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Dne{constructor(e){this.snapshot=e,this.type=Mn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sne{constructor(e){this.snapshot=e,this.type=Mn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rne{constructor(e){this.snapshot=e,this.type=Mn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pne{constructor(e){this.snapshot=e,this.type=Mn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KB{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Mn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class uS{}class dS{constructor(e){this.url=e}}class xne{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new fd,this.attachRef=null}}let fd=(()=>{var t;class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){const o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){const i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new xne,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class QB{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=hS(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=hS(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=fS(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return fS(e,this._root).map(n=>n.value)}}function hS(t,e){if(t===e.value)return e;for(const n of e.children){const r=hS(t,n);if(r)return r}return null}function fS(t,e){if(t===e.value)return[e];for(const n of e.children){const r=fS(t,n);if(r.length)return r.unshift(e),r}return[]}class Ia{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Yf(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class YB extends QB{constructor(e,n){super(e),this.snapshot=n,mS(this,e)}toString(){return this.snapshot.toString()}}function XB(t){const e=function Mne(t){const o=new gS([],{},{},"",{},dn,t,null,{});return new ZB("",new Ia(o,[]))}(t),n=new K([new w_("",{})]),r=new K({}),i=new K({}),o=new K({}),s=new K(""),a=new Ea(n,r,o,s,i,dn,t,e.root);return a.snapshot=e.root,new YB(new Ia(a,[]),e)}class Ea{constructor(e,n,r,i,o,s,a,l){var c,h;this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=null!==(c=null===(h=this.dataSubject)||void 0===h?void 0:h.pipe(Et(p=>p[E_])))&&void 0!==c?c:Gt(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var e;return null!==(e=this._paramMap)&&void 0!==e||(this._paramMap=this.params.pipe(Et(n=>Gf(n)))),this._paramMap}get queryParamMap(){var e;return null!==(e=this._queryParamMap)&&void 0!==e||(this._queryParamMap=this.queryParams.pipe(Et(n=>Gf(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pS(t,e,n="emptyOnly"){var r;let i;const{routeConfig:o}=t;var s;return i=null===e||"always"!==n&&""!==(null==o?void 0:o.path)&&(e.component||null!==(r=e.routeConfig)&&void 0!==r&&r.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...null!==(s=t._resolvedData)&&void 0!==s?s:{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...null==o?void 0:o.data,...t._resolvedData}},o&&e$(o)&&(i.resolve[E_]=o.title),i}class gS{get title(){var e;return null===(e=this.data)||void 0===e?void 0:e[E_]}constructor(e,n,r,i,o,s,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var e;return null!==(e=this._paramMap)&&void 0!==e||(this._paramMap=Gf(this.params)),this._paramMap}get queryParamMap(){var e;return null!==(e=this._queryParamMap)&&void 0!==e||(this._queryParamMap=Gf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ZB extends QB{constructor(e,n){super(n),this.url=e,mS(this,n)}toString(){return JB(this._root)}}function mS(t,e){e.value._routerState=t,e.children.forEach(n=>mS(t,n))}function JB(t){const e=t.children.length>0?` { ${t.children.map(JB).join(", ")} } `:"";return`${t.value}${e}`}function _S(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,qa(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),qa(e.params,n.params)||t.paramsSubject.next(n.params),function Qte(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!qa(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),qa(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function vS(t,e){const n=qa(t.params,e.params)&&function Jte(t,e){return dd(t,e)&&t.every((n,r)=>qa(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||vS(t.parent,e.parent))}function e$(t){return"string"==typeof t.title||null===t.title}let t$=(()=>{var t;class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=dn,this.activateEvents=new sr,this.deactivateEvents=new sr,this.attachEvents=new sr,this.detachEvents=new sr,this.parentContexts=$e(fd),this.location=$e(Bs),this.changeDetector=$e(at),this.environmentInjector=$e(Gr),this.inputBinder=$e(FE,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){const{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){var r;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(r=this.inputBinder)||void 0===r||r.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){var i;return(null===(i=this.parentContexts.getContext(r))||void 0===i?void 0:i.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const r=this.parentContexts.getContext(this.name);null!=r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Se(4012,!1);this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){var o;this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),null===(o=this.inputBinder)||void 0===o||o.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){var o;if(this.isActivated)throw new Se(4013,!1);this._activatedRoute=r;const s=this.location,l=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,h=new Nne(r,c,s.injector);this.activated=s.createComponent(l,{index:s.length,injector:h,environmentInjector:null!=i?i:this.environmentInjector}),this.changeDetector.markForCheck(),null===(o=this.inputBinder)||void 0===o||o.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275dir=xt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Gi]}),e})();class Nne{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ea?this.route:e===fd?this.childContexts:this.parent.get(e,n)}}const FE=new lt("");let n$=(()=>{var t;class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){var i;null===(i=this.outletDataSubscriptions.get(r))||void 0===i||i.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){const{activatedRoute:i}=r,o=wE([i.queryParams,i.params,i.data]).pipe($r(([s,a,l],c)=>(l={...s,...a,...l},0===c?Gt(l):Promise.resolve(l)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(r);const a=y2(i.component);if(a)for(const{templateName:l}of a.inputs)r.activatedComponentRef.setInput(l,s[l]);else this.unsubscribeFromRouteData(r)});this.outletDataSubscriptions.set(r,o)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();function S_(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function One(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return S_(t,r,i);return S_(t,r)})}(t,e,n);return new Ia(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>S_(t,a)),s}}const r=function Fne(t){return new Ea(new K(t.url),new K(t.params),new K(t.queryParams),new K(t.fragment),new K(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>S_(t,o));return new Ia(r,i)}}const r$="ngNavigationCancelingError";function i$(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=qf(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=o$(!1,ms.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function o$(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[r$]=!0,n.cancellationCode=e,n}function s$(t){return!!t&&t[r$]}let a$=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Ke({type:t,selectors:[["ng-component"]],standalone:!0,features:[eV],decls:1,vars:0,template:function(r,i){1&r&&Ne(0,"router-outlet")},dependencies:[t$],encapsulation:2}),e})();function yS(t){const e=t.children&&t.children.map(yS),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==dn&&(n.component=a$),n}function Qa(t){return t.outlet||dn}function R_(t){var e;if(!t)return null;if(null!==(e=t.routeConfig)&&void 0!==e&&e._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const r=n.routeConfig;if(null!=r&&r._loadedInjector)return r._loadedInjector;if(null!=r&&r._injector)return r._injector}return null}class zne{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),_S(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Yf(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Yf(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Yf(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Yf(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Pne(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Sne(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(_S(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),_S(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=R_(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class l${constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class LE{constructor(e,n){this.component=e,this.route=n}}function Gne(t,e,n){const r=t._root;return P_(r,e?e._root:null,n,[r.value])}function Xf(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function ui(t){return null!==Zn(t)}(t)?e.get(t):t:r}function P_(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Yf(e);return t.children.forEach(s=>{(function qne(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function Kne(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!dd(t.url,e.url);case"pathParamsOrQueryParamsChange":return!dd(t.url,e.url)||!qa(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vS(t,e)||!qa(t.queryParams,e.queryParams);default:return!vS(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new l$(r)):(o.data=s.data,o._resolvedData=s._resolvedData),P_(t,e,o.component?a?a.children:null:n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new LE(a.outlet.component,s))}else s&&x_(e,a,i),i.canActivateChecks.push(new l$(r)),P_(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>x_(a,n.getContext(s),i)),i}function x_(t,e,n){const r=Yf(t),i=t.value;Object.entries(r).forEach(([o,s])=>{x_(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new LE(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function M_(t){return"function"==typeof t}function c$(t){return t instanceof CE||"EmptyError"===(null==t?void 0:t.name)}const VE=Symbol("INITIAL_VALUE");function Zf(){return $r(t=>wE(t.map(e=>e.pipe(zf(1),TE(VE)))).pipe(Et(e=>{for(const n of e)if(!0!==n){if(n===VE)return VE;if(!1===n||n instanceof Wf)return n}return!0}),gs(e=>e!==VE),zf(1)))}function u$(t){return function Bo(...t){return $o(t)}(co(e=>{if(qf(e))throw i$(0,e)}),Et(e=>!0===e))}class IS{constructor(e){this.segmentGroup=e||null}}class ES extends Error{constructor(e){super(),this.urlTree=e}}function Jf(t){return bE(new IS(t))}class fre{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Gt(r);if(i.numberOfChildren>1||!i.children[dn])return bE(new Se(4e3,!1));i=i.children[dn]}}applyRedirectCommands(e,n,r){const i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new ES(i);return i}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new Wf(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new ar(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new Se(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const wS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pre(t,e,n,r,i){const o=CS(t,e,n);return o.matched?(r=function Vne(t,e){var n;return t.providers&&!t._injector&&(t._injector=P0(t.providers,e,`Route: ${t.path}`)),null!==(n=t._injector)&&void 0!==n?n:e}(e,r),function ure(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?Gt(i.map(s=>{const a=Xf(s,t);return Vc(function ere(t){return t&&M_(t.canMatch)}(a)?a.canMatch(e,n):Si(t,()=>a(e,n)))})).pipe(Zf(),u$()):Gt(!0)}(r,e,n).pipe(Et(s=>!0===s?o:{...wS}))):Gt(o)}function CS(t,e,n){var r,i;if("**"===e.path)return function gre(t){return{matched:!0,parameters:t.length>0?RB(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...wS}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Kte)(n,t,e);if(!s)return{...wS};const a={};Object.entries(null!==(r=s.posParams)&&void 0!==r?r:{}).forEach(([c,h])=>{a[c]=h.path});const l=s.consumed.length>0?{...a,...s.consumed[s.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:l,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function d$(t,e,n,r){return n.length>0&&function vre(t,e,n){return n.some(r=>BE(t,e,r)&&Qa(r)!==dn)}(t,n,r)?{segmentGroup:new ar(e,_re(r,new ar(n,t.children))),slicedSegments:[]}:0===n.length&&function yre(t,e,n){return n.some(r=>BE(t,e,r))}(t,n,r)?{segmentGroup:new ar(t.segments,mre(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ar(t.segments,t.children),slicedSegments:n}}function mre(t,e,n,r){const i={};for(const o of n)if(BE(t,e,o)&&!r[Qa(o)]){const s=new ar([],{});i[Qa(o)]=s}return{...r,...i}}function _re(t,e){const n={};n[dn]=e;for(const r of t)if(""===r.path&&Qa(r)!==dn){const i=new ar([],{});n[Qa(r)]=i}return n}function BE(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class wre{}class Tre{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new fre(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Se(4002,`'${e.segmentGroup}'`)}recognize(){const e=d$(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Et(n=>{const r=new gS([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},dn,this.rootComponentType,null,{}),i=new Ia(r,n),o=new ZB("",i),s=function pne(t,e,n=null,r=null){return UB($B(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,dn).pipe(ud(r=>{if(r instanceof ES)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof IS?this.noMatchError(r):r}))}inheritParamsAndData(e,n){const r=e.value,i=pS(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(Et(o=>o instanceof Ia?[o]:[]))}processChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return er(i).pipe(I_(o=>{const s=r.children[o],a=function jne(t,e){const n=t.filter(r=>Qa(r)===e);return n.push(...t.filter(r=>Qa(r)!==e)),n}(n,o);return this.processSegmentGroup(e,a,s,o)}),DE((o,s)=>(o.push(...s),o)),AE(null),function zte(t,e){const n=arguments.length>=2;return r=>r.pipe(t?gs((i,o)=>t(i,o,r)):Cr,nS(1),n?AE(e):DB(()=>new CE))}(),Ki(o=>{if(null===o)return Jf(r);const s=h$(o);return function Are(t){t.sort((e,n)=>e.value.outlet===dn?-1:n.value.outlet===dn?1:e.value.outlet.localeCompare(n.value.outlet))}(s),Gt(s)}))}processSegment(e,n,r,i,o,s){return er(n).pipe(I_(a=>{var l;return this.processSegmentAgainstRoute(null!==(l=a._injector)&&void 0!==l?l:e,n,a,r,i,o,s).pipe(ud(c=>{if(c instanceof IS)return Gt(null);throw c}))}),Lc(a=>!!a),ud(a=>{if(c$(a))return function Ere(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?Gt(new wre):Jf(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return function Ire(t,e,n,r){return!!(Qa(t)===r||r!==dn&&BE(e,n,t))&&CS(e,t,n).matched}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Jf(i):Jf(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){const{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:h}=CS(n,i,o);if(!a)return Jf(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const p=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,p).pipe(Ki(m=>this.processSegment(e,r,n,m.concat(h),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){const s=pre(n,r,i,e);return"**"===r.path&&(n.children={}),s.pipe($r(a=>{var l;return a.matched?(e=null!==(l=r._injector)&&void 0!==l?l:e,this.getChildConfig(e,r,i).pipe($r(({routes:c})=>{var h,p,m;const _=null!==(h=r._loadedInjector)&&void 0!==h?h:e,{consumedSegments:w,remainingSegments:T,parameters:S}=a,j=new gS(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function Sre(t){return t.data||{}}(r),Qa(r),null!==(p=null!==(m=r.component)&&void 0!==m?m:r._loadedComponent)&&void 0!==p?p:null,r,function Rre(t){return t.resolve||{}}(r)),{segmentGroup:H,slicedSegments:ge}=d$(n,w,T,c);if(0===ge.length&&H.hasChildren())return this.processChildren(_,c,H).pipe(Et(Xe=>null===Xe?null:new Ia(j,Xe)));if(0===c.length&&0===ge.length)return Gt(new Ia(j,[]));const ve=Qa(r)===o;return this.processSegment(_,c,H,ge,ve?dn:o,!0).pipe(Et(Xe=>new Ia(j,Xe instanceof Ia?[Xe]:[])))}))):Jf(n)}))}getChildConfig(e,n,r){return n.children?Gt({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?Gt({routes:n._loadedRoutes,injector:n._loadedInjector}):function cre(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?Gt(!0):Gt(i.map(s=>{const a=Xf(s,t);return Vc(function Yne(t){return t&&M_(t.canLoad)}(a)?a.canLoad(e,n):Si(t,()=>a(e,n)))})).pipe(Zf(),u$())}(e,n,r).pipe(Ki(i=>i?this.configLoader.loadChildren(e,n).pipe(co(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function hre(t){return bE(o$(!1,ms.GuardRejected))}())):Gt({routes:[],injector:e})}}function Dre(t){const e=t.value.routeConfig;return e&&""===e.path}function h$(t){const e=[],n=new Set;for(const r of t){if(!Dre(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=h$(r.children);e.push(new Ia(r.value,i))}return e.filter(r=>!n.has(r))}function f$(t){const e=t.children.map(n=>f$(n)).flat();return[t,...e]}function bS(t){return $r(e=>{const n=t(e);return n?er(n).pipe(Et(()=>e)):Gt(e)})}let p$=(()=>{var t;class e{buildTitle(r){let i,o=r.root;for(;void 0!==o;){var s;i=null!==(s=this.getResolvedTitleForRoute(o))&&void 0!==s?s:i,o=o.children.find(a=>a.outlet===dn)}return i}getResolvedTitleForRoute(r){return r.data[E_]}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>$e(Ore),providedIn:"root"}),e})(),Ore=(()=>{var t;class e extends p${constructor(r){super(),this.title=r}updateTitle(r){const i=this.buildTitle(r);void 0!==i&&this.title.setTitle(i)}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(dte))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const ep=new lt("",{providedIn:"root",factory:()=>({})}),tp=new lt("");let TS=(()=>{var t;class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$e(xV)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Gt(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=Vc(r.loadComponent()).pipe(Et(g$),co(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),rS(()=>{this.componentLoaders.delete(r)})),o=new AB(i,()=>new $).pipe(tS());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Gt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function Fre(t,e,n,r){return Vc(t.loadChildren()).pipe(Et(g$),Ki(i=>i instanceof KO||Array.isArray(i)?Gt(i):er(e.compileModuleAsync(i))),Et(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(tp,[],{optional:!0,self:!0}).flat()),{routes:s.map(yS),injector:o}}))}(i,this.compiler,r,this.onLoadEndListener).pipe(rS(()=>{this.childrenLoaders.delete(i)})),a=new AB(s,()=>new $).pipe(tS());return this.childrenLoaders.set(i,a),a}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function g$(t){return function Lre(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let AS=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>$e(Vre),providedIn:"root"}),e})(),Vre=(()=>{var t;class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const m$=new lt(""),_$=new lt("");function Bre(t,e,n){const r=t.get(_$),i=t.get(Ko);return t.get(xe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o;const s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),function $re(t){return new Promise(e=>{uO(e,{injector:t})})}(t))),{onViewTransitionCreated:l}=r;return l&&Si(t,()=>l({transition:a,from:e,to:n})),s})}let $E=(()=>{var t;class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $,this.transitionAbortSubject=new $,this.configLoader=$e(TS),this.environmentInjector=$e(Gr),this.urlSerializer=$e(hd),this.rootContexts=$e(fd),this.location=$e(Oc),this.inputBindingEnabled=null!==$e(FE,{optional:!0}),this.titleStrategy=$e(p$),this.options=$e(ep,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=$e(AS),this.createViewTransition=$e(m$,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Gt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new Ane(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new Tne(o))}complete(){var r;null===(r=this.transitions)||void 0===r||r.complete()}handleNavigationRequest(r){var i;const o=++this.navigationId;null===(i=this.transitions)||void 0===i||i.next({...this.transitions.value,...r,id:o})}setupNavigations(r,i,o){return this.transitions=new K({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:A_,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(gs(s=>0!==s.id),Et(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),$r(s=>{let a=!1,l=!1;return Gt(s).pipe($r(c=>{var h;if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",ms.SupersededByNewNavigation),ya;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const p=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=null!==(h=c.extras.onSameUrlNavigation)&&void 0!==h?h:r.onSameUrlNavigation;if(!p&&"reload"!==m){const _="";return this.events.next(new Qf(c.id,this.urlSerializer.serialize(c.rawUrl),_,kE.IgnoredSameUrlNavigation)),c.resolve(null),ya}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Gt(c).pipe($r(_=>{var w,T;const S=null===(w=this.transitions)||void 0===w?void 0:w.getValue();return this.events.next(new D_(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),S!==(null===(T=this.transitions)||void 0===T?void 0:T.getValue())?ya:Promise.resolve(_)}),function Pre(t,e,n,r,i,o){return Ki(s=>function Cre(t,e,n,r,i,o,s="emptyOnly"){return new Tre(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(Et(({state:a,tree:l})=>({...s,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),co(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const w=new qB(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(w)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:_,extractedUrl:w,source:T,restoredState:S,extras:j}=c,H=new D_(_,this.urlSerializer.serialize(w),T,S);this.events.next(H);const ge=XB(this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:ge,urlAfterRedirects:w,extras:{...j,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=w,Gt(s)}{const _="";return this.events.next(new Qf(c.id,this.urlSerializer.serialize(c.extractedUrl),_,kE.IgnoredByUrlHandlingStrategy)),c.resolve(null),ya}}),co(c=>{const h=new Ene(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),Et(c=>(this.currentTransition=s={...c,guards:Gne(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function tre(t,e){return Ki(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Gt({...n,guardsResult:!0}):function nre(t,e,n,r){return er(t).pipe(Ki(i=>function lre(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Gt(o.map(a=>{var l;const c=null!==(l=R_(e))&&void 0!==l?l:i,h=Xf(a,c);return Vc(function Jne(t){return t&&M_(t.canDeactivate)}(h)?h.canDeactivate(t,e,n,r):Si(c,()=>h(t,e,n,r))).pipe(Lc())})).pipe(Zf()):Gt(!0)}(i.component,i.route,n,e,r)),Lc(i=>!0!==i,!0))}(s,r,i,t).pipe(Ki(a=>a&&function Qne(t){return"boolean"==typeof t}(a)?function rre(t,e,n,r){return er(e).pipe(I_(i=>eS(function ore(t,e){return null!==t&&e&&e(new Dne(t)),Gt(!0)}(i.route.parent,r),function ire(t,e){return null!==t&&e&&e(new Rne(t)),Gt(!0)}(i.route,r),function are(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function Wne(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>TB(()=>Gt(s.guards.map(l=>{var c;const h=null!==(c=R_(s.node))&&void 0!==c?c:n,p=Xf(l,h);return Vc(function Zne(t){return t&&M_(t.canActivateChild)}(p)?p.canActivateChild(r,t):Si(h,()=>p(r,t))).pipe(Lc())})).pipe(Zf())));return Gt(o).pipe(Zf())}(t,i.path,n),function sre(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Gt(!0);const i=r.map(o=>TB(()=>{var s;const a=null!==(s=R_(e))&&void 0!==s?s:n,l=Xf(o,a);return Vc(function Xne(t){return t&&M_(t.canActivate)}(l)?l.canActivate(e,t):Si(a,()=>l(e,t))).pipe(Lc())}));return Gt(i).pipe(Zf())}(t,i.route,n))),Lc(i=>!0!==i,!0))}(r,o,t,e):Gt(a)),Et(a=>({...n,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),co(c=>{if(s.guardsResult=c.guardsResult,qf(c.guardsResult))throw i$(0,c.guardsResult);const h=new wne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),gs(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",ms.GuardRejected),!1)),bS(c=>{if(c.guards.canActivateChecks.length)return Gt(c).pipe(co(h=>{const p=new Cne(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),$r(h=>{let p=!1;return Gt(h).pipe(function xre(t,e){return Ki(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Gt(n);const o=new Set(i.map(l=>l.route)),s=new Set;for(const l of o)if(!s.has(l))for(const c of f$(l))s.add(c);let a=0;return er(s).pipe(I_(l=>o.has(l)?function Mre(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==(null==i?void 0:i.title)&&!e$(i)&&(o[E_]=i.title),function Nre(t,e,n,r){const i=iS(t);if(0===i.length)return Gt({});const o={};return er(i).pipe(Ki(s=>function kre(t,e,n,r){var i;const o=null!==(i=R_(e))&&void 0!==i?i:r,s=Xf(t,o);return Vc(s.resolve?s.resolve(e,n):Si(o,()=>s(e,n)))}(t[s],e,n,r).pipe(Lc(),co(a=>{o[s]=a}))),nS(1),function Gte(t){return Et(()=>t)}(o),ud(s=>c$(s)?ya:bE(s)))}(o,t,e,r).pipe(Et(s=>(t._resolvedData=s,t.data=pS(t,t.parent,n).resolve,null)))}(l,r,t,e):(l.data=pS(l,l.parent,t).resolve,Gt(void 0))),co(()=>a++),nS(1),Ki(l=>a===s.size?Gt(n):ya))})}(this.paramsInheritanceStrategy,this.environmentInjector),co({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",ms.NoDataFromResolver)}}))}),co(h=>{const p=new bne(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),bS(c=>{const h=p=>{var m;const _=[];null!==(m=p.routeConfig)&&void 0!==m&&m.loadComponent&&!p.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(p.routeConfig).pipe(co(w=>{p.component=w}),Et(()=>{})));for(const w of p.children)_.push(...h(w));return _};return wE(h(c.targetSnapshot.root)).pipe(AE(null),zf(1))}),bS(()=>this.afterPreactivation()),$r(()=>{var c;const{currentSnapshot:h,targetSnapshot:p}=s,m=null===(c=this.createViewTransition)||void 0===c?void 0:c.call(this,this.environmentInjector,h.root,p.root);return m?er(m).pipe(Et(()=>s)):Gt(s)}),Et(c=>{const h=function kne(t,e,n){const r=S_(t,e._root,n?n._root:void 0);return new YB(r,e)}(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:h},this.currentNavigation.targetRouterState=h,s}),co(()=>{this.events.next(new uS)}),((t,e,n,r)=>Et(i=>(new zne(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),zf(1),co({next:c=>{var h;a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ll(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),null===(h=this.titleStrategy)||void 0===h||h.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),function Wte(t){return bt((e,n)=>{Qo(t).subscribe(kt(n,()=>n.complete(),Kt)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(co(c=>{throw c}))),rS(()=>{var c;!a&&!l&&this.cancelNavigationTransition(s,"",ms.SupersededByNewNavigation),(null===(c=this.currentTransition)||void 0===c?void 0:c.id)===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ud(c=>{if(l=!0,s$(c))this.events.next(new Kf(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function Lne(t){return s$(t)&&qf(t.url)}(c)?this.events.next(new dS(c.url)):s.resolve(!1);else{var h;this.events.next(new OE(s.id,this.urlSerializer.serialize(s.extractedUrl),c,null!==(h=s.targetSnapshot)&&void 0!==h?h:void 0));try{s.resolve(r.errorHandler(c))}catch(p){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(p)}}return ya}))}))}cancelNavigationTransition(r,i,o){const s=new Kf(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){var r,i;return(null===(r=this.currentTransition)||void 0===r?void 0:r.extractedUrl.toString())!==(null===(i=this.currentTransition)||void 0===i?void 0:i.currentUrlTree.toString())}isUpdatedBrowserUrl(){var r,i;return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==(null===(r=this.currentTransition)||void 0===r?void 0:r.extractedUrl.toString())&&!(null!==(i=this.currentTransition)&&void 0!==i&&i.extras.skipLocationChange)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function Ure(t){return t!==A_}let jre=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>$e(zre),providedIn:"root"}),e})();class Hre{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let zre=(()=>{var t;class e extends Hre{}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=xn(t)))(i||t)}})(),t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),v$=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:()=>$e(Gre),providedIn:"root"}),e})(),Gre=(()=>{var t;class e extends v${constructor(){super(...arguments),this.location=$e(Oc),this.urlSerializer=$e(hd),this.options=$e(ep,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=$e(AS),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Wf,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=XB(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){var r,i;return"computed"!==this.canceledNavigationResolution?this.currentPageId:null!==(r=null===(i=this.restoredState())||void 0===i?void 0:i.\u0275routerPageId)&&void 0!==r?r:this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{"popstate"===i.type&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof D_)this.stateMemento=this.createStateMemento();else if(r instanceof Qf)this.rawUrlTree=i.initialUrl;else if(r instanceof qB){if("eager"===this.urlUpdateStrategy&&!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof uS?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Kf&&(r.code===ms.GuardRejected||r.code===ms.NoDataFromResolver)?this.restoreHistory(i):r instanceof OE?this.restoreHistory(i,!0):r instanceof Ll&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){const o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){const a={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(o,"",a)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(o,"",s)}}restoreHistory(r,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&0===s&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){var i;this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,null!==(i=r.finalUrl)&&void 0!==i?i:this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=xn(t)))(i||t)}})(),t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var N_=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(N_||{});function y$(t,e){t.events.pipe(gs(n=>n instanceof Ll||n instanceof Kf||n instanceof OE||n instanceof Qf),Et(n=>n instanceof Ll||n instanceof Qf?N_.COMPLETE:n instanceof Kf&&(n.code===ms.Redirect||n.code===ms.SupersededByNewNavigation)?N_.REDIRECTING:N_.FAILED),gs(n=>n!==N_.REDIRECTING),zf(1)).subscribe(()=>{e()})}function Wre(t){throw t}const qre={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Kre={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let hr=(()=>{var t;class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){var r,i;this.disposed=!1,this.isNgZoneEnabled=!1,this.console=$e(wV),this.stateManager=$e(v$),this.options=$e(ep,{optional:!0})||{},this.pendingTasks=$e(hf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=$e($E),this.urlSerializer=$e(hd),this.location=$e(Oc),this.urlHandlingStrategy=$e(AS),this._events=new $,this.errorHandler=this.options.errorHandler||Wre,this.navigated=!1,this.routeReuseStrategy=$e(jre),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=null!==(r=null===(i=$e(tp,{optional:!0}))||void 0===i?void 0:i.flat())&&void 0!==r?r:[],this.componentInputBindingEnabled=!!$e(FE,{optional:!0}),this.eventsSubscription=new ce,this.isNgZoneEnabled=$e(xe)instanceof xe&&xe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:o=>{this.console.warn(o)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const r=this.navigationTransitions.events.subscribe(i=>{try{const o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==o&&null!==s)if(this.stateManager.handleRouterEvent(i,s),i instanceof Kf&&i.code!==ms.Redirect&&i.code!==ms.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ll)this.navigated=!0;else if(i instanceof dS){const a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ure(o.source)};this.scheduleNavigation(a,A_,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}(function Yre(t){return!(t instanceof uS||t instanceof dS)})(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),A_,this.stateManager.restoredState())}setUpLocationChangeListener(){var r;null!==(r=this.nonRouterCurrentEntryChangeSubscription)&&void 0!==r||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,o)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",o)},0)}))}navigateToSyncWithBrowser(r,i,o){const s={replaceUrl:!0},a=null!=o&&o.navigationId?o:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const l=this.parseUrl(r);this.scheduleNavigation(l,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(yS),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){const{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,h=c?this.currentUrlTree.fragment:a;let m,p=null;switch(l){case"merge":p={...this.currentUrlTree.queryParams,...s};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}null!==p&&(p=this.removeEmptyProps(p));try{m=$B(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof r[0]||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return UB(m,r,p,null!=h?h:null)}navigateByUrl(r,i={skipLocationChange:!1}){const o=qf(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,A_,null,i)}navigate(r,i={skipLocationChange:!1}){return function Qre(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new Se(4008,!1)}(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(o=!0===i?{...qre}:!1===i?{...Kre}:i,qf(r))return xB(this.currentUrlTree,r,o);const s=this.parseUrl(r);return xB(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(null!=s&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,c,h;a?(l=a.resolve,c=a.reject,h=a.promise):h=new Promise((m,_)=>{l=m,c=_});const p=this.pendingTasks.add();return y$(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:l,reject:c,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Bc=(()=>{var t;class e{constructor(r,i,o,s,a,l){var c;this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new $,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const h=null===(c=a.nativeElement.tagName)||void 0===c?void 0:c.toLowerCase();this.isAnchorElement="a"===h||"area"===h,this.isAnchorElement?this.subscription=r.events.subscribe(p=>{p instanceof Ll&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){null!=r?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){const l=this.urlTree;return!!(null===l||this.isAnchorElement&&(0!==r||i||o||s||a||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(l,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){var r;null===(r=this.subscription)||void 0===r||r.unsubscribe()}updateHref(){var r;const i=this.urlTree;this.href=null!==i&&this.locationStrategy?null===(r=this.locationStrategy)||void 0===r?void 0:r.prepareExternalUrl(this.router.serializeUrl(i)):null;const o=null===this.href?null:function ik(t,e,n){return function Dq(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?rk:Dl}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",o)}applyAttributeValue(r,i){const o=this.renderer,s=this.el.nativeElement;null!==i?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(t=e).\u0275fac=function(r){return new(r||t)(E(hr),E(Ea),ha("tabindex"),E(Rl),E(He),E(js))},t.\u0275dir=xt({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Ft("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Us("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Jn.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Vf],skipLocationChange:[Jn.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Vf],replaceUrl:[Jn.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Vf],routerLink:"routerLink"},standalone:!0,features:[qO,Gi]}),e})();class I${}let Jre=(()=>{var t;class e{preload(r,i){return i().pipe(ud(()=>Gt(null)))}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),eie=(()=>{var t;class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(gs(r=>r instanceof Ll),I_(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){const o=[];for(const c of i){var s,a;c.providers&&!c._injector&&(c._injector=P0(c.providers,r,`Route: ${c.path}`));const h=null!==(s=c._injector)&&void 0!==s?s:r,p=null!==(a=c._loadedInjector)&&void 0!==a?a:h;var l;(c.loadChildren&&!c._loadedRoutes&&void 0===c.canLoad||c.loadComponent&&!c._loadedComponent)&&o.push(this.preloadConfig(h,c)),(c.children||c._loadedRoutes)&&o.push(this.processRoutes(p,null!==(l=c.children)&&void 0!==l?l:c._loadedRoutes))}return er(o).pipe(Hf())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;o=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(r,i):Gt(null);const s=o.pipe(Ki(a=>{var l;return null===a?Gt(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(null!==(l=a.injector)&&void 0!==l?l:r,a.routes))}));return i.loadComponent&&!i._loadedComponent?er([s,this.loader.loadComponent(i)]).pipe(Hf()):s})}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(hr),Be(xV),Be(Gr),Be(I$),Be(TS))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const DS=new lt("");let E$=(()=>{var t;class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||(a.scrollPositionRestoration="disabled"),a.anchorScrolling||(a.anchorScrolling="disabled")}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof D_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Ll?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Qf&&r.code===kE.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof KB&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new KB(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){var r,i;null===(r=this.routerEventsSubscription)||void 0===r||r.unsubscribe(),null===(i=this.scrollEventsSubscription)||void 0===i||i.unsubscribe()}}return(t=e).\u0275fac=function(r){!function Sk(){throw new Error("invalid")}()},t.\u0275prov=je({token:t,factory:t.\u0275fac}),e})();function Ya(t,e){return{\u0275kind:t,\u0275providers:e}}function C$(){const t=$e(tt);return e=>{var n,r;const i=t.get(xl);if(e!==i.components[0])return;const o=t.get(hr),s=t.get(b$);1===t.get(SS)&&o.initialNavigation(),null===(n=t.get(T$,null,_n.Optional))||void 0===n||n.setUpPreloading(),null===(r=t.get(DS,null,_n.Optional))||void 0===r||r.init(),o.resetRootComponentType(i.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const b$=new lt("",{factory:()=>new $}),SS=new lt("",{providedIn:"root",factory:()=>1}),T$=new lt("");function iie(t){return Ya(0,[{provide:T$,useExisting:eie},{provide:I$,useExisting:t}])}function sie(t){return Ya(9,[{provide:m$,useValue:Bre},{provide:_$,useValue:{skipNextTransition:!(null==t||!t.skipInitialTransition),...t}}])}const A$=new lt("ROUTER_FORROOT_GUARD"),aie=[Oc,{provide:hd,useClass:oS},hr,fd,{provide:Ea,useFactory:function w$(t){return t.routerState.root},deps:[hr]},TS,[]];let RS=(()=>{var t;class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[aie,[],{provide:tp,multi:!0,useValue:r},{provide:A$,useFactory:die,deps:[[hr,new ml,new ac]]},{provide:ep,useValue:i||{}},null!=i&&i.useHash?{provide:js,useClass:C2}:{provide:js,useClass:w2},{provide:DS,useFactory:()=>{const t=$e(uee),e=$e(xe),n=$e(ep),r=$e($E),i=$e(hd);return n.scrollOffset&&t.setOffset(n.scrollOffset),new E$(i,r,t,e,n)}},null!=i&&i.preloadingStrategy?iie(i.preloadingStrategy).\u0275providers:[],null!=i&&i.initialNavigation?hie(i):[],null!=i&&i.bindToComponentInputs?Ya(8,[n$,{provide:FE,useExisting:n$}]).\u0275providers:[],null!=i&&i.enableViewTransitions?sie().\u0275providers:[],[{provide:D$,useFactory:C$},{provide:pD,multi:!0,useExisting:D$}]]}}static forChild(r){return{ngModule:e,providers:[{provide:tp,multi:!0,useValue:r}]}}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(A$,8))},t.\u0275mod=Uo({type:t}),t.\u0275inj=On({}),e})();function die(t){return"guarded"}function hie(t){return["disabled"===t.initialNavigation?Ya(3,[{provide:J0,multi:!0,useFactory:()=>{const e=$e(hr);return()=>{e.setUpLocationChangeListener()}}},{provide:SS,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Ya(2,[{provide:SS,useValue:0},{provide:J0,multi:!0,deps:[tt],useFactory:e=>{const n=e.get(UZ,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(hr),o=e.get(b$);y$(i,()=>{r(!0)}),e.get($E).afterPreactivation=()=>(r(!0),o.closed?Gt(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const D$=new lt("");function k_(t){return(k_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function An(t,e,n){return(e=function gie(t){var e=function pie(t,e){if("object"!=k_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=k_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==k_(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yo=le(7852);(0,Yo.registerVersion)("firebase","10.9.0","app");class vie extends ce{constructor(e,n){super()}schedule(e,n=0){return this}}const UE={setInterval(t,e,...n){const{delegate:r}=UE;return null!=r&&r.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=UE;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0};class S$ extends vie{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return UE.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&UE.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ae(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const PS={now:()=>(PS.delegate||Date).now(),delegate:void 0};class O_{constructor(e,n=O_.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}O_.now=PS.now;class R$ extends O_{constructor(e,n=O_.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const Eie=new class Iie extends R${}(class yie extends S${constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),xS=new R$(S$),MS=new Ff("ANGULARFIRE2_VERSION");class NS{constructor(){return((t,e)=>{const n=(0,Yo.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r})(Cie)}}const Cie="app-check";function np(){}class P${constructor(e,n=Eie){An(this,"zone",void 0),An(this,"delegate",void 0),this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},n,r)}}class bie{constructor(e){An(this,"zone",void 0),An(this,"task",null),this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",np,{},np,np)),n.pipe(co({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let kS=(()=>{var t;class e{constructor(r){An(this,"ngZone",void 0),An(this,"outsideAngular",void 0),An(this,"insideAngular",void 0),this.ngZone=r,this.outsideAngular=r.runOutsideAngular(()=>new P$(Zone.current)),this.insideAngular=r.run(()=>new P$(Zone.current,xS)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t=e,An(e,"\u0275fac",function(r){return new(r||t)(Be(xe))}),An(e,"\u0275prov",je({token:t,factory:t.\u0275fac,providedIn:"root"})),e})();function rp(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function x$(t){return t.pipe(Fc(rp().outsideAngular))}function Ro(t){return function Aie(t){return function(n){return(n=n.lift(new bie(t.ngZone))).pipe(jf(t.outsideAngular),Fc(t.insideAngular))}}(rp())(t)}var Qi=le(3345);Qi.A.registerVersion("firebase","10.9.0","app-compat");const Pie=["ngOnDestroy"];class M${constructor(e){return e}}const F_=new lt("angularfire2.app.options"),L_=new lt("angularfire2.app.name");function jE(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const s=Qi.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Qi.A.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){const a=!!module.hot;Nie("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new M$(s)}const Nie=(t,...e)=>{},kie={provide:M$,useFactory:jE,deps:[F_,xe,[new ml,L_]]};let Oie=(()=>{var t;class e{static initializeApp(r,i){return{ngModule:e,providers:[{provide:F_,useValue:r},{provide:L_,useValue:i}]}}constructor(r){Qi.A.registerVersion("angularfire",MS.full,"core"),Qi.A.registerVersion("angularfire",MS.full,"app-compat"),Qi.A.registerVersion("angular",JY.full,r.toString())}}return t=e,An(e,"\u0275fac",function(r){return new(r||t)(Be(fa))}),An(e,"\u0275mod",Uo({type:t})),An(e,"\u0275inj",On({providers:[kie]})),e})();function OS(t,e,n,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return function Fie(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,s)||(N$("error",`${e} was already initialized on the ${n} Firebase App with different settings.${Lie?" You may need to reload as Firebase is not HMR aware.":""}`),N$("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const Lie=typeof module<"u"&&!!module.hot,N$=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]),le(6020);class Bie extends ${constructor(e=1/0,n=1/0,r=PS){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=n.now();let a=0;for(let l=1;l<r.length&&r[l]<=s;l+=2)a=l;a&&r.splice(0,a+1)}}}function FS(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Bn({next:()=>{r.unsubscribe(),t()}});return Qo(e(...n)).subscribe(r)}function k$(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=null!=t?t:1/0,function $ie(t={}){const{connector:e=(()=>new $),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,l,c=0,h=!1,p=!1;const m=()=>{null==a||a.unsubscribe(),a=void 0},_=()=>{m(),s=l=void 0,h=p=!1},w=()=>{const T=s;_(),null==T||T.unsubscribe()};return bt((T,S)=>{c++,!p&&!h&&m();const j=l=null!=l?l:e();S.add(()=>{c--,0===c&&!p&&!h&&(a=FS(w,i))}),j.subscribe(S),!s&&c>0&&(s=new Bn({next:H=>j.next(H),error:H=>{p=!0,m(),a=FS(_,n,H),j.error(H)},complete:()=>{h=!0,m(),a=FS(_,r),j.complete()}}),Qo(T).subscribe(s))})(o)}}({connector:()=>new Bie(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function O$(t,e){return wt(e)?$r(()=>t,e):$r(()=>t)}const F$=new lt("angularfire2.auth.use-emulator"),L$=new lt("angularfire2.auth.settings"),V$=new lt("angularfire2.auth.tenant-id"),B$=new lt("angularfire2.auth.langugage-code"),$$=new lt("angularfire2.auth.use-device-language"),U$=new lt("angularfire.auth.persistence"),j$=(t,e,n,r,i,o,s,a)=>OS(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const l=e.runOutsideAngular(()=>t.auth());if(n&&l.useEmulator(...n),r&&(l.tenantId=r),l.languageCode=i,o&&l.useDeviceLanguage(),s)for(const[c,h]of Object.entries(s))l.settings[c]=h;return a&&l.setPersistence(a),l},[n,r,i,o,s,a]);let wa=(()=>{var t;class e{constructor(r,i,o,s,a,l,c,h,p,m,_,w){An(this,"authState",void 0),An(this,"idToken",void 0),An(this,"user",void 0),An(this,"idTokenResult",void 0),An(this,"credential",void 0);const T=new $,S=Gt(void 0).pipe(Fc(a.outsideAngular),$r(()=>s.runOutsideAngular(()=>Promise.resolve().then(le.bind(le,6020)))),Et(()=>jE(r,s,i)),Et(j=>j$(j,s,l,h,p,m,c,_)),k$({bufferSize:1,refCount:!1}));if(yE(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Gt(null);else{S.pipe(Lc()).subscribe();const j=S.pipe($r(ve=>ve.getRedirectResult().then(Xe=>Xe,()=>null)),Ro,k$({bufferSize:1,refCount:!1})),H=S.pipe($r(ve=>new $n(Xe=>({unsubscribe:s.runOutsideAngular(()=>ve.onAuthStateChanged(At=>Xe.next(At),At=>Xe.error(At),()=>Xe.complete()))})))),ge=S.pipe($r(ve=>new $n(Xe=>({unsubscribe:s.runOutsideAngular(()=>ve.onIdTokenChanged(At=>Xe.next(At),At=>Xe.error(At),()=>Xe.complete()))}))));this.authState=j.pipe(O$(H),jf(a.outsideAngular),Fc(a.insideAngular)),this.user=j.pipe(O$(ge),jf(a.outsideAngular),Fc(a.insideAngular)),this.idToken=this.user.pipe($r(ve=>ve?er(ve.getIdToken()):Gt(null))),this.idTokenResult=this.user.pipe($r(ve=>ve?er(ve.getIdTokenResult()):Gt(null))),this.credential=function Vie(...t){const e=y_(t),n=function Pte(t,e){return"number"==typeof ZD(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Qo(r[0]):Hf(n)(er(r,e)):ya}(j,T,this.authState.pipe(gs(ve=>!ve))).pipe(Et(ve=>null!=ve&&ve.user?ve:null),jf(a.outsideAngular),Fc(a.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var s;if(t[o])return null!=r&&null!==(s=r.spy)&&void 0!==s&&s.get&&r.spy.get(o,t[o]),t[o];if(Pie.indexOf(o)>-1)return()=>{};const a=e.toPromise().then(l=>{const c=null==l?void 0:l[o];return"function"==typeof c?c.bind(l):null!=c&&c.then?c.then(h=>n.run(()=>h)):n.run(()=>c)});return new Proxy(()=>{},{get:(l,c)=>a[c],apply:(l,c,h)=>a.then(p=>{var m;const _=null==p?void 0:p(...h);return null!=r&&null!==(m=r.spy)&&void 0!==m&&m.apply&&r.spy.apply(o,h,_),_})})})}))(this,S,s,{spy:{apply:(j,H,ge)=>{(j.startsWith("signIn")||j.startsWith("createUser"))&&ge.then(ve=>T.next(ve))}}})}}return t=e,An(e,"\u0275fac",function(r){return new(r||t)(Be(F_),Be(L_,8),Be(fa),Be(xe),Be(kS),Be(F$,8),Be(L$,8),Be(V$,8),Be(B$,8),Be($$,8),Be(U$,8),Be(NS,8))}),An(e,"\u0275prov",je({token:t,factory:t.\u0275fac,providedIn:"any"})),e})(),jie=(()=>{var t;class e{constructor(){Qi.A.registerVersion("angularfire",MS.full,"auth-compat")}}return t=e,An(e,"\u0275fac",function(r){return new(r||t)}),An(e,"\u0275mod",Uo({type:t})),An(e,"\u0275inj",On({providers:[wa]})),e})();const H$_firebaseConfig={apiKey:"AIzaSyCBAWFeVOqgBOCrTH9pDMjG_1DA6lbJZdA",authDomain:"codb-54514.firebaseapp.com",databaseURL:"https://codb-54514-default-rtdb.europe-west1.firebasedatabase.app",projectId:"codb-54514",storageBucket:"codb-54514.appspot.com",messagingSenderId:"377890774552",appId:"1:377890774552:web:4f408209f000ade59ead6d",measurementId:"G-CJ7SJDWPXP"};let z$=(()=>{var t;class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Rl),E(He))},t.\u0275dir=xt({type:t}),e})(),gd=(()=>{var t;class e extends z${}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=xn(t)))(i||t)}})(),t.\u0275dir=xt({type:t,features:[ln]}),e})();const Po=new lt(""),Gie={provide:Po,useExisting:kn(()=>HE),multi:!0},qie=new lt("");let HE=(()=>{var t;class e extends z${constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Wie(){const t=kc()?kc().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(r){this.setProperty("value",null==r?"":r)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Rl),E(He),E(qie,8))},t.\u0275dir=xt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Ft("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Wn([Gie]),ln]}),e})();function $c(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}const ki=new lt(""),Uc=new lt("");function zE(t){return null}function tU(t){return null!=t}function nU(t){return c_(t)?er(t):t}function rU(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function iU(t,e){return e.map(n=>n(t))}function oU(t){return t.map(e=>function Qie(t){return!t.validate}(e)?e:n=>e.validate(n))}function LS(t){return null!=t?function sU(t){if(!t)return null;const e=t.filter(tU);return 0==e.length?null:function(n){return rU(iU(n,e))}}(oU(t)):null}function VS(t){return null!=t?function aU(t){if(!t)return null;const e=t.filter(tU);return 0==e.length?null:function(n){return function Hie(...t){const e=EB(t),{args:n,keys:r}=wB(t),i=new $n(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let h=0;h<s;h++){let p=!1;Qo(n[h]).subscribe(kt(o,m=>{p||(p=!0,c--),a[h]=m},()=>l--,void 0,()=>{(!l||!p)&&(c||o.next(r?CB(r,a):a),o.complete())}))}});return e?i.pipe(JD(e)):i}(iU(n,e).map(nU)).pipe(Et(rU))}}(oU(t)):null}function lU(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function BS(t){return t?Array.isArray(t)?t:[t]:[]}function GE(t,e){return Array.isArray(t)?t.includes(e):t===e}function dU(t,e){const n=BS(e);return BS(t).forEach(i=>{GE(n,i)||n.push(i)}),n}function hU(t,e){return BS(e).filter(n=>!GE(t,n))}class fU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=LS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=VS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class xo extends fU{get formDirective(){return null}get path(){return null}}class Vl extends fU{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class pU{constructor(e){this._cd=e}get isTouched(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.touched)}get isUntouched(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.untouched)}get isPristine(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.pristine)}get isDirty(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.dirty)}get isValid(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.valid)}get isInvalid(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.invalid)}get isPending(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.pending)}get isSubmitted(){var e;return!(null===(e=this._cd)||void 0===e||!e.submitted)}}let gU=(()=>{var t;class e extends pU{constructor(r){super(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Vl,2))},t.\u0275dir=xt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&$0("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ln]}),e})();const V_="VALID",qE="INVALID",ip="PENDING",B_="DISABLED";function KE(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class zS{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===V_}get invalid(){return this.status===qE}get pending(){return this.status==ip}get disabled(){return this.status===B_}get enabled(){return this.status!==B_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(dU(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dU(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hU(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hU(e,this._rawAsyncValidators))}hasValidator(e){return GE(this._rawValidators,e)}hasAsyncValidator(e){return GE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ip,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=B_,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=V_,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===V_||this.status===ip)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?B_:V_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ip,this._hasOwnPendingAsyncValidator=!0;const n=nU(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new sr,this.statusChanges=new sr}_calculateStatus(){return this._allControlsDisabled()?B_:this.errors?qE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ip)?ip:this._anyControlsHaveStatus(qE)?qE:V_}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){KE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function eoe(t){return Array.isArray(t)?LS(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function toe(t){return Array.isArray(t)?VS(t):t||null}(this._rawAsyncValidators)}}const op=new lt("CallSetDisabledState",{providedIn:"root",factory:()=>QE}),QE="always";function $_(t,e,n=QE){var r,i;(function WS(t,e){const n=function cU(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(lU(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function uU(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(lU(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();ZE(e._rawValidators,i),ZE(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&(null===(r=(i=e.valueAccessor).setDisabledState)||void 0===r||r.call(i,t.disabled)),function ioe(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&yU(t,e)})}(t,e),function soe(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function ooe(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&yU(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function roe(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function ZE(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function yU(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function wU(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function CU(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}Promise.resolve();const bU=class extends zS{constructor(e=null,n,r){super(function jS(t){return(KE(t)?t.validators:t)||null}(n),function HS(t,e){return(KE(e)?e.asyncValidators:t)||null}(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),KE(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=CU(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wU(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wU(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){CU(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},poe={provide:Vl,useExisting:kn(()=>XS)},DU=Promise.resolve();let XS=(()=>{var t;class e extends Vl{constructor(r,i,o,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new bU,this._registered=!1,this.name="",this.update=new sr,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=function QS(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===HE?n=o:function coe(t){return Object.getPrototypeOf(t.constructor)===gd}(o)?r=o:i=o}),i||r||n||null}(0,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){const i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),function KS(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){$_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(r){DU.then(()=>{var i;this.control.setValue(r,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(r){const i=r.isDisabled.currentValue,o=0!==i&&Vf(i);DU.then(()=>{var s;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(r){return this._parent?function YE(t,e){return[...e.path,t]}(r,this._parent):[r]}}return(t=e).\u0275fac=function(r){return new(r||t)(E(xo,9),E(ki,10),E(Uc,10),E(Po,10),E(at,8),E(op,8))},t.\u0275dir=xt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Jn.None,"disabled","isDisabled"],model:[Jn.None,"ngModel","model"],options:[Jn.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Wn([poe]),ln,Gi]}),e})();const Toe={provide:Po,useExisting:kn(()=>tR),multi:!0};function OU(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let tR=(()=>{var t;class e extends gd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;const o=OU(this._getOptionId(r),r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){const i=function Aoe(t){return t.split(":")[0]}(r);return this._optionMap.has(i)?this._optionMap.get(i):r}}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=xn(t)))(i||t)}})(),t.\u0275dir=xt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&Ft("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Wn([Toe]),ln]}),e})(),FU=(()=>{var t;class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){null!=this._select&&(this._select._optionMap.set(this.id,r),this._setElementValue(OU(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return(t=e).\u0275fac=function(r){return new(r||t)(E(He),E(Rl),E(tR,9))},t.\u0275dir=xt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const Doe={provide:Po,useExisting:kn(()=>nR),multi:!0};function LU(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let nR=(()=>{var t;class e extends gd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){let i;if(this.value=r,Array.isArray(r)){const o=r.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else i=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{const o=[],s=i.selectedOptions;if(void 0!==s){const a=s;for(let l=0;l<a.length;l++){const h=this._getOptionValue(a[l].value);o.push(h)}}else{const a=i.options;for(let l=0;l<a.length;l++){const c=a[l];if(c.selected){const h=this._getOptionValue(c.value);o.push(h)}}}this.value=o,r(o)}}_registerOption(r){const i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){const i=function Soe(t){return t.split(":")[0]}(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=xn(t)))(i||t)}})(),t.\u0275dir=xt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&Ft("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Wn([Doe]),ln]}),e})(),VU=(()=>{var t;class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){null!=this._select&&(this._value=r,this._setElementValue(LU(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(LU(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return(t=e).\u0275fac=function(r){return new(r||t)(E(He),E(Rl),E(nR,9))},t.\u0275dir=xt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();function $U(t){return"number"==typeof t?t:parseFloat(t)}let md=(()=>{var t;class e{constructor(){this._validator=zE}ngOnChanges(r){if(this.inputName in r){const i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):zE,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return null!=r}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275dir=xt({type:t,features:[Gi]}),e})();const Roe={provide:ki,useExisting:kn(()=>rR),multi:!0};let rR=(()=>{var t;class e extends md{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=r=>$U(r),this.createValidator=r=>function K$(t){return e=>{if($c(e.value)||$c(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(r)}}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=xn(t)))(i||t)}})(),t.\u0275dir=xt({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Us("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[Wn([Roe]),ln]}),e})();const Poe={provide:ki,useExisting:kn(()=>iR),multi:!0};let iR=(()=>{var t;class e extends md{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=r=>$U(r),this.createValidator=r=>function q$(t){return e=>{if($c(e.value)||$c(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(r)}}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=xn(t)))(i||t)}})(),t.\u0275dir=xt({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Us("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Wn([Poe]),ln]}),e})(),Loe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Uo({type:t}),t.\u0275inj=On({}),e})(),Boe=(()=>{var t;class e{static withConfig(r){var i;return{ngModule:e,providers:[{provide:op,useValue:null!==(i=r.callSetDisabledState)&&void 0!==i?i:QE}]}}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Uo({type:t}),t.\u0275inj=On({imports:[Loe]}),e})();class $oe{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,n){const r=this.m.get(e);return void 0!==r?r:n}getBoolean(e,n=!1){const r=this.m.get(e);return void 0===r?n:"string"==typeof r?"true"===r:!!r}getNumber(e,n){const r=parseFloat(this.m.get(e));return isNaN(r)?void 0!==n?n:NaN:r}set(e,n){this.m.set(e,n)}}const jc=new $oe,KU=t=>YU(t),YU=(t=window)=>{if(typeof t>"u")return[];t.Ionic=t.Ionic||{};let e=t.Ionic.platforms;return null==e&&(e=t.Ionic.platforms=Goe(t),e.forEach(n=>t.document.documentElement.classList.add(`plt-${n}`))),e},Goe=t=>{const e=jc.get("platform");return Object.keys(tj).filter(n=>{const r=null==e?void 0:e[n];return"function"==typeof r?r(t):tj[n](t)})},sR=t=>!!(_d(t,/iPad/i)||_d(t,/Macintosh/i)&&ew(t)),XU=t=>_d(t,/android|sink/i),ew=t=>tse(t,"(any-pointer:coarse)"),ZU=t=>JU(t)||ej(t),JU=t=>!!(t.cordova||t.phonegap||t.PhoneGap),ej=t=>{const e=t.Capacitor;return!(null==e||!e.isNative)},_d=(t,e)=>e.test(t.navigator.userAgent),tse=(t,e)=>{var n;return null===(n=t.matchMedia)||void 0===n?void 0:n.call(t,e).matches},tj={ipad:sR,iphone:t=>_d(t,/iPhone/i),ios:t=>_d(t,/iPhone|iPod/i)||sR(t),android:XU,phablet:t=>{const e=t.innerWidth,n=t.innerHeight,r=Math.min(e,n),i=Math.max(e,n);return r>390&&r<520&&i>620&&i<800},tablet:t=>{const e=t.innerWidth,n=t.innerHeight,r=Math.min(e,n),i=Math.max(e,n);return sR(t)||(t=>XU(t)&&!_d(t,/mobile/i))(t)||r>460&&r<820&&i>780&&i<1400},cordova:JU,capacitor:ej,electron:t=>_d(t,/electron/i),pwa:t=>{var e;return!!(null!==(e=t.matchMedia)&&void 0!==e&&e.call(t,"(display-mode: standalone)").matches||t.navigator.standalone)},mobile:ew,mobileweb:t=>ew(t)&&!ZU(t),desktop:t=>!ew(t),hybrid:ZU};var j_=le(6031),nse=le(1656);const rse=["addListener","removeListener"],ise=["addEventListener","removeEventListener"],ose=["on","off"];function tw(t,e,n,r){if(wt(n)&&(r=n,n=void 0),r)return tw(t,e,n).pipe(JD(r));const[i,o]=function lse(t){return wt(t.addEventListener)&&wt(t.removeEventListener)}(t)?ise.map(s=>a=>t[s](e,a,n)):function sse(t){return wt(t.addListener)&&wt(t.removeListener)}(t)?rse.map(nj(t,e)):function ase(t){return wt(t.on)&&wt(t.off)}(t)?ose.map(nj(t,e)):[];if(!i&&XD(t))return Ki(s=>tw(s,e,n))(Qo(t));if(!i)throw new TypeError("Invalid event target");return new $n(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return i(a),()=>o(a)})}function nj(t,e){return n=>r=>t[n](e,r)}function rj(t,e=Cr){return t=null!=t?t:cse,bt((n,r)=>{let i,o=!0;n.subscribe(kt(r,s=>{const a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function cse(t,e){return t===e}let dse=(()=>{class t{constructor(n,r){this.doc=n,this.backButton=new $,this.keyboardDidShow=new $,this.keyboardDidHide=new $,this.pause=new $,this.resume=new $,this.resize=new $,r.run(()=>{var i;let o;this.win=n.defaultView,this.backButton.subscribeWithPriority=function(s,a){return this.subscribe(l=>l.register(s,c=>r.run(()=>a(c))))},ap(this.pause,n,"pause",r),ap(this.resume,n,"resume",r),ap(this.backButton,n,"ionBackButton",r),ap(this.resize,this.win,"resize",r),ap(this.keyboardDidShow,this.win,"ionKeyboardDidShow",r),ap(this.keyboardDidHide,this.win,"ionKeyboardDidHide",r),this._readyPromise=new Promise(s=>{o=s}),null!==(i=this.win)&&void 0!==i&&i.cordova?n.addEventListener("deviceready",()=>{o("cordova")},{once:!0}):o("dom")})}is(n){return((t,e)=>("string"==typeof t&&(e=t,t=void 0),KU(t).includes(e)))(this.win,n)}platforms(){return KU(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(n){return hse(this.win.location.href,n)}isLandscape(){return!this.isPortrait()}isPortrait(){var n,r;return null===(n=(r=this.win).matchMedia)||void 0===n?void 0:n.call(r,"(orientation: portrait)").matches}testUserAgent(n){const r=this.win.navigator;return!!(null!=r&&r.userAgent&&r.userAgent.indexOf(n)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return t.\u0275fac=function(n){return new(n||t)(Be(Ko),Be(xe))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const hse=(t,e)=>{e=e.replace(/[[\]\\]/g,"\\$&");const r=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return r?decodeURIComponent(r[1].replace(/\+/g," ")):null},ap=(t,e,n,r)=>{e&&e.addEventListener(n,i=>{r.run(()=>{t.next(null!=i?i.detail:void 0)})})};let lp=(()=>{class t{constructor(n,r,i,o){this.location=r,this.serializer=i,this.router=o,this.direction=ij,this.animated=oj,this.guessDirection="forward",this.lastNavId=-1,o&&o.events.subscribe(s=>{if(s instanceof D_){const a=s.restoredState?s.restoredState.navigationId:s.id;this.guessDirection=a<this.lastNavId?"back":"forward",this.guessAnimation=s.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?s.id:a}}),n.backButton.subscribeWithPriority(0,s=>{this.pop(),s()})}navigateForward(n,r={}){return this.setDirection("forward",r.animated,r.animationDirection,r.animation),this.navigate(n,r)}navigateBack(n,r={}){return this.setDirection("back",r.animated,r.animationDirection,r.animation),this.navigate(n,r)}navigateRoot(n,r={}){return this.setDirection("root",r.animated,r.animationDirection,r.animation),this.navigate(n,r)}back(n={animated:!0,animationDirection:"back"}){return this.setDirection("back",n.animated,n.animationDirection,n.animation),this.location.back()}pop(){var n=this;return(0,y.A)(function*(){let r=n.topOutlet;for(;r;){if(yield r.pop())return!0;r=r.parentOutlet}return!1})()}setDirection(n,r,i,o){this.direction=n,this.animated=fse(n,r,i),this.animationBuilder=o}setTopOutlet(n){this.topOutlet=n}consumeTransition(){let r,n="root";const i=this.animationBuilder;return"auto"===this.direction?(n=this.guessDirection,r=this.guessAnimation):(r=this.animated,n=this.direction),this.direction=ij,this.animated=oj,this.animationBuilder=void 0,{direction:n,animation:r,animationBuilder:i}}navigate(n,r){if(Array.isArray(n))return this.router.navigate(n,r);{const i=this.serializer.parse(n.toString());return void 0!==r.queryParams&&(i.queryParams={...r.queryParams}),void 0!==r.fragment&&(i.fragment=r.fragment),this.router.navigateByUrl(i,r)}}}return t.\u0275fac=function(n){return new(n||t)(Be(dse),Be(Oc),Be(hd),Be(hr,8))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const fse=(t,e,n)=>{if(!1!==e){if(void 0!==n)return n;if("forward"===t||"back"===t)return t;if("root"===t&&!0===e)return"forward"}},ij="auto",oj=void 0;let aR=(()=>{class t{get(n,r){const i=lR();return i?i.get(n,r):null}getBoolean(n,r){const i=lR();return!!i&&i.getBoolean(n,r)}getNumber(n,r){const i=lR();return i?i.getNumber(n,r):0}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const sj=new lt("USERCONFIG"),lR=()=>{if(typeof window<"u"){const t=window.Ionic;if(null!=t&&t.config)return t.config}return null};class aj{constructor(e={}){this.data=e}get(e){return this.data[e]}}let H_=(()=>{class t{constructor(){this.zone=$e(xe),this.applicationRef=$e(xl)}create(n,r,i){return new pse(n,r,this.applicationRef,this.zone,i)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac}),t})();class pse{constructor(e,n,r,i,o){this.environmentInjector=e,this.injector=n,this.applicationRef=r,this.zone=i,this.elementReferenceKey=o,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(e,n,r,i){return this.zone.run(()=>new Promise(o=>{const s={...r};void 0!==this.elementReferenceKey&&(s[this.elementReferenceKey]=e),o(gse(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,e,n,s,i,this.elementReferenceKey))}))}removeViewFromDom(e,n){return this.zone.run(()=>new Promise(r=>{const i=this.elRefMap.get(n);if(i){i.destroy(),this.elRefMap.delete(n);const o=this.elEventsMap.get(n);o&&(o(),this.elEventsMap.delete(n))}r()}))}}const gse=(t,e,n,r,i,o,s,a,l,c,h)=>{const m=function VZ(t,e){const n=tn(t),r=e.elementInjector||_h();return new zm(n).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}(a,{environmentInjector:e,elementInjector:tt.create({providers:_se(l),parent:n})}),_=m.instance,w=m.location.nativeElement;if(l&&(h&&void 0!==_[h]&&console.error(`[Ionic Error]: ${h} is a reserved property when using ${s.tagName.toLowerCase()}. Rename or remove the "${h}" property from ${a.name}.`),Object.assign(_,l)),c)for(const S of c)w.classList.add(S);const T=lj(t,_,w);return s.appendChild(w),r.attachView(m.hostView),i.set(w,m),o.set(w,T),w},mse=[j_.L,j_.a,j_.b,j_.c,j_.d],lj=(t,e,n)=>t.run(()=>{const r=mse.filter(i=>"function"==typeof e[i]).map(i=>{const o=s=>e[i](s.detail);return n.addEventListener(i,o),()=>n.removeEventListener(i,o)});return()=>r.forEach(i=>i())}),cj=new lt("NavParamsToken"),_se=t=>[{provide:cj,useValue:t},{provide:aj,useFactory:vse,deps:[cj]}],vse=t=>new aj(t),uj=(t,e)=>((t=t.filter(n=>n.stackId!==e.stackId)).push(e),t),uR=(t,e)=>{const n=t.createUrlTree(["."],{relativeTo:e});return t.serializeUrl(n)},dj=(t,e)=>!e||t.stackId!==e.stackId,Pse=(t,e)=>{if(!t)return;const n=hj(e);for(let r=0;r<n.length;r++){if(r>=t.length)return n[r];if(n[r]!==t[r])return}},hj=t=>t.split("/").map(e=>e.trim()).filter(e=>""!==e),fj=t=>{t&&(t.ref.destroy(),t.unlistenEvents())};class xse{constructor(e,n,r,i,o,s){this.containerEl=n,this.router=r,this.navCtrl=i,this.zone=o,this.location=s,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==e?hj(e):void 0}createView(e,n){var r;const i=uR(this.router,n),o=null==e||null===(r=e.location)||void 0===r?void 0:r.nativeElement,s=lj(this.zone,e.instance,o);return{id:this.nextId++,stackId:Pse(this.tabsPrefix,i),unlistenEvents:s,element:o,ref:e,url:i}}getExistingView(e){const n=uR(this.router,e),r=this.views.find(i=>i.url===n);return r&&r.ref.changeDetectorRef.reattach(),r}setActive(e){var n,r;const i=this.navCtrl.consumeTransition();let{direction:o,animation:s,animationBuilder:a}=i;const l=this.activeView,c=dj(e,l);c&&(o="back",s=void 0);const h=this.views.slice();let p;const m=this.router;m.getCurrentNavigation?p=m.getCurrentNavigation():null!==(n=m.navigations)&&void 0!==n&&n.value&&(p=m.navigations.value),null!==(r=p)&&void 0!==r&&null!==(r=r.extras)&&void 0!==r&&r.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const _=this.views.includes(e),w=this.insertView(e,o);_||e.ref.changeDetectorRef.detectChanges();const T=e.animationBuilder;return void 0===a&&"back"===o&&!c&&void 0!==T&&(a=T),l&&(l.animationBuilder=a),this.zone.runOutsideAngular(()=>this.wait(()=>(l&&l.ref.changeDetectorRef.detach(),e.ref.changeDetectorRef.reattach(),this.transition(e,l,s,this.canGoBack(1),!1,a).then(()=>Mse(e,w,h,this.location,this.zone)).then(()=>({enteringView:e,direction:o,animation:s,tabSwitch:c})))))}canGoBack(e,n=this.getActiveStackId()){return this.getStack(n).length>e}pop(e,n=this.getActiveStackId()){return this.zone.run(()=>{const r=this.getStack(n);if(r.length<=e)return Promise.resolve(!1);const i=r[r.length-e-1];let o=i.url;const s=i.savedData;if(s){var a;const c=s.get("primary");null!=c&&null!==(a=c.route)&&void 0!==a&&null!==(a=a._routerState)&&void 0!==a&&a.snapshot.url&&(o=c.route._routerState.snapshot.url)}const{animationBuilder:l}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(o,{...i.savedExtras,animation:l}).then(()=>!0)})}startBackTransition(){const e=this.activeView;if(e){const n=this.getStack(e.stackId),r=n[n.length-2],i=r.animationBuilder;return this.wait(()=>this.transition(r,e,"back",this.canGoBack(2),!0,i))}return Promise.resolve()}endBackTransition(e){e?(this.skipTransition=!0,this.pop(1)):this.activeView&&pj(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(e){const n=this.getStack(e);return n.length>0?n[n.length-1]:void 0}getRootUrl(e){const n=this.getStack(e);return n.length>0?n[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}getActiveView(){return this.activeView}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(fj),this.activeView=void 0,this.views=[]}getStack(e){return this.views.filter(n=>n.stackId===e)}insertView(e,n){return this.activeView=e,this.views=((t,e,n)=>"root"===n?uj(t,e):"forward"===n?((t,e)=>(t.indexOf(e)>=0?t=t.filter(r=>r.stackId!==e.stackId||r.id<=e.id):t.push(e),t))(t,e):((t,e)=>t.indexOf(e)>=0?t.filter(r=>r.stackId!==e.stackId||r.id<=e.id):uj(t,e))(t,e))(this.views,e,n),this.views.slice()}transition(e,n,r,i,o,s){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(n===e)return Promise.resolve(!1);const a=e?e.element:void 0,l=n?n.element:void 0,c=this.containerEl;return a&&a!==l&&(a.classList.add("ion-page"),a.classList.add("ion-page-invisible"),a.parentElement!==c&&c.appendChild(a),c.commit)?c.commit(a,l,{duration:void 0===r?0:void 0,direction:r,showGoBack:i,progressAnimation:o,animationBuilder:s}):Promise.resolve(!1)}wait(e){var n=this;return(0,y.A)(function*(){void 0!==n.runningTask&&(yield n.runningTask,n.runningTask=void 0);const r=n.runningTask=e();return r.finally(()=>n.runningTask=void 0),r})()}}const Mse=(t,e,n,r,i)=>"function"==typeof requestAnimationFrame?new Promise(o=>{requestAnimationFrame(()=>{pj(t,e,n,r,i),o()})}):Promise.resolve(),pj=(t,e,n,r,i)=>{i.run(()=>n.filter(o=>!e.includes(o)).forEach(fj)),e.forEach(o=>{const a=r.path().split("?")[0].split("#")[0];if(o!==t&&o.url!==a){const l=o.element;l.setAttribute("aria-hidden","true"),l.classList.add("ion-page-hidden"),o.ref.changeDetectorRef.detach()}})};let gj=(()=>{class t{constructor(n,r,i,o,s,a,l,c){this.parentOutlet=c,this.activatedView=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new K(null),this.activated=null,this._activatedRoute=null,this.name=dn,this.stackWillChange=new sr,this.stackDidChange=new sr,this.activateEvents=new sr,this.deactivateEvents=new sr,this.parentContexts=$e(fd),this.location=$e(Bs),this.environmentInjector=$e(Gr),this.inputBinder=$e(mj,{optional:!0}),this.supportsBindingToComponentInputs=!0,this.config=$e(aR),this.navCtrl=$e(lp),this.nativeEl=o.nativeElement,this.name=n||dn,this.tabsPrefix="true"===r?uR(s,l):void 0,this.stackCtrl=new xse(this.tabsPrefix,this.nativeEl,s,this.navCtrl,a,i),this.parentContexts.onChildOutletCreated(this.name,this)}get activatedComponentRef(){return this.activated}set animation(n){this.nativeEl.animation=n}set animated(n){this.nativeEl.animated=n}set swipeGesture(n){this._swipeGesture=n,this.nativeEl.swipeHandler=n?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:r=>this.stackCtrl.endBackTransition(r)}:void 0}ngOnDestroy(){var n;this.stackCtrl.destroy(),null===(n=this.inputBinder)||void 0===n||n.unsubscribeFromRouteData(this)}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const n=this.getContext();null!=n&&n.route&&this.activateWith(n.route,n.injector)}new Promise(n=>(0,nse.c)(this.nativeEl,n)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(n,r){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const r=this.getContext();this.activatedView.savedData=new Map(r.children.contexts);const i=this.activatedView.savedData.get("primary");if(i&&r.route&&(i.route={...r.route}),this.activatedView.savedExtras={},r.route){const o=r.route.snapshot;this.activatedView.savedExtras.queryParams=o.queryParams,this.activatedView.savedExtras.fragment=o.fragment}}const n=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){var i;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;let o,s=this.stackCtrl.getExistingView(n);if(s){o=this.activated=s.ref;const c=s.savedData;c&&(this.getContext().children.contexts=c),this.updateActivatedRouteProxy(o.instance,n)}else{var a;const c=n._futureSnapshot,h=this.parentContexts.getOrCreateContext(this.name).children,p=new K(null),m=this.createActivatedRouteProxy(p,n),_=new Nse(m,h,this.location.injector),w=null!==(a=c.routeConfig.component)&&void 0!==a?a:c.component;o=this.activated=this.location.createComponent(w,{index:this.location.length,injector:_,environmentInjector:null!=r?r:this.environmentInjector}),p.next(o.instance),s=this.stackCtrl.createView(this.activated,n),this.proxyMap.set(o.instance,m),this.currentActivatedRoute$.next({component:o.instance,activatedRoute:n})}null===(i=this.inputBinder)||void 0===i||i.bindActivatedRouteToOutletComponent(this),this.activatedView=s,this.navCtrl.setTopOutlet(this);const l=this.stackCtrl.getActiveView();this.stackWillChange.emit({enteringView:s,tabSwitch:dj(s,l)}),this.stackCtrl.setActive(s).then(c=>{this.activateEvents.emit(o.instance),this.stackDidChange.emit(c)})}canGoBack(n=1,r){return this.stackCtrl.canGoBack(n,r)}pop(n=1,r){return this.stackCtrl.pop(n,r)}getLastUrl(n){const r=this.stackCtrl.getLastUrl(n);return r?r.url:void 0}getLastRouteView(n){return this.stackCtrl.getLastUrl(n)}getRootView(n){return this.stackCtrl.getRootUrl(n)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(n,r){const i=new Ea;return i._futureSnapshot=r._futureSnapshot,i._routerState=r._routerState,i.snapshot=r.snapshot,i.outlet=r.outlet,i.component=r.component,i._paramMap=this.proxyObservable(n,"paramMap"),i._queryParamMap=this.proxyObservable(n,"queryParamMap"),i.url=this.proxyObservable(n,"url"),i.params=this.proxyObservable(n,"params"),i.queryParams=this.proxyObservable(n,"queryParams"),i.fragment=this.proxyObservable(n,"fragment"),i.data=this.proxyObservable(n,"data"),i}proxyObservable(n,r){return n.pipe(gs(i=>!!i),$r(i=>this.currentActivatedRoute$.pipe(gs(o=>null!==o&&o.component===i),$r(o=>o&&o.activatedRoute[r]),rj())))}updateActivatedRouteProxy(n,r){const i=this.proxyMap.get(n);if(!i)throw new Error("Could not find activated route proxy for view");i._futureSnapshot=r._futureSnapshot,i._routerState=r._routerState,i.snapshot=r.snapshot,i.outlet=r.outlet,i.component=r.component,this.currentActivatedRoute$.next({component:n,activatedRoute:r})}}return t.\u0275fac=function(n){return new(n||t)(ha("name"),ha("tabs"),E(Oc),E(He),E(hr),E(xe),E(Ea),E(t,12))},t.\u0275dir=xt({type:t,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",name:"name"},outputs:{stackWillChange:"stackWillChange",stackDidChange:"stackDidChange",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Nse{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ea?this.route:e===fd?this.childContexts:this.parent.get(e,n)}}const mj=new lt("");let kse=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){var r;null===(r=this.outletDataSubscriptions.get(n))||void 0===r||r.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=wE([r.queryParams,r.params,r.data]).pipe($r(([o,s,a],l)=>(a={...o,...s,...a},0===l?Gt(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=y2(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac}),t})();function Fse(t){return null!=t&&t.componentInputBindingEnabled?new kse:null}let Bse=(()=>{class t{constructor(n,r,i,o,s){this.locationStrategy=n,this.navCtrl=r,this.elementRef=i,this.router=o,this.routerLink=s,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var n;if(null!==(n=this.routerLink)&&void 0!==n&&n.urlTree){const r=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=r}}onClick(n){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),n.preventDefault()}}return t.\u0275fac=function(n){return new(n||t)(E(js),E(lp),E(He),E(hr),E(Bc,8))},t.\u0275dir=xt({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(n,r){1&n&&Ft("click",function(o){return r.onClick(o)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[Gi]}),t})();const _j=t=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(t):"function"==typeof requestAnimationFrame?requestAnimationFrame(t):setTimeout(t);class vj{constructor(e){this.ctrl=e}create(e){return this.ctrl.create(e||{})}dismiss(e,n,r){return this.ctrl.dismiss(e,n,r)}getTop(){return this.ctrl.getTop()}}le(3503),le(1497),le(2604),le(3003),le(405);var qse=le(8436),Kse=le(464),yj=(le(7818),le(4133)),Qse=(le(8476),le(9081));le(8221),le(9457);const Xse=qse.i,Zse=function(){var t=(0,y.A)(function*(e,n){if(!(typeof window>"u"))return yield Xse(),(0,Qse.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[1,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"positionAnchor":[1,"position-anchor"],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"swipeGesture":[1,"swipe-gesture"],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"swipeGesture":["swipeGestureChanged"],"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]},null,{"value":["valueChanged"]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"placeholder":["placeholderChanged"],"value":["valueChanged"]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"lang":["onLangChanged"],"dir":["onDirChanged"],"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"activated":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"button":["buttonChanged"],"counterFormatter":["counterFormatterChanged"]}],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"formatOptions":[16],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"formatOptions":["formatOptionsChanged"],"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"presentation":["presentationChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[32,"ion-picker-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"],"checked":["styleChanged"],"color":["styleChanged"],"disabled":["styleChanged"]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"compareWith":[1,"compare-with"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]},null,{"disabled":["disabledChanged"]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[33,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"disabled":[4],"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]},null,{"value":["valueChange"]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"legacy":[4]},null,{"checked":["styleChanged"],"disabled":["styleChanged"]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),n)});return function(n,r){return t.apply(this,arguments)}}(),vt=["*"],cae=(t,e)=>{const n=t.prototype;e.forEach(r=>{Object.defineProperty(n,r,{get(){return this.el[r]},set(i){this.z.runOutsideAngular(()=>this.el[r]=i)},configurable:!0})})},uae=(t,e)=>{const n=t.prototype;e.forEach(r=>{n[r]=function(){const i=arguments;return this.z.runOutsideAngular(()=>this.el[r].apply(this.el,i))}})},Qn=(t,e,n)=>{n.forEach(r=>t[r]=tw(e,r))};function Ct(t){return function(n){const{defineCustomElementFn:r,inputs:i,methods:o}=t;return void 0!==r&&r(),i&&cae(n,i),o&&uae(n,o),n}}let Bl=(()=>{let t=class{constructor(n,r,i){this.z=i,n.detach(),this.el=r.nativeElement}};return t.\u0275fac=function(n){return new(n||t)(E(at),E(He),E(xe))},t.\u0275cmp=Ke({type:t,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:vt,decls:1,vars:0,template:function(n,r){1&n&&(gt(),ht(0))},encapsulation:2,changeDetection:0}),t=(0,ct.Cg)([Ct({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],t),t})(),Ij=(()=>{let t=class{constructor(n,r,i){this.z=i,n.detach(),this.el=r.nativeElement,Qn(this,this.el,["ionWillOpen","ionWillClose","ionDidOpen","ionDidClose"])}};return t.\u0275fac=function(n){return new(n||t)(E(at),E(He),E(xe))},t.\u0275cmp=Ke({type:t,selectors:[["ion-menu"]],inputs:{contentId:"contentId",disabled:"disabled",maxEdgeStart:"maxEdgeStart",menuId:"menuId",side:"side",swipeGesture:"swipeGesture",type:"type"},ngContentSelectors:vt,decls:1,vars:0,template:function(n,r){1&n&&(gt(),ht(0))},encapsulation:2,changeDetection:0}),t=(0,ct.Cg)([Ct({inputs:["contentId","disabled","maxEdgeStart","menuId","side","swipeGesture","type"],methods:["isOpen","isActive","open","close","toggle","setOpen"]})],t),t})(),G_=(()=>{class t extends gj{constructor(n,r,i,o,s,a,l,c){super(n,r,i,o,s,a,l,c),this.parentOutlet=c}}return t.\u0275fac=function(n){return new(n||t)(ha("name"),ha("tabs"),E(Oc),E(He),E(hr),E(xe),E(Ea),E(t,12))},t.\u0275dir=xt({type:t,selectors:[["ion-router-outlet"]],features:[ln]}),t})(),rw=(()=>{class t extends Bse{}return t.\u0275fac=(()=>{let e;return function(r){return(e||(e=xn(t)))(r||t)}})(),t.\u0275dir=xt({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],features:[ln]}),t})();const Lle={provide:ki,useExisting:kn(()=>Ej),multi:!0};let Ej=(()=>{class t extends rR{}return t.\u0275fac=(()=>{let e;return function(r){return(e||(e=xn(t)))(r||t)}})(),t.\u0275dir=xt({type:t,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(n,r){2&n&&Us("max",r._enabled?r.max:null)},features:[Wn([Lle]),ln]}),t})();const Vle={provide:ki,useExisting:kn(()=>wj),multi:!0};let wj=(()=>{class t extends iR{}return t.\u0275fac=(()=>{let e;return function(r){return(e||(e=xn(t)))(r||t)}})(),t.\u0275dir=xt({type:t,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,r){2&n&&Us("min",r._enabled?r.min:null)},features:[Wn([Vle]),ln]}),t})(),Ble=(()=>{class t extends vj{constructor(){super(yj.m),this.angularDelegate=$e(H_),this.injector=$e(tt),this.environmentInjector=$e(Gr)}create(n){return super.create({...n,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=je({token:t,factory:t.\u0275fac}),t})();class $le extends vj{constructor(){super(yj.c),this.angularDelegate=$e(H_),this.injector=$e(tt),this.environmentInjector=$e(Gr)}create(e){return super.create({...e,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}const Ule=(t,e,n)=>()=>{const r=e.defaultView;if(r&&typeof window<"u"){(0,Kse.s)({...t,_zoneGate:o=>n.run(o)});const i="__zone_symbol__addEventListener"in e.body?"__zone_symbol__addEventListener":"addEventListener";return function Yse(){var t=[];if(typeof window<"u"){var e=window;(!e.customElements||e.Element&&(!e.Element.prototype.closest||!e.Element.prototype.matches||!e.Element.prototype.remove||!e.Element.prototype.getRootNode))&&t.push(le.e(7278).then(le.t.bind(le,2190,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||e.NodeList&&!e.NodeList.prototype.forEach||!e.fetch||!function(){try{var r=new URL("b","http://a");return r.pathname="c%20d","http://a/c%20d"===r.href&&r.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&t.push(le.e(9329).then(le.t.bind(le,7783,23)))}return Promise.all(t)}().then(()=>Zse(r,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:_j,jmp:o=>n.runOutsideAngular(o),ael(o,s,a,l){o[i](s,a,l)},rel(o,s,a,l){o.removeEventListener(s,a,l)}}))}};let jle=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:sj,useValue:n},{provide:J0,useFactory:Ule,multi:!0,deps:[sj,Ko,xe]},{provide:mj,useFactory:Fse,deps:[hr]}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Uo({type:t}),t.\u0275inj=On({providers:[H_,Ble,$le],imports:[B2]}),t})(),Hle=(()=>{var t;class e{constructor(r,i){this.afAuth=r,this.router=i}login(){const i=document.getElementById("login-email").value,s=document.getElementById("login-password").value;return this.afAuth.signInWithEmailAndPassword(i,s).then(()=>{alert("Login riuscito!"),this.router.navigate(["/home"])}).catch(a=>{alert("Errore durante il login: "+a.message)})}toRegister(){this.router.navigate(["/register"])}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)(E(wa),E(hr))},t.\u0275cmp=Ke({type:t,selectors:[["app-login"]],decls:18,vars:0,consts:[["src","assets/img/extended_logo.jpg",2,"width","90%","height","20rem","object-fit","contain"],[1,"card1",2,"width","90%"],[1,"input1",2,"margin-top","1rem"],["src","assets\\img\\mdi_password-outline.png",1,"input1_img1"],["type","email","id","login-email","placeholder","Email",1,"field1"],["src","assets\\img\\octicon_person-24 (1).png",1,"input1_img1"],["type","password","id","login-password","placeholder","Password",1,"field1"],[1,"button1",2,"width","90%","margin-top","1rem","margin-bottom","1rem","justify-content","center","height","2.5rem",3,"click"],[1,"div1",2,"margin-left","0rem"],["src","assets/img/Vector.png"],[1,"general_paragraph1",2,"margin-left","0.5rem"],[2,"width","100%","text-align","center"],[2,"cursor","pointer",3,"click"]],template:function(r,i){1&r&&(M(0,"body"),Ne(1,"img",0),M(2,"div",1)(3,"div",2),Ne(4,"img",3)(5,"input",4),B(),M(6,"div",2),Ne(7,"img",5)(8,"input",6),B(),M(9,"button",7),Ft("click",function(){return i.login()}),M(10,"div",8),Ne(11,"img",9),M(12,"p",10),ye(13,"Login"),B()()()(),M(14,"p",11),ye(15,"Non possiedi un account?"),M(16,"strong",12),Ft("click",function(){return i.toRegister()}),ye(17,"Registrati"),B()()())}}),e})();function fR(){return bt((t,e)=>{let n,r=!1;t.subscribe(kt(e,i=>{const o=n;n=i,r&&e.next([o,i]),r=!0}))})}var Tt,Ca=le(1362),_s=le(8041),A=le(1076),zle=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ba={},pR=pR||{},on=zle||self;function iw(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function W_(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var gR="closure_uid_"+(1e9*Math.random()>>>0),Wle=0;function qle(t,e,n){return t.call.apply(t.bind,arguments)}function Kle(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function uo(t,e,n){return(uo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qle:Kle).apply(null,arguments)}function ow(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Oi(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function Hc(){this.s=this.s,this.o=this.o}Hc.prototype.s=!1,Hc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Gle(t){Object.prototype.hasOwnProperty.call(t,gR)&&t[gR]||(t[gR]=++Wle)}(this)},Hc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Cj=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function mR(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function bj(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(iw(r)){const i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function ho(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ho.prototype.h=function(){this.defaultPrevented=!0};var Yle=function(){if(!on.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};on.addEventListener("test",n,e),on.removeEventListener("test",n,e)}catch{}return t}();function q_(t){return/^[\s\xa0]*$/.test(t)}function sw(){var t=on.navigator;return t&&(t=t.userAgent)?t:""}function Xa(t){return-1!=sw().indexOf(t)}function _R(t){return _R[" "](t),t}_R[" "]=function(){};var yR,t,Zle=Xa("Opera"),up=Xa("Trident")||Xa("MSIE"),Tj=Xa("Edge"),vR=Tj||up,Aj=Xa("Gecko")&&!(-1!=sw().toLowerCase().indexOf("webkit")&&!Xa("Edge"))&&!(Xa("Trident")||Xa("MSIE"))&&!Xa("Edge"),Jle=-1!=sw().toLowerCase().indexOf("webkit")&&!Xa("Edge");function Dj(){var t=on.document;return t?t.documentMode:void 0}e:{var IR="",ER=(t=sw(),Aj?/rv:([^\);]+)(\)|;)/.exec(t):Tj?/Edge\/([\d\.]+)/.exec(t):up?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Jle?/WebKit\/(\S+)/.exec(t):Zle?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(ER&&(IR=ER?ER[1]:""),up){var wR=Dj();if(null!=wR&&wR>parseFloat(IR)){yR=String(wR);break e}}yR=IR}var ece=on.document&&up&&(Dj()||parseInt(yR,10))||void 0;function K_(t,e){if(ho.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Aj){e:{try{_R(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tce[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&K_.$.h.call(this)}}Oi(K_,ho);var tce={2:"touch",3:"pen",4:"mouse"};K_.prototype.h=function(){K_.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Q_="closure_listenable_"+(1e6*Math.random()|0),nce=0;function rce(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++nce,this.fa=this.ia=!1}function aw(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function bR(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Rj(t){const e={};for(const n in t)e[n]=t[n];return e}const Pj="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xj(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let o=0;o<Pj.length;o++)n=Pj[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function lw(t){this.src=t,this.g={},this.h=0}function TR(t,e){var n=e.type;if(n in t.g){var o,r=t.g[n],i=Cj(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(aw(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function AR(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}lw.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=AR(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):((e=new rce(e,this.src,o,!!r,i)).ia=n,t.push(e)),e};var DR="closure_lm_"+(1e6*Math.random()|0),SR={};function Mj(t,e,n,r,i){if(r&&r.once)return kj(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Mj(t,e[o],n,r,i);return null}return n=MR(n),t&&t[Q_]?t.O(e,n,W_(r)?!!r.capture:!!r,i):Nj(t,e,n,!1,r,i)}function Nj(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=W_(i)?!!i.capture:!!i,a=PR(t);if(a||(t[DR]=a=new lw(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function oce(){const e=sce;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Yle||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Fj(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function kj(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)kj(t,e[o],n,r,i);return null}return n=MR(n),t&&t[Q_]?t.P(e,n,W_(r)?!!r.capture:!!r,i):Nj(t,e,n,!0,r,i)}function Oj(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Oj(t,e[o],n,r,i);else r=W_(r)?!!r.capture:!!r,n=MR(n),t&&t[Q_]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=AR(o=t.g[e],n,r,i))&&(aw(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=PR(t))&&(e=t.g[e.toString()],t=-1,e&&(t=AR(e,n,r,i)),(n=-1<t?e[t]:null)&&RR(n))}function RR(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Q_])TR(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Fj(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=PR(e))?(TR(n,t),0==n.h&&(n.src=null,e[DR]=null)):aw(t)}}}function Fj(t){return t in SR?SR[t]:SR[t]="on"+t}function sce(t,e){if(t.fa)t=!0;else{e=new K_(e,this);var n=t.listener,r=t.la||t.src;t.ia&&RR(t),t=n.call(r,e)}return t}function PR(t){return(t=t[DR])instanceof lw?t:null}var xR="__closure_events_fn_"+(1e9*Math.random()>>>0);function MR(t){return"function"==typeof t?t:(t[xR]||(t[xR]=function(e){return t.handleEvent(e)}),t[xR])}function Fi(){Hc.call(this),this.i=new lw(this),this.S=this,this.J=null}function Yi(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new ho(e,t);else if(e instanceof ho)e.target=e.target||t;else{var i=e;xj(e=new ho(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=cw(s,r,!0,e)&&i}if(i=cw(s=e.g=t,r,!0,e)&&i,i=cw(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=cw(s=e.g=n[o],r,!1,e)&&i}function cw(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&TR(t.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Oi(Fi,Hc),Fi.prototype[Q_]=!0,Fi.prototype.removeEventListener=function(t,e,n,r){Oj(this,t,e,n,r)},Fi.prototype.N=function(){if(Fi.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)aw(n[r]);delete t.g[e],t.h--}}this.J=null},Fi.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Fi.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var NR=on.JSON.stringify;function lce(){var t=kR;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Lj=new class ace{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new uce,t=>t.reset());class uce{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function dce(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function hce(t){on.setTimeout(()=>{throw t},0)}let Y_,X_=!1,kR=new class cce{constructor(){this.h=this.g=null}add(e,n){const r=Lj.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},Vj=()=>{const t=on.Promise.resolve(void 0);Y_=()=>{t.then(fce)}};var fce=()=>{for(var t;t=lce();){try{t.h.call(t.g)}catch(n){hce(n)}var e=Lj;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}X_=!1};function uw(t,e){Fi.call(this),this.h=t||1,this.g=e||on,this.j=uo(this.qb,this),this.l=Date.now()}function OR(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function FR(t,e,n){if("function"==typeof t)n&&(t=uo(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=uo(t.handleEvent,t)}return 2147483647<Number(e)?-1:on.setTimeout(t,e||0)}function Bj(t){t.g=FR(()=>{t.g=null,t.i&&(t.i=!1,Bj(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Oi(uw,Fi),(Tt=uw.prototype).ga=!1,Tt.T=null,Tt.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Yi(this,"tick"),this.ga&&(OR(this),this.start()))}},Tt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Tt.N=function(){uw.$.N.call(this),OR(this),delete this.g};class pce extends Hc{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Bj(this)}N(){super.N(),this.g&&(on.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Z_(t){Hc.call(this),this.h=t,this.g={}}Oi(Z_,Hc);var $j=[];function Uj(t,e,n,r){Array.isArray(n)||(n&&($j[0]=n.toString()),n=$j);for(var i=0;i<n.length;i++){var o=Mj(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function jj(t){bR(t.g,function(e,n){this.g.hasOwnProperty(n)&&RR(e)},t),t.g={}}function dw(){this.g=!0}function dp(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function vce(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return NR(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Z_.prototype.N=function(){Z_.$.N.call(this),jj(this)},Z_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dw.prototype.Ea=function(){this.g=!1},dw.prototype.info=function(){};var vd={},Hj=null;function hw(){return Hj=Hj||new Fi}function zj(t){ho.call(this,vd.Ta,t)}function J_(t){const e=hw();Yi(e,new zj(e))}function Gj(t,e){ho.call(this,vd.STAT_EVENT,t),this.stat=e}function Mo(t){const e=hw();Yi(e,new Gj(e,t))}function Wj(t,e){ho.call(this,vd.Ua,t),this.size=e}function ev(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return on.setTimeout(function(){t()},e)}vd.Ta="serverreachability",Oi(zj,ho),vd.STAT_EVENT="statevent",Oi(Gj,ho),vd.Ua="timingevent",Oi(Wj,ho);var fw={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},qj={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function LR(){}function Qj(){}LR.prototype.h=null;var $R,tv={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function VR(){ho.call(this,"d")}function BR(){ho.call(this,"c")}function pw(){}function nv(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Z_(this),this.P=yce,this.V=new uw(t=vR?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Yj}function Yj(){this.i=null,this.g="",this.h=!1}Oi(VR,ho),Oi(BR,ho),Oi(pw,LR),pw.prototype.g=function(){return new XMLHttpRequest},pw.prototype.i=function(){return{}},$R=new pw;var yce=45e3,Xj={},UR={};function jR(t,e,n){t.L=1,t.A=vw($l(e)),t.u=n,t.S=!0,Zj(t,null)}function Zj(t,e){t.G=Date.now(),rv(t),t.B=$l(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),l4(n.i,"t",r),t.o=0,n=t.l.J,t.h=new Yj,t.g=M4(t.l,n?e:null,!t.u),0<t.O&&(t.M=new pce(uo(t.Pa,t,t.g),t.O)),Uj(t.U,t.g,"readystatechange",t.nb),e=t.I?Rj(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),J_(),function gce(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var p=h.split("_");s=2<=p.length&&"type"==p[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.v,t.B,t.m,t.W,t.u)}function Jj(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function e4(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=Ice(t,n),i==UR){4==e&&(t.s=4,Mo(14),r=!1),dp(t.j,t.m,null,"[Incomplete Response]");break}if(i==Xj){t.s=4,Mo(15),dp(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}dp(t.j,t.m,i,null),HR(t,i)}Jj(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,Mo(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),YR(e),e.M=!0,Mo(11))):(dp(t.j,t.m,n,"[Invalid Chunked Response]"),yd(t),iv(t))}function Ice(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?UR:(n=Number(e.substring(n,r)),isNaN(n)?Xj:(r+=1)+n>e.length?UR:(e=e.slice(r,r+n),t.o=r+n,e))}function rv(t){t.Y=Date.now()+t.P,t4(t,t.P)}function t4(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=ev(uo(t.lb,t),e)}function gw(t){t.C&&(on.clearTimeout(t.C),t.C=null)}function iv(t){0==t.l.H||t.J||S4(t.l,t)}function yd(t){gw(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,OR(t.V),jj(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function HR(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||zR(n.i,t)))if(!t.K&&zR(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;bw(n),ww(n)}QR(n),Mo(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ev(uo(n.ib,n),6e3));if(1>=d4(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ed(n,11)}else if((t.K||n.g==t)&&bw(n),!q_(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const h=c[3];null!=h&&(n.ra=h,n.l.info("VER="+n.ra));const p=c[4];null!=p&&(n.Ga=p,n.l.info("SVER="+n.Ga));const m=c[5];null!=m&&"number"==typeof m&&0<m&&(n.L=r=1.5*m,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const _=t.g;if(_){const w=_.g?_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var o=r.i;o.g||-1==w.indexOf("spdy")&&-1==w.indexOf("quic")&&-1==w.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(GR(o,o.h),o.h=null))}if(r.F){const T=_.g?_.g.getResponseHeader("X-HTTP-Session-Id"):null;T&&(r.Da=T,Dr(r.I,r.F,T))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=t;if((r=n).wa=x4(r,r.J?r.pa:null,r.Y),s.K){h4(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.C&&(gw(a),rv(a)),r.g=s}else A4(r);0<n.j.length&&Cw(n)}else"stop"!=c[0]&&"close"!=c[0]||Ed(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ed(n,7):KR(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}J_()}catch{}}function n4(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(iw(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function wce(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(iw(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function Ece(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(iw(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(Tt=nv.prototype).setTimeout=function(t){this.P=t},Tt.nb=function(t){t=t.target;const e=this.M;e&&3==Za(t)?e.l():this.Pa(t)},Tt.Pa=function(t){try{if(t==this.g)e:{const h=Za(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||vR||this.g&&(this.h.h||this.g.ja()||I4(this.g)))){this.J||4!=h||7==e||J_(),gw(this);var n=this.g.da();this.ca=n;t:if(Jj(this)){var r=I4(this.g);t="";var i=r.length,o=4==Za(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){yd(this),iv(this);var s="";break t}this.h.i=new on.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function mce(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q_(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,Mo(12),yd(this),iv(this);break e}dp(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,HR(this,n)}this.S?(e4(this,h,s),vR&&this.i&&3==h&&(Uj(this.U,this.V,"tick",this.mb),this.V.start())):(dp(this.j,this.m,s,null),HR(this,s)),4==h&&yd(this),this.i&&!this.J&&(4==h?S4(this.l,this):(this.i=!1,rv(this)))}else(function $ce(t){const e={};t=(t.g&&2<=Za(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(q_(t[r]))continue;var n=dce(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const o=e[i]||[];e[i]=o,o.push(n)}!function ice(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Mo(12)):(this.s=0,Mo(13)),yd(this),iv(this)}}}catch{}},Tt.mb=function(){if(this.g){var t=Za(this.g),e=this.g.ja();this.o<e.length&&(gw(this),e4(this,t,e),this.i&&4!=t&&rv(this))}},Tt.cancel=function(){this.J=!0,yd(this)},Tt.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function _ce(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(J_(),Mo(17)),yd(this),this.s=2,iv(this)):t4(this,this.Y-t)};var r4=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Id(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Id){this.h=t.h,mw(this,t.j),this.s=t.s,this.g=t.g,_w(this,t.m),this.l=t.l;var e=t.i,n=new av;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),i4(this,n),this.o=t.o}else t&&(e=String(t).match(r4))?(this.h=!1,mw(this,e[1]||"",!0),this.s=ov(e[2]||""),this.g=ov(e[3]||"",!0),_w(this,e[4]),this.l=ov(e[5]||"",!0),i4(this,e[6]||"",!0),this.o=ov(e[7]||"")):(this.h=!1,this.i=new av(null,this.h))}function $l(t){return new Id(t)}function mw(t,e,n){t.j=n?ov(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function _w(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function i4(t,e,n){e instanceof av?(t.i=e,function Rce(t,e){e&&!t.j&&(zc(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(s4(this,r),l4(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=sv(e,Dce)),t.i=new av(e,t.h))}function Dr(t,e,n){t.i.set(e,n)}function vw(t){return Dr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ov(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function sv(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,bce),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function bce(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Id.prototype.toString=function(){var t=[],e=this.j;e&&t.push(sv(e,o4,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(sv(e,o4,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(sv(n,"/"==n.charAt(0)?Ace:Tce,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",sv(n,Sce)),t.join("")};var o4=/[#\/\?@]/g,Tce=/[#\?:]/g,Ace=/[#\?]/g,Dce=/[#\?@]/g,Sce=/#/g;function av(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function zc(t){t.g||(t.g=new Map,t.h=0,t.i&&function Cce(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function s4(t,e){zc(t),e=hp(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function a4(t,e){return zc(t),e=hp(t,e),t.g.has(e)}function l4(t,e,n){s4(t,e),0<n.length&&(t.i=null,t.g.set(hp(t,e),mR(n)),t.h+=n.length)}function hp(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Tt=av.prototype).add=function(t,e){zc(this),this.i=null,t=hp(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Tt.forEach=function(t,e){zc(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},Tt.ta=function(){zc(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n},Tt.Z=function(t){zc(this);let e=[];if("string"==typeof t)a4(this,t)&&(e=e.concat(this.g.get(hp(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},Tt.set=function(t,e){return zc(this),this.i=null,a4(this,t=hp(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Tt.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},Tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};var Pce=class{constructor(t,e){this.g=t,this.map=e}};function c4(t){this.l=t||xce,t=on.PerformanceNavigationTiming?0<(t=on.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(on.g&&on.g.Ka&&on.g.Ka()&&on.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var xce=10;function u4(t){return!!t.h||!!t.g&&t.g.size>=t.j}function d4(t){return t.h?1:t.g?t.g.size:0}function zR(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function GR(t,e){t.g?t.g.add(e):t.h=e}function h4(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function f4(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return mR(t.i)}c4.prototype.cancel=function(){if(this.i=f4(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var Mce=class{stringify(t){return on.JSON.stringify(t,void 0)}parse(t){return on.JSON.parse(t,void 0)}};function Nce(){this.g=new Mce}function kce(t,e,n){const r=n||"";try{n4(t,function(i,o){let s=i;W_(i)&&(s=NR(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function yw(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function lv(t){this.l=t.ec||null,this.j=t.ob||!1}function Iw(t,e){Fi.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=WR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Oi(lv,LR),lv.prototype.g=function(){return new Iw(this.l,this.j)},lv.prototype.i=function(t){return function(){return t}}({}),Oi(Iw,Fi);var WR=0;function p4(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function cv(t){t.readyState=4,t.l=null,t.j=null,t.A=null,uv(t)}function uv(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Tt=Iw.prototype).open=function(t,e){if(this.readyState!=WR)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,uv(this)},Tt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||on).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,cv(this)),this.readyState=WR},Tt.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,uv(this)),this.g&&(this.readyState=3,uv(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof on.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;p4(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},Tt.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?cv(this):uv(this),3==this.readyState&&p4(this)}},Tt.Za=function(t){this.g&&(this.response=this.responseText=t,cv(this))},Tt.Ya=function(t){this.g&&(this.response=t,cv(this))},Tt.ka=function(){this.g&&cv(this)},Tt.setRequestHeader=function(t,e){this.v.append(t,e)},Tt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Tt.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Iw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Fce=on.JSON.parse;function qr(t){Fi.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=g4,this.L=this.M=!1}Oi(qr,Fi);var g4="",Lce=/^https?$/i,Vce=["POST","PUT"];function m4(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,_4(t),Ew(t)}function _4(t){t.F||(t.F=!0,Yi(t,"complete"),Yi(t,"error"))}function v4(t){if(t.h&&typeof pR<"u"&&(!t.C[1]||4!=Za(t)||2!=t.da()))if(t.v&&4==Za(t))FR(t.La,0,t);else if(Yi(t,"readystatechange"),4==Za(t)){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===s){var i=String(t.I).match(r4)[1]||null;!i&&on.self&&on.self.location&&(i=on.self.location.protocol.slice(0,-1)),r=!Lce.test(i?i.toLowerCase():"")}n=r}if(n)Yi(t,"complete"),Yi(t,"success");else{t.m=6;try{var o=2<Za(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",_4(t)}}finally{Ew(t)}}}function Ew(t,e){if(t.g){y4(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Yi(t,"ready");try{n.onreadystatechange=r}catch{}}}function y4(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(on.clearTimeout(t.A),t.A=null)}function Za(t){return t.g?t.g.readyState:0}function I4(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case g4:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function E4(t){let e="";return bR(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function qR(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=E4(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Dr(t,e,n))}function dv(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function w4(t){this.Ga=0,this.j=[],this.l=new dw,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=dv("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=dv("baseRetryDelayMs",5e3,t),this.hb=dv("retryDelaySeedMs",1e4,t),this.eb=dv("forwardChannelMaxRetries",2,t),this.xa=dv("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new c4(t&&t.concurrentRequestLimit),this.Ja=new Nce,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function KR(t){if(C4(t),3==t.H){var e=t.W++,n=$l(t.I);if(Dr(n,"SID",t.K),Dr(n,"RID",e),Dr(n,"TYPE","terminate"),hv(t,n),(e=new nv(t,t.l,e)).L=2,e.A=vw($l(n)),n=!1,on.navigator&&on.navigator.sendBeacon)try{n=on.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&on.Image&&((new Image).src=e.A,n=!0),n||(e.g=M4(e.l,null),e.g.ha(e.A)),e.G=Date.now(),rv(e)}P4(t)}function ww(t){t.g&&(YR(t),t.g.cancel(),t.g=null)}function C4(t){ww(t),t.u&&(on.clearTimeout(t.u),t.u=null),bw(t),t.i.cancel(),t.m&&("number"==typeof t.m&&on.clearTimeout(t.m),t.m=null)}function Cw(t){if(!u4(t.i)&&!t.m){t.m=!0;var e=t.Na;Y_||Vj(),X_||(Y_(),X_=!0),kR.add(e,t),t.C=0}}function b4(t,e){var n;n=e?e.m:t.W++;const r=$l(t.I);Dr(r,"SID",t.K),Dr(r,"RID",n),Dr(r,"AID",t.V),hv(t,r),t.o&&t.s&&qR(r,t.o,t.s),n=new nv(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=T4(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),GR(t.i,n),jR(n,r,e)}function hv(t,e){t.na&&bR(t.na,function(n,r){Dr(e,r,n)}),t.h&&n4({},function(n,r){Dr(e,r,n)})}function T4(t,e,n){n=Math.min(t.j.length,n);var r=t.h?uo(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+n];-1==o?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const h=i[l].map;if(c-=o,0>c)o=Math.max(0,i[l].g-100),a=!1;else try{kce(h,s,"req"+c+"_")}catch{r&&r(h)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function A4(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Y_||Vj(),X_||(Y_(),X_=!0),kR.add(e,t),t.A=0}}function QR(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=ev(uo(t.Ma,t),R4(t,t.A)),t.A++,0))}function YR(t){null!=t.B&&(on.clearTimeout(t.B),t.B=null)}function D4(t){t.g=new nv(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=$l(t.wa);Dr(e,"RID","rpc"),Dr(e,"SID",t.K),Dr(e,"AID",t.V),Dr(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Dr(e,"TO",t.qa),Dr(e,"TYPE","xmlhttp"),hv(t,e),t.o&&t.s&&qR(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=vw($l(e)),n.u=null,n.S=!0,Zj(n,t)}function bw(t){null!=t.v&&(on.clearTimeout(t.v),t.v=null)}function S4(t,e){var n=null;if(t.g==e){bw(t),YR(t),t.g=null;var r=2}else{if(!zR(t.i,e))return;n=e.F,h4(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;Yi(r=hw(),new Wj(r,n)),Cw(t)}else A4(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function Uce(t,e){return!(d4(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=ev(uo(t.Na,t,e),R4(t,t.C)),t.C++,0)))}(t,e)||2==r&&QR(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ed(t,5);break;case 4:Ed(t,10);break;case 3:Ed(t,6);break;default:Ed(t,2)}}function R4(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ed(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=uo(t.pb,t);n||(n=new Id("//www.google.com/images/cleardot.gif"),on.location&&"http"==on.location.protocol||mw(n,"https"),vw(n)),function Oce(t,e){const n=new dw;if(on.Image){const r=new Image;r.onload=ow(yw,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ow(yw,n,r,"TestLoadImage: error",!1,e),r.onabort=ow(yw,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ow(yw,n,r,"TestLoadImage: timeout",!1,e),on.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Mo(2);t.H=0,t.h&&t.h.za(e),P4(t),C4(t)}function P4(t){if(t.H=0,t.ma=[],t.h){const e=f4(t.i);(0!=e.length||0!=t.j.length)&&(bj(t.ma,e),bj(t.ma,t.j),t.i.i.length=0,mR(t.j),t.j.length=0),t.h.ya()}}function x4(t,e,n){var r=n instanceof Id?$l(n):new Id(n);if(""!=r.g)e&&(r.g=e+"."+r.g),_w(r,r.m);else{var i=on.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Id(null);r&&mw(o,r),e&&(o.g=e),i&&_w(o,i),n&&(o.l=n),r=o}return e=t.Da,(n=t.F)&&e&&Dr(r,n,e),Dr(r,"VER",t.ra),hv(t,r),r}function M4(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new qr(t.Ha&&!t.va?new lv({ob:n}):t.va)).Oa(t.J),e}function N4(){}function Tw(){if(up&&!(10<=Number(ece)))throw Error("Environmental error: no available transport.")}function vs(t,e){Fi.call(this),this.g=new w4(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!q_(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!q_(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new fp(this)}function k4(t){VR.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function O4(){BR.call(this),this.status=1}function fp(t){this.g=t}function Ta(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function XR(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var o=t.g[3],s=(e=t.g[0])+(o^(n=t.g[1])&((i=t.g[2])^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=n+(s<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=n+((s=e+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(e^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}function tr(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=0|t[i];r&&o==e||(n[i]=o,r=!1)}this.g=n}(Tt=qr.prototype).Oa=function(t){this.M=t},Tt.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$R.g(),this.C=function Kj(t){return t.h||(t.h=t.i())}(this.u?this.u:$R),this.g.onreadystatechange=uo(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){return void m4(this,o)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())n.set(o,r.get(o))}r=Array.from(n.keys()).find(o=>"content-type"==o.toLowerCase()),i=on.FormData&&t instanceof on.FormData,!(0<=Cj(Vce,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{y4(this),0<this.B&&((this.L=function Bce(t){return up&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=uo(this.ua,this)):this.A=FR(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){m4(this,o)}},Tt.ua=function(){typeof pR<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yi(this,"timeout"),this.abort(8))},Tt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Yi(this,"complete"),Yi(this,"abort"),Ew(this))},Tt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ew(this,!0)),qr.$.N.call(this)},Tt.La=function(){this.s||(this.G||this.v||this.l?v4(this):this.kb())},Tt.kb=function(){v4(this)},Tt.isActive=function(){return!!this.g},Tt.da=function(){try{return 2<Za(this)?this.g.status:-1}catch{return-1}},Tt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Tt.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Fce(e)}},Tt.Ia=function(){return this.m},Tt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Tt=w4.prototype).ra=8,Tt.H=1,Tt.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new nv(this,this.l,t);let o=this.s;if(this.U&&(o?(o=Rj(o),xj(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=T4(this,i,e),Dr(n=$l(this.I),"RID",t),Dr(n,"CVER",22),this.F&&Dr(n,"X-HTTP-Session-Id",this.F),hv(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(E4(o)))+"&"+e:this.o&&qR(n,this.o,o)),GR(this.i,i),this.bb&&Dr(n,"TYPE","init"),this.P?(Dr(n,"$req",e),Dr(n,"SID","null"),i.aa=!0,jR(i,n,null)):jR(i,n,e),this.H=2}}else 3==this.H&&(t?b4(this,t):0==this.j.length||u4(this.i)||b4(this))},Tt.Ma=function(){if(this.u=null,D4(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ev(uo(this.jb,this),t)}},Tt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Mo(10),ww(this),D4(this))},Tt.ib=function(){null!=this.v&&(this.v=null,ww(this),QR(this),Mo(19))},Tt.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Mo(2)):(this.l.info("Failed to ping google.com"),Mo(1))},Tt.isActive=function(){return!!this.h&&this.h.isActive(this)},(Tt=N4.prototype).Ba=function(){},Tt.Aa=function(){},Tt.za=function(){},Tt.ya=function(){},Tt.isActive=function(){return!0},Tt.Va=function(){},Tw.prototype.g=function(t,e){return new vs(t,e)},Oi(vs,Fi),vs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Mo(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=x4(t,null,t.Y),Cw(t)},vs.prototype.close=function(){KR(this.g)},vs.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=NR(t),t=n);e.j.push(new Pce(e.fb++,t)),3==e.H&&Cw(e)},vs.prototype.N=function(){this.g.h=null,delete this.j,KR(this.g),delete this.g,vs.$.N.call(this)},Oi(k4,VR),Oi(O4,BR),Oi(fp,N4),fp.prototype.Ba=function(){Yi(this.g,"a")},fp.prototype.Aa=function(t){Yi(this.g,new k4(t))},fp.prototype.za=function(t){Yi(this.g,new O4)},fp.prototype.ya=function(){Yi(this.g,"b")},Oi(Ta,function jce(){this.blockSize=-1}),Ta.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ta.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=n;)XR(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){XR(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){XR(this,r),i=0;break}}this.h=i,this.i+=e},Ta.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var Hce={};function ZR(t){return-128<=t&&128>t?function Xle(t,e){var n=Hce;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new tr([0|e],0>e?-1:0)}):new tr([0|t],0>t?-1:0)}function Ja(t){if(isNaN(t)||!isFinite(t))return pp;if(0>t)return Xi(Ja(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=JR;return new tr(e,0)}var JR=4294967296,pp=ZR(0),eP=ZR(1),L4=ZR(16777216);function Ul(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Gs(t){return-1==t.h}function Xi(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new tr(n,~t.h).add(eP)}function Aw(t,e){return t.add(Xi(e))}function Dw(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function fv(t,e){this.g=t,this.h=e}function Sw(t,e){if(Ul(e))throw Error("division by zero");if(Ul(t))return new fv(pp,pp);if(Gs(t))return e=Sw(Xi(t),e),new fv(Xi(e.g),Xi(e.h));if(Gs(e))return e=Sw(t,Xi(e)),new fv(Xi(e.g),e.h);if(30<t.g.length){if(Gs(t)||Gs(e))throw Error("slowDivide_ only works with positive integers.");for(var n=eP,r=e;0>=r.X(t);)n=V4(n),r=V4(r);var i=gp(n,1),o=gp(r,1);for(r=gp(r,2),n=gp(n,2);!Ul(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=gp(r,1),n=gp(n,1)}return e=Aw(t,i.R(e)),new fv(i,e)}for(i=pp;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=Ja(n)).R(e);Gs(s)||0<s.X(t);)s=(o=Ja(n-=r)).R(e);Ul(o)&&(o=eP),i=i.add(o),t=Aw(t,s)}return new fv(i,t)}function V4(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new tr(n,t.h)}function gp(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new tr(i,t.h)}(Tt=tr.prototype).ea=function(){if(Gs(this))return-Xi(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:JR+r)*e,e*=JR}return t},Tt.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Ul(this))return"0";if(Gs(this))return"-"+Xi(this).toString(t);for(var e=Ja(Math.pow(t,6)),n=this,r="";;){var i=Sw(n,e).g,o=((0<(n=Aw(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Ul(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Tt.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},Tt.X=function(t){return Gs(t=Aw(this,t))?-1:Ul(t)?0:1},Tt.abs=function(){return Gs(this)?Xi(this):this},Tt.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&t.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,n[i]=(s&=65535)<<16|(o&=65535)}return new tr(n,-2147483648&n[n.length-1]?-1:0)},Tt.R=function(t){if(Ul(this)||Ul(t))return pp;if(Gs(this))return Gs(t)?Xi(this).R(Xi(t)):Xi(Xi(this).R(t));if(Gs(t))return Xi(this.R(Xi(t)));if(0>this.X(L4)&&0>t.X(L4))return Ja(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=t.D(i)>>>16,l=65535&t.D(i);n[2*r+2*i]+=s*l,Dw(n,2*r+2*i),n[2*r+2*i+1]+=o*l,Dw(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Dw(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Dw(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new tr(n,0)},Tt.gb=function(t){return Sw(this,t).h},Tt.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new tr(n,this.h&t.h)},Tt.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new tr(n,this.h|t.h)},Tt.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new tr(n,this.h^t.h)},Tw.prototype.createWebChannel=Tw.prototype.g,vs.prototype.send=vs.prototype.u,vs.prototype.open=vs.prototype.m,vs.prototype.close=vs.prototype.close,fw.NO_ERROR=0,fw.TIMEOUT=8,fw.HTTP_ERROR=6,qj.COMPLETE="complete",Qj.EventType=tv,tv.OPEN="a",tv.CLOSE="b",tv.ERROR="c",tv.MESSAGE="d",Fi.prototype.listen=Fi.prototype.O,qr.prototype.listenOnce=qr.prototype.P,qr.prototype.getLastError=qr.prototype.Sa,qr.prototype.getLastErrorCode=qr.prototype.Ia,qr.prototype.getStatus=qr.prototype.da,qr.prototype.getResponseJson=qr.prototype.Wa,qr.prototype.getResponseText=qr.prototype.ja,qr.prototype.send=qr.prototype.ha,qr.prototype.setWithCredentials=qr.prototype.Oa,Ta.prototype.digest=Ta.prototype.l,Ta.prototype.reset=Ta.prototype.reset,Ta.prototype.update=Ta.prototype.j,tr.prototype.add=tr.prototype.add,tr.prototype.multiply=tr.prototype.R,tr.prototype.modulo=tr.prototype.gb,tr.prototype.compare=tr.prototype.X,tr.prototype.toNumber=tr.prototype.ea,tr.prototype.toString=tr.prototype.toString,tr.prototype.getBits=tr.prototype.D,tr.fromNumber=Ja,tr.fromString=function F4(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Xi(F4(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ja(Math.pow(e,8)),r=pp,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=Ja(Math.pow(e,o)),r=r.R(o).add(Ja(s))):r=(r=r.R(n)).add(Ja(s))}return r};var zce=ba.createWebChannelTransport=function(){return new Tw},Gce=ba.getStatEventTarget=function(){return hw()},tP=ba.ErrorCode=fw,Wce=ba.EventType=qj,qce=ba.Event=vd,B4=ba.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Rw=(ba.FetchXmlHttpFactory=lv,ba.WebChannel=Qj),Kce=ba.XhrIo=qr,Qce=ba.Md5=Ta,mp=ba.Integer=tr;const $4="@firebase/firestore";class Li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Li.UNAUTHENTICATED=new Li(null),Li.GOOGLE_CREDENTIALS=new Li("google-credentials-uid"),Li.FIRST_PARTY=new Li("first-party-uid"),Li.MOCK_USER=new Li("mock-user");let _p="10.9.0";const Gc=new _s.Vy("@firebase/firestore");function vp(){return Gc.logLevel}function Ge(t,...e){if(Gc.logLevel<=_s.$b.DEBUG){const n=e.map(nP);Gc.debug(`Firestore (${_p}): ${t}`,...n)}}function ri(t,...e){if(Gc.logLevel<=_s.$b.ERROR){const n=e.map(nP);Gc.error(`Firestore (${_p}): ${t}`,...n)}}function Xo(t,...e){if(Gc.logLevel<=_s.$b.WARN){const n=e.map(nP);Gc.warn(`Firestore (${_p}): ${t}`,...n)}}function nP(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function Mt(t="Unexpected state"){const e=`FIRESTORE (${_p}) INTERNAL ASSERTION FAILED: `+t;throw ri(e),new Error(e)}function Lt(t,e){t||Mt()}function mt(t,e){return t}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends A.g{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ei{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class U4{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zce{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Li.UNAUTHENTICATED))}shutdown(){}}class Jce{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eue{constructor(e){this.t=e,this.currentUser=Li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const o=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new Ei;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ei,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable((0,y.A)(function*(){yield c.promise,yield o(r.currentUser)}))},l=c=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ei)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt("string"==typeof r.accessToken),new U4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Lt(null===e||"string"==typeof e),new Li(e)}}class tue{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Li.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nue{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new tue(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class j4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rue{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{null!=o.error&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,Ge("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Lt("string"==typeof n.token),this.R=n.token,new j4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function iue(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class H4{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=iue(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function nn(t,e){return t<e?-1:t>e?1:0}function yp(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function z4(t){return t+"\0"}class Mr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ue(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ue(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ue(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mr.fromMillis(Date.now())}static fromDate(e){return Mr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Mr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nn(this.nanoseconds,e.nanoseconds):nn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ut(e)}static min(){return new Ut(new Mr(0,0))}static max(){return new Ut(new Mr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class pv{constructor(e,n,r){void 0===n?n=0:n>e.length&&Mt(),void 0===r?r=e.length-n:r>e.length-n&&Mt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===pv.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pv?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Sn extends pv{construct(e,n,r){return new Sn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Sn(n)}static emptyPath(){return new Sn([])}}const oue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sr extends pv{construct(e,n,r){return new Sr(e,n,r)}static isValidIdentifier(e){return oue.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Sr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Ue(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Ue(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Ue(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ue(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sr(n)}static emptyPath(){return new Sr([])}}class yt{constructor(e){this.path=e}static fromPath(e){return new yt(Sn.fromString(e))}static fromName(e){return new yt(Sn.fromString(e).popFirst(5))}static empty(){return new yt(Sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Sn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yt(new Sn(e.slice()))}}class Ip{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function rP(t){return t.fields.find(e=>2===e.kind)}function wd(t){return t.fields.filter(e=>2!==e.kind)}Ip.UNKNOWN_ID=-1;class Cd{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ep{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ep(0,ys.min())}}function G4(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ut.fromTimestamp(1e9===r?new Mr(n+1,0):new Mr(n,r));return new ys(i,yt.empty(),e)}function W4(t){return new ys(t.readTime,t.key,-1)}class ys{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ys(Ut.min(),yt.empty(),-1)}static max(){return new ys(Ut.max(),yt.empty(),-1)}}function iP(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=yt.comparator(t.documentKey,e.documentKey),0!==n?n:nn(t.largestBatchId,e.largestBatchId))}const q4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Wc(t){return oP.apply(this,arguments)}function oP(){return oP=(0,y.A)(function*(t){if(t.code!==me.FAILED_PRECONDITION||t.message!==q4)throw t;Ge("LocalStore","Unexpectedly lost primary lease")}),oP.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.reject(n)}static resolve(e){return new oe((n,r)=>{n(e)})}static reject(e){return new oe((n,r)=>{r(e)})}static waitFor(e){return new oe((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next(i=>i?oe.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new oe((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;n(e[c]).next(h=>{s[c]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new oe((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}class Pw{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ei,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new gv(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=sP(r.target.error);this.V.reject(new gv(e,i))}}static open(e,n,r,i){try{return new Pw(n,e.transaction(i,r))}catch(o){throw new gv(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ge("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new cue(n)}}class Ws{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===Ws.S((0,A.ZQ)())&&ri("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ge("SimpleDb","Removing database:",e),bd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,A.zW)())return!1;if(Ws.C())return!0;const e=(0,A.ZQ)(),n=Ws.S(e),r=0<n&&n<10,i=Ws.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,y.A)(function*(){return n.db||(Ge("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const o=indexedDB.open(n.name,n.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new gv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new Ue(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Ue(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new gv(e,a))},o.onupgradeneeded=s=>{Ge("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',s.oldVersion),n.p.N(s.target.result,o.transaction,s.oldVersion,n.version).next(()=>{Ge("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.L&&(n.db.onversionchange=r=>n.L(r)),n.db})()}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var o=this;return(0,y.A)(function*(){const s="readonly"===n;let a=0;for(;;){++a;try{o.db=yield o.O(e);const l=Pw.open(o.db,e,s?"readonly":"readwrite",r),c=i(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),oe.reject(h))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,h="FirebaseError"!==c.name&&a<3;if(Ge("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),o.close(),!h)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class lue{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return bd(this.k.delete())}}class gv extends Ue{constructor(e,n){super(me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function qc(t){return"IndexedDbTransactionError"===t.name}class cue{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(Ge("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Ge("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bd(r)}add(e){return Ge("SimpleDb","ADD",this.store.name,e,e),bd(this.store.add(e))}get(e){return bd(this.store.get(e)).next(n=>(void 0===n&&(n=null),Ge("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Ge("SimpleDb","DELETE",this.store.name,e),bd(this.store.delete(e))}count(){return Ge("SimpleDb","COUNT",this.store.name),bd(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new oe((s,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{s(l.target.result)}})}{const o=this.cursor(r),s=[];return this.G(o,(a,l)=>{s.push(l)}).next(()=>s)}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new oe((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){Ge("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new oe((r,i)=>{n.onerror=o=>{const s=sP(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){const r=[];return new oe((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const l=new lue(a),c=n(a.primaryKey,a.value,l);if(c instanceof oe){const h=c.catch(p=>(l.done(),oe.reject(p)));r.push(h)}l.isDone?i():null===l.$?a.continue():a.continue(l.$)}}).next(()=>oe.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function bd(t){return new oe((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=sP(r.target.error);n(i)}})}let Q4=!1;function sP(t){const e=Ws.S((0,A.ZQ)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Q4||(Q4=!0,setTimeout(()=>{throw r},0)),r}}return t}class uue{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;Ge("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,y.A)(function*(){n.task=null;try{Ge("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(r){qc(r)?Ge("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Wc(r)}yield n.ee(6e4)}))}}class due{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,y.A)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,o=!0;return oe.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return Ge("IndexBackfiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(Ge("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{const s=W4(o);iP(s,r)>0&&(r=s)}),new ys(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Is=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function mv(t){return null==t}function _v(t){return 0===t&&1/t==-1/0}function Y4(t){return"number"==typeof t&&Number.isInteger(t)&&!_v(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function fo(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=X4(e)),e=hue(t.get(n),e);return X4(e)}function hue(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function X4(t){return t+"\x01\x01"}function el(t){const e=t.length;if(Lt(e>=2),2===e)return Lt("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Sn.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf("\x01",o);switch((s<0||s>n)&&Mt(),t.charAt(s+1)){case"\x01":const a=t.substring(o,s);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Mt()}o=s+2}return new Sn(r)}const Z4=["userId","batchId"];function xw(t,e){return[t,fo(e)]}function J4(t,e,n){return[t,fo(e),n]}const fue={},pue=["prefixPath","collectionGroup","readTime","documentId"],gue=["prefixPath","collectionGroup","documentId"],mue=["collectionGroup","readTime","prefixPath","documentId"],_ue=["canonicalId","targetId"],vue=["targetId","path"],yue=["path","targetId"],Iue=["collectionId","parent"],Eue=["indexId","uid"],wue=["uid","sequenceNumber"],Cue=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bue=["indexId","uid","orderedDocumentKey"],Tue=["userId","collectionPath","documentId"],Aue=["userId","collectionPath","largestBatchId"],Due=["userId","collectionGroup","largestBatchId"],e3=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Sue=[...e3,"documentOverlays"],t3=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],n3=t3,Rue=[...n3,"indexConfiguration","indexState","indexEntries"];class aP extends K4{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Vi(t,e){const n=mt(t);return Ws.M(n.ae,e)}function r3(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Kc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function i3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class yr{constructor(e,n){this.comparator=e,this.root=n||Zi.EMPTY}insert(e,n){return new yr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zi.BLACK,null,null))}remove(e){return new yr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mw(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mw(this.root,e,this.comparator,!0)}}class Mw{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zi{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:Zi.RED,this.left=null!=i?i:Zi.EMPTY,this.right=null!=o?o:Zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Zi(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Zi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Mt();const e=this.left.check();if(e!==this.right.check())throw Mt();return e+(this.isRed()?0:1)}}Zi.EMPTY=null,Zi.RED=!0,Zi.BLACK=!1,Zi.EMPTY=new class{constructor(){this.size=0}get key(){throw Mt()}get value(){throw Mt()}get color(){throw Mt()}get left(){throw Mt()}get right(){throw Mt()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Zi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class lr{constructor(e){this.comparator=e,this.data=new yr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new o3(this.data.getIterator())}getIteratorFrom(e){return new o3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof lr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lr(this.comparator);return n.data=e,n}}class o3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wp(t){return t.hasNext()?t.getNext():void 0}class Zo{constructor(e){this.fields=e,e.sort(Sr.comparator)}static empty(){return new Zo([])}unionWith(e){let n=new lr(Sr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yp(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class s3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new s3("Invalid base64 string: "+o):o}}(e);return new wi(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new wi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wi.EMPTY_BYTE_STRING=new wi("");const xue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qc(t){if(Lt(!!t),"string"==typeof t){let e=0;const n=xue.exec(t);if(Lt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Kr(t.seconds),nanos:Kr(t.nanos)}}function Kr(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function jl(t){return"string"==typeof t?wi.fromBase64String(t):wi.fromUint8Array(t)}function Nw(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function kw(t){const e=t.mapValue.fields.__previous_value__;return Nw(e)?kw(e):e}function vv(t){const e=Qc(t.mapValue.fields.__local_write_time__.timestampValue);return new Mr(e.seconds,e.nanos)}class Mue{constructor(e,n,r,i,o,s,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Yc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Yc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yc&&e.projectId===this.projectId&&e.database===this.database}}const Xc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ow={nullValue:"NULL_VALUE"};function Zc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nw(t)?4:u3(t)?9007199254740991:10:Mt()}function tl(t,e){if(t===e)return!0;const n=Zc(t);if(n!==Zc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vv(t).isEqual(vv(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Qc(i.timestampValue),a=Qc(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,jl(t.bytesValue).isEqual(jl(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Kr(i.geoPointValue.latitude)===Kr(o.geoPointValue.latitude)&&Kr(i.geoPointValue.longitude)===Kr(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Kr(i.integerValue)===Kr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Kr(i.doubleValue),a=Kr(o.doubleValue);return s===a?_v(s)===_v(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return yp(t.arrayValue.values||[],e.arrayValue.values||[],tl);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(r3(s)!==r3(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(void 0===a[l]||!tl(s[l],a[l])))return!1;return!0}(t,e);default:return Mt()}var o}function yv(t,e){return void 0!==(t.values||[]).find(n=>tl(n,e))}function Jc(t,e){if(t===e)return 0;const n=Zc(t),r=Zc(e);if(n!==r)return nn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return nn(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Kr(o.integerValue||o.doubleValue),l=Kr(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return a3(t.timestampValue,e.timestampValue);case 4:return a3(vv(t),vv(e));case 5:return nn(t.stringValue,e.stringValue);case 6:return function(o,s){const a=jl(o),l=jl(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=nn(a[c],l[c]);if(0!==h)return h}return nn(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=nn(Kr(o.latitude),Kr(s.latitude));return 0!==a?a:nn(Kr(o.longitude),Kr(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],l=s.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=Jc(a[c],l[c]);if(h)return h}return nn(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Xc.mapValue&&s===Xc.mapValue)return 0;if(o===Xc.mapValue)return 1;if(s===Xc.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const m=nn(l[p],h[p]);if(0!==m)return m;const _=Jc(a[l[p]],c[h[p]]);if(0!==_)return _}return nn(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Mt()}}function a3(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return nn(t,e);const n=Qc(t),r=Qc(e),i=nn(n.seconds,r.seconds);return 0!==i?i:nn(n.nanos,r.nanos)}function Cp(t){return lP(t)}function lP(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Qc(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?jl(t.bytesValue).toBase64():"referenceValue"in t?yt.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=lP(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${lP(n.fields[s])}`;return i+"}"}(t.mapValue):Mt()}function Td(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cP(t){return!!t&&"integerValue"in t}function Iv(t){return!!t&&"arrayValue"in t}function l3(t){return!!t&&"nullValue"in t}function c3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lw(t){return!!t&&"mapValue"in t}function Ev(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Kc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ev(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ev(t.arrayValue.values[n]);return e}return Object.assign({},t)}function u3(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function Nue(t){return"nullValue"in t?Ow:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Td(Yc.empty(),yt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Mt()}function kue(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Td(Yc.empty(),yt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Xc:Mt()}function d3(t,e){const n=Jc(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function h3(t,e){const n=Jc(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Ji{constructor(e){this.value=e}static empty(){return new Ji({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lw(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ev(n)}setAll(e){let n=Sr.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Ev(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Lw(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tl(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Kc(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ji(Ev(this.value))}}function f3(t){const e=[];return Kc(t.fields,(n,r)=>{const i=new Sr([n]);if(Lw(r)){const o=f3(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Zo(e)}class Rr{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Rr(e,0,Ut.min(),Ut.min(),Ut.min(),Ji.empty(),0)}static newFoundDocument(e,n,r,i){return new Rr(e,1,n,Ut.min(),r,i,0)}static newNoDocument(e,n){return new Rr(e,2,n,Ut.min(),Ut.min(),Ji.empty(),0)}static newUnknownDocument(e,n){return new Rr(e,3,n,Ut.min(),Ut.min(),Ji.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ut.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ji.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ji.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class eu{constructor(e,n){this.position=e,this.inclusive=n}}function p3(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?yt.comparator(yt.fromName(s.referenceValue),n.key):Jc(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function g3(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tl(t.position[n],e.position[n]))return!1;return!0}class wv{constructor(e,n="asc"){this.field=e,this.dir=n}}function Oue(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class m3{}class Rn extends m3{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new Fue(e,n,r):"array-contains"===n?new Bue(e,r):"in"===n?new w3(e,r):"not-in"===n?new $ue(e,r):"array-contains-any"===n?new Uue(e,r):new Rn(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new Lue(e,r):new Vue(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Jc(n,this.value)):null!==n&&Zc(this.value)===Zc(n)&&this.matchesComparison(Jc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nr extends m3{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new nr(e,n)}matches(e){return bp(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function bp(t){return"and"===t.op}function uP(t){return"or"===t.op}function dP(t){return _3(t)&&bp(t)}function _3(t){for(const e of t.filters)if(e instanceof nr)return!1;return!0}function hP(t){if(t instanceof Rn)return t.field.canonicalString()+t.op.toString()+Cp(t.value);if(dP(t))return t.filters.map(e=>hP(e)).join(",");{const e=t.filters.map(n=>hP(n)).join(",");return`${t.op}(${e})`}}function v3(t,e){return t instanceof Rn?(r=t,(i=e)instanceof Rn&&r.op===i.op&&r.field.isEqual(i.field)&&tl(r.value,i.value)):t instanceof nr?function(r,i){return i instanceof nr&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&v3(s,i.filters[a]),!0)}(t,e):void Mt();var r,i}function y3(t,e){const n=t.filters.concat(e);return nr.create(n,t.op)}function I3(t){return t instanceof Rn?`${(n=t).field.canonicalString()} ${n.op} ${Cp(n.value)}`:t instanceof nr?function(n){return n.op.toString()+" {"+n.getFilters().map(I3).join(" ,")+"}"}(t):"Filter";var n}class Fue extends Rn{constructor(e,n,r){super(e,n,r),this.key=yt.fromName(r.referenceValue)}matches(e){const n=yt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Lue extends Rn{constructor(e,n){super(e,"in",n),this.keys=E3(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Vue extends Rn{constructor(e,n){super(e,"not-in",n),this.keys=E3(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function E3(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>yt.fromName(r.referenceValue))}class Bue extends Rn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Iv(n)&&yv(n.arrayValue,this.value)}}class w3 extends Rn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&yv(this.value.arrayValue,n)}}class $ue extends Rn{constructor(e,n){super(e,"not-in",n)}matches(e){if(yv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!yv(this.value.arrayValue,n)}}class Uue extends Rn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Iv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yv(this.value.arrayValue,r))}}class jue{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function fP(t,e=null,n=[],r=[],i=null,o=null,s=null){return new jue(t,e,n,r,i,o,s)}function Ad(t){const e=mt(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hP(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),mv(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Cp(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Cp(r)).join(",")),e.ce=n}return e.ce}function Cv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Oue(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!v3(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!g3(t.startAt,e.startAt)&&g3(t.endAt,e.endAt)}function Vw(t){return yt.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Bw(t,e){return t.filters.filter(n=>n instanceof Rn&&n.field.isEqual(e))}function C3(t,e,n){let r=Ow,i=!0;for(const o of Bw(t,e)){let s=Ow,a=!0;switch(o.op){case"<":case"<=":s=Nue(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Ow}d3({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];d3({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}function b3(t,e,n){let r=Xc,i=!0;for(const o of Bw(t,e)){let s=Xc,a=!0;switch(o.op){case">=":case">":s=kue(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Xc}h3({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];h3({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}class Hl{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null}}function T3(t,e,n,r,i,o,s,a){return new Hl(t,e,n,r,i,o,s,a)}function Tp(t){return new Hl(t)}function A3(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function pP(t){return null!==t.collectionGroup}function Ap(t){const e=mt(t);if(null===e.le){e.le=[];const n=new Set;for(const o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new lr(Sr.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new wv(o,r))}),n.has(Sr.keyField().canonicalString())||e.le.push(new wv(Sr.keyField(),r))}return e.le}function No(t){const e=mt(t);return e.he||(e.he=function D3(t,e){if("F"===t.limitType)return fP(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new wv(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new eu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new eu(t.startAt.position,t.startAt.inclusive):null;return fP(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Ap(t))),e.he}function gP(t,e){const n=t.filters.concat([e]);return new Hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $w(t,e,n){return new Hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bv(t,e){return Cv(No(t),No(e))&&t.limitType===e.limitType}function S3(t){return`${Ad(No(t))}|lt:${t.limitType}`}function Dp(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>I3(i)).join(", ")}]`),mv(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Cp(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Cp(i)).join(",")),`Target(${r})`}(No(t))}; limitType=${t.limitType})`}function Tv(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):yt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Ap(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,l){const c=p3(s,a,l);return s.inclusive?c<=0:c<0}(r.startAt,Ap(r),i)||r.endAt&&!function(s,a,l){const c=p3(s,a,l);return s.inclusive?c>=0:c>0}(r.endAt,Ap(r),i)));var r,i}function R3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function P3(t){return(e,n)=>{let r=!1;for(const i of Ap(t)){const o=Hue(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Hue(t,e,n){const r=t.field.isKeyField()?yt.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return null!==l&&null!==c?Jc(l,c):Mt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Mt()}}class zl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Kc(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return i3(this.inner)}size(){return this.innerSize}}const zue=new yr(yt.comparator);function Jo(){return zue}const x3=new yr(yt.comparator);function Av(...t){let e=x3;for(const n of t)e=e.insert(n.key,n);return e}function M3(t){let e=x3;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function nl(){return Dv()}function N3(){return Dv()}function Dv(){return new zl(t=>t.toString(),(t,e)=>t.isEqual(e))}const Gue=new yr(yt.comparator),Wue=new lr(yt.comparator);function fn(...t){let e=Wue;for(const n of t)e=e.add(n);return e}const que=new lr(nn);function mP(){return que}function k3(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_v(e)?"-0":e}}function O3(t){return{integerValue:""+t}}function F3(t,e){return Y4(e)?O3(e):k3(t,e)}class Uw{constructor(){this._=void 0}}function Kue(t,e,n){return t instanceof Sp?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Nw(o)&&(o=kw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Dd?V3(t,e):t instanceof Sd?B3(t,e):function(i,o){const s=L3(i,o),a=$3(s)+$3(i.Ie);return cP(s)&&cP(i.Ie)?O3(a):k3(i.serializer,a)}(t,e)}function Que(t,e,n){return t instanceof Dd?V3(t,e):t instanceof Sd?B3(t,e):n}function L3(t,e){return t instanceof Rp?cP(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class Sp extends Uw{}class Dd extends Uw{constructor(e){super(),this.elements=e}}function V3(t,e){const n=U3(e);for(const r of t.elements)n.some(i=>tl(i,r))||n.push(r);return{arrayValue:{values:n}}}class Sd extends Uw{constructor(e){super(),this.elements=e}}function B3(t,e){let n=U3(e);for(const r of t.elements)n=n.filter(i=>!tl(i,r));return{arrayValue:{values:n}}}class Rp extends Uw{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function $3(t){return Kr(t.integerValue||t.doubleValue)}function U3(t){return Iv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Sv{constructor(e,n){this.field=e,this.transform=n}}class Xue{constructor(e,n){this.version=e,this.transformResults=n}}class Nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jw(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Hw{}function j3(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new xp(t.key,Nr.none()):new Pp(t.key,t.data,Nr.none());{const n=t.data,r=Ji.empty();let i=new lr(Sr.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Gl(t.key,r,new Zo(i.toArray()),Nr.none())}}function Zue(t,e,n){t instanceof Pp?function(i,o,s){const a=i.value.clone(),l=G3(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Gl?function(i,o,s){if(!jw(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=G3(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(z3(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Rv(t,e,n,r){return t instanceof Pp?function(o,s,a,l){if(!jw(o.precondition,s))return a;const c=o.value.clone(),h=W3(o.fieldTransforms,l,s);return c.setAll(h),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Gl?function(o,s,a,l){if(!jw(o.precondition,s))return a;const c=W3(o.fieldTransforms,l,s),h=s.data;return h.setAll(z3(o)),h.setAll(c),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):(a=n,jw(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function Jue(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=L3(r.transform,i||null);null!=o&&(null===n&&(n=Ji.empty()),n.set(r.field,o))}return n||null}function H3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&yp(r,i,(o,s)=>function Yue(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Dd&&i instanceof Dd||r instanceof Sd&&i instanceof Sd?yp(r.elements,i.elements,tl):r instanceof Rp&&i instanceof Rp?tl(r.Ie,i.Ie):r instanceof Sp&&i instanceof Sp);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Pp extends Hw{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Gl extends Hw{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function z3(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function G3(t,e,n){const r=new Map;Lt(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Que(s,a,n[i]))}return r}function W3(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,Kue(o,s,e))}return r}class xp extends Hw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _P extends Hw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Zue(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rv(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Rv(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=N3();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=j3(s,a);null!==l&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Ut.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fn())}isEqual(e){return this.batchId===e.batchId&&yp(this.mutations,e.mutations,(n,r)=>H3(n,r))&&yp(this.baseMutations,e.baseMutations,(n,r)=>H3(n,r))}}class yP{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Lt(e.mutations.length===r.length);let i=function(){return Gue}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new yP(e,n,r,i)}}class IP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class tde{constructor(e,n){this.count=e,this.unchangedNames=n}}var mi,Fn;function q3(t){switch(t){default:return Mt();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function K3(t){if(void 0===t)return ri("GRPC error has no .code"),me.UNKNOWN;switch(t){case mi.OK:return me.OK;case mi.CANCELLED:return me.CANCELLED;case mi.UNKNOWN:return me.UNKNOWN;case mi.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case mi.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case mi.INTERNAL:return me.INTERNAL;case mi.UNAVAILABLE:return me.UNAVAILABLE;case mi.UNAUTHENTICATED:return me.UNAUTHENTICATED;case mi.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case mi.NOT_FOUND:return me.NOT_FOUND;case mi.ALREADY_EXISTS:return me.ALREADY_EXISTS;case mi.PERMISSION_DENIED:return me.PERMISSION_DENIED;case mi.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case mi.ABORTED:return me.ABORTED;case mi.OUT_OF_RANGE:return me.OUT_OF_RANGE;case mi.UNIMPLEMENTED:return me.UNIMPLEMENTED;case mi.DATA_LOSS:return me.DATA_LOSS;default:return Mt()}}(Fn=mi||(mi={}))[Fn.OK=0]="OK",Fn[Fn.CANCELLED=1]="CANCELLED",Fn[Fn.UNKNOWN=2]="UNKNOWN",Fn[Fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fn[Fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fn[Fn.NOT_FOUND=5]="NOT_FOUND",Fn[Fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fn[Fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fn[Fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fn[Fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fn[Fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fn[Fn.ABORTED=10]="ABORTED",Fn[Fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fn[Fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fn[Fn.INTERNAL=13]="INTERNAL",Fn[Fn.UNAVAILABLE=14]="UNAVAILABLE",Fn[Fn.DATA_LOSS=15]="DATA_LOSS";function Q3(){return new TextEncoder}const nde=new mp([4294967295,4294967295],0);function Y3(t){const e=Q3().encode(t),n=new Qce;return n.update(e),new Uint8Array(n.digest())}function X3(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new mp([n,r],0),new mp([i,o],0)]}class EP{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pv(`Invalid padding: ${n}`);if(r<0)throw new Pv(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Pv(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Pv(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=mp.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(mp.fromNumber(r)));return 1===i.compare(nde)&&(i=new mp([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=Y3(e),[r,i]=X3(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new EP(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const n=Y3(e),[r,i]=X3(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Pv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xv{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Mv.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xv(Ut.min(),i,new yr(nn),Jo(),fn())}}class Mv{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Mv(r,n,fn(),fn(),fn())}}class Gw{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class Z3{constructor(e,n){this.targetId=e,this.fe=n}}class J3{constructor(e,n,r=wi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class eH{constructor(){this.ge=0,this.pe=nH(),this.ye=wi.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=fn(),n=fn(),r=fn();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Mt()}}),new Mv(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=nH()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Lt(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class rde{constructor(e){this.Be=e,this.ke=new Map,this.qe=Jo(),this.Qe=tH(),this.Ke=new yr(nn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:Mt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const o=i.target;if(Vw(o))if(0===r){const s=new yt(o.path);this.We(n,s,Rr.newNoDocument(s,Ut.min()))}else Lt(1===r);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(e),l=a?this.et(a,e,s):1;0!==l&&(this.He(n),this.Ke=this.Ke.insert(n,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=jl(r).toUint8Array()}catch(l){if(l instanceof s3)return Xo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new EP(s,i,o)}catch(l){return Xo(l instanceof Pv?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&Vw(a.target)){const l=new yt(a.target.path);null!==this.qe.get(l)||this.st(s,l)||this.We(s,l,Rr.newNoDocument(l,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=fn();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Ye(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new xv(e,n,this.Ke,this.qe,r);return this.qe=Jo(),this.Qe=tH(),this.Ke=new yr(nn),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new eH,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new lr(nn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||Ge("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new eH),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function tH(){return new yr(yt.comparator)}function nH(){return new yr(yt.comparator)}const ide={asc:"ASCENDING",desc:"DESCENDING"},ode={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sde={and:"AND",or:"OR"};class ade{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wP(t,e){return t.useProto3Json||mv(e)?e:{value:e}}function Mp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rH(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lde(t,e){return Mp(t,e.toTimestamp())}function ii(t){return Lt(!!t),Ut.fromTimestamp(function(n){const r=Qc(n);return new Mr(r.seconds,r.nanos)}(t))}function CP(t,e){return bP(t,e).canonicalString()}function bP(t,e){const n=(i=t,new Sn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function iH(t){const e=Sn.fromString(t);return Lt(pH(e)),e}function Nv(t,e){return CP(t.databaseId,e.path)}function rl(t,e){const n=iH(e);if(n.get(1)!==t.databaseId.projectId)throw new Ue(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ue(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new yt(aH(n))}function oH(t,e){return CP(t.databaseId,e)}function sH(t){const e=iH(t);return 4===e.length?Sn.emptyPath():aH(e)}function TP(t){return new Sn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aH(t){return Lt(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function lH(t,e,n){return{name:Nv(t,e),fields:n.value.mapValue.fields}}function cH(t,e,n){const r=rl(t,e.name),i=ii(e.updateTime),o=e.createTime?ii(e.createTime):Ut.min(),s=new Ji({mapValue:{fields:e.fields}}),a=Rr.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function kv(t,e){let n;if(e instanceof Pp)n={update:lH(t,e.key,e.value)};else if(e instanceof xp)n={delete:Nv(t,e.key)};else if(e instanceof Gl)n={update:lH(t,e.key,e.data),updateMask:mde(e.fieldMask)};else{if(!(e instanceof _P))return Mt();n={verify:Nv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Sp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Sd)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Rp)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw Mt()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:lde(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Mt()),n;var o}function AP(t,e){const n=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Nr.updateTime(ii(o.updateTime)):void 0!==o.exists?Nr.exists(o.exists):Nr.none():Nr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let l=null;"setToServerValue"in a?(Lt("REQUEST_TIME"===a.setToServerValue),l=new Sp):"appendMissingElements"in a?l=new Dd(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Sd(a.removeAllFromArray.values||[]):"increment"in a?l=new Rp(s,a.increment):Mt();const c=Sr.fromServerFormat(a.fieldPath);return new Sv(c,l)}(t,i)):[];var o;if(e.update){const i=rl(t,e.update.name),o=new Ji({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Zo((e.updateMask.fieldPaths||[]).map(h=>Sr.fromServerFormat(h)));return new Gl(i,o,s,n,r)}return new Pp(i,o,n,r)}if(e.delete){const i=rl(t,e.delete);return new xp(i,n)}if(e.verify){const i=rl(t,e.verify);return new _P(i,n)}return Mt()}function uH(t,e){return{documents:[oH(t,e.path)]}}function DP(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oH(t,i);const o=function(c){if(0!==c.length)return fH(nr.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(c){if(0!==c.length)return c.map(h=>{return{field:tu((m=h).field),direction:fde(m.dir)};var m})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=wP(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i};var c}function dH(t){let e=sH(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Lt(1===r);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){const m=hH(p);return m instanceof nr&&dP(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(m=>{return new wv(Np((w=m).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction));var w}));let a=null;n.limit&&(a=function(p){let m;return m="object"==typeof p?p.value:p,mv(m)?null:m}(n.limit));let l=null;var p;n.startAt&&(l=new eu((p=n.startAt).values||[],!!p.before));let c=null;return n.endAt&&(c=function(p){return new eu(p.values||[],!p.before)}(n.endAt)),T3(e,i,s,o,a,"F",l,c)}function hH(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Np(n.unaryFilter.field);return Rn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Np(n.unaryFilter.field);return Rn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Np(n.unaryFilter.field);return Rn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Np(n.unaryFilter.field);return Rn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Mt()}}(t):void 0!==t.fieldFilter?Rn.create(Np((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Mt()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return nr.create(n.compositeFilter.filters.map(r=>hH(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Mt()}}(n.compositeFilter.op))}(t):Mt();var n}function fde(t){return ide[t]}function pde(t){return ode[t]}function gde(t){return sde[t]}function tu(t){return{fieldPath:t.canonicalString()}}function Np(t){return Sr.fromServerFormat(t.fieldPath)}function fH(t){return t instanceof Rn?function(n){if("=="===n.op){if(c3(n.value))return{unaryFilter:{field:tu(n.field),op:"IS_NAN"}};if(l3(n.value))return{unaryFilter:{field:tu(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(c3(n.value))return{unaryFilter:{field:tu(n.field),op:"IS_NOT_NAN"}};if(l3(n.value))return{unaryFilter:{field:tu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tu(n.field),op:pde(n.op),value:n.value}}}(t):t instanceof nr?function(n){const r=n.getFilters().map(i=>fH(i));return 1===r.length?r[0]:{compositeFilter:{op:gde(n.op),filters:r}}}(t):Mt()}function mde(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pH(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Wl{constructor(e,n,r,i,o=Ut.min(),s=Ut.min(),a=wi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Wl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gH{constructor(e){this.ct=e}}function mH(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ww(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Nv(o=t.ct,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Mp(o,s.version.toTimestamp()),createTime:Mp(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Rd(e.version)};else{if(!e.isUnknownDocument())return Mt();r.unknownDocument={path:n.path.toArray(),version:Rd(e.version)}}var o,s;return r}function Ww(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Rd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pd(t){const e=new Mr(t.seconds,t.nanoseconds);return Ut.fromTimestamp(e)}function xd(t,e){const n=(e.baseMutations||[]).map(o=>AP(t.ct,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>AP(t.ct,o)),i=Mr.fromMillis(e.localWriteTimeMs);return new vP(e.batchId,i,n,r)}function Ov(t){const e=Pd(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Pd(t.lastLimboFreeSnapshotVersion):Ut.min();let r;return r=void 0!==t.query.documents?(Lt(1===(o=t.query).documents.length),No(Tp(sH(o.documents[0])))):function(o){return No(dH(o))}(t.query),new Wl(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,wi.fromBase64String(t.resumeToken));var o}function _H(t,e){const n=Rd(e.snapshotVersion),r=Rd(e.lastLimboFreeSnapshotVersion);let i;i=Vw(e.target)?uH(t.ct,e.target):DP(t.ct,e.target).ut;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ad(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function SP(t){const e=dH({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?$w(e,e.limit,"L"):e}function RP(t,e){return new IP(e.largestBatchId,AP(t.ct,e.overlayMutation))}function vH(t,e){const n=e.path.lastSegment();return[t,fo(e.path.popLast()),n]}function yH(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Rd(r.readTime),documentKey:fo(r.documentKey.path),largestBatchId:r.largestBatchId}}class vde{getBundleMetadata(e,n){return IH(e).get(n).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Pd(o.createTime),version:o.version};var o})}saveBundleMetadata(e,n){return IH(e).put({bundleId:(i=n).id,createTime:Rd(ii(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return EH(e).get(n).next(r=>{if(r)return{name:(o=r).name,query:SP(o.bundledQuery),readTime:Pd(o.readTime)};var o})}saveNamedQuery(e,n){return EH(e).put({name:(i=n).name,readTime:Rd(ii(i.readTime)),bundledQuery:i.bundledQuery});var i}}function IH(t){return Vi(t,"bundles")}function EH(t){return Vi(t,"namedQueries")}class qw{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new qw(e,n.uid||"")}getOverlay(e,n){return Fv(e).get(vH(this.userId,n)).next(r=>r?RP(this.serializer,r):null)}getOverlays(e,n){const r=nl();return oe.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,s)=>{const a=new IP(n,s);i.push(this.ht(e,a))}),oe.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(s=>i.add(fo(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Fv(e).H("collectionPathOverlayIndex",a))}),oe.waitFor(o)}getOverlaysForCollection(e,n,r){const i=nl(),o=fo(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Fv(e).W("collectionPathOverlayIndex",s).next(a=>{for(const l of a){const c=RP(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=nl();let s;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Fv(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,c,h)=>{const p=RP(this.serializer,c);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,n){return Fv(e).put(function(i,o,s){const[a,l,c]=vH(o,s.mutation.key);return{userId:o,collectionPath:l,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:kv(i.ct,s.mutation)}}(this.serializer,this.userId,n))}}function Fv(t){return Vi(t,"documentOverlays")}class Md{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Kr(e.integerValue));else if("doubleValue"in e){const r=Kr(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),_v(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(n,20),"string"==typeof r?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(jl(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?u3(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):Mt()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),yt.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function yde(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function wH(t){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=yde(255&r[o]);if(i+=s,8!==s)break}return i}(t);return Math.ceil(e/8)}Md.bt=new Md;class Ide{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const n=this.Bt(e),r=wH(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Bt(e),r=wH(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Ede{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class wde{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Lv{constructor(){this.Gt=new Ide,this.zt=new Ede(this.Gt),this.jt=new wde(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Nd{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Nd(this.indexId,this.documentKey,this.arrayValue,r)}}function nu(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=CH(t.arrayValue,e.arrayValue),0!==n?n:(n=CH(t.directionalValue,e.directionalValue),0!==n?n:yt.comparator(t.documentKey,e.documentKey)))}function CH(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class bH{constructor(e){this.Yt=new lr((n,r)=>Sr.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Lt(e.collectionGroup===this.collectionId),this.en)return!1;const n=rP(e);if(void 0!==n&&!this.nn(n))return!1;const r=wd(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[o];if(!this.rn(a,l)||!this.sn(this.Zt[s++],l))return!1}++o}for(;o<r.length;++o)if(s>=this.Zt.length||!this.sn(this.Zt[s++],r[o]))return!1;return!0}on(){if(this.en)return null;let e=new lr(Sr.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new Cd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Cd(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Cd(r.field,"asc"===r.dir?0:1)));return new Ip(Ip.UNKNOWN_ID,this.collectionId,n,Ep.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function TH(t){var e,n;if(Lt(t instanceof Rn||t instanceof nr),t instanceof Rn){if(t instanceof w3){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(o=>Rn.create(t.field,"==",o)))||[];return nr.create(i,"or")}return t}const r=t.filters.map(i=>TH(i));return nr.create(r,t.op)}function Cde(t){if(0===t.getFilters().length)return[];const e=MP(TH(t));return Lt(AH(e)),PP(e)||xP(e)?[e]:e.getFilters()}function PP(t){return t instanceof Rn}function xP(t){return t instanceof nr&&dP(t)}function AH(t){return PP(t)||xP(t)||function(n){if(n instanceof nr&&uP(n)){for(const r of n.getFilters())if(!PP(r)&&!xP(r))return!1;return!0}return!1}(t)}function MP(t){if(Lt(t instanceof Rn||t instanceof nr),t instanceof Rn)return t;if(1===t.filters.length)return MP(t.filters[0]);const e=t.filters.map(r=>MP(r));let n=nr.create(e,t.op);return n=Kw(n),AH(n)?n:(Lt(n instanceof nr),Lt(bp(n)),Lt(n.filters.length>1),n.filters.reduce((r,i)=>NP(r,i)))}function NP(t,e){let n;return Lt(t instanceof Rn||t instanceof nr),Lt(e instanceof Rn||e instanceof nr),n=t instanceof Rn?e instanceof Rn?nr.create([t,e],"and"):DH(t,e):e instanceof Rn?DH(e,t):function(i,o){if(Lt(i.filters.length>0&&o.filters.length>0),bp(i)&&bp(o))return y3(i,o.getFilters());const s=uP(i)?i:o,a=uP(i)?o:i,l=s.filters.map(c=>NP(c,a));return nr.create(l,"or")}(t,e),Kw(n)}function DH(t,e){if(bp(e))return y3(e,t.getFilters());{const n=e.filters.map(r=>NP(t,r));return nr.create(n,"or")}}function Kw(t){if(Lt(t instanceof Rn||t instanceof nr),t instanceof Rn)return t;const e=t.getFilters();if(1===e.length)return Kw(e[0]);if(_3(t))return t;const n=e.map(i=>Kw(i)),r=[];return n.forEach(i=>{i instanceof Rn?r.push(i):i instanceof nr&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:nr.create(r,t.op)}class bde{constructor(){this._n=new kP}addToCollectionParentIndex(e,n){return this._n.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(ys.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(ys.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class kP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new lr(Sn.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new lr(Sn.comparator)).toArray()}}const Qw=new Uint8Array(0);class Tde{constructor(e,n){this.databaseId=n,this.an=new kP,this.un=new zl(r=>Ad(r),(r,i)=>Cv(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const o={collectionId:r,parent:fo(i)};return SH(e).put(o)}return oe.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[z4(n),""],!1,!0);return SH(e).W(i).next(o=>{for(const s of o){if(s.collectionId!==n)break;r.push(el(s.parent))}return r})}addFieldIndex(e,n){const r=Vv(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete i.indexId;const o=r.add(i);if(n.indexState){const s=Op(e);return o.next(a=>{s.put(yH(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=Vv(e),i=Op(e),o=kp(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Vv(e),r=kp(e),i=Op(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return oe.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new bH(r).on();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const r=kp(e);let i=!0;const o=new Map;return oe.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=fn();const a=[];return oe.forEach(o,(l,c)=>{var ge;Ge("IndexedDbIndexManager",`Using index ${ge=l,`id=${ge.indexId}|cg=${ge.collectionGroup}|f=${ge.fields.map(ve=>`${ve.fieldPath}:${ve.kind}`).join(",")}`} to execute ${Ad(n)}`);const h=function(ge,ve){const Xe=rP(ve);if(void 0===Xe)return null;for(const At of Bw(ge,Xe.fieldPath))switch(At.op){case"array-contains-any":return At.value.arrayValue.values||[];case"array-contains":return[At.value]}return null}(c,l),p=function(ge,ve){const Xe=new Map;for(const At of wd(ve))for(const En of Bw(ge,At.fieldPath))switch(En.op){case"==":case"in":Xe.set(At.fieldPath.canonicalString(),En.value);break;case"not-in":case"!=":return Xe.set(At.fieldPath.canonicalString(),En.value),Array.from(Xe.values())}return null}(c,l),m=function(ge,ve){const Xe=[];let At=!0;for(const En of wd(ve)){const Hn=0===En.kind?C3(ge,En.fieldPath,ge.startAt):b3(ge,En.fieldPath,ge.startAt);Xe.push(Hn.value),At&&(At=Hn.inclusive)}return new eu(Xe,At)}(c,l),_=function(ge,ve){const Xe=[];let At=!0;for(const En of wd(ve)){const Hn=0===En.kind?b3(ge,En.fieldPath,ge.endAt):C3(ge,En.fieldPath,ge.endAt);Xe.push(Hn.value),At&&(At=Hn.inclusive)}return new eu(Xe,At)}(c,l),w=this.hn(l,c,m),T=this.hn(l,c,_),S=this.Pn(l,c,p),j=this.In(l.indexId,h,w,m.inclusive,T,_.inclusive,S);return oe.forEach(j,H=>r.j(H,n.limit).next(ge=>{ge.forEach(ve=>{const Xe=yt.fromSegments(ve.documentKey);s.has(Xe)||(s=s.add(Xe),a.push(Xe))})}))}).next(()=>a)}return oe.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:Cde(nr.create(e.filters,"and")).map(r=>fP(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){const l=(null!=n?n.length:1)*Math.max(r.length,o.length),c=l/(null!=n?n.length:1),h=[];for(let p=0;p<l;++p){const m=n?this.Tn(n[p/c]):Qw,_=this.En(e,m,r[p%c],i),w=this.dn(e,m,o[p%c],s),T=a.map(S=>this.En(e,m,S,!0));h.push(...this.createRange(_,w,T))}return h}En(e,n,r,i){const o=new Nd(e,yt.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){const o=new Nd(e,yt.empty(),n,r);return i?o.Jt():o}ln(e,n){const r=new bH(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2;const i=this.cn(n);return oe.forEach(i,o=>this.ln(e,o).next(s=>{s?0!==r&&s.fields.length<function(l){let c=new lr(Sr.comparator),h=!1;for(const p of l.filters)for(const m of p.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?h=!0:c=c.add(m.field));for(const p of l.orderBy)p.field.isKeyField()||(c=c.add(p.field));return c.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}An(e,n){const r=new Lv;for(const i of wd(e)){const o=n.data.field(i.fieldPath);if(null==o)return null;const s=r.Ht(i.kind);Md.bt.Pt(o,s)}return r.Wt()}Tn(e){const n=new Lv;return Md.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new Lv;return Md.bt.Pt(Td(this.databaseId,n),r.Ht(function(o){const s=wd(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(null===r)return[];let i=[];i.push(new Lv);let o=0;for(const s of wd(e)){const a=r[o++];for(const l of i)if(this.Vn(n,s.fieldPath)&&Iv(a))i=this.mn(i,s,a);else{const c=l.Ht(s.kind);Md.bt.Pt(a,c)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const l=new Lv;l.seed(a.Wt()),Md.bt.Pt(s,l.Ht(n.kind)),o.push(l)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof Rn&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Vv(e),i=Op(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{const s=[];return oe.forEach(o,a=>i.get([a.indexId,this.uid]).next(l=>{s.push(function(h,p){const m=p?new Ep(p.sequenceNumber,new ys(Pd(p.readTime),new yt(el(p.documentKey)),p.largestBatchId)):Ep.empty(),_=h.fields.map(([w,T])=>new Cd(Sr.fromServerFormat(w),T));return new Ip(h.indexId,h.collectionGroup,_,m)}(a,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:nn(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Vv(e),o=Op(e);return this.gn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>oe.forEach(a,l=>o.put(yH(l.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){const r=new Map;return oe.forEach(n,(i,o)=>{const s=r.get(i.collectionGroup);return(s?oe.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),oe.forEach(a,l=>this.pn(e,i,l).next(c=>{const h=this.yn(o,l);return c.isEqual(h)?oe.resolve():this.wn(e,o,l,c,h)}))))})}Sn(e,n,r,i){return kp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return kp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=kp(e);let o=new lr(nu);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new Nd(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new lr(nu);const i=this.An(n,e);if(null==i)return r;const o=rP(n);if(null!=o){const s=e.data.field(o.fieldPath);if(Iv(s))for(const a of s.arrayValue.values||[])r=r.add(new Nd(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Nd(n.indexId,e.key,Qw,i));return r}wn(e,n,r,i,o){Ge("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const s=[];return function(l,c,h,p,m){const _=l.getIterator(),w=c.getIterator();let T=wp(_),S=wp(w);for(;T||S;){let j=!1,H=!1;if(T&&S){const ge=h(T,S);ge<0?H=!0:ge>0&&(j=!0)}else null!=T?H=!0:j=!0;j?(p(S),S=wp(w)):H?(m(T),T=wp(_)):(T=wp(_),S=wp(w))}}(i,o,nu,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),oe.waitFor(s)}gn(e){let n=1;return Op(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>nu(s,a)).filter((s,a,l)=>!a||0!==nu(s,l[a-1]));const i=[];i.push(e);for(const s of r){const a=nu(s,e),l=nu(s,n);if(0===a)i[0]=e.Jt();else if(a>0&&l<0)i.push(s),i.push(s.Jt());else if(l>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Qw,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Qw,[]]))}return o}Dn(e,n){return nu(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(RH)}getMinOffset(e,n){return oe.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||Mt())).next(RH)}}function SH(t){return Vi(t,"collectionParents")}function kp(t){return Vi(t,"indexEntries")}function Vv(t){return Vi(t,"indexConfiguration")}function Op(t){return Vi(t,"indexState")}function RH(t){Lt(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;iP(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ys(e.readTime,e.documentKey,n)}const PH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class po{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new po(e,po.DEFAULT_COLLECTION_PERCENTILE,po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xH(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:s},(h,p,m)=>(a++,m.delete()));o.push(l.next(()=>{Lt(1===a)}));const c=[];for(const h of n.mutations){const p=J4(e,h.key.path,n.batchId);o.push(i.delete(p)),c.push(h.key)}return oe.waitFor(o).next(()=>c)}function Yw(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Mt();e=t.noDocument}return JSON.stringify(e).length}po.DEFAULT_COLLECTION_PERCENTILE=10,po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,po.DEFAULT=new po(41943040,po.DEFAULT_COLLECTION_PERCENTILE,po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),po.DISABLED=new po(-1,0,0);class Xw{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){Lt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new Xw(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ru(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=Fp(e),s=ru(e);return s.add({}).next(a=>{Lt("number"==typeof a);const l=new vP(a,n,r,i),c=function(_,w,T){const S=T.baseMutations.map(H=>kv(_.ct,H)),j=T.mutations.map(H=>kv(_.ct,H));return{userId:w,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:S,mutations:j}}(this.serializer,this.userId,l),h=[];let p=new lr((m,_)=>nn(m.canonicalString(),_.canonicalString()));for(const m of i){const _=J4(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(c)),h.push(o.put(_,fue))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),oe.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return ru(e).get(n).next(r=>r?(Lt(r.userId===this.userId),xd(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?oe.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return ru(e).Y({index:"userMutationsIndex",range:i},(s,a,l)=>{a.userId===this.userId&&(Lt(a.batchId>=r),o=xd(this.serializer,a)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ru(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ru(e).W("userMutationsIndex",n).next(r=>r.map(i=>xd(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=xw(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Fp(e).Y({range:i},(s,a,l)=>{const[c,h,p]=s,m=el(h);if(c===this.userId&&n.path.isEqual(m))return ru(e).get(p).next(_=>{if(!_)throw Mt();Lt(_.userId===this.userId),o.push(xd(this.serializer,_))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lr(nn);const i=[];return n.forEach(o=>{const s=xw(this.userId,o.path),a=IDBKeyRange.lowerBound(s),l=Fp(e).Y({range:a},(c,h,p)=>{const[m,_,w]=c,T=el(_);m===this.userId&&o.path.isEqual(T)?r=r.add(w):p.done()});i.push(l)}),oe.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=xw(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new lr(nn);return Fp(e).Y({range:s},(l,c,h)=>{const[p,m,_]=l,w=el(m);p===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(_)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],i=[];return n.forEach(o=>{i.push(ru(e).get(o).next(s=>{if(null===s)throw Mt();Lt(s.userId===this.userId),r.push(xd(this.serializer,s))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return xH(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return oe.resolve();const r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Fp(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){const l=el(o[1]);i.push(l)}else a.done()}).next(()=>{Lt(0===i.length)})})}containsKey(e,n){return MH(e,this.userId,n)}xn(e){return NH(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function MH(t,e,n){const r=xw(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Fp(t).Y({range:o,J:!0},(a,l,c)=>{const[h,p,m]=a;h===e&&p===i&&(s=!0),c.done()}).next(()=>s)}function ru(t){return Vi(t,"mutations")}function Fp(t){return Vi(t,"documentMutations")}function NH(t){return Vi(t,"mutationQueues")}class kd{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new kd(0)}static Ln(){return new kd(-1)}}class Ade{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new kd(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Ut.fromTimestamp(new Mr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Lp(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Lt(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return Lp(e).Y((s,a)=>{const l=Ov(a);l.sequenceNumber<=n&&null===r.get(l.targetId)&&(i++,o.push(this.removeTargetData(e,l)))}).next(()=>oe.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Lp(e).Y((r,i)=>{const o=Ov(i);n(o)})}Bn(e){return kH(e).get("targetGlobalKey").next(n=>(Lt(null!==n),n))}kn(e,n){return kH(e).put("targetGlobalKey",n)}qn(e,n){return Lp(e).put(_H(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ad(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Lp(e).Y({range:i,index:"queryTargetsIndex"},(s,a,l)=>{const c=Ov(a);Cv(n,c.target)&&(o=c,l.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=iu(e);return n.forEach(s=>{const a=fo(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),oe.waitFor(i)}removeMatchingKeys(e,n,r){const i=iu(e);return oe.forEach(n,o=>{const s=fo(o.path);return oe.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=iu(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=iu(e);let o=fn();return i.Y({range:r,J:!0},(s,a,l)=>{const c=el(s[1]),h=new yt(c);o=o.add(h)}).next(()=>o)}containsKey(e,n){const r=fo(n.path),i=IDBKeyRange.bound([r],[z4(r)],!1,!0);let o=0;return iu(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],l,c)=>{0!==s&&(o++,c.done())}).next(()=>o>0)}_t(e,n){return Lp(e).get(n).next(r=>r?Ov(r):null)}}function Lp(t){return Vi(t,"targets")}function kH(t){return Vi(t,"targetGlobal")}function iu(t){return Vi(t,"targetDocuments")}function OH([t,e],[n,r]){const i=nn(t,n);return 0===i?nn(e,r):i}class Dde{constructor(e){this.Kn=e,this.buffer=new lr(OH),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();OH(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FH{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;Ge("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,y.A)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){qc(r)?Ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Wc(r)}yield n.zn(3e5)}))}}class Sde{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return oe.resolve(Is._e);const r=new Dde(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(PH)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PH):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(c=Date.now(),vp()<=_s.$b.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-h}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(l-a)+`ms\n\tRemoved ${p} documents in `+(c-l)+`ms\nTotal Duration: ${c-h}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}}class Rde{constructor(e,n){this.db=e,this.garbageCollector=function LH(t,e){return new Sde(t,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Zw(e,r)}removeReference(e,n,r){return Zw(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Zw(e,n)}er(e,n){return function(i,o){let s=!1;return NH(i).Z(a=>MH(i,a,o).next(l=>(l&&(s=!0),oe.resolve(!l)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Xn(e,(s,a)=>{if(a<=n){const l=this.er(e,s).next(c=>{if(!c)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Ut.min()),iu(e).delete([0,fo(s.path)])))});i.push(l)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Zw(e,n)}Xn(e,n){const r=iu(e);let i,o=Is._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:l,sequenceNumber:c})=>{0===s?(o!==Is._e&&n(new yt(el(i)),o),o=c,i=l):o=Is._e}).next(()=>{o!==Is._e&&n(new yt(el(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zw(t,e){return iu(t).put((i=t.currentSequenceNumber,{targetId:0,path:fo(e.path),sequenceNumber:i}));var i}class VH{constructor(){this.changes=new zl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Pde{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Od(e).put(r)}removeEntry(e,n,r){return Od(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ww(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Rr.newInvalidDocument(n);return Od(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Bv(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Rr.newInvalidDocument(n)};return Od(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Bv(n))},(i,o)=>{r={document:this.nr(n,o),size:Yw(o)}}).next(()=>r)}getEntries(e,n){let r=Jo();return this.ir(e,n,(i,o)=>{const s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=Jo(),i=new yr(yt.comparator);return this.ir(e,n,(o,s)=>{const a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,Yw(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return oe.resolve();let i=new lr(jH);n.forEach(l=>i=i.add(l));const o=IDBKeyRange.bound(Bv(i.first()),Bv(i.last())),s=i.getIterator();let a=s.getNext();return Od(e).Y({index:"documentKeyIndex",range:o},(l,c,h)=>{const p=yt.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&jH(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,c),a=s.hasNext()?s.getNext():null),a?h.U(Bv(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Ww(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Od(e).W(IDBKeyRange.bound(a,l,!0)).next(c=>{null==o||o.incrementDocumentReadCount(c.length);let h=Jo();for(const p of c){const m=this.nr(yt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Tv(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,i){let o=Jo();const s=UH(n,r),a=UH(n,ys.max());return Od(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(l,c,h)=>{const p=this.nr(yt.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new xde(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return $H(e).get("remoteDocumentGlobalKey").next(n=>(Lt(!!n),n))}tr(e,n){return $H(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=function _de(t,e){let n;if(e.document)n=cH(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=yt.fromSegments(e.noDocument.path),i=Pd(e.noDocument.readTime);n=Rr.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Mt();{const r=yt.fromSegments(e.unknownDocument.path),i=Pd(e.unknownDocument.version);n=Rr.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const o=new Mr(i[0],i[1]);return Ut.fromTimestamp(o)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(Ut.min()))return r}return Rr.newInvalidDocument(e)}}function BH(t){return new Pde(t)}class xde extends VH{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new zl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new lr((o,s)=>nn(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){const l=mH(this.ar.serializer,s);i=i.add(o.path.popLast());const c=Yw(l);r+=c-a.size,n.push(this.ar.addEntry(e,o,l))}else if(r-=a.size,this.trackRemovals){const l=mH(this.ar.serializer,s.convertToNoDocument(Ut.min()));n.push(this.ar.addEntry(e,o,l))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),oe.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function $H(t){return Vi(t,"remoteDocumentGlobal")}function Od(t){return Vi(t,"remoteDocumentsV14")}function Bv(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function UH(t,e){const n=e.documentKey.path.toArray();return[t,Ww(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function jH(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=nn(n[o],r[o]),i)return i;return i=nn(n.length,r.length),i||(i=nn(n[n.length-2],r[r.length-2]),i||nn(n[n.length-1],r[r.length-1]))}class Mde{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class HH{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Rv(r.mutation,i,Zo.empty(),Mr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fn()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fn()){const i=nl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Av();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=nl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fn()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Jo();const s=Dv(),a=Dv();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(void 0===h||h.mutation instanceof Gl)?o=o.insert(c.key,c):void 0!==h?(s.set(c.key,h.mutation.getFieldMask()),Rv(h.mutation,c,h.mutation.getFieldMask(),Mr.now())):s.set(c.key,Zo.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,h)=>s.set(c,h)),n.forEach((c,h)=>{var p;return a.set(c,new Mde(h,null!==(p=s.get(c))&&void 0!==p?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Dv();let i=new yr((s,a)=>s-a),o=fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=n.get(l);if(null===c)return;let h=r.get(l)||Zo.empty();h=a.applyToLocalView(c,h),r.set(l,h);const p=(i.get(a.batchId)||fn()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,p=N3();h.forEach(m=>{if(!o.has(m)){const _=j3(n.get(m),r.get(m));null!==_&&p.set(m,_),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,p))}return oe.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return yt.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):pP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):oe.resolve(nl());let a=-1,l=o;return s.next(c=>oe.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?oe.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,fn())).next(h=>({batchId:a,changes:M3(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new yt(n)).next(r=>{let i=Av();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Av();return this.indexManager.getCollectionParents(e,o).next(a=>oe.forEach(a,l=>{const c=(p=n,m=l.child(o),new Hl(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt));var p,m;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,c)=>{const h=c.getKey();null===s.get(h)&&(s=s.insert(h,Rr.newInvalidDocument(h)))});let a=Av();return s.forEach((l,c)=>{const h=o.get(l);void 0!==h&&Rv(h.mutation,c,Zo.empty(),Mr.now()),Tv(n,c)&&(a=a.insert(l,c))}),a})}}class Nde{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return oe.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(i=n).id,version:i.version,createTime:ii(i.createTime)}),oe.resolve();var i}getNamedQuery(e,n){return oe.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(i=n).name,query:SP(i.bundledQuery),readTime:ii(i.readTime)}),oe.resolve();var i}}class kde{constructor(){this.overlays=new yr(yt.comparator),this.hr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=nl();return oe.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),oe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const i=nl(),o=n.length+1,s=new yt(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new yr((c,h)=>c-h);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=o.get(c.largestBatchId);null===h&&(h=nl(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=nl(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return oe.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new IP(n,r));let o=this.hr.get(n);void 0===o&&(o=fn(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}}class OP{constructor(){this.Pr=new lr(Bi.Ir),this.Tr=new lr(Bi.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Bi(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Bi(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new yt(new Sn([])),r=new Bi(n,e),i=new Bi(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new yt(new Sn([])),r=new Bi(n,e),i=new Bi(n,e+1);let o=fn();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Bi(e,0),r=this.Pr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Bi{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return yt.comparator(e.key,n.key)||nn(e.pr,n.pr)}static Er(e,n){return nn(e.pr,n.pr)||yt.comparator(e.key,n.key)}}class Ode{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new lr(Bi.Ir)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.yr;this.yr++;const s=new vP(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new Bi(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return oe.resolve(s)}lookupMutationBatch(e,n){return oe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.br(n+1),o=i<0?0:i;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Bi(n,0),i=new Bi(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{const a=this.Sr(s.pr);o.push(a)}),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lr(nn);return n.forEach(i=>{const o=new Bi(i,0),s=new Bi(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),oe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;yt.isDocumentKey(o)||(o=o.child(""));const s=new Bi(new yt(o),0);let a=new lr(nn);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},s),oe.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Lt(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return oe.forEach(n.mutations,i=>{const o=new Bi(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Bi(n,0),i=this.wr.firstAfterOrEqual(r);return oe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Fde{constructor(e){this.vr=e,this.docs=new yr(yt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():Rr.newInvalidDocument(n))}getEntries(e,n){let r=Jo();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Rr.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Jo();const s=n.path,a=new yt(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||iP(W4(h),r)<=0||(i.has(h.key)||Tv(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Mt()}Fr(e,n){return oe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Lde(this)}getSize(e){return oe.resolve(this.size)}}class Lde extends VH{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),oe.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class Vde{constructor(e){this.persistence=e,this.Mr=new zl(n=>Ad(n),Cv),this.lastRemoteSnapshotVersion=Ut.min(),this.highestTargetId=0,this.Or=0,this.Nr=new OP,this.targetCount=0,this.Lr=kd.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),oe.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new kd(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.qn(n),oe.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),oe.waitFor(o).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),oe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this.Nr.containsKey(n))}}class FP{constructor(e,n){this.Br={},this.overlays={},this.kr=new Is(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Vde(this),this.indexManager=new bde,this.remoteDocumentCache=new Fde(r=>this.referenceDelegate.Kr(r)),this.serializer=new gH(n),this.$r=new Nde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kde,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Ode(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Ge("MemoryPersistence","Starting transaction:",e);const i=new Bde(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return oe.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class Bde extends K4{constructor(e){super(),this.currentSequenceNumber=e}}class Jw{constructor(e){this.persistence=e,this.zr=new OP,this.jr=null}static Hr(e){return new Jw(e)}get Jr(){if(this.jr)return this.jr;throw Mt()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),oe.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Jr,r=>{const i=yt.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,Ut.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return oe.or([()=>oe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class $de{constructor(e){this.serializer=e}N(e,n,r,i){const o=new Pw("createOrUpgrade",n);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Z4,{unique:!0}),l.createObjectStore("documentMutations"),zH(e),function(l){l.createObjectStore("remoteDocuments")}(e));let s=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),zH(e)),s=s.next(()=>function(l){const c=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ut.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(l,c){return c.store("mutations").W().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Z4,{unique:!0});const p=c.store("mutations"),m=h.map(_=>p.put(_));return oe.waitFor(m)})}(e,o))),s=s.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:Tue});c.createIndex("collectionPathOverlayIndex",Aue,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",Due,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:pue});c.createIndex("documentKeyIndex",gue),c.createIndex("collectionGroupIndex",mue)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Eue}).createIndex("sequenceNumberIndex",wue,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:Cue}).createIndex("documentKeyIndex",bue,{unique:!1})}(e))),s}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Yw(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>oe.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>oe.forEach(a,l=>{Lt(l.userId===o.userId);const c=xd(this.serializer,l);return xH(e,o.userId,c).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Y((s,a)=>{const l=new Sn(s),c=[0,fo(l)];o.push(n.get(c).next(h=>h?oe.resolve():n.put({targetId:0,path:fo(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:Iue});const r=n.store("collectionParents"),i=new kP,o=s=>{if(i.add(s)){const a=s.lastSegment(),l=s.popLast();return r.put({collectionId:a,parent:fo(l)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{const l=new Sn(s);return o(l.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,l],c)=>{const h=el(a);return o(h.popLast())}))}ri(e){const n=e.store("targets");return n.Y((r,i)=>{const o=Ov(i),s=_H(this.serializer,o);return n.put(s)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{const a=n.store("remoteDocumentsV14"),l=(p=s,p.document?new yt(Sn.fromString(p.document.name).popFirst(5)):p.noDocument?yt.fromSegments(p.noDocument.path):p.unknownDocument?yt.fromSegments(p.unknownDocument.path):Mt()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var p;i.push(a.put(c))}).next(()=>oe.waitFor(i))}si(e,n){const r=n.store("mutations"),i=BH(this.serializer),o=new FP(Jw.Hr,this.serializer.ct);return r.W().next(s=>{const a=new Map;return s.forEach(l=>{var c;let h=null!==(c=a.get(l.userId))&&void 0!==c?c:fn();xd(this.serializer,l).keys().forEach(p=>h=h.add(p)),a.set(l.userId,h)}),oe.forEach(a,(l,c)=>{const h=new Li(c),p=qw.lt(this.serializer,h),m=o.getIndexManager(h),_=Xw.lt(h,this.serializer,m,o.referenceDelegate);return new HH(i,_,p,m).recalculateAndSaveOverlaysForDocumentKeys(new aP(n,Is._e),l).next()})})}}function zH(t){t.createObjectStore("targetDocuments",{keyPath:vue}).createIndex("documentTargetsIndex",yue,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_ue,{unique:!0}),t.createObjectStore("targetGlobal")}const LP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class VP{constructor(e,n,r,i,o,s,a,l,c,h,p=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=c,this.ai=h,this.ui=p,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=m=>Promise.resolve(),!VP.D())throw new Ue(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Rde(this,i),this.Ti=n+"main",this.serializer=new gH(l),this.Ei=new Ws(this.Ti,this.ui,new $de(this.serializer)),this.Qr=new Ade(this.referenceDelegate,this.serializer),this.remoteDocumentCache=BH(this.serializer),this.$r=new vde,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===h&&ri("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(me.FAILED_PRECONDITION,LP);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Is(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var r=(0,y.A)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(function(){var n=(0,y.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,y.A)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>tC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(qc(e))return Ge("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ge("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return $v(e).get("owner").next(n=>oe.resolve(this.Si(n)))}bi(e){return tC(e).delete(this.clientId)}Di(){var e=this;return(0,y.A)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Vi(r,"clientMetadata");return i.W().next(o=>{const s=e.vi(o,18e5),a=o.filter(l=>-1===s.indexOf(l));return oe.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of n)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?oe.resolve(!0):$v(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new Ue(me.FAILED_PRECONDITION,LP);return!1}}return!(!this.networkEnabled||!this.inForeground)||tC(e).W().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Ge("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,y.A)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new aP(n,Is._e);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>tC(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Xw.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Tde(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return qw.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){Ge("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",o=15===(l=this.ui)?Rue:14===l?n3:13===l?t3:12===l?Sue:11===l?e3:void Mt();var l;let s;return this.Ei.runTransaction(e,i,o,a=>(s=new aP(a,this.kr?this.kr.next():Is._e),"readwrite-primary"===n?this.gi(s).next(l=>!!l||this.pi(s)).next(l=>{if(!l)throw ri(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Ue(me.FAILED_PRECONDITION,q4);return r(s)}).next(l=>this.wi(s).next(()=>l)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return $v(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Ue(me.FAILED_PRECONDITION,LP)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $v(e).put("owner",n)}static D(){return Ws.D()}yi(e){const n=$v(e);return n.get("owner").next(r=>this.Si(r)?(Ge("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):oe.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n||e>r&&(ri(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,A.nr)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return Ge("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ri("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ri("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $v(t){return Vi(t,"owner")}function tC(t){return Vi(t,"clientMetadata")}function BP(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class $P{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=fn(),i=fn();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new $P(e,n.fromCache,r,i)}}class Ude{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class GH{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,A.nr)()?8:Ws.v((0,A.ZQ)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Ude;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(vp()<=_s.$b.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",Dp(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),oe.resolve()):(vp()<=_s.$b.DEBUG&&Ge("QueryEngine","Query:",Dp(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(vp()<=_s.$b.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",Dp(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,No(n))):oe.resolve())}ji(e,n){if(A3(n))return oe.resolve(null);let r=No(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=$w(n,null,"F"),r=No(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=fn(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,s,l.readTime)?this.ji(e,$w(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return A3(n)||i.isEqual(Ut.min())?oe.resolve(null):this.zi.getDocuments(e,r).next(o=>{const s=this.Zi(n,o);return this.Xi(n,s,r,i)?oe.resolve(null):(vp()<=_s.$b.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Dp(n)),this.es(e,s,n,G4(i,-1)).next(a=>a))})}Zi(e,n){let r=new lr(P3(e));return n.forEach((i,o)=>{Tv(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return vp()<=_s.$b.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",Dp(n)),this.zi.getDocumentsMatchingQuery(e,n,ys.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}class jde{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new yr(nn),this.rs=new zl(o=>Ad(o),Cv),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HH(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function WH(t,e,n,r){return new jde(t,e,n,r)}function qH(t,e){return UP.apply(this,arguments)}function UP(){return UP=(0,y.A)(function*(t,e){const n=mt(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=fn();for(const c of i){s.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of o){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})}),UP.apply(this,arguments)}function KH(t){const e=mt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function QH(t,e,n){let r=fn(),i=fn();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Jo();return n.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ut.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):Ge("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:s,ls:i}})}function Gde(t,e){const n=mt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Vp(t,e){const n=mt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,oe.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new Wl(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function Bp(t,e,n){return jP.apply(this,arguments)}function jP(){return jP=(0,y.A)(function*(t,e,n){const r=mt(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!qc(s))throw s;Ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),jP.apply(this,arguments)}function nC(t,e,n){const r=mt(t);let i=Ut.min(),o=fn();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,h){const p=mt(l),m=p.rs.get(h);return void 0!==m?oe.resolve(p.ns.get(m)):p.Qr.getTargetData(c,h)}(r,s,No(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:Ut.min(),n?o:fn())).next(a=>(ZH(r,R3(e),a),{documents:a,hs:o})))}function YH(t,e){const n=mt(t),r=mt(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function XH(t,e){const n=mt(t),r=n.ss.get(e)||Ut.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,G4(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ZH(n,e,i),i))}function ZH(t,e,n){let r=t.ss.get(e)||Ut.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function HP(){return HP=(0,y.A)(function*(t,e,n,r){const i=mt(t);let o=fn(),s=Jo();for(const c of n){const h=e.Ps(c.metadata.name);c.document&&(o=o.add(h));const p=e.Is(c);p.setReadTime(e.Ts(c.metadata.readTime)),s=s.insert(h,p)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=yield Vp(i,(h=r,No(Tp(Sn.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>QH(c,a,s).next(h=>(a.apply(c),h)).next(h=>i.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Qr.addMatchingKeys(c,o,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,h.cs,h.ls)).next(()=>h.cs)))}),HP.apply(this,arguments)}function qde(t,e){return zP.apply(this,arguments)}function zP(){return zP=(0,y.A)(function*(t,e,n=fn()){const r=yield Vp(t,No(SP(e.bundledQuery))),i=mt(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=ii(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(o,e);const a=r.withResumeToken(wi.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(o,a).next(()=>i.Qr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Qr.addMatchingKeys(o,n,r.targetId)).next(()=>i.$r.saveNamedQuery(o,e))})}),zP.apply(this,arguments)}function JH(t,e){return`firestore_clients_${t}_${e}`}function e5(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function GP(t,e){return`firestore_targets_${t}_${e}`}class rC{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new Ue(i.error.code,i.error.message))),s?new rC(e,n,i.state,o):(ri("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uv{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Ue(r.error.code,r.error.message))),o?new Uv(e,r.state,i):(ri("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class iC{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=mP();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Y4(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new iC(e,o):(ri("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class WP{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new WP(n.clientId,n.onlineState):(ri("SharedClientState",`Failed to parse online state: ${e}`),null)}}class qP{constructor(){this.activeTargetIds=mP()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KP{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new yr(nn),this.started=!1,this.ys=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=JH(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new qP),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,y.A)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Vs)continue;const o=e.getItem(JH(e.persistenceKey,i));if(o){const s=iC.Es(i,o);s&&(e.ps=e.ps.insert(s.clientId,s))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(GP(this.persistenceKey,e));if(r){const i=Uv.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(GP(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Ge("SharedClientState","READ",e,n),n}setItem(e,n){Ge("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Ge("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(Ge("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void ri("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,y.A)(function*(){if(n.started){if(null!==r.key)if(n.bs.test(r.key)){if(null==r.newValue){const i=n.$s(r.key);return n.Us(i,null)}{const i=n.Ws(r.key,r.newValue);if(i)return n.Us(i.clientId,i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.Gs(r.key,r.newValue);if(i)return n.zs(i)}}else if(n.Cs.test(r.key)){if(null!==r.newValue){const i=n.js(r.key,r.newValue);if(i)return n.Hs(i)}}else if(r.key===n.vs){if(null!==r.newValue){const i=n.xs(r.newValue);if(i)return n.Os(i)}}else if(r.key===n.Ss){const i=function(s){let a=Is._e;if(null!=s)try{const l=JSON.parse(s);Lt("number"==typeof l),a=l}catch(l){ri("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(r.newValue);i!==Is._e&&n.sequenceNumberHandler(i)}else if(r.key===n.Fs){const i=n.Js(r.newValue);yield Promise.all(i.map(o=>n.syncEngine.Ys(o)))}}else n.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){const i=new rC(this.currentUser,e,n,r),o=e5(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){const n=e5(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,r){const i=GP(this.persistenceKey,e),o=new Uv(e,n,r);this.setItem(i,o.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return iC.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return rC.Es(new Li(void 0!==r[2]?r[2]:null),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return Uv.Es(i,n)}xs(e){return WP.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,y.A)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);Ge("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(l=>{i.has(l)||s.push(l)}),i.forEach(l=>{o.has(l)||a.push(l)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=mP();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class t5{constructor(){this.no=new qP,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new qP,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Kde{io(e){}shutdown(){}}class n5{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let oC=null;function QP(){return null===oC?oC=268435456+Math.round(2147483648*Math.random()):oC++,"0x"+oC.toString(16)}const Qde={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yde{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const go="WebChannelConnection";class Xde extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){const a=QP(),l=this.bo(n,r.toUriEncodedString());Ge("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(n,l,c,i).then(h=>(Ge("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Xo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+_p,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){return`${this.fo}/v1/${r}:${Qde[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const o=QP();return new Promise((s,a)=>{const l=new Kce;l.setWithCredentials(!0),l.listenOnce(Wce.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case tP.NO_ERROR:const h=l.getResponseJson();Ge(go,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case tP.TIMEOUT:Ge(go,`RPC '${e}' ${o} timed out`),a(new Ue(me.DEADLINE_EXCEEDED,"Request time out"));break;case tP.HTTP_ERROR:const p=l.getStatus();if(Ge(go,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=null==m?void 0:m.error;if(_&&_.status&&_.message){const w=function(S){const j=S.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(j)>=0?j:me.UNKNOWN}(_.status);a(new Ue(w,_.message))}else a(new Ue(me.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ue(me.UNAVAILABLE,"Connection failed."));break;default:Mt()}}finally{Ge(go,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);Ge(go,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const i=QP(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=zce(),a=Gce(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=o.join("");Ge(go,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=s.createWebChannel(h,l);let m=!1,_=!1;const w=new Yde({lo:S=>{_?Ge(go,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(m||(Ge(go,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),Ge(go,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},ho:()=>p.close()}),T=(S,j,H)=>{S.listen(j,ge=>{try{H(ge)}catch(ve){setTimeout(()=>{throw ve},0)}})};return T(p,Rw.EventType.OPEN,()=>{_||Ge(go,`RPC '${e}' stream ${i} transport opened.`)}),T(p,Rw.EventType.CLOSE,()=>{_||(_=!0,Ge(go,`RPC '${e}' stream ${i} transport closed`),w.Vo())}),T(p,Rw.EventType.ERROR,S=>{_||(_=!0,Xo(go,`RPC '${e}' stream ${i} transport errored:`,S),w.Vo(new Ue(me.UNAVAILABLE,"The operation could not be completed")))}),T(p,Rw.EventType.MESSAGE,S=>{var j;if(!_){const H=S.data[0];Lt(!!H);const ve=H.error||(null===(j=H[0])||void 0===j?void 0:j.error);if(ve){Ge(go,`RPC '${e}' stream ${i} received error:`,ve);const Xe=ve.status;let At=function(bs){const _g=mi[bs];if(void 0!==_g)return K3(_g)}(Xe),En=ve.message;void 0===At&&(At=me.INTERNAL,En="Unknown error status: "+Xe+" with message "+ve.message),_=!0,w.Vo(new Ue(At,En)),p.close()}else Ge(go,`RPC '${e}' stream ${i} received:`,H),w.mo(H)}}),T(a,qce.STAT_EVENT,S=>{S.stat===B4.PROXY?Ge(go,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===B4.NOPROXY&&Ge(go,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.Ro()},0),w}}function r5(){return typeof window<"u"?window:null}function sC(){return typeof document<"u"?document:null}function jv(t){return new ade(t,!0)}class YP{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&Ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class i5{constructor(e,n,r,i,o,s,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new YP(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,y.A)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,y.A)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var r=this;return(0,y.A)(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():n&&n.code===me.RESOURCE_EXHAUSTED?(ri(n.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):n&&n.code===me.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new Ue(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo((0,y.A)(function*(){e.state=0,e.start()}))}__(e){return Ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(Ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zde extends i5{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function ude(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:Mt(),i=e.targetChange.targetIds||[],o=function(c,h){return c.useProto3Json?(Lt(void 0===h||"string"==typeof h),wi.fromBase64String(h||"")):(Lt(void 0===h||h instanceof Uint8Array),wi.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const h=void 0===c.code?me.UNKNOWN:K3(c.code);return new Ue(h,c.message||"")}(s);n=new J3(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=rl(t,r.document.name),o=ii(r.document.updateTime),s=r.document.createTime?ii(r.document.createTime):Ut.min(),a=new Ji({mapValue:{fields:r.document.fields}}),l=Rr.newFoundDocument(i,o,s,a);n=new Gw(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=rl(t,r.document),o=r.readTime?ii(r.readTime):Ut.min(),s=Rr.newNoDocument(i,o);n=new Gw([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=rl(t,r.document);n=new Gw([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Mt();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new tde(i,o);n=new Z3(r.targetId,s)}}var c;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ut.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ut.min():s.readTime?ii(s.readTime):Ut.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=TP(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=Vw(l)?{documents:uH(o,l)}:{query:DP(o,l).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=rH(o,s.resumeToken);const c=wP(o,s.expectedCount);null!==c&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(Ut.min())>0){a.readTime=Mp(o,s.snapshotVersion.toTimestamp());const c=wP(o,s.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function hde(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Mt()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=TP(this.serializer),n.removeTarget=e,this.t_(n)}}class Jde extends i5{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function dde(t,e){return t&&t.length>0?(Lt(void 0!==e),t.map(n=>function(i,o){let s=ii(i.updateTime?i.updateTime:o);return s.isEqual(Ut.min())&&(s=ii(o)),new Xue(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=ii(e.commitTime);return this.listener.T_(r,n)}return Lt(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=TP(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>kv(this.serializer,r))};this.t_(n)}}class ehe extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new Ue(me.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,bP(n,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ue(me.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,bP(n,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ue(me.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class nhe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ri(n),this.g_=!1):Ge("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class rhe{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(a=>{r.enqueueAndForget((0,y.A)(function*(){var l;ou(s)&&(Ge("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,y.A)(function*(h){const p=mt(h);p.v_.add(4),yield $p(p),p.x_.set("Unknown"),p.v_.delete(4),yield Hv(p)}),function c(h){return l.apply(this,arguments)})(s))}))}),this.x_=new nhe(r,i)}}function Hv(t){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,y.A)(function*(t){if(ou(t))for(const e of t.F_)yield e(!0)}),ZP.apply(this,arguments)}function $p(t){return JP.apply(this,arguments)}function JP(){return JP=(0,y.A)(function*(t){for(const e of t.F_)yield e(!1)}),JP.apply(this,arguments)}function aC(t,e){const n=mt(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),n1(n)?t1(n):Hp(n).Jo()&&e1(n,e))}function Up(t,e){const n=mt(t),r=Hp(n);n.C_.delete(e),r.Jo()&&o5(n,e),0===n.C_.size&&(r.Jo()?r.Xo():ou(n)&&n.x_.set("Unknown"))}function e1(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ut.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hp(t).c_(e)}function o5(t,e){t.O_.Oe(e),Hp(t).l_(e)}function t1(t){t.O_=new rde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Hp(t).start(),t.x_.p_()}function n1(t){return ou(t)&&!Hp(t).Ho()&&t.C_.size>0}function ou(t){return 0===mt(t).v_.size}function s5(t){t.O_=void 0}function ihe(t){return r1.apply(this,arguments)}function r1(){return r1=(0,y.A)(function*(t){t.C_.forEach((e,n)=>{e1(t,e)})}),r1.apply(this,arguments)}function ohe(t,e){return i1.apply(this,arguments)}function i1(){return i1=(0,y.A)(function*(t,e){s5(t),n1(t)?(t.x_.S_(e),t1(t)):t.x_.set("Unknown")}),i1.apply(this,arguments)}function she(t,e,n){return o1.apply(this,arguments)}function o1(){return o1=(0,y.A)(function*(t,e,n){if(t.x_.set("Online"),e instanceof J3&&2===e.state&&e.cause)try{yield(r=(0,y.A)(function*(o,s){const a=s.cause;for(const l of s.targetIds)o.C_.has(l)&&(yield o.remoteSyncer.rejectListen(l,a),o.C_.delete(l),o.O_.removeTarget(l))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){Ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield lC(t,r)}else if(e instanceof Gw?t.O_.$e(e):e instanceof Z3?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Ut.min()))try{const r=yield KH(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.O_.it(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=o.C_.get(c);h&&o.C_.set(c,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const h=o.C_.get(l);if(!h)return;o.C_.set(l,h.withResumeToken(wi.EMPTY_BYTE_STRING,h.snapshotVersion)),o5(o,l);const p=new Wl(h.target,l,c,h.sequenceNumber);e1(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){Ge("RemoteStore","Failed to raise snapshot:",r),yield lC(t,r)}var r}),o1.apply(this,arguments)}function lC(t,e,n){return s1.apply(this,arguments)}function s1(){return s1=(0,y.A)(function*(t,e,n){if(!qc(e))throw e;t.v_.add(1),yield $p(t),t.x_.set("Offline"),n||(n=()=>KH(t.localStore)),t.asyncQueue.enqueueRetryable((0,y.A)(function*(){Ge("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Hv(t)}))}),s1.apply(this,arguments)}function a5(t,e){return e().catch(n=>lC(t,n,e))}function jp(t){return a1.apply(this,arguments)}function a1(){return a1=(0,y.A)(function*(t){const e=mt(t),n=su(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;ahe(e);)try{const i=yield Gde(e.localStore,r);if(null===i){0===e.D_.length&&n.Xo();break}r=i.batchId,lhe(e,i)}catch(i){yield lC(e,i)}l5(e)&&c5(e)}),a1.apply(this,arguments)}function ahe(t){return ou(t)&&t.D_.length<10}function lhe(t,e){t.D_.push(e);const n=su(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function l5(t){return ou(t)&&!su(t).Ho()&&t.D_.length>0}function c5(t){su(t).start()}function che(t){return l1.apply(this,arguments)}function l1(){return l1=(0,y.A)(function*(t){su(t).d_()}),l1.apply(this,arguments)}function uhe(t){return c1.apply(this,arguments)}function c1(){return c1=(0,y.A)(function*(t){const e=su(t);for(const n of t.D_)e.I_(n.mutations)}),c1.apply(this,arguments)}function dhe(t,e,n){return u1.apply(this,arguments)}function u1(){return u1=(0,y.A)(function*(t,e,n){const r=t.D_.shift(),i=yP.from(r,e,n);yield a5(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield jp(t)}),u1.apply(this,arguments)}function hhe(t,e){return d1.apply(this,arguments)}function d1(){return d1=(0,y.A)(function*(t,e){var n;e&&su(t).P_&&(yield(n=(0,y.A)(function*(i,o){if(q3(a=o.code)&&a!==me.ABORTED){const s=i.D_.shift();su(i).Zo(),yield a5(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield jp(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),l5(t)&&c5(t)}),d1.apply(this,arguments)}function u5(t,e){return h1.apply(this,arguments)}function h1(){return h1=(0,y.A)(function*(t,e){const n=mt(t);n.asyncQueue.verifyOperationInProgress(),Ge("RemoteStore","RemoteStore received new credentials");const r=ou(n);n.v_.add(3),yield $p(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Hv(n)}),h1.apply(this,arguments)}function f1(t,e){return p1.apply(this,arguments)}function p1(){return p1=(0,y.A)(function*(t,e){const n=mt(t);e?(n.v_.delete(2),yield Hv(n)):e||(n.v_.add(2),yield $p(n),n.x_.set("Unknown"))}),p1.apply(this,arguments)}function Hp(t){return t.N_||(t.N_=function(n,r,i){const o=mt(n);return o.R_(),new Zde(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:ihe.bind(null,t),To:ohe.bind(null,t),u_:she.bind(null,t)}),t.F_.push(function(){var e=(0,y.A)(function*(n){n?(t.N_.Zo(),n1(t)?t1(t):t.x_.set("Unknown")):(yield t.N_.stop(),s5(t))});return function(n){return e.apply(this,arguments)}}())),t.N_}function su(t){return t.L_||(t.L_=function(n,r,i){const o=mt(n);return o.R_(),new Jde(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:che.bind(null,t),To:hhe.bind(null,t),E_:uhe.bind(null,t),T_:dhe.bind(null,t)}),t.F_.push(function(){var e=(0,y.A)(function*(n){n?(t.L_.Zo(),yield jp(t)):(yield t.L_.stop(),t.D_.length>0&&(Ge("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))});return function(n){return e.apply(this,arguments)}}())),t.L_}class g1{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new g1(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zp(t,e){if(ri("AsyncQueue",`${e}: ${t}`),qc(t))return new Ue(me.UNAVAILABLE,`${e}: ${t}`);throw t}class Gp{constructor(e){this.comparator=e?(n,r)=>e(n,r)||yt.comparator(n.key,r.key):(n,r)=>yt.comparator(n.key,r.key),this.keyedMap=Av(),this.sortedSet=new yr(this.comparator)}static emptySet(e){return new Gp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Gp)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Gp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class d5{constructor(){this.B_=new yr(yt.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Mt():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wp{constructor(e,n,r,i,o,s,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Wp(e,n,Gp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class fhe{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class phe{constructor(){this.queries=new zl(e=>S3(e),bv),this.onlineState="Unknown",this.W_=new Set}}function m1(t,e){return _1.apply(this,arguments)}function _1(){return _1=(0,y.A)(function*(t,e){const n=mt(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.K_()&&e.U_()&&(r=2):(o=new fhe,r=e.U_()?0:1);try{switch(r){case 0:o.q_=yield n.onListen(i,!0);break;case 1:o.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=zp(s,`Initialization of query '${Dp(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Q_.push(e),e.G_(n.onlineState),o.q_&&e.z_(o.q_)&&I1(n)}),_1.apply(this,arguments)}function v1(t,e){return y1.apply(this,arguments)}function y1(){return y1=(0,y.A)(function*(t,e){const n=mt(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),0===o.Q_.length?i=e.U_()?0:1:!o.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}),y1.apply(this,arguments)}function ghe(t,e){const n=mt(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.Q_)a.z_(i)&&(r=!0);s.q_=i}}r&&I1(n)}function mhe(t,e,n){const r=mt(t),i=r.queries.get(e);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(e)}function I1(t){t.W_.forEach(e=>{e.next()})}var E1,h5;(h5=E1||(E1={})).j_="default",h5.Cache="cache";class w1{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Wp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){return!e.fromCache||!this.U_()||(!this.options.ta||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ea(e){e=Wp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==E1.Cache}}class _he{constructor(e,n){this.na=e,this.byteLength=n}ra(){return"metadata"in this.na}}class f5{constructor(e){this.serializer=e}Ps(e){return rl(this.serializer,e)}Is(e){return e.metadata.exists?cH(this.serializer,e.document,!1):Rr.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return ii(e)}}class vhe{constructor(e,n,r){this.ia=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=p5(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++n;const r=Sn.fromString(e.na.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(e){const n=new Map,r=new f5(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Ps(i.metadata.name);for(const s of i.metadata.queries){const a=(n.get(s)||fn()).add(o);n.set(s,a)}}return n}complete(){var e=this;return(0,y.A)(function*(){const n=yield function Wde(t,e,n,r){return HP.apply(this,arguments)}(e.localStore,new f5(e.serializer),e.documents,e.ia.id),r=e.oa(e.documents);for(const i of e.queries)yield qde(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,_a:e.collectionGroups,aa:n}})()}}function p5(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class g5{constructor(e){this.key=e}}class m5{constructor(e){this.key=e}}class _5{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=fn(),this.mutatedKeys=fn(),this.ha=P3(e),this.Pa=new Gp(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new d5,i=n?n.Pa:this.Pa;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),_=Tv(this.query,p)?p:null,w=!!m&&this.mutatedKeys.has(m.key),T=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;m&&_?m.data.isEqual(_.data)?w!==T&&(r.track({type:3,doc:_}),S=!0):this.da(m,_)||(r.track({type:2,doc:_}),S=!0,(l&&this.ha(_,l)>0||c&&this.ha(_,c)<0)&&(a=!0)):!m&&_?(r.track({type:0,doc:_}),S=!0):m&&!_&&(r.track({type:1,doc:m}),S=!0,(l||c)&&(a=!0)),S&&(_?(s=s.add(_),o=T?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const h="F"===this.query.limitType?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Pa:s,Ea:r,Xi:a,mutatedKeys:o}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const s=e.Ea.k_();s.sort((h,p)=>function(_,w){const T=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mt()}};return T(_)-T(w)}(h.type,p.type)||this.ha(h.doc,p.doc)),this.Aa(r),i=null!=i&&i;const a=n&&!i?this.Ra():[],l=0===this.la.size&&this.current&&!i?1:0,c=l!==this.ca;return this.ca=l,0!==s.length||c?{snapshot:new Wp(this.query,e.Pa,o,s,e.mutatedKeys,0===l,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new d5,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=fn(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new m5(r))}),this.la.forEach(r=>{e.has(r)||n.push(new g5(r))}),n}fa(e){this.ua=e.hs,this.la=fn();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Wp.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class yhe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Ihe{constructor(e){this.key=e,this.pa=!1}}class Ehe{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new zl(a=>S3(a),bv),this.Sa=new Map,this.ba=new Set,this.Da=new yr(yt.comparator),this.Ca=new Map,this.va=new OP,this.Fa={},this.Ma=new Map,this.xa=kd.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}function whe(t,e){return C1.apply(this,arguments)}function C1(){return C1=(0,y.A)(function*(t,e,n=!0){const r=cC(t);let i;const o=r.wa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ga()):i=yield v5(r,e,n,!0),i}),C1.apply(this,arguments)}function Che(t,e){return b1.apply(this,arguments)}function b1(){return b1=(0,y.A)(function*(t,e){const n=cC(t);yield v5(n,e,!0,!1)}),b1.apply(this,arguments)}function v5(t,e,n,r){return T1.apply(this,arguments)}function T1(){return T1=(0,y.A)(function*(t,e,n,r){const i=yield Vp(t.localStore,No(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=yield A1(t,e,o,"current"===s,i.resumeToken)),t.isPrimaryClient&&n&&aC(t.remoteStore,i),a}),T1.apply(this,arguments)}function A1(t,e,n,r,i){return D1.apply(this,arguments)}function D1(){return D1=(0,y.A)(function*(t,e,n,r,i){t.Na=(p,m,_)=>{return(w=(0,y.A)(function*(S,j,H,ge){let ve=j.view.Ta(H);ve.Xi&&(ve=yield nC(S.localStore,j.query,!1).then(({documents:Hn})=>j.view.Ta(Hn,ve)));const Xe=ge&&ge.targetChanges.get(j.targetId),At=ge&&null!=ge.targetMismatches.get(j.targetId),En=j.view.applyChanges(ve,S.isPrimaryClient,Xe,At);return V1(S,j.targetId,En.Va),En.snapshot}),function T(S,j,H,ge){return w.apply(this,arguments)})(t,p,m,_);var w};const o=yield nC(t.localStore,e,!0),s=new _5(e,o.hs),a=s.Ta(o.documents),l=Mv.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=s.applyChanges(a,t.isPrimaryClient,l);V1(t,n,c.Va);const h=new yhe(e,n,s);return t.wa.set(e,h),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}),D1.apply(this,arguments)}function bhe(t,e,n){return S1.apply(this,arguments)}function S1(){return S1=(0,y.A)(function*(t,e,n){const r=mt(t),i=r.wa.get(e),o=r.Sa.get(i.targetId);if(o.length>1)return r.Sa.set(i.targetId,o.filter(s=>!bv(s,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Bp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Up(r.remoteStore,i.targetId),qp(r,i.targetId)}).catch(Wc))):(qp(r,i.targetId),yield Bp(r.localStore,i.targetId,!0))}),S1.apply(this,arguments)}function The(t,e){return R1.apply(this,arguments)}function R1(){return R1=(0,y.A)(function*(t,e){const n=mt(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Up(n.remoteStore,r.targetId))}),R1.apply(this,arguments)}function P1(){return P1=(0,y.A)(function*(t,e,n){const r=Q1(t);try{const i=yield function(s,a){const l=mt(s),c=Mr.now(),h=a.reduce((_,w)=>_.add(w.key),fn());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let w=Jo(),T=fn();return l.os.getEntries(_,h).next(S=>{w=S,w.forEach((j,H)=>{H.isValidDocument()||(T=T.add(j))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,w)).next(S=>{p=S;const j=[];for(const H of a){const ge=Jue(H,p.get(H.key).overlayedDocument);null!=ge&&j.push(new Gl(H.key,ge,f3(ge.value.mapValue),Nr.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,j,a)}).next(S=>{m=S;const j=S.applyToLocalDocumentSet(p,T);return l.documentOverlayCache.saveOverlays(_,S.batchId,j)})}).then(()=>({batchId:m.batchId,changes:M3(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let c=s.Fa[s.currentUser.toKey()];c||(c=new yr(nn)),c=c.insert(a,l),s.Fa[s.currentUser.toKey()]=c}(r,i.batchId,n),yield ql(r,i.changes),yield jp(r.remoteStore)}catch(i){const o=zp(i,"Failed to persist write");n.reject(o)}}),P1.apply(this,arguments)}function y5(t,e){return x1.apply(this,arguments)}function x1(){return x1=(0,y.A)(function*(t,e){const n=mt(t);try{const r=yield function zde(t,e){const n=mt(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;a.push(n.Qr.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Qr.addMatchingKeys(o,h.addedDocuments,p)));let _=m.withSequenceNumber(o.currentSequenceNumber);var T,S,j;null!==e.targetMismatches.get(p)?_=_.withResumeToken(wi.EMPTY_BYTE_STRING,Ut.min()).withLastLimboFreeSnapshotVersion(Ut.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),S=_,j=h,(0===(T=m).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8||j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0)&&a.push(n.Qr.updateTargetData(o,_))});let l=Jo(),c=fn();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(QH(o,s,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(Ut.min())){const h=n.Qr.getLastRemoteSnapshotVersion(o).next(p=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return oe.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.ns=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Ca.get(o);s&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.pa=!0:i.modifiedDocuments.size>0?Lt(s.pa):i.removedDocuments.size>0&&(Lt(s.pa),s.pa=!1))}),yield ql(n,r,e)}catch(r){yield Wc(r)}}),x1.apply(this,arguments)}function I5(t,e,n){const r=mt(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.wa.forEach((o,s)=>{const a=s.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=mt(s);l.onlineState=a;let c=!1;l.queries.forEach((h,p)=>{for(const m of p.Q_)m.G_(a)&&(c=!0)}),c&&I1(l)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Dhe(t,e,n){return M1.apply(this,arguments)}function M1(){return M1=(0,y.A)(function*(t,e,n){const r=mt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ca.get(e),o=i&&i.key;if(o){let s=new yr(yt.comparator);s=s.insert(o,Rr.newNoDocument(o,Ut.min()));const a=fn().add(o),l=new xv(Ut.min(),new Map,new yr(nn),s,a);yield y5(r,l),r.Da=r.Da.remove(o),r.Ca.delete(e),B1(r)}else yield Bp(r.localStore,e,!1).then(()=>qp(r,e,n)).catch(Wc)}),M1.apply(this,arguments)}function She(t,e){return N1.apply(this,arguments)}function N1(){return N1=(0,y.A)(function*(t,e){const n=mt(t),r=e.batch.batchId;try{const i=yield function Hde(t,e){const n=mt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const p=c.batch,m=p.keys();let _=oe.resolve();return m.forEach(w=>{_=_.next(()=>h.getEntry(l,w)).next(T=>{const S=c.docVersions.get(w);Lt(null!==S),T.version.compareTo(S)<0&&(p.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),h.addEntry(T)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=fn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);L1(n,r,null),F1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ql(n,i)}catch(i){yield Wc(i)}}),N1.apply(this,arguments)}function Rhe(t,e,n){return k1.apply(this,arguments)}function k1(){return k1=(0,y.A)(function*(t,e,n){const r=mt(t);try{const i=yield function(s,a){const l=mt(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(Lt(null!==p),h=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);L1(r,e,n),F1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ql(r,i)}catch(i){yield Wc(i)}}),k1.apply(this,arguments)}function O1(){return O1=(0,y.A)(function*(t,e){const n=mt(t);ou(n.remoteStore)||Ge("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=mt(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(-1===r)return void e.resolve();const i=n.Ma.get(r)||[];i.push(e),n.Ma.set(r,i)}catch(r){const i=zp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),O1.apply(this,arguments)}function F1(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function L1(t,e,n){const r=mt(t);let i=r.Fa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function qp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||E5(t,r)})}function E5(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);null!==n&&(Up(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),B1(t))}function V1(t,e,n){for(const r of n)r instanceof g5?(t.va.addReference(r.key,e),xhe(t,r)):r instanceof m5?(Ge("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||E5(t,r.key)):Mt()}function xhe(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(Ge("SyncEngine","New document in limbo: "+n),t.ba.add(r),B1(t))}function B1(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new yt(Sn.fromString(e)),r=t.xa.next();t.Ca.set(r,new Ihe(n)),t.Da=t.Da.insert(n,r),aC(t.remoteStore,new Wl(No(Tp(n.path)),r,"TargetPurposeLimboResolution",Is._e))}}function ql(t,e,n){return $1.apply(this,arguments)}function $1(){return $1=(0,y.A)(function*(t,e,n){const r=mt(t),i=[],o=[],s=[];var a;r.wa.isEmpty()||(r.wa.forEach((a,l)=>{s.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,null!=c&&c.fromCache?"not-current":"current"),c){i.push(c);const h=$P.Ki(l.targetId,c);o.push(h)}}))}),yield Promise.all(s),r.ya.u_(i),yield(a=(0,y.A)(function*(c,h){const p=mt(c);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>oe.forEach(h,_=>oe.forEach(_.qi,w=>p.persistence.referenceDelegate.addReference(m,_.targetId,w)).next(()=>oe.forEach(_.Qi,w=>p.persistence.referenceDelegate.removeReference(m,_.targetId,w)))))}catch(m){if(!qc(m))throw m;Ge("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const _=m.targetId;if(!m.fromCache){const w=p.ns.get(_),S=w.withLastLimboFreeSnapshotVersion(w.snapshotVersion);p.ns=p.ns.insert(_,S)}}}),function l(c,h){return a.apply(this,arguments)})(r.localStore,o))}),$1.apply(this,arguments)}function Mhe(t,e){return U1.apply(this,arguments)}function U1(){return U1=(0,y.A)(function*(t,e){const n=mt(t);if(!n.currentUser.isEqual(e)){Ge("SyncEngine","User change. New user:",e.toKey());const r=yield qH(n.localStore,e);n.currentUser=e,(o=n).Ma.forEach(a=>{a.forEach(l=>{l.reject(new Ue(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ma.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ql(n,r.us)}var o}),U1.apply(this,arguments)}function Nhe(t,e){const n=mt(t),r=n.Ca.get(e);if(r&&r.pa)return fn().add(r.key);{let i=fn();const o=n.Sa.get(e);if(!o)return i;for(const s of o){const a=n.wa.get(s);i=i.unionWith(a.view.Ia)}return i}}function khe(t,e){return j1.apply(this,arguments)}function j1(){return j1=(0,y.A)(function*(t,e){const n=mt(t),r=yield nC(n.localStore,e.query,!0),i=e.view.fa(r);return n.isPrimaryClient&&V1(n,e.targetId,i.Va),i}),j1.apply(this,arguments)}function Ohe(t,e){return H1.apply(this,arguments)}function H1(){return H1=(0,y.A)(function*(t,e){const n=mt(t);return XH(n.localStore,e).then(r=>ql(n,r))}),H1.apply(this,arguments)}function Fhe(t,e,n,r){return z1.apply(this,arguments)}function z1(){return z1=(0,y.A)(function*(t,e,n,r){const i=mt(t),o=yield function(a,l){const c=mt(a),h=mt(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.vn(p,l).next(m=>m?c.localDocuments.getDocuments(p,m):oe.resolve(null)))}(i.localStore,e);var l;null!==o?("pending"===n?yield jp(i.remoteStore):"acknowledged"===n||"rejected"===n?(L1(i,e,r||null),F1(i,e),l=e,mt(mt(i.localStore).mutationQueue).Mn(l)):Mt(),yield ql(i,o)):Ge("SyncEngine","Cannot apply mutation batch with id: "+e)}),z1.apply(this,arguments)}function G1(){return G1=(0,y.A)(function*(t,e){const n=mt(t);if(cC(n),Q1(n),!0===e&&!0!==n.Oa){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield w5(n,r.toArray());n.Oa=!0,yield f1(n.remoteStore,!0);for(const o of i)aC(n.remoteStore,o)}else if(!1===e&&!1!==n.Oa){const r=[];let i=Promise.resolve();n.Sa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(qp(n,s),Bp(n.localStore,s,!0))),Up(n.remoteStore,s)}),yield i,yield w5(n,r),function(s){const a=mt(s);a.Ca.forEach((l,c)=>{Up(a.remoteStore,c)}),a.va.mr(),a.Ca=new Map,a.Da=new yr(yt.comparator)}(n),n.Oa=!1,yield f1(n.remoteStore,!1)}}),G1.apply(this,arguments)}function w5(t,e,n){return W1.apply(this,arguments)}function W1(){return W1=(0,y.A)(function*(t,e,n){const r=mt(t),i=[],o=[];for(const s of e){let a;const l=r.Sa.get(s);if(l&&0!==l.length){a=yield Vp(r.localStore,No(l[0]));for(const c of l){const h=r.wa.get(c),p=yield khe(r,h);p.snapshot&&o.push(p.snapshot)}}else{const c=yield YH(r.localStore,s);a=yield Vp(r.localStore,c),yield A1(r,C5(c),s,!1,a.resumeToken)}i.push(a)}return r.ya.u_(o),i}),W1.apply(this,arguments)}function C5(t){return T3(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Vhe(t){return n=mt(t).localStore,mt(mt(n).persistence).Bi();var n}function Bhe(t,e,n,r){return q1.apply(this,arguments)}function q1(){return q1=(0,y.A)(function*(t,e,n,r){const i=mt(t);if(i.Oa)return void Ge("SyncEngine","Ignoring unexpected query state notification.");const o=i.Sa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=yield XH(i.localStore,R3(o[0])),a=xv.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,wi.EMPTY_BYTE_STRING);yield ql(i,s,a);break}case"rejected":yield Bp(i.localStore,e,!0),qp(i,e,r);break;default:Mt()}}),q1.apply(this,arguments)}function $he(t,e,n){return K1.apply(this,arguments)}function K1(){return K1=(0,y.A)(function*(t,e,n){const r=cC(t);if(r.Oa){for(const i of e){if(r.Sa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ge("SyncEngine","Adding an already active target "+i);continue}const o=yield YH(r.localStore,i),s=yield Vp(r.localStore,o);yield A1(r,C5(o),s.targetId,!1,s.resumeToken),aC(r.remoteStore,s)}for(const i of n)r.Sa.has(i)&&(yield Bp(r.localStore,i,!1).then(()=>{Up(r.remoteStore,i),qp(r,i)}).catch(Wc))}}),K1.apply(this,arguments)}function cC(t){const e=mt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=y5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nhe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Dhe.bind(null,e),e.ya.u_=ghe.bind(null,e.eventManager),e.ya.La=mhe.bind(null,e.eventManager),e}function Q1(t){const e=mt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=She.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Rhe.bind(null,e),e}class Kp{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,y.A)(function*(){n.serializer=jv(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return WH(this.persistence,new GH,e.initialUser,this.serializer)}createPersistence(e){return new FP(Jw.Hr,this.serializer)}createSharedClientState(e){return new t5}terminate(){var e=this;return(0,y.A)(function*(){var n,r;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Y1 extends Kp{constructor(e,n,r){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,y.A)(function*(){yield n().call(r,e),yield r.ka.initialize(r,e),yield Q1(r.ka.syncEngine),yield jp(r.ka.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return WH(this.persistence,new GH,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new FH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new due(n,this.persistence);return new uue(e.asyncQueue,r)}createPersistence(e){const n=BP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?po.withCacheSize(this.cacheSizeBytes):po.DEFAULT;return new VP(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,r5(),sC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new t5}}class b5 extends Y1{constructor(e,n){super(e,n,!1),this.ka=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,y.A)(function*(){yield n().call(r,e);const i=r.ka.syncEngine;r.sharedClientState instanceof KP&&(r.sharedClientState.syncEngine={Zs:Fhe.bind(null,i),Xs:Bhe.bind(null,i),eo:$he.bind(null,i),Bi:Vhe.bind(null,i),Ys:Ohe.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var o=(0,y.A)(function*(s){yield function Lhe(t,e){return G1.apply(this,arguments)}(r.ka.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const n=r5();if(!KP.D(n))throw new Ue(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=BP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new KP(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Qp{initialize(e,n){var r=this;return(0,y.A)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>I5(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Mhe.bind(null,r.syncEngine),yield f1(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new phe}createDatastore(e){const n=jv(e.databaseInfo.databaseId),r=new Xde(e.databaseInfo);return new ehe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=n=>I5(this.syncEngine,n,0),a=n5.D()?new n5:new Kde,new rhe(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,n){return function(i,o,s,a,l,c,h){const p=new Ehe(i,o,s,a,l,c);return h&&(p.Oa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,y.A)(function*(){var n,r;yield(r=(0,y.A)(function*(o){const s=mt(o);Ge("RemoteStore","RemoteStore shutting down."),s.v_.add(5),yield $p(s),s.M_.shutdown(),s.x_.set("Unknown")}),function i(o){return r.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function T5(t,e=10240){let n=0;return{read:()=>(0,y.A)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,y.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class uC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):ri("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class Hhe{constructor(e,n){this.Ka=e,this.serializer=n,this.metadata=new Ei,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then(r=>{r&&r.ra()?this.metadata.resolve(r.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.na)}`))},r=>this.metadata.reject(r))}close(){return this.Ka.cancel()}getMetadata(){var e=this;return(0,y.A)(function*(){return e.metadata.promise})()}Ba(){var e=this;return(0,y.A)(function*(){return yield e.getMetadata(),e.Ua()})()}Ua(){var e=this;return(0,y.A)(function*(){const n=yield e.Wa();if(null===n)return null;const r=e.$a.decode(n),i=Number(r);isNaN(i)&&e.Ga(`length string (${r}) is not valid number`);const o=yield e.za(i);return new _he(JSON.parse(o),n.length+i)})()}ja(){return this.buffer.findIndex(e=>123===e)}Wa(){var e=this;return(0,y.A)(function*(){for(;e.ja()<0&&!(yield e.Ha()););if(0===e.buffer.length)return null;const n=e.ja();n<0&&e.Ga("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}za(e){var n=this;return(0,y.A)(function*(){for(;n.buffer.length<e;)(yield n.Ha())&&n.Ga("Reached the end of bundle when more is expected.");const r=n.$a.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ha(){var e=this;return(0,y.A)(function*(){const n=yield e.Ka.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class zhe{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,y.A)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new Ue(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const r=yield(i=(0,y.A)(function*(s,a){const l=mt(s),c={documents:a.map(_=>Nv(l.serializer,_))},h=yield l.vo("BatchGetDocuments",l.serializer.databaseId,Sn.emptyPath(),c,a.length),p=new Map;h.forEach(_=>{const w=function cde(t,e){return"found"in e?function(r,i){Lt(!!i.found);const o=rl(r,i.found.name),s=ii(i.found.updateTime),a=i.found.createTime?ii(i.found.createTime):Ut.min(),l=new Ji({mapValue:{fields:i.found.fields}});return Rr.newFoundDocument(o,s,a,l)}(t,e):"missing"in e?function(r,i){Lt(!!i.missing),Lt(!!i.readTime);const o=rl(r,i.missing),s=ii(i.readTime);return Rr.newNoDocument(o,s)}(t,e):Mt()}(l.serializer,_);p.set(w.key.toString(),w)});const m=[];return a.forEach(_=>{const w=p.get(_.toString());Lt(!!w),m.push(w)}),m}),function o(s,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new xp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,y.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const o=yt.fromPath(i);e.mutations.push(new _P(o,e.precondition(o)))}),yield(r=(0,y.A)(function*(o,s){const a=mt(o),l={writes:s.map(c=>kv(a.serializer,c))};yield a.So("Commit",a.serializer.databaseId,Sn.emptyPath(),l)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Mt();n=Ut.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Ue(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ut.min())?Nr.exists(!1):Nr.updateTime(n):Nr.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ut.min()))throw new Ue(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nr.updateTime(n)}return Nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ghe{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Ja=r.maxAttempts,this.jo=new YP(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){var e=this;this.jo.qo((0,y.A)(function*(){const n=new zhe(e.datastore),r=e.Xa(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.eu(o)}))}).catch(i=>{e.eu(i)})}))}Xa(e){try{const n=this.updateFunction(e);return!mv(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!q3(n)}return!1}}class Whe{constructor(e,n,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Li.UNAUTHENTICATED,this.clientId=H4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=(0,y.A)(function*(a){Ge("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(Ge("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,y.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=zp(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function dC(t,e){return X1.apply(this,arguments)}function X1(){return X1=(0,y.A)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),Ge("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,y.A)(function*(o){r.isEqual(o)||(yield qH(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),X1.apply(this,arguments)}function Z1(t,e){return J1.apply(this,arguments)}function J1(){return J1=(0,y.A)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield ex(t);Ge("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>u5(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>u5(e.remoteStore,i)),t._onlineComponents=e}),J1.apply(this,arguments)}function A5(t){return"FirebaseError"===t.name?t.code===me.FAILED_PRECONDITION||t.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function ex(t){return tx.apply(this,arguments)}function tx(){return tx=(0,y.A)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ge("FirestoreClient","Using user provided OfflineComponentProvider");try{yield dC(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!A5(n))throw n;Xo("Error using user provided cache. Falling back to memory cache: "+n),yield dC(t,new Kp)}}else Ge("FirestoreClient","Using default OfflineComponentProvider"),yield dC(t,new Kp);return t._offlineComponents}),tx.apply(this,arguments)}function hC(t){return nx.apply(this,arguments)}function nx(){return nx=(0,y.A)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ge("FirestoreClient","Using user provided OnlineComponentProvider"),yield Z1(t,t._uninitializedComponentsProvider._online)):(Ge("FirestoreClient","Using default OnlineComponentProvider"),yield Z1(t,new Qp))),t._onlineComponents}),nx.apply(this,arguments)}function D5(t){return ex(t).then(e=>e.persistence)}function Yp(t){return ex(t).then(e=>e.localStore)}function S5(t){return hC(t).then(e=>e.remoteStore)}function rx(t){return hC(t).then(e=>e.syncEngine)}function Xp(t){return ix.apply(this,arguments)}function ix(){return ix=(0,y.A)(function*(t){const e=yield hC(t),n=e.eventManager;return n.onListen=whe.bind(null,e.syncEngine),n.onUnlisten=bhe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Che.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=The.bind(null,e.syncEngine),n}),ix.apply(this,arguments)}function P5(t,e,n={}){const r=new Ei;return t.asyncQueue.enqueueAndForget((0,y.A)(function*(){return function(o,s,a,l,c){const h=new uC({next:m=>{s.enqueueAndForget(()=>v1(o,p));const _=m.docs.has(a);!_&&m.fromCache?c.reject(new Ue(me.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&l&&"server"===l.source?c.reject(new Ue(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new w1(Tp(a.path),h,{includeMetadataChanges:!0,ta:!0});return m1(o,p)}(yield Xp(t),t.asyncQueue,e,n,r)})),r.promise}function x5(t,e,n={}){const r=new Ei;return t.asyncQueue.enqueueAndForget((0,y.A)(function*(){return function(o,s,a,l,c){const h=new uC({next:m=>{s.enqueueAndForget(()=>v1(o,p)),m.fromCache&&"server"===l.source?c.reject(new Ue(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new w1(a,h,{includeMetadataChanges:!0,ta:!0});return m1(o,p)}(yield Xp(t),t.asyncQueue,e,n,r)})),r.promise}function M5(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const N5=new Map;function ox(t,e,n){if(!n)throw new Ue(me.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function k5(t,e,n,r){if(!0===e&&!0===r)throw new Ue(me.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function O5(t){if(!yt.isDocumentKey(t))throw new Ue(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function F5(t){if(yt.isDocumentKey(t))throw new Ue(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fC(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":Mt()}function Dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ue(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fC(t);throw new Ue(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function L5(t,e){if(e<=0)throw new Ue(me.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class V5{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=M5(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new Ue(me.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ue(me.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ue(me.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zv{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V5({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ue(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V5(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Zce;switch(r.type){case"firstParty":return new nue(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ue(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=N5.get(n);r&&(Ge("ComponentProvider","Removing Datastore"),N5.delete(n),r.terminate())}(this),Promise.resolve()}}class eo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new eo(this.firestore,e,this._query)}}class Pr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new il(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pr(this.firestore,e,this._key)}}class il extends eo{constructor(e,n,r){super(e,n,Tp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pr(this.firestore,null,new yt(e))}withConverter(e){return new il(this.firestore,e,this._path)}}function $5(t,e,...n){if(t=(0,A.Ku)(t),ox("collection","path",e),t instanceof zv){const r=Sn.fromString(e,...n);return F5(r),new il(t,null,r)}{if(!(t instanceof Pr||t instanceof il))throw new Ue(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Sn.fromString(e,...n));return F5(r),new il(t.firestore,null,r)}}function pC(t,e,...n){if(t=(0,A.Ku)(t),1===arguments.length&&(e=H4.newId()),ox("doc","path",e),t instanceof zv){const r=Sn.fromString(e,...n);return O5(r),new Pr(t,null,new yt(r))}{if(!(t instanceof Pr||t instanceof il))throw new Ue(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Sn.fromString(e,...n));return O5(r),new Pr(t.firestore,t instanceof il?t.converter:null,new yt(r))}}function U5(t,e){return t=(0,A.Ku)(t),e=(0,A.Ku)(e),(t instanceof Pr||t instanceof il)&&(e instanceof Pr||e instanceof il)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function sx(t,e){return t=(0,A.Ku)(t),e=(0,A.Ku)(e),t instanceof eo&&e instanceof eo&&t.firestore===e.firestore&&bv(t._query,e._query)&&t.converter===e.converter}class ife{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new YP(this,"async_queue_retry"),this.cu=()=>{const n=sC();n&&Ge("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=sC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=sC();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new Ei;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){var e=this;return(0,y.A)(function*(){if(0!==e.ru.length){try{yield e.ru[0](),e.ru.shift(),e.jo.reset()}catch(n){if(!qc(n))throw n;Ge("AsyncQueue","Operation failed with retryable error: "+n)}e.ru.length>0&&e.jo.qo(()=>e.Pu())}})()}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{throw this.ou=r,this._u=!1,ri("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const i=g1.createAndSchedule(this,e,n,r,o=>this.Iu(o));return this.su.push(i),i}lu(){this.ou&&Mt()}verifyOperationInProgress(){}Tu(){var e=this;return(0,y.A)(function*(){let n;do{n=e.nu,yield n}while(n!==e.nu)})()}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function ax(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(t)}class ofe{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ei,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ir extends zv{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ife,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||j5(this),this._firestoreClient.terminate()}}function Qr(t){return t._firestoreClient||j5(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function j5(t){var e,n,r;const i=t._freezeSettings(),o=(l=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new Mue(t._databaseId,l,t._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,M5(h.experimentalLongPollingOptions),h.useFetchStreams));var l,h;t._firestoreClient=new Whe(t._authCredentials,t._appCheckCredentials,t._queue,o),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function H5(t,e,n){const r=new Ei;return t.asyncQueue.enqueue((0,y.A)(function*(){try{yield dC(t,n),yield Z1(t,e),r.resolve()}catch(i){const o=i;if(!A5(o))throw o;Xo("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function z5(t){if(t._initialized||t._terminated)throw new Ue(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ol{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ol(wi.fromBase64String(e))}catch(n){throw new Ue(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ol(wi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Kl{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Ue(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fd{constructor(e){this._methodName=e}}class gC{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ue(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ue(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nn(this._lat,e._lat)||nn(this._long,e._long)}}const mfe=/^__.*__$/;class _fe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Gl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pp(e,this.data,n,this.fieldTransforms)}}class G5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Gl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function W5(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mt()}}class mC{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Ru(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new mC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return yC(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(W5(this.Vu)&&mfe.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class vfe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jv(e)}Cu(e,n,r,i=!1){return new mC({Vu:e,methodName:n,Du:r,path:Sr.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ld(t){const e=t._freezeSettings(),n=jv(t._databaseId);return new vfe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _C(t,e,n,r,i,o={}){const s=t.Cu(o.merge||o.mergeFields?2:0,e,n,i);px("Data must be an object, but it was:",s,r);const a=Q5(r,s);let l,c;if(o.merge)l=new Zo(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const m=qv(e,p,n);if(!s.contains(m))throw new Ue(me.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);X5(h,m)||h.push(m)}l=new Zo(h),c=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=s.fieldTransforms;return new _fe(new Ji(a),l,c)}class Wv extends Fd{_toFieldTransform(e){if(2!==e.Vu)throw e.Su(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wv}}function q5(t,e,n){return new mC({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class lx extends Fd{_toFieldTransform(e){return new Sv(e.path,new Sp)}isEqual(e){return e instanceof lx}}class cx extends Fd{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=q5(this,e,!0),r=this.vu.map(o=>Vd(o,n)),i=new Dd(r);return new Sv(e.path,i)}isEqual(e){return e instanceof cx&&(0,A.bD)(this.vu,e.vu)}}class ux extends Fd{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=q5(this,e,!0),r=this.vu.map(o=>Vd(o,n)),i=new Sd(r);return new Sv(e.path,i)}isEqual(e){return e instanceof ux&&(0,A.bD)(this.vu,e.vu)}}class dx extends Fd{constructor(e,n){super(e),this.Fu=n}_toFieldTransform(e){const n=new Rp(e.serializer,F3(e.serializer,this.Fu));return new Sv(e.path,n)}isEqual(e){return e instanceof dx&&this.Fu===e.Fu}}function hx(t,e,n,r){const i=t.Cu(1,e,n);px("Data must be an object, but it was:",i,r);const o=[],s=Ji.empty();Kc(r,(l,c)=>{const h=vC(e,l,n);c=(0,A.Ku)(c);const p=i.yu(h);if(c instanceof Wv)o.push(h);else{const m=Vd(c,p);null!=m&&(o.push(h),s.set(h,m))}});const a=new Zo(o);return new G5(s,a,i.fieldTransforms)}function fx(t,e,n,r,i,o){const s=t.Cu(1,e,n),a=[qv(e,r,n)],l=[i];if(o.length%2!=0)throw new Ue(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(qv(e,o[m])),l.push(o[m+1]);const c=[],h=Ji.empty();for(let m=a.length-1;m>=0;--m)if(!X5(c,a[m])){const _=a[m];let w=l[m];w=(0,A.Ku)(w);const T=s.yu(_);if(w instanceof Wv)c.push(_);else{const S=Vd(w,T);null!=S&&(c.push(_),h.set(_,S))}}const p=new Zo(c);return new G5(h,p,s.fieldTransforms)}function K5(t,e,n,r=!1){return Vd(n,t.Cu(r?4:3,e))}function Vd(t,e){if(Y5(t=(0,A.Ku)(t)))return px("Unsupported field value:",e,t),Q5(t,e);if(t instanceof Fd)return function(r,i){if(!W5(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&4!==e.Vu)throw e.Su("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=Vd(a,i.wu(s));null==l&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=(0,A.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return F3(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Mr.fromDate(r);return{timestampValue:Mp(i.serializer,o)}}if(r instanceof Mr){const o=new Mr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Mp(i.serializer,o)}}if(r instanceof gC)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ol)return{bytesValue:rH(i.serializer,r._byteString)};if(r instanceof Pr){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Su(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:CP(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${fC(r)}`)}(t,e)}function Q5(t,e){const n={};return i3(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kc(t,(r,i)=>{const o=Vd(i,e.fu(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function Y5(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Mr||t instanceof gC||t instanceof ol||t instanceof Pr||t instanceof Fd)}function px(t,e,n){if(!Y5(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=fC(n);throw e.Su("an object"===r?t+" a custom object":t+" "+r)}var i}function qv(t,e,n){if((e=(0,A.Ku)(e))instanceof Kl)return e._internalPath;if("string"==typeof e)return vC(t,e);throw yC("Field path arguments must be of type string or ",t,!1,void 0,n)}const yfe=new RegExp("[~\\*/\\[\\]]");function vC(t,e,n){if(e.search(yfe)>=0)throw yC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Kl(...e.split("."))._internalPath}catch{throw yC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yC(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new Ue(me.INVALID_ARGUMENT,a+t+l)}function X5(t,e){return t.some(n=>n.isEqual(e))}class Kv{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ife(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(IC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Ife extends Kv{data(){return super.data()}}function IC(t,e){return"string"==typeof e?vC(t,e):e instanceof Kl?e._internalPath:e._delegate._internalPath}function Z5(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Ue(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gx{}class Qv extends gx{}function au(t,e,...n){let r=[];e instanceof gx&&r.push(e),r=r.concat(n),function(o){const s=o.filter(l=>l instanceof Zp).length,a=o.filter(l=>l instanceof Yv).length;if(s>1||s>0&&a>0)throw new Ue(me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Yv extends Qv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Yv(e,n,r)}_apply(e){const n=this._parse(e);return nz(e._query,n),new eo(e.firestore,e.converter,gP(e._query,n))}_parse(e){const n=Ld(e.firestore);return function(o,s,a,l,c,h,p){let m;if(c.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new Ue(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){tz(p,h);const _=[];for(const w of p)_.push(ez(l,o,w));m={arrayValue:{values:_}}}else m=ez(l,o,p)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||tz(p,h),m=K5(a,"where",p,"in"===h||"not-in"===h);return Rn.create(c,h,m)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Zp extends gx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:nr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const l of a)nz(s,l),s=gP(s,l)}(e._query,n),new eo(e.firestore,e.converter,gP(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class mx extends Qv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mx(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new Ue(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ue(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wv(o,s)}(e._query,this._field,this._direction);return new eo(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Hl(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class EC extends Qv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new EC(e,n,r)}_apply(e){return new eo(e.firestore,e.converter,$w(e._query,this._limit,this._limitType))}}class wC extends Qv{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new wC(e,n,r)}_apply(e){const n=J5(e,this.type,this._docOrFields,this._inclusive);return new eo(e.firestore,e.converter,(o=n,new Hl((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class CC extends Qv{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new CC(e,n,r)}_apply(e){const n=J5(e,this.type,this._docOrFields,this._inclusive);return new eo(e.firestore,e.converter,(o=n,new Hl((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function J5(t,e,n,r){if(n[0]=(0,A.Ku)(n[0]),n[0]instanceof Kv)return function(o,s,a,l,c){if(!l)throw new Ue(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const p of Ap(o))if(p.field.isKeyField())h.push(Td(s,l.key));else{const m=l.data.field(p.field);if(Nw(m))throw new Ue(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const _=p.field.canonicalString();throw new Ue(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}h.push(m)}return new eu(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Ld(t.firestore);return function(s,a,l,c,h,p){const m=s.explicitOrderBy;if(h.length>m.length)throw new Ue(me.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let w=0;w<h.length;w++){const T=h[w];if(m[w].field.isKeyField()){if("string"!=typeof T)throw new Ue(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof T}`);if(!pP(s)&&-1!==T.indexOf("/"))throw new Ue(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${T}' contains a slash.`);const S=s.path.child(Sn.fromString(T));if(!yt.isDocumentKey(S))throw new Ue(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const j=new yt(S);_.push(Td(a,j))}else{const S=K5(l,c,T);_.push(S)}}return new eu(_,p)}(t._query,t.firestore._databaseId,i,e,n,r)}}function ez(t,e,n){if("string"==typeof(n=(0,A.Ku)(n))){if(""===n)throw new Ue(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pP(e)&&-1!==n.indexOf("/"))throw new Ue(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Sn.fromString(n));if(!yt.isDocumentKey(r))throw new Ue(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Td(t,new yt(r))}if(n instanceof Pr)return Td(t,n._key);throw new Ue(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fC(n)}.`)}function tz(t,e){if(!Array.isArray(t)||0===t.length)throw new Ue(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nz(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Ue(me.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class _x{convertValue(e,n="none"){switch(Zc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Mt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Kc(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new gC(Kr(e.latitude),Kr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kw(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vv(e));default:return null}}convertTimestamp(e){const n=Qc(e);return new Mr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Sn.fromString(e);Lt(pH(r));const i=new Yc(r.get(1),r.get(3)),o=new yt(r.popFirst(5));return i.isEqual(n)||ri(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function bC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Rfe extends _x{constructor(e){super(),this.firestore=e}convertBytes(e){return new ol(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pr(this.firestore,null,n)}}class Bd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ql extends Kv{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(IC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Xv extends Ql{data(e={}){return super.data(e)}}class lu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Bd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Xv(this._firestore,this._userDataWriter,r.key,r,new Bd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ue(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Xv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const l=new Xv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return 0!==a.type&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:xfe(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xfe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mt()}}function iz(t,e){return t instanceof Ql&&e instanceof Ql?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof lu&&e instanceof lu&&t._firestore===e._firestore&&sx(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class cu extends _x{constructor(e){super(),this.firestore=e}convertBytes(e){return new ol(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pr(this.firestore,null,n)}}function oz(t,e,n){t=Dn(t,Pr);const r=Dn(t.firestore,Ir),i=bC(t.converter,e,n);return Jp(r,[_C(Ld(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Nr.none())])}function sz(t,e,n,...r){t=Dn(t,Pr);const i=Dn(t.firestore,Ir),o=Ld(i);let s;return s="string"==typeof(e=(0,A.Ku)(e))||e instanceof Kl?fx(o,"updateDoc",t._key,e,n,r):hx(o,"updateDoc",t._key,e),Jp(i,[s.toMutation(t._key,Nr.exists(!0))])}function az(t,...e){var n,r,i;t=(0,A.Ku)(t);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof e[s]||ax(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(ax(e[s])){const p=e[s];e[s]=null===(n=p.next)||void 0===n?void 0:n.bind(p),e[s+1]=null===(r=p.error)||void 0===r?void 0:r.bind(p),e[s+2]=null===(i=p.complete)||void 0===i?void 0:i.bind(p)}let l,c,h;if(t instanceof Pr)c=Dn(t.firestore,Ir),h=Tp(t._key.path),l={next:p=>{e[s]&&e[s](vx(c,t,p))},error:e[s+1],complete:e[s+2]};else{const p=Dn(t,eo);c=Dn(p.firestore,Ir),h=p._query;const m=new cu(c);l={next:_=>{e[s]&&e[s](new lu(c,m,p,_))},error:e[s+1],complete:e[s+2]},Z5(t._query)}return function(m,_,w,T){const S=new uC(T),j=new w1(_,S,w);return m.asyncQueue.enqueueAndForget((0,y.A)(function*(){return m1(yield Xp(m),j)})),()=>{S.Qa(),m.asyncQueue.enqueueAndForget((0,y.A)(function*(){return v1(yield Xp(m),j)}))}}(Qr(c),h,a,l)}function Jp(t,e){return function(r,i){const o=new Ei;return r.asyncQueue.enqueueAndForget((0,y.A)(function*(){return function Ahe(t,e,n){return P1.apply(this,arguments)}(yield rx(r),i,o)})),o.promise}(Qr(t),e)}function vx(t,e,n){const r=n.docs.get(e._key),i=new cu(t);return new Ql(t,i,e._key,r,new Bd(n.hasPendingWrites,n.fromCache),e.converter)}const Qfe={maxAttempts:5};class lz{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ld(e)}set(e,n,r){this._verifyNotCommitted();const i=uu(e,this._firestore),o=bC(i.converter,n,r),s=_C(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,Nr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=uu(e,this._firestore);let s;return s="string"==typeof(n=(0,A.Ku)(n))||n instanceof Kl?fx(this._dataReader,"WriteBatch.update",o._key,n,r,i):hx(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=uu(e,this._firestore);return this._mutations=this._mutations.concat(new xp(n._key,Nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uu(t,e){if((t=(0,A.Ku)(t)).firestore!==e)throw new Ue(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class Yfe extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ld(n)}get(n){const r=uu(n,this._firestore),i=new Rfe(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return Mt();const s=o[0];if(s.isFoundDocument())return new Kv(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Kv(this._firestore,i,r._key,null,r.converter);throw Mt()})}set(n,r,i){const o=uu(n,this._firestore),s=bC(o.converter,r,i),a=_C(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){const s=uu(n,this._firestore);let a;return a="string"==typeof(r=(0,A.Ku)(r))||r instanceof Kl?fx(this._dataReader,"Transaction.update",s._key,r,i,o):hx(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){const r=uu(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=uu(e,this._firestore),r=new cu(this._firestore);return super.get(e).then(i=>new Ql(this._firestore,r,n._key,i._document,new Bd(!1,!1),n.converter))}}function Ix(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function hz(){if(typeof Uint8Array>"u")throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function fz(){if(!function Pue(){return typeof atob<"u"}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){_p=Yo.SDK_VERSION,(0,Yo._registerComponent)(new Ca.uA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Ir(new eue(r.getProvider("auth-internal")),new rue(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ue(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yc(c.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Yo.registerVersion)($4,"4.5.0",e),(0,Yo.registerVersion)($4,"4.5.0","esm2017")}();class Zv{constructor(e){this._delegate=e}static fromBase64String(e){return fz(),new Zv(ol.fromBase64String(e))}static fromUint8Array(e){return hz(),new Zv(ol.fromUint8Array(e))}toBase64(){return fz(),this._delegate.toBase64()}toUint8Array(){return hz(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ex(t){return function spe(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class ape{enableIndexedDbPersistence(e,n){return function afe(t,e){z5(t=Dn(t,Ir));const n=Qr(t);if(n._uninitializedComponentsProvider)throw new Ue(me.FAILED_PRECONDITION,"SDK cache is already specified.");Xo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Qp;return H5(n,i,new Y1(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function lfe(t){z5(t=Dn(t,Ir));const e=Qr(t);if(e._uninitializedComponentsProvider)throw new Ue(me.FAILED_PRECONDITION,"SDK cache is already specified.");Xo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Qp;return H5(e,r,new b5(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function cfe(t){if(t._initialized&&!t._terminated)throw new Ue(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ei;return t._queue.enqueueAndForgetEvenWhileRestricted((0,y.A)(function*(){try{yield(n=(0,y.A)(function*(i){if(!Ws.D())return Promise.resolve();const o=i+"main";yield Ws.delete(o)}),function r(i){return n.apply(this,arguments)})(BP(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class pz{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Yc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Xo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function B5(t,e,n,r={}){var i;const o=(t=Dn(t,zv))._getSettings(),s=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=Li.MOCK_USER;else{a=(0,A.Fy)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Ue(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Li(c)}t._authCredentials=new Jce(new U4(a,l))}}(this._delegate,e,n,r)}enableNetwork(){return function dfe(t){return function qhe(t){return t.asyncQueue.enqueue((0,y.A)(function*(){const e=yield D5(t),n=yield S5(t);return e.setNetworkEnabled(!0),function(i){const o=mt(i);return o.v_.delete(0),Hv(o)}(n)}))}(Qr(t=Dn(t,Ir)))}(this._delegate)}disableNetwork(){return function hfe(t){return function Khe(t){return t.asyncQueue.enqueue((0,y.A)(function*(){const e=yield D5(t),n=yield S5(t);return e.setNetworkEnabled(!1),(r=(0,y.A)(function*(o){const s=mt(o);s.v_.add(0),yield $p(s),s.x_.set("Offline")}),function i(o){return r.apply(this,arguments)})(n);var r}))}(Qr(t=Dn(t,Ir)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,k5("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ufe(t){return function(n){const r=new Ei;return n.asyncQueue.enqueueAndForget((0,y.A)(function*(){return function Phe(t,e){return O1.apply(this,arguments)}(yield rx(n),r)})),r.promise}(Qr(t=Dn(t,Ir)))}(this._delegate)}onSnapshotsInSync(e){return function $fe(t,e){return function Xhe(t,e){const n=new uC(e);return t.asyncQueue.enqueueAndForget((0,y.A)(function*(){return i=yield Xp(t),o=n,mt(i).W_.add(o),void o.next();var i,o})),()=>{n.Qa(),t.asyncQueue.enqueueAndForget((0,y.A)(function*(){return i=yield Xp(t),o=n,void mt(i).W_.delete(o);var i,o}))}}(Qr(t=Dn(t,Ir)),ax(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new eg(this,$5(this._delegate,e))}catch(n){throw ko(n,"collection()","Firestore.collection()")}}doc(e){try{return new qs(this,pC(this._delegate,e))}catch(n){throw ko(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Oo(this,function rfe(t,e){if(t=Dn(t,zv),ox("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new eo(t,null,(r=e,new Hl(Sn.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw ko(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Xfe(t,e,n){t=Dn(t,Ir);const r=Object.assign(Object.assign({},Qfe),n);return function(o){if(o.maxAttempts<1)throw new Ue(me.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const l=new Ei;return o.asyncQueue.enqueueAndForget((0,y.A)(function*(){const c=yield function R5(t){return hC(t).then(e=>e.datastore)}(o);new Ghe(o.asyncQueue,c,a,s,l).Ya()})),l.promise}(Qr(t),i=>e(new Yfe(t,i)),r)}(this._delegate,n=>e(new gz(this,n)))}batch(){return Qr(this._delegate),new mz(new lz(this._delegate,e=>Jp(this._delegate,e)))}loadBundle(e){return function ffe(t,e){const n=Qr(t=Dn(t,Ir)),r=new ofe;return function Zhe(t,e,n,r){const i=function(s,a){let l;return l="string"==typeof s?Q3().encode(s):s,h=function(h,p){if(h instanceof Uint8Array)return T5(h,p);if(h instanceof ArrayBuffer)return T5(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new Hhe(h,a);var h}(n,jv(e));t.asyncQueue.enqueueAndForget((0,y.A)(function*(){!function Uhe(t,e,n){const r=mt(t);var i;(i=(0,y.A)(function*(s,a,l){try{const c=yield a.getMetadata();if(yield function(w,T){const S=mt(w),j=ii(T.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",H=>S.$r.getBundleMetadata(H,T.id)).then(H=>!!H&&H.createTime.compareTo(j)>=0)}(s.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(w=c).totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}),Promise.resolve(new Set);l._updateProgress(p5(c));const h=new vhe(c,s.localStore,a.serializer);let p=yield a.Ba();for(;p;){const _=yield h.sa(p);_&&l._updateProgress(_),p=yield a.Ba()}const m=yield h.complete();return yield ql(s,m.aa,void 0),yield function(w,T){const S=mt(w);return S.persistence.runTransaction("Save bundle","readwrite",j=>S.$r.saveBundleMetadata(j,T))}(s.localStore,c),l._completeWith(m.progress),Promise.resolve(m._a)}catch(c){return Xo("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var w}),function o(s,a,l){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield rx(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function pfe(t,e){return function Jhe(t,e){return t.asyncQueue.enqueue((0,y.A)(function*(){return function(r,i){const o=mt(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield Yp(t),e)}))}(Qr(t=Dn(t,Ir)),e).then(n=>n?new eo(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Oo(this,n):null)}}class AC extends _x{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zv(new ol(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return qs.forKey(n,this.firestore,null)}}class gz{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new AC(e)}get(e){const n=Ud(e);return this._delegate.get(n).then(r=>new Jv(this._firestore,new Ql(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Ud(e);return r?(Ix("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Ud(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Ud(e);return this._delegate.delete(n),this}}class mz{constructor(e){this._delegate=e}set(e,n,r){const i=Ud(e);return r?(Ix("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Ud(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Ud(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class $d{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Xv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ey(this._firestore,r),null!=n?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=$d.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new $d(e,new AC(e),n),i.set(n,o)),o}}$d.INSTANCES=new WeakMap;class qs{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new AC(e)}static forPath(e,n,r){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new qs(n,new Pr(n._delegate,r,new yt(e)))}static forKey(e,n,r){return new qs(n,new Pr(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new eg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new eg(this.firestore,$5(this._delegate,e))}catch(n){throw ko(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,A.Ku)(e))instanceof Pr&&U5(this._delegate,e)}set(e,n){n=Ix("DocumentReference.set",n);try{return n?oz(this._delegate,e,n):oz(this._delegate,e)}catch(r){throw ko(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?sz(this._delegate,e):sz(this._delegate,e,n,...r)}catch(i){throw ko(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Vfe(t){return Jp(Dn(t.firestore,Ir),[new xp(t._key,Nr.none())])}(this._delegate)}onSnapshot(...e){const n=_z(e),r=vz(e,i=>new Jv(this.firestore,new Ql(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return az(this._delegate,n,r)}get(e){let n;return n="cache"===(null==e?void 0:e.source)?function Nfe(t){t=Dn(t,Pr);const e=Dn(t.firestore,Ir),n=Qr(e),r=new cu(e);return function Qhe(t,e){const n=new Ei;return t.asyncQueue.enqueueAndForget((0,y.A)(function*(){return(r=(0,y.A)(function*(o,s,a){try{const l=yield function(h,p){const m=mt(h);return m.persistence.runTransaction("read document","readonly",_=>m.localDocuments.getDocument(_,p))}(o,s);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new Ue(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=zp(l,`Failed to get document '${s} from cache`);a.reject(c)}}),function i(o,s,a){return r.apply(this,arguments)})(yield Yp(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Ql(e,r,t._key,i,new Bd(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function kfe(t){t=Dn(t,Pr);const e=Dn(t.firestore,Ir);return P5(Qr(e),t._key,{source:"server"}).then(n=>vx(e,t,n))}(this._delegate):function Mfe(t){t=Dn(t,Pr);const e=Dn(t.firestore,Ir);return P5(Qr(e),t._key).then(n=>vx(e,t,n))}(this._delegate),n.then(r=>new Jv(this.firestore,new Ql(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new qs(this.firestore,this._delegate.withConverter(e?$d.getInstance(this.firestore,e):null))}}function ko(t,e,n){return t.message=t.message.replace(e,n),t}function _z(t){for(const e of t)if("object"==typeof e&&!Ex(e))return e;return{}}function vz(t,e){var n,r;let i;return i=Ex(t[0])?t[0]:Ex(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Jv{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new qs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return iz(this._delegate,e._delegate)}}class ey extends Jv{data(e){const n=this._delegate.data(e);return this._delegate._converter||function Xce(t,e){t||Mt()}(void 0!==n),n}}class Oo{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new AC(e)}where(e,n,r){try{return new Oo(this.firestore,au(this._delegate,function Efe(t,e,n){const r=e,i=IC("where",t);return Yv._create(i,r,n)}(e,n,r)))}catch(i){throw ko(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Oo(this.firestore,au(this._delegate,function wfe(t,e="asc"){const n=e,r=IC("orderBy",t);return mx._create(r,n)}(e,n)))}catch(r){throw ko(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Oo(this.firestore,au(this._delegate,function Cfe(t){return L5("limit",t),EC._create("limit",t,"F")}(e)))}catch(n){throw ko(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Oo(this.firestore,au(this._delegate,function bfe(t){return L5("limitToLast",t),EC._create("limitToLast",t,"L")}(e)))}catch(n){throw ko(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Oo(this.firestore,au(this._delegate,function Tfe(...t){return wC._create("startAt",t,!0)}(...e)))}catch(n){throw ko(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Oo(this.firestore,au(this._delegate,function Afe(...t){return wC._create("startAfter",t,!1)}(...e)))}catch(n){throw ko(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Oo(this.firestore,au(this._delegate,function Dfe(...t){return CC._create("endBefore",t,!1)}(...e)))}catch(n){throw ko(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Oo(this.firestore,au(this._delegate,function Sfe(...t){return CC._create("endAt",t,!0)}(...e)))}catch(n){throw ko(n,"endAt()","Query.endAt()")}}isEqual(e){return sx(this._delegate,e._delegate)}get(e){let n;return n="cache"===(null==e?void 0:e.source)?function Ffe(t){t=Dn(t,eo);const e=Dn(t.firestore,Ir),n=Qr(e),r=new cu(e);return function Yhe(t,e){const n=new Ei;return t.asyncQueue.enqueueAndForget((0,y.A)(function*(){return(r=(0,y.A)(function*(o,s,a){try{const l=yield nC(o,s,!0),c=new _5(s,l.hs),h=c.Ta(l.documents),p=c.applyChanges(h,!1);a.resolve(p.snapshot)}catch(l){const c=zp(l,`Failed to execute query '${s} against cache`);a.reject(c)}}),function i(o,s,a){return r.apply(this,arguments)})(yield Yp(t),e,n);var r})),n.promise}(n,t._query).then(i=>new lu(e,r,t,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function Lfe(t){t=Dn(t,eo);const e=Dn(t.firestore,Ir),n=Qr(e),r=new cu(e);return x5(n,t._query,{source:"server"}).then(i=>new lu(e,r,t,i))}(this._delegate):function Ofe(t){t=Dn(t,eo);const e=Dn(t.firestore,Ir),n=Qr(e),r=new cu(e);return Z5(t._query),x5(n,t._query).then(i=>new lu(e,r,t,i))}(this._delegate),n.then(r=>new wx(this.firestore,new lu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=_z(e),r=vz(e,i=>new wx(this.firestore,new lu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return az(this._delegate,n,r)}withConverter(e){return new Oo(this.firestore,this._delegate.withConverter(e?$d.getInstance(this.firestore,e):null))}}class cpe{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ey(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wx{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Oo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ey(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new cpe(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ey(this._firestore,r))})}isEqual(e){return iz(this._delegate,e._delegate)}}class eg extends Oo{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new qs(this.firestore,e):null}doc(e){try{return new qs(this.firestore,void 0===e?pC(this._delegate):pC(this._delegate,e))}catch(n){throw ko(n,"doc()","CollectionReference.doc()")}}add(e){return function Bfe(t,e){const n=Dn(t.firestore,Ir),r=pC(t),i=bC(t.converter,e);return Jp(n,[_C(Ld(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Nr.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new qs(this.firestore,n))}isEqual(e){return U5(this._delegate,e._delegate)}withConverter(e){return new eg(this.firestore,this._delegate.withConverter(e?$d.getInstance(this.firestore,e):null))}}function Ud(t){return Dn(t,Pr)}class Cx{constructor(...e){this._delegate=new Kl(...e)}static documentId(){return new Cx(Sr.keyField().canonicalString())}isEqual(e){return(e=(0,A.Ku)(e))instanceof Kl&&this._delegate._internalPath.isEqual(e._internalPath)}}class jd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Jfe(){return new lx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new jd(e)}static delete(){const e=function Zfe(){return new Wv("deleteField")}();return e._methodName="FieldValue.delete",new jd(e)}static arrayUnion(...e){const n=function epe(...t){return new cx("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new jd(n)}static arrayRemove(...e){const n=function tpe(...t){return new ux("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new jd(n)}static increment(e){const n=function npe(t){return new dx("increment",t)}(e);return n._methodName="FieldValue.increment",new jd(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const upe={Firestore:pz,GeoPoint:gC,Timestamp:Mr,Blob:Zv,Transaction:gz,WriteBatch:mz,DocumentReference:qs,DocumentSnapshot:Jv,Query:Oo,QueryDocumentSnapshot:ey,QuerySnapshot:wx,CollectionReference:eg,FieldPath:Cx,FieldValue:jd,setLogLevel:function lpe(t){!function Yce(t){Gc.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function yz(t,e){return function fpe(t,e=xS){return new $n(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function bx(t,e){return yz(t,e).pipe(Et(n=>({payload:n,type:"query"})))}!function hpe(t){(function dpe(t,e){t.INTERNAL.registerComponent(new Ca.uA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},upe)))})(t,(e,n)=>new pz(e,n,new ape)),t.registerVersion("@firebase/firestore-compat","0.3.27")}(Qi.A);class Iz{constructor(e,n){An(this,"ref",void 0),An(this,"afs",void 0),this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:o}=bz(r,n);return new Cz(i,o,this.afs)}snapshotChanges(){return function ppe(t,e){return yz(t,e).pipe(TE(void 0),fR(),Et(n=>{const[r,i]=n;return i.exists?null!=r&&r.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ro)}valueChanges(e={}){return this.snapshotChanges().pipe(Et(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return er(this.ref.get(e)).pipe(Ro)}}function DC(t,e){return bx(t,e).pipe(TE(void 0),fR(),Et(n=>{const[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const c=o.find(p=>p.doc.ref.isEqual(a.ref)),h=null==r?void 0:r.payload.docs.find(p=>p.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),s}))}function Ez(t,e,n){return DC(t,n).pipe(DE((r,i)=>function gpe(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function mpe(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Tx(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Tx(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Tx(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(o=>o.payload),e),[]),rj(),Et(r=>r.map(i=>({type:i.type,payload:i}))))}function Tx(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function wz(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class Cz{constructor(e,n,r){An(this,"ref",void 0),An(this,"query",void 0),An(this,"afs",void 0),this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=DC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(Et(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(TE(void 0),fR(),gs(([r,i])=>i.length>0||!r),Et(([,r])=>r),Ro)}auditTrail(e){return this.stateChanges(e).pipe(DE((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=wz(e);return Ez(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ro)}valueChanges(e={}){return bx(this.query,this.afs.schedulers.outsideAngular).pipe(Et(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ro)}get(e){return er(this.query.get(e)).pipe(Ro)}add(e){return this.ref.add(e)}doc(e){return new Iz(this.ref.doc(e),this.afs)}}class _pe{constructor(e,n){An(this,"query",void 0),An(this,"afs",void 0),this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?DC(this.query,this.afs.schedulers.outsideAngular).pipe(Et(n=>n.filter(r=>e.indexOf(r.type)>-1)),gs(n=>n.length>0),Ro):DC(this.query,this.afs.schedulers.outsideAngular).pipe(Ro)}auditTrail(e){return this.stateChanges(e).pipe(DE((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=wz(e);return Ez(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ro)}valueChanges(e={}){return bx(this.query,this.afs.schedulers.outsideAngular).pipe(Et(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ro)}get(e){return er(this.query.get(e)).pipe(Ro)}}const vpe=new lt("angularfire2.enableFirestorePersistence"),ype=new lt("angularfire2.firestore.persistenceSettings"),Ipe=new lt("angularfire2.firestore.settings"),Epe=new lt("angularfire2.firestore.use-emulator");function bz(t,e=(n=>n)){return{query:e(t),ref:t}}let du=(()=>{var t;class e{constructor(r,i,o,s,a,l,c,h,p,m,_,w,T,S,j,H,ge){An(this,"schedulers",void 0),An(this,"firestore",void 0),An(this,"persistenceEnabled$",void 0),this.schedulers=c;const ve=jE(r,l,i),Xe=p;m&&j$(ve,l,_,T,S,j,w,H),[this.firestore,this.persistenceEnabled$]=OS(`${ve.name}.firestore`,"AngularFirestore",ve.name,()=>{const At=l.runOutsideAngular(()=>ve.firestore());if(s&&At.settings(s),Xe&&At.useEmulator(...Xe),o&&!yE(a)){const En=()=>{try{return er(At.enablePersistence(h||void 0).then(()=>!0,()=>!1))}catch(Hn){return typeof console<"u"&&console.warn(Hn),Gt(!1)}};return[At,l.runOutsideAngular(En)]}return[At,Gt(!1)]},[s,Xe,o])}collection(r,i){let o;o="string"==typeof r?this.firestore.collection(r):r;const{ref:s,query:a}=bz(o,i),l=this.schedulers.ngZone.run(()=>s);return new Cz(l,a,this)}collectionGroup(r,i){const o=i||(a=>a),s=this.firestore.collectionGroup(r);return new _pe(o(s),this)}doc(r){let i;i="string"==typeof r?this.firestore.doc(r):r;const o=this.schedulers.ngZone.run(()=>i);return new Iz(o,this)}createId(){return this.firestore.collection("_").doc().id}}return t=e,An(e,"\u0275fac",function(r){return new(r||t)(Be(F_),Be(L_,8),Be(vpe,8),Be(Ipe,8),Be(fa),Be(xe),Be(kS),Be(ype,8),Be(Epe,8),Be(wa,8),Be(F$,8),Be(L$,8),Be(V$,8),Be(B$,8),Be($$,8),Be(U$,8),Be(NS,8))}),An(e,"\u0275prov",je({token:t,factory:t.\u0275fac,providedIn:"any"})),e})(),wpe=(()=>{var t;class e{constructor(r,i,o){this.afAuth=r,this.router=i,this.firestore=o}register(r){var i=this;return(0,y.A)(function*(){const s=document.getElementById("register-email").value;if("pro"==r)var a="pro";else a="normal";const c=document.getElementById("password1").value;if(c===document.getElementById("password2").value)try{const _=(yield i.afAuth.createUserWithEmailAndPassword(s,c)).user;if(_){const w=_.uid,S=document.getElementById("name_input1").value,H=document.getElementById("username_input1").value,ve=document.getElementById("phone_input1").value,Xe=_.uid,At={uid:w,mail:s,name:S,username:H,phone:ve,type:a};yield i.firestore.collection("users_data").doc(Xe).set(At),console.log("Account registrato con successo"),i.router.navigate(["/home"])}else console.error("L'utente \xe8 null")}catch(m){alert("Errore durante la registrazione: "+m.message)}else alert("Le password inserite non corrispondono")})()}toLogin(){this.router.navigate(["/login"])}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)(E(wa),E(hr),E(du))},t.\u0275cmp=Ke({type:t,selectors:[["app-register"]],decls:37,vars:0,consts:[["src","assets/img/extended_logo.jpg",2,"height","18rem","object-fit","contain"],[1,"card1",2,"width","90%","margin-bottom","1.5rem"],[1,"input1",2,"margin-top","1rem"],["src","assets\\img\\octicon_person-24 (1).png",1,"input1_img1"],["id","name_input1","type","text","placeholder","Nome",1,"field1"],["id","username_input1","type","text","placeholder","Username",1,"field1"],["src","assets\\img\\mdi_password-outline.png",1,"input1_img1"],["id","register-email","type","email","placeholder","Email",1,"field1"],["id","phone_input1","type","number","placeholder","Cellulare",1,"field1"],["id","password1","type","password","placeholder","Password",1,"field1"],["id","password2","type","password","placeholder","Conferma Password",1,"field1"],[1,"button1",2,"width","90%","margin-top","1rem","margin-bottom","1rem","justify-content","center",3,"click"],[1,"div1",2,"margin-left","0rem"],["src","assets/img/Vector.png"],[1,"general_paragraph1",2,"margin-left","0.5rem"],[2,"width","100%","text-align","center","margin-top","0rem","margin-bottom","0rem"],[1,"button1",2,"width","90%","margin-top","1rem","margin-bottom","1rem","background","white",3,"click"],[1,"div1"],["src","assets/img/Vector (1).png"],[1,"general_paragraph1",2,"margin-left","0.5rem","color","black"],[2,"width","100%","text-align","center"],[2,"cursor","pointer",3,"click"]],template:function(r,i){1&r&&(M(0,"body"),Ne(1,"img",0),M(2,"div",1)(3,"div",2),Ne(4,"img",3)(5,"input",4),B(),M(6,"div",2),Ne(7,"img",3)(8,"input",5),B(),M(9,"div",2),Ne(10,"img",6)(11,"input",7),B(),M(12,"div",2),Ne(13,"img",3)(14,"input",8),B(),M(15,"div",2),Ne(16,"img",6)(17,"input",9),B(),M(18,"div",2),Ne(19,"img",6)(20,"input",10),B(),M(21,"button",11),Ft("click",function(){return i.register("normal")}),M(22,"div",12),Ne(23,"img",13),M(24,"p",14),ye(25,"Registrati"),B()()(),M(26,"p",15),ye(27,"Oppure:"),B(),M(28,"button",16),Ft("click",function(){return i.register("pro")}),M(29,"div",17),Ne(30,"img",18),M(31,"p",19),ye(32,"Registrati come organizzatore"),B()()()(),M(33,"p",20),ye(34,"Hai gi\xe0 un account?"),M(35,"strong",21),Ft("click",function(){return i.toLogin()}),ye(36,"Accedi"),B()()())}}),e})();const Tz="@firebase/database";let Ax="";function Dx(t){Ax=t}class Cpe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,A.As)(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:(0,A.$L)(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class bpe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return(0,A.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Dz=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Cpe(e)}}catch{}return new bpe},Hd=Dz("localStorage"),Sx=Dz("sessionStorage"),tg=new _s.Vy("@firebase/database"),Sz=function(){let t=1;return function(){return t++}}(),Rz=function(t){const e=(0,A.kj)(t),n=new A.gz;n.update(e);const r=n.digest();return A.K3.encodeByteArray(r)},ty=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=ty.apply(null,r):e+="object"==typeof r?(0,A.As)(r):r,e+=" "}return e};let zd=null,Pz=!0;const xz=function(t,e){(0,A.vA)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(tg.logLevel=_s.$b.VERBOSE,zd=tg.log.bind(tg),e&&Sx.set("logging_enabled",!0)):"function"==typeof t?zd=t:(zd=null,Sx.remove("logging_enabled"))},$i=function(...t){if(!0===Pz&&(Pz=!1,null===zd&&!0===Sx.get("logging_enabled")&&xz(!0)),zd){const e=ty.apply(null,t);zd(e)}},ny=function(t){return function(...e){$i(t,...e)}},Rx=function(...t){const e="FIREBASE INTERNAL ERROR: "+ty(...t);tg.error(e)},sl=function(...t){const e=`FIREBASE FATAL ERROR: ${ty(...t)}`;throw tg.error(e),new Error(e)},mo=function(...t){const e="FIREBASE WARNING: "+ty(...t);tg.warn(e)},SC=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},hu="[MIN_NAME]",Yl="[MAX_NAME]",Gd=function(t,e){if(t===e)return 0;if(t===hu||e===Yl)return-1;if(e===hu||t===Yl)return 1;{const n=kz(t),r=kz(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},Dpe=function(t,e){return t===e?0:t<e?-1:1},ry=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,A.As)(e))},Px=function(t){if("object"!=typeof t||null===t)return(0,A.As)(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=(0,A.As)(e[r]),n+=":",n+=Px(t[e[r]]);return n+="}",n},Mz=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function Ui(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Nz=function(t){(0,A.vA)(!SC(t),"Invalid JSON number");const r=1023;let i,o,s,a,l;0===t?(o=0,s=0,i=1/t==-1/0?1:0):(i=t<0,(t=Math.abs(t))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(t/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=11;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(i?1:0),c.reverse();const h=c.join("");let p="";for(l=0;l<64;l+=8){let m=parseInt(h.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),p+=m}return p.toLowerCase()},xpe=new RegExp("^-?(0*)\\d{1,10}$"),kz=function(t){if(xpe.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},ng=function(t){try{t()}catch(e){setTimeout(()=>{throw mo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},iy=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class Ope{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=null==n?void 0:n.getImmediate({optional:!0}),this.appCheck||null==n||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){mo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Fpe{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?($i("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',mo(e)}}let oy=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const Bz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,jz="websocket",Hz="long_polling";class Mx{constructor(e,n,r,i,o=!1,s="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hd.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function zz(t,e,n){let r;if((0,A.vA)("string"==typeof e,"typeof type must == string"),(0,A.vA)("object"==typeof n,"typeof params must == object"),e===jz)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==Hz)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function Lpe(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return Ui(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}class Vpe{constructor(){this.counters_={}}incrementCounter(e,n=1){(0,A.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return(0,A.A4)(this.counters_)}}const Nx={},kx={};function Ox(t){const e=t.toString();return Nx[e]||(Nx[e]=new Vpe),Nx[e]}class $pe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ng(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class fu{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ny(e),this.stats_=Ox(n),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),zz(n,Hz,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new $pe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if((0,A.$g)()||"complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Fx((...o)=>{const[s,a,l,c,h]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=l;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Bz.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fu.forceAllow_=!0}static forceDisallow(){fu.forceDisallow_=!0}static isAvailable(){return!((0,A.$g)()||!fu.forceAllow_&&(fu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=(0,A.As)(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=(0,A.KA)(n),i=Mz(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if((0,A.$g)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=(0,A.As)(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Fx{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,A.$g)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Sz(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=Fx.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){$i("frame writing exception"),a.stack&&$i(a.stack),$i(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||$i("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const s=this.pendingSegs.shift();r=r+"&seg"+i+"="+s.seg+"&ts"+i+"="+s.ts+"&d"+i+"="+s.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,n){(0,A.$g)()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{$i("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let PC=null;typeof MozWebSocket<"u"?PC=MozWebSocket:typeof WebSocket<"u"&&(PC=WebSocket);let rg=(()=>{class t{constructor(n,r,i,o,s,a,l){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ny(this.connId),this.stats_=Ox(r),this.connURL=t.connectionURL_(r,a,l,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){const a={v:"5"};return!(0,A.$g)()&&typeof location<"u"&&location.hostname&&Bz.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),o&&(a.ac=o),s&&(a.p=s),zz(n,jz,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hd.set("previous_websocket_failure",!0);try{let i;if((0,A.$g)()){i={headers:{"User-Agent":`Firebase/5/${Ax}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const s=process.env,a=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new PC(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==PC&&!t.forceDisallow_}static previouslyFailed(){return Hd.isInMemoryStorage||!0===Hd.get("previous_websocket_failure")}markConnectionHealthy(){Hd.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,A.$L)(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if((0,A.vA)(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=(0,A.As)(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Mz(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),Xz=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[fu,rg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=rg&&rg.isAvailable();let i=r&&!rg.previouslyFailed();if(n.webSocketOnly&&(r||mo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[rg];else{const o=this.transports_=[];for(const s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class i6{constructor(e,n,r,i,o,s,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ny("c:"+this.id+":"),this.transportManager_=new Xz(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=iy(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ry("t",e),r=ry("d",e);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ry("t",e),r=ry("d",e);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ry("t",e);if("d"in e){const r=e.d;if("h"===n){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?Rx("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Rx("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&mo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),iy(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):iy(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class o6{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class s6{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,A.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,A.vA)(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class xC extends s6{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,A.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new xC}getInitialEvent(e){return(0,A.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Xn{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function jn(){return new Xn("")}function yn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pu(t){return t.pieces_.length-t.pieceNum_}function fr(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Xn(t.pieces_,e)}function Vx(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function sy(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function c6(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Xn(e,0)}function kr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Xn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Xn(n,0)}function In(t){return t.pieceNum_>=t.pieces_.length}function Fo(t,e){const n=yn(t),r=yn(e);if(null===n)return e;if(n===r)return Fo(fr(t),fr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function lge(t,e){const n=sy(t,0),r=sy(e,0);for(let i=0;i<n.length&&i<r.length;i++){const o=Gd(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Bx(t,e){if(pu(t)!==pu(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ks(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(pu(t)>pu(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class cge{constructor(e,n){this.errorPrefix_=n,this.parts_=sy(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,A.OE)(this.parts_[r]);u6(this)}}function u6(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Wd(t))}function Wd(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class $x extends s6{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new $x}getInitialEvent(e){return(0,A.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const ay=1e3;let NC,qd=(()=>{class t extends o6{constructor(n,r,i,o,s,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=ny("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ay,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,A.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");$x.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&xC.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_((0,A.As)(s)),(0,A.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();const r=new A.cY,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,o){this.initConnection_();const s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),(0,A.vA)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,A.vA)(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const l={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const s={p:i};n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest("q",s,l=>{const c=l.d,h=l.s;t.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",l),"ok"!==h&&this.removeListen_(i,o),n.onComplete&&n.onComplete(h,c))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&(0,A.gR)(n,"w")){const i=(0,A.yw)(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();mo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||(0,A.qc)(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=(0,A.Cv)(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const s=o.s,a=o.d||"error";this.authToken_===n&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,A.vA)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);const s={p:n};o&&(s.q=i,s.t=o),this.sendRequest("n",s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){const s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();const a={p:r,d:i};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+(0,A.As)(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):Rx("Unrecognized action received from server: "+(0,A.As)(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){(0,A.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ay,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=ay,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ay),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return(0,y.A)(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),o=n.onRealtimeDisconnect_.bind(n),s=n.id+":"+t.nextConnectionId_++,a=n.lastSessionId;let l=!1,c=null;const h=function(){c?c.close():(l=!0,o())};n.realtime_={close:h,sendRequest:function(_){(0,A.vA)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(_)}};const m=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[_,w]=yield Promise.all([n.authTokenProvider_.getToken(m),n.appCheckTokenProvider_.getToken(m)]);l?$i("getToken() completed but was canceled"):($i("getToken() completed. Creating connection."),n.authToken_=_&&_.accessToken,n.appCheckToken_=w&&w.token,c=new i6(s,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,o,T=>{mo(T+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(_){n.log_("Failed to get token: "+_),l||(n.repoInfo_.nodeAdmin&&mo(_),h())}}})()}interrupt(n){$i("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){$i("Resuming connection for reason: "+n),delete this.interruptReasons_[n],(0,A.Im)(this.interruptReasons_)&&(this.reconnectDelay_=ay,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(s=>Px(s)).join("$"):"default";const o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){const i=new Xn(n).toString();let o;if(this.listens.has(i)){const s=this.listens.get(i);o=s.get(r),s.delete(r),0===s.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){$i("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){$i("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";(0,A.$g)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),n["sdk."+r+"."+Ax.replace(/\./g,"-")]=1,(0,A.jZ)()?n["framework.cordova"]=1:(0,A.lV)()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=xC.getInstance().currentlyOnline();return(0,A.Im)(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class wn{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new wn(e,n)}}class MC{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new wn(hu,e),i=new wn(hu,n);return 0!==this.compare(r,i)}minPost(){return wn.MIN}}class f6 extends MC{static get __EMPTY_NODE(){return NC}static set __EMPTY_NODE(e){NC=e}compare(e,n){return Gd(e.name,n.name)}isDefinedOn(e){throw(0,A.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return wn.MIN}maxPost(){return new wn(Yl,NC)}makePost(e,n){return(0,A.vA)("string"==typeof e,"KeyIndex indexValue must always be a string."),new wn(e,NC)}toString(){return".key"}}const al=new f6;class kC{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let jx,Aa=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=null!=i?i:t.RED,this.left=null!=o?o:es.EMPTY_NODE,this.right=null!=s?s:es.EMPTY_NODE}copy(n,r,i,o,s){return new t(null!=n?n:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=o?o:this.left,null!=s?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this;const s=i(n,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(n,r,i),null):0===s?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return es.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return es.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class es{constructor(e,n=es.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new es(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Aa.BLACK,null,null))}remove(e){return new es(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Aa.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new kC(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new kC(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new kC(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new kC(this.root_,null,this.comparator_,!0,e)}}function _ge(t,e){return Gd(t.name,e.name)}function Ux(t,e){return Gd(t,e)}es.EMPTY_NODE=new class mge{copy(e,n,r,i,o){return this}insert(e,n,r){return new Aa(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const p6=function(t){return"number"==typeof t?"number:"+Nz(t):"string:"+t},g6=function(t){if(t.isLeafNode()){const e=t.val();(0,A.vA)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,A.gR)(e,".sv"),"Priority must be a string or number.")}else(0,A.vA)(t===jx||t.isEmpty(),"priority of unexpected type.");(0,A.vA)(t===jx||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let m6,_6,v6,ig=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,(0,A.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),g6(this.priorityNode_)}static set __childrenNodeConstructor(n){m6=n}static get __childrenNodeConstructor(){return m6}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return In(n)?this:".priority"===yn(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=yn(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,A.vA)(".priority"!==i||1===pu(n),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(fr(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+p6(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?Nz(this.value_):this.value_,this.lazyHash_=Rz(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:((0,A.vA)(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return(0,A.vA)(o>=0,"Unknown leaf type: "+r),(0,A.vA)(s>=0,"Unknown leaf type: "+i),o===s?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const Er=new class Ege extends MC{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return 0===o?Gd(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return wn.MIN}maxPost(){return new wn(Yl,new ig("[PRIORITY-POST]",v6))}makePost(e,n){const r=_6(e);return new wn(n,new ig("[PRIORITY-POST]",r))}toString(){return".priority"}},wge=Math.log(2);class Cge{constructor(e){this.count=parseInt(Math.log(e+1)/wge,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const OC=function(t,e,n,r){t.sort(e);const i=function(l,c){const h=c-l;let p,m;if(0===h)return null;if(1===h)return p=t[l],m=n?n(p):p,new Aa(m,p.node,Aa.BLACK,null,null);{const _=parseInt(h/2,10)+l,w=i(l,_),T=i(_+1,c);return p=t[_],m=n?n(p):p,new Aa(m,p.node,Aa.BLACK,w,T)}},a=function(l){let c=null,h=null,p=t.length;const m=function(w,T){const S=p-w,j=p;p-=w;const H=i(S+1,j),ge=t[S],ve=n?n(ge):ge;_(new Aa(ve,ge.node,T,null,H))},_=function(w){c?(c.left=w,c=w):(h=w,c=w)};for(let w=0;w<l.count;++w){const T=l.nextBitIsOne(),S=Math.pow(2,l.count-(w+1));T?m(S,Aa.BLACK):(m(S,Aa.BLACK),m(S,Aa.RED))}return h}(new Cge(t.length));return new es(r||e,a)};let Hx;const og={};class Xl{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return(0,A.vA)(og&&Er,"ChildrenNode.ts has not been loaded"),Hx=Hx||new Xl({".priority":og},{".priority":Er}),Hx}get(e){const n=(0,A.yw)(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof es?n:null}hasIndex(e){return(0,A.gR)(this.indexSet_,e.toString())}addIndex(e,n){(0,A.vA)(e!==al,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(wn.Wrap);let a,s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();a=i?OC(r,e.getCompare()):og;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new Xl(h,c)}addToIndexes(e,n){const r=(0,A.kH)(this.indexes_,(i,o)=>{const s=(0,A.yw)(this.indexSet_,o);if((0,A.vA)(s,"Missing index implementation for "+o),i===og){if(s.isDefinedOn(e.node)){const a=[],l=n.getIterator(wn.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),OC(a,s.getCompare())}return og}{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new wn(e.name,a))),l.insert(e,e.node)}});return new Xl(r,this.indexSet_)}removeFromIndexes(e,n){const r=(0,A.kH)(this.indexes_,i=>{if(i===og)return i;{const o=n.get(e.name);return o?i.remove(new wn(e.name,o)):i}});return new Xl(r,this.indexSet_)}}let ly,hn=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&g6(this.priorityNode_),this.children_.isEmpty()&&(0,A.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ly||(ly=new t(new es(Ux),null,Xl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ly}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?ly:r}}getChild(n){const r=yn(n);return null===r?this:this.getImmediateChild(r).getChild(fr(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if((0,A.vA)(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new wn(n,r);let o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));const a=o.isEmpty()?ly:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){const i=yn(n);if(null===i)return r;{(0,A.vA)(".priority"!==yn(n)||1===pu(n),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(fr(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,o=0,s=!0;if(this.forEachChild(Er,(a,l)=>{r[a]=l.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+p6(this.getPriority().val())+":"),this.forEachChild(Er,(r,i)=>{const o=i.hash();""!==o&&(n+=":"+r+":"+o)}),this.lazyHash_=""===n?"":Rz(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const o=this.resolveIndex_(i);if(o){const s=o.getPredecessorKey(new wn(n,r));return s?s.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new wn(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new wn(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{const o=this.children_.getIteratorFrom(n.name,wn.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{const o=this.children_.getReverseIteratorFrom(n.name,wn.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===cy?-1:0}withIndex(n){if(n===al||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===al||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Er),o=r.getIterator(Er);let s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(n){return n===al?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const cy=new class bge extends hn{constructor(){super(new es(Ux),hn.EMPTY_NODE,Xl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return hn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(wn,{MIN:{value:new wn(hu,hn.EMPTY_NODE)},MAX:{value:new wn(Yl,cy)}}),f6.__EMPTY_NODE=hn.EMPTY_NODE,ig.__childrenNodeConstructor=hn,function vge(t){jx=t}(cy),function Ige(t){v6=t}(cy);const Tge=!0;function Ur(t,e=null){if(null===t)return hn.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,A.vA)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new ig(t,Ur(e));if(t instanceof Array||!Tge){let n=hn.EMPTY_NODE;return Ui(t,(r,i)=>{if((0,A.gR)(t,r)&&"."!==r.substring(0,1)){const o=Ur(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Ur(e))}{const n=[];let r=!1;if(Ui(t,(s,a)=>{if("."!==s.substring(0,1)){const l=Ur(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new wn(s,l)))}}),0===n.length)return hn.EMPTY_NODE;const o=OC(n,_ge,s=>s.name,Ux);if(r){const s=OC(n,Er.getCompare());return new hn(o,Ur(e),new Xl({".priority":s},{".priority":Er}))}return new hn(o,Ur(e),Xl.Default)}}!function yge(t){_6=t}(Ur);class zx extends MC{constructor(e){super(),this.indexPath_=e,(0,A.vA)(!In(e)&&".priority"!==yn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return 0===o?Gd(e.name,n.name):o}makePost(e,n){const r=Ur(e),i=hn.EMPTY_NODE.updateChild(this.indexPath_,r);return new wn(n,i)}maxPost(){const e=hn.EMPTY_NODE.updateChild(this.indexPath_,cy);return new wn(Yl,e)}toString(){return sy(this.indexPath_,0).join("/")}}const Gx=new class Age extends MC{compare(e,n){const r=e.node.compareTo(n.node);return 0===r?Gd(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return wn.MIN}maxPost(){return wn.MAX}makePost(e,n){const r=Ur(e);return new wn(n,r)}toString(){return".value"}};function y6(t){return{type:"value",snapshotNode:t}}function sg(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function uy(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function dy(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class Wx{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){(0,A.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=s&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(uy(n,a)):(0,A.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(sg(n,r)):s.trackChildChange(dy(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Er,(i,o)=>{n.hasChild(i)||r.trackChildChange(uy(i,o))}),n.isLeafNode()||n.forEachChild(Er,(i,o)=>{if(e.hasChild(i)){const s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(dy(i,o,s))}else r.trackChildChange(sg(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?hn.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class hy{constructor(e){this.indexedFilter_=new Wx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=hy.getStartPost_(e),this.endPost_=hy.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new wn(n,r))||(r=hn.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=hn.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(hn.EMPTY_NODE);const o=this;return n.forEachChild(Er,(s,a)=>{o.matches(new wn(s,a))||(i=i.updateImmediateChild(s,hn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}return e.getIndex().maxPost()}}class Sge{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new hy(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new wn(n,r))||(r=hn.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=hn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let o;i=hn.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),s++}}}else{let o;i=n.withIndex(this.index_),i=i.updatePriority(hn.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let s=0;for(;o.hasNext();){const a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,hn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){const p=this.index_.getCompare();s=(m,_)=>p(_,m)}else s=this.index_.getCompare();const a=e;(0,A.vA)(a.numChildren()===this.limit_,"");const l=new wn(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const p=a.getImmediateChild(n);let m=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=m&&(m.name===n||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);const _=null==m?1:s(m,l);if(h&&!r.isEmpty()&&_>=0)return null!=o&&o.trackChildChange(dy(n,r,p)),a.updateImmediateChild(n,r);{null!=o&&o.trackChildChange(uy(n,p));const T=a.updateImmediateChild(n,hn.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(null!=o&&o.trackChildChange(sg(m.name,m.node)),T.updateImmediateChild(m.name,m.node)):T}}return r.isEmpty()?e:h&&s(c,l)>=0?(null!=o&&(o.trackChildChange(uy(c.name,c.node)),o.trackChildChange(sg(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,hn.EMPTY_NODE)):e}}class FC{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Er}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,A.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,A.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:hu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,A.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,A.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,A.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Er}copy(){const e=new FC;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function qx(t,e,n){const r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Kx(t,e,n){const r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function LC(t,e){const n=t.copy();return n.index_=e,n}function I6(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Er?n="$priority":t.index_===Gx?n="$value":t.index_===al?n="$key":((0,A.vA)(t.index_ instanceof zx,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=(0,A.As)(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=(0,A.As)(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+(0,A.As)(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=(0,A.As)(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+(0,A.As)(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function E6(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Er&&(e.i=t.index_.toString()),e}class VC extends o6{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ny("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:((0,A.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=VC.getListenId_(e,r),a={};this.listens_[s]=a;const l=I6(e._queryParams);this.restRequest_(o+".json",l,(c,h)=>{let p=h;if(404===c&&(p=null,c=null),null===c&&this.onDataUpdate_(o,p,!1,r),(0,A.yw)(this.listens_,s)===a){let m;m=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(m,null)}})}unlisten(e,n){const r=VC.getListenId_(e,n);delete this.listens_[r]}get(e){const n=I6(e._queryParams),r=e._path.toString(),i=new A.cY;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,A.Am)(n);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,A.$L)(a.responseText)}catch{mo("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&mo("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}}class kge{constructor(){this.rootNode_=hn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function BC(){return{value:null,children:new Map}}function ag(t,e,n){if(In(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=yn(e);t.children.has(r)||t.children.set(r,BC()),ag(t.children.get(r),e=fr(e),n)}}function Qx(t,e){if(In(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Er,(r,i)=>{ag(t,new Xn(r),i)}),Qx(t,e)}}if(t.children.size>0){const n=yn(e);return e=fr(e),t.children.has(n)&&Qx(t.children.get(n),e)&&t.children.delete(n),0===t.children.size}return!0}function Yx(t,e,n){null!==t.value?n(e,t.value):function Oge(t,e){t.children.forEach((n,r)=>{e(r,n)})}(t,(r,i)=>{Yx(i,new Xn(e.toString()+"/"+r),n)})}class Fge{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ui(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}class Bge{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Fge(e);const r=1e4+2e4*Math.random();iy(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ui(e,(i,o)=>{o>0&&(0,A.gR)(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),iy(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ll=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(ll||{});function Jx(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class $C{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ll.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(In(this.path)){if(null!=this.affectedTree.value)return(0,A.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Xn(e));return new $C(jn(),n,this.revert)}}return(0,A.vA)(yn(this.path)===e,"operationForChild called for unrelated child."),new $C(fr(this.path),this.affectedTree,this.revert)}}class fy{constructor(e,n){this.source=e,this.path=n,this.type=ll.LISTEN_COMPLETE}operationForChild(e){return In(this.path)?new fy(this.source,jn()):new fy(this.source,fr(this.path))}}class Kd{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ll.OVERWRITE}operationForChild(e){return In(this.path)?new Kd(this.source,jn(),this.snap.getImmediateChild(e)):new Kd(this.source,fr(this.path),this.snap)}}class lg{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ll.MERGE}operationForChild(e){if(In(this.path)){const n=this.children.subtree(new Xn(e));return n.isEmpty()?null:n.value?new Kd(this.source,jn(),n.value):new lg(this.source,jn(),n)}return(0,A.vA)(yn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new lg(this.source,fr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class gu{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(In(e))return this.isFullyInitialized()&&!this.filtered_;const n=yn(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class $ge{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function py(t,e,n,r,i,o){const s=r.filter(a=>a.type===n);s.sort((a,l)=>function Hge(t,e,n){if(null==e.childName||null==n.childName)throw(0,A.Hk)("Should only compare child_ events.");const r=new wn(e.childName,e.snapshotNode),i=new wn(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,a,l)),s.forEach(a=>{const l=function jge(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,a,o);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function UC(t,e){return{eventCache:t,serverCache:e}}function gy(t,e,n,r){return UC(new gu(e,n,r),t.serverCache)}function C6(t,e,n,r){return UC(t.eventCache,new gu(e,n,r))}function jC(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qd(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let eM;class wr{constructor(e,n=(()=>(eM||(eM=new es(Dpe)),eM))()){this.value=e,this.children=n}static fromObject(e){let n=new wr(null);return Ui(e,(r,i)=>{n=n.set(new Xn(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:jn(),value:this.value};if(In(e))return null;{const r=yn(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(fr(e),n);return null!=o?{path:kr(new Xn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(In(e))return this;{const n=yn(e),r=this.children.get(n);return null!==r?r.subtree(fr(e)):new wr(null)}}set(e,n){if(In(e))return new wr(n,this.children);{const r=yn(e),o=(this.children.get(r)||new wr(null)).set(fr(e),n),s=this.children.insert(r,o);return new wr(this.value,s)}}remove(e){if(In(e))return this.children.isEmpty()?new wr(null):new wr(null,this.children);{const n=yn(e),r=this.children.get(n);if(r){const i=r.remove(fr(e));let o;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new wr(null):new wr(this.value,o)}return this}}get(e){if(In(e))return this.value;{const n=yn(e),r=this.children.get(n);return r?r.get(fr(e)):null}}setTree(e,n){if(In(e))return n;{const r=yn(e),o=(this.children.get(r)||new wr(null)).setTree(fr(e),n);let s;return s=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new wr(this.value,s)}}fold(e){return this.fold_(jn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(kr(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,jn(),n)}findOnPath_(e,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(In(e))return null;{const o=yn(e),s=this.children.get(o);return s?s.findOnPath_(fr(e),kr(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,jn(),n)}foreachOnPath_(e,n,r){if(In(e))return this;{this.value&&r(n,this.value);const i=yn(e),o=this.children.get(i);return o?o.foreachOnPath_(fr(e),kr(n,i),r):new wr(null)}}foreach(e){this.foreach_(jn(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(kr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class Da{constructor(e){this.writeTree_=e}static empty(){return new Da(new wr(null))}}function my(t,e,n){if(In(e))return new Da(new wr(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const s=Fo(i,e);return o=o.updateChild(s,n),new Da(t.writeTree_.set(i,o))}{const i=new wr(n),o=t.writeTree_.setTree(e,i);return new Da(o)}}}function tM(t,e,n){let r=t;return Ui(n,(i,o)=>{r=my(r,kr(e,i),o)}),r}function b6(t,e){if(In(e))return Da.empty();{const n=t.writeTree_.setTree(e,new wr(null));return new Da(n)}}function nM(t,e){return null!=Yd(t,e)}function Yd(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Fo(n.path,e)):null}function T6(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Er,(r,i)=>{e.push(new wn(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new wn(r,i.value))}),e}function mu(t,e){if(In(e))return t;{const n=Yd(t,e);return new Da(null!=n?new wr(n):t.writeTree_.subtree(e))}}function rM(t){return t.writeTree_.isEmpty()}function cg(t,e){return A6(jn(),t.writeTree_,e)}function A6(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,A.vA)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=A6(kr(t,i),o,n)}),!n.getChild(t).isEmpty()&&null!==r&&(n=n.updateChild(kr(t,".priority"),r)),n}}function HC(t,e){return x6(e,t)}function Qge(t,e){if(t.snap)return Ks(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ks(kr(t.path,n),e))return!0;return!1}function Xge(t){return t.visible}function D6(t,e,n){let r=Da.empty();for(let i=0;i<t.length;++i){const o=t[i];if(e(o)){const s=o.path;let a;if(o.snap)Ks(n,s)?(a=Fo(n,s),r=my(r,a,o.snap)):Ks(s,n)&&(a=Fo(s,n),r=my(r,jn(),o.snap.getChild(a)));else{if(!o.children)throw(0,A.Hk)("WriteRecord should have .snap or .children");if(Ks(n,s))a=Fo(n,s),r=tM(r,a,o.children);else if(Ks(s,n))if(a=Fo(s,n),In(a))r=tM(r,jn(),o.children);else{const l=(0,A.yw)(o.children,yn(a));if(l){const c=l.getChild(fr(a));r=my(r,jn(),c)}}}}}return r}function S6(t,e,n,r,i){if(r||i){const o=mu(t.visibleWrites,e);return!i&&rM(o)?n:i||null!=n||nM(o,jn())?cg(D6(t.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Ks(c.path,e)||Ks(e,c.path))},e),n||hn.EMPTY_NODE):null}{const o=Yd(t.visibleWrites,e);if(null!=o)return o;{const s=mu(t.visibleWrites,e);return rM(s)?n:null!=n||nM(s,jn())?cg(s,n||hn.EMPTY_NODE):null}}}function zC(t,e,n,r){return S6(t.writeTree,t.treePath,e,n,r)}function iM(t,e){return function Zge(t,e,n){let r=hn.EMPTY_NODE;const i=Yd(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Er,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){const o=mu(t.visibleWrites,e);return n.forEachChild(Er,(s,a)=>{const l=cg(mu(o,new Xn(s)),a);r=r.updateImmediateChild(s,l)}),T6(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}return T6(mu(t.visibleWrites,e)).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}(t.writeTree,t.treePath,e)}function R6(t,e,n,r){return function Jge(t,e,n,r,i){(0,A.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=kr(e,n);if(nM(t.visibleWrites,o))return null;{const s=mu(t.visibleWrites,o);return rM(s)?i.getChild(n):cg(s,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function GC(t,e){return function tme(t,e){return Yd(t.visibleWrites,e)}(t.writeTree,kr(t.treePath,e))}function oM(t,e,n){return function eme(t,e,n,r){const i=kr(e,n),o=Yd(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?cg(mu(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function P6(t,e){return x6(kr(t.treePath,e),t.writeTree)}function x6(t,e){return{treePath:t,writeTree:e}}class ome{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;(0,A.vA)("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),(0,A.vA)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===n&&"child_removed"===o)this.changeMap.set(r,dy(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===o)this.changeMap.set(r,uy(r,i.oldSnap));else if("child_changed"===n&&"child_added"===o)this.changeMap.set(r,sg(r,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==o)throw(0,A.Hk)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,dy(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const M6=new class sme{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};class sM{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new gu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return oM(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qd(this.viewCache_),o=function ime(t,e,n,r,i,o){return function nme(t,e,n,r,i,o,s){let a;const l=mu(t.visibleWrites,e),c=Yd(l,jn());if(null!=c)a=c;else{if(null==n)return[];a=cg(l,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const h=[],p=s.getCompare(),m=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let _=m.getNext();for(;_&&h.length<i;)0!==p(_,r)&&h.push(_),_=m.getNext();return h}}(t.writeTree,t.treePath,e,n,r,i,o)}(this.writes_,i,n,1,r,e);return 0===o.length?null:o[0]}}function N6(t,e,n,r,i,o){const s=e.eventCache;if(null!=GC(r,n))return e;{let a,l;if(In(n))if((0,A.vA)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Qd(e),p=iM(r,c instanceof hn?c:hn.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{const c=zC(r,Qd(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{const c=yn(n);if(".priority"===c){(0,A.vA)(1===pu(n),"Can't have a priority with additional path components");const h=s.getNode();l=e.serverCache.getNode();const p=R6(r,n,h,l);a=null!=p?t.filter.updatePriority(h,p):s.getNode()}else{const h=fr(n);let p;if(s.isCompleteForChild(c)){l=e.serverCache.getNode();const m=R6(r,n,s.getNode(),l);p=null!=m?s.getNode().getImmediateChild(c).updateChild(h,m):s.getNode().getImmediateChild(c)}else p=oM(r,c,e.serverCache);a=null!=p?t.filter.updateChild(s.getNode(),c,p,h,i,o):s.getNode()}}return gy(e,a,s.isFullyInitialized()||In(n),t.filter.filtersNodes())}}function WC(t,e,n,r,i,o,s,a){const l=e.serverCache;let c;const h=s?t.filter:t.filter.getIndexedFilter();if(In(n))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const _=l.getNode().updateChild(n,r);c=h.updateFullNode(l.getNode(),_,null)}else{const _=yn(n);if(!l.isCompleteForPath(n)&&pu(n)>1)return e;const w=fr(n),S=l.getNode().getImmediateChild(_).updateChild(w,r);c=".priority"===_?h.updatePriority(l.getNode(),S):h.updateChild(l.getNode(),_,S,w,M6,null)}const p=C6(e,c,l.isFullyInitialized()||In(n),h.filtersNodes());return N6(t,p,n,i,new sM(i,p,o),a)}function aM(t,e,n,r,i,o,s){const a=e.eventCache;let l,c;const h=new sM(i,e,o);if(In(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,s),l=gy(e,c,!0,t.filter.filtersNodes());else{const p=yn(n);if(".priority"===p)c=t.filter.updatePriority(e.eventCache.getNode(),r),l=gy(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=fr(n),_=a.getNode().getImmediateChild(p);let w;if(In(m))w=r;else{const T=h.getCompleteChild(p);w=null!=T?".priority"===Vx(m)&&T.getChild(c6(m)).isEmpty()?T:T.updateChild(m,r):hn.EMPTY_NODE}l=_.equals(w)?e:gy(e,t.filter.updateChild(a.getNode(),p,w,m,h,s),a.isFullyInitialized(),t.filter.filtersNodes())}}return l}function k6(t,e){return t.eventCache.isCompleteForChild(e)}function O6(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function lM(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=In(n)?r:new wr(null).setTree(n,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((p,m)=>{if(h.hasChild(p)){const w=O6(0,e.serverCache.getNode().getImmediateChild(p),m);l=WC(t,l,new Xn(p),w,i,o,s,a)}}),c.children.inorderTraversal((p,m)=>{const _=!e.serverCache.isCompleteForChild(p)&&null===m.value;if(!h.hasChild(p)&&!_){const T=O6(0,e.serverCache.getNode().getImmediateChild(p),m);l=WC(t,l,new Xn(p),T,i,o,s,a)}}),l}class gme{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Wx(r.getIndex()),o=function Rge(t){return t.loadsAllData()?new Wx(t.getIndex()):t.hasLimit()?new Sge(t):new hy(t)}(r);this.processor_=function ame(t){return{filter:t}}(o);const s=n.serverCache,a=n.eventCache,l=i.updateFullNode(hn.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(hn.EMPTY_NODE,a.getNode(),null),h=new gu(l,s.isFullyInitialized(),i.filtersNodes()),p=new gu(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=UC(p,h),this.eventGenerator_=new $ge(this.query_)}get query(){return this.query_}}function vme(t,e){const n=Qd(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!In(e)&&!n.getImmediateChild(yn(e)).isEmpty())?n.getChild(e):null}function F6(t){return 0===t.eventRegistrations_.length}function L6(t,e,n){const r=[];if(n){(0,A.vA)(null==e,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){const s=t.eventRegistrations_[o];if(s.matches(e)){if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}else i.push(s)}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function V6(t,e,n,r){e.type===ll.MERGE&&null!==e.source.queryId&&((0,A.vA)(Qd(t.viewCache_),"We should always have a full cache before handling merges"),(0,A.vA)(jC(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,o=function cme(t,e,n,r,i){const o=new ome;let s,a;if(n.type===ll.OVERWRITE){const c=n;c.source.fromUser?s=aM(t,e,c.path,c.snap,r,i,o):((0,A.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!In(c.path),s=WC(t,e,c.path,c.snap,r,i,a,o))}else if(n.type===ll.MERGE){const c=n;c.source.fromUser?s=function dme(t,e,n,r,i,o,s){let a=e;return r.foreach((l,c)=>{const h=kr(n,l);k6(e,yn(h))&&(a=aM(t,a,h,c,i,o,s))}),r.foreach((l,c)=>{const h=kr(n,l);k6(e,yn(h))||(a=aM(t,a,h,c,i,o,s))}),a}(t,e,c.path,c.children,r,i,o):((0,A.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),s=lM(t,e,c.path,c.children,r,i,a,o))}else if(n.type===ll.ACK_USER_WRITE){const c=n;s=c.revert?function pme(t,e,n,r,i,o){let s;if(null!=GC(r,n))return e;{const a=new sM(r,e,i),l=e.eventCache.getNode();let c;if(In(n)||".priority"===yn(n)){let h;if(e.serverCache.isFullyInitialized())h=zC(r,Qd(e));else{const p=e.serverCache.getNode();(0,A.vA)(p instanceof hn,"serverChildren would be complete if leaf node"),h=iM(r,p)}c=t.filter.updateFullNode(l,h,o)}else{const h=yn(n);let p=oM(r,h,e.serverCache);null==p&&e.serverCache.isCompleteForChild(h)&&(p=l.getImmediateChild(h)),c=null!=p?t.filter.updateChild(l,h,p,fr(n),a,o):e.eventCache.getNode().hasChild(h)?t.filter.updateChild(l,h,hn.EMPTY_NODE,fr(n),a,o):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=zC(r,Qd(e)),s.isLeafNode()&&(c=t.filter.updateFullNode(c,s,o)))}return s=e.serverCache.isFullyInitialized()||null!=GC(r,jn()),gy(e,c,s,t.filter.filtersNodes())}}(t,e,c.path,r,i,o):function hme(t,e,n,r,i,o,s){if(null!=GC(i,n))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(In(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return WC(t,e,n,l.getNode().getChild(n),i,o,a,s);if(In(n)){let c=new wr(null);return l.getNode().forEachChild(al,(h,p)=>{c=c.set(new Xn(h),p)}),lM(t,e,n,c,i,o,a,s)}return e}{let c=new wr(null);return r.foreach((h,p)=>{const m=kr(n,h);l.isCompleteForPath(m)&&(c=c.set(h,l.getNode().getChild(m)))}),lM(t,e,n,c,i,o,a,s)}}(t,e,c.path,c.affectedTree,r,i,o)}else{if(n.type!==ll.LISTEN_COMPLETE)throw(0,A.Hk)("Unknown operation type: "+n.type);s=function fme(t,e,n,r,i){const o=e.serverCache;return N6(t,C6(e,o.getNode(),o.isFullyInitialized()||In(n),o.isFiltered()),n,r,M6,i)}(t,e,n.path,r,o)}const l=o.getChanges();return function ume(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=jC(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(y6(jC(e)))}}(e,s,l),{viewCache:s,changes:l}}(t.processor_,i,e,n,r);return function lme(t,e){(0,A.vA)(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),(0,A.vA)(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,o.viewCache),(0,A.vA)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,B6(t,o.changes,o.viewCache.eventCache.getNode(),null)}function B6(t,e,n,r){return function Uge(t,e,n,r){const i=[],o=[];return e.forEach(s=>{"child_changed"===s.type&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function Dge(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(s.childName,s.snapshotNode))}),py(t,i,"child_removed",e,r,n),py(t,i,"child_added",e,r,n),py(t,i,"child_moved",o,r,n),py(t,i,"child_changed",e,r,n),py(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}let qC,QC;class $6{constructor(){this.views=new Map}}function cM(t,e,n,r){const i=e.source.queryId;if(null!==i){const o=t.views.get(i);return(0,A.vA)(null!=o,"SyncTree gave us an op for an invalid query."),V6(o,e,n,r)}{let o=[];for(const s of t.views.values())o=o.concat(V6(s,e,n,r));return o}}function U6(t,e,n,r,i){const s=t.views.get(e._queryIdentifier);if(!s){let a=zC(n,i?r:null),l=!1;a?l=!0:r instanceof hn?(a=iM(n,r),l=!1):(a=hn.EMPTY_NODE,l=!1);const c=UC(new gu(a,l,!1),new gu(r,i,!1));return new gme(e,c)}return s}function j6(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function _u(t,e){let n=null;for(const r of t.views.values())n=n||vme(r,e);return n}function H6(t,e){return e._queryParams.loadsAllData()?KC(t):t.views.get(e._queryIdentifier)}function z6(t,e){return null!=H6(t,e)}function vu(t){return null!=KC(t)}function KC(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Sme=1;class G6{constructor(e){this.listenProvider_=e,this.syncPointTree_=new wr(null),this.pendingWriteTree_=function rme(){return{visibleWrites:Da.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function uM(t,e,n,r,i){return function Gge(t,e,n,r,i){(0,A.vA)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=my(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?ug(t,new Kd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function yu(t,e,n=!1){const r=function qge(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function Kge(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);(0,A.vA)(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){const a=t.allWrites[s];a.visible&&(s>=n&&Qge(a,r.path)?i=!1:Ks(r.path,a.path)&&(o=!0)),s--}return!!i&&(o?(function Yge(t){t.visibleWrites=D6(t.allWrites,Xge,jn()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=b6(t.visibleWrites,r.path):Ui(r.children,l=>{t.visibleWrites=b6(t.visibleWrites,kr(r.path,l))}),!0))}(t.pendingWriteTree_,e)){let o=new wr(null);return null!=r.snap?o=o.set(jn(),!0):Ui(r.children,s=>{o=o.set(new Xn(s),!0)}),ug(t,new $C(r.path,o,n))}return[]}function _y(t,e,n){return ug(t,new Kd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function YC(t,e,n,r,i=!1){const o=e._path,s=t.syncPointTree_.get(o);let a=[];if(s&&("default"===e._queryIdentifier||z6(s,e))){const l=function Tme(t,e,n,r){const i=e._queryIdentifier,o=[];let s=[];const a=vu(t);if("default"===i)for(const[l,c]of t.views.entries())s=s.concat(L6(c,n,r)),F6(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const l=t.views.get(i);l&&(s=s.concat(L6(l,n,r)),F6(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!vu(t)&&o.push(new(function wme(){return(0,A.vA)(qC,"Reference.ts has not been loaded"),qC}())(e._repo,e._path)),{removed:o,events:s}}(s,e,n,r);(function Cme(t){return 0===t.views.size})(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!i){const h=-1!==c.findIndex(m=>m._queryParams.loadsAllData()),p=t.syncPointTree_.findOnPath(o,(m,_)=>vu(_));if(h&&!p){const m=t.syncPointTree_.subtree(o);if(!m.isEmpty()){const _=function Ome(t){return t.fold((e,n,r)=>{if(n&&vu(n))return[KC(n)];{let i=[];return n&&(i=j6(n)),Ui(r,(o,s)=>{i=i.concat(s)}),i}})}(m);for(let w=0;w<_.length;++w){const T=_[w],S=T.query,j=Q6(t,T);t.listenProvider_.startListening(yy(S),vy(t,S),j.hashFn,j.onComplete)}}}!p&&c.length>0&&!r&&(h?t.listenProvider_.stopListening(yy(e),null):c.forEach(m=>{const _=t.queryToTagMap.get(ZC(m));t.listenProvider_.stopListening(yy(m),_)}))}!function Fme(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=ZC(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,c)}return a}function W6(t,e,n,r){const i=hM(t,r);if(null!=i){const o=fM(i),s=o.path,a=o.queryId,l=Fo(s,e);return pM(t,s,new Kd(Jx(a),l,n))}return[]}function dM(t,e,n,r=!1){const i=e._path;let o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(m,_)=>{const w=Fo(m,i);o=o||_u(_,w),s=s||vu(_)});let l,a=t.syncPointTree_.get(i);a?(s=s||vu(a),o=o||_u(a,jn())):(a=new $6,t.syncPointTree_=t.syncPointTree_.set(i,a)),null!=o?l=!0:(l=!1,o=hn.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((_,w)=>{const T=_u(w,jn());T&&(o=o.updateImmediateChild(_,T))}));const c=z6(a,e);if(!c&&!e._queryParams.loadsAllData()){const m=ZC(e);(0,A.vA)(!t.queryToTagMap.has(m),"View does not exist, but we have a tag");const _=function Lme(){return Sme++}();t.queryToTagMap.set(m,_),t.tagToQueryMap.set(_,m)}let p=function bme(t,e,n,r,i,o){const s=U6(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function yme(t,e){t.eventRegistrations_.push(e)}(s,n),function Ime(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Er,(o,s)=>{r.push(sg(o,s))}),n.isFullyInitialized()&&r.push(y6(n.getNode())),B6(t,r,n.getNode(),e)}(s,n)}(a,e,n,HC(t.pendingWriteTree_,i),o,l);if(!c&&!s&&!r){const m=H6(a,e);p=p.concat(function Vme(t,e,n){const r=e._path,i=vy(t,e),o=Q6(t,n),s=t.listenProvider_.startListening(yy(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)(0,A.vA)(!vu(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,h,p)=>{if(!In(c)&&h&&vu(h))return[KC(h).query];{let m=[];return h&&(m=m.concat(j6(h).map(_=>_.query))),Ui(p,(_,w)=>{m=m.concat(w)}),m}});for(let c=0;c<l.length;++c){const h=l[c];t.listenProvider_.stopListening(yy(h),vy(t,h))}}return s}(t,e,m))}return p}function XC(t,e,n){const i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{const c=_u(a,Fo(s,e));if(c)return c});return S6(i,e,o,n,!0)}function ug(t,e){return q6(e,t.syncPointTree_,null,HC(t.pendingWriteTree_,jn()))}function q6(t,e,n,r){if(In(t.path))return K6(t,e,n,r);{const i=e.get(jn());null==n&&null!=i&&(n=_u(i,jn()));let o=[];const s=yn(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){const c=n?n.getImmediateChild(s):null,h=P6(r,s);o=o.concat(q6(a,l,c,h))}return i&&(o=o.concat(cM(i,t,r,n))),o}}function K6(t,e,n,r){const i=e.get(jn());null==n&&null!=i&&(n=_u(i,jn()));let o=[];return e.children.inorderTraversal((s,a)=>{const l=n?n.getImmediateChild(s):null,c=P6(r,s),h=t.operationForChild(s);h&&(o=o.concat(K6(h,a,l,c)))}),i&&(o=o.concat(cM(i,t,r,n))),o}function Q6(t,e){const n=e.query,r=vy(t,n);return{hashFn:()=>(function mme(t){return t.viewCache_.serverCache.getNode()}(e)||hn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Mme(t,e,n){const r=hM(t,n);if(r){const i=fM(r),o=i.path,s=i.queryId,a=Fo(o,e);return pM(t,o,new fy(Jx(s),a))}return[]}(t,n._path,r):function xme(t,e){return ug(t,new fy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);{const o=function Ppe(t,e){let n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(i,n);return YC(t,n,null,o)}}}}function vy(t,e){const n=ZC(e);return t.queryToTagMap.get(n)}function ZC(t){return t._path.toString()+"$"+t._queryIdentifier}function hM(t,e){return t.tagToQueryMap.get(e)}function fM(t){const e=t.indexOf("$");return(0,A.vA)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Xn(t.substr(0,e))}}function pM(t,e,n){const r=t.syncPointTree_.get(e);return(0,A.vA)(r,"Missing sync point for query tag that we're tracking"),cM(r,n,HC(t.pendingWriteTree_,e),null)}function yy(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(function Dme(){return(0,A.vA)(QC,"Reference.ts has not been loaded"),QC}())(t._repo,t._path):t}class gM{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new gM(n)}node(){return this.node_}}class mM{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=kr(this.path_,e);return new mM(this.syncTree_,n)}node(){return XC(this.syncTree_,this.path_)}}const Bme=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},Y6=function(t,e,n){return t&&"object"==typeof t?((0,A.vA)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?$me(t[".sv"],e,n):"object"==typeof t[".sv"]?Ume(t[".sv"],e):void(0,A.vA)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},$me=function(t,e,n){if("timestamp"===t)return n.timestamp;(0,A.vA)(!1,"Unexpected server value: "+t)},Ume=function(t,e,n){t.hasOwnProperty("increment")||(0,A.vA)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&(0,A.vA)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,A.vA)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},X6=function(t,e,n,r){return vM(e,new mM(n,t),r)},_M=function(t,e,n){return vM(t,new gM(e),n)};function vM(t,e,n){const r=t.getPriority().val(),i=Y6(r,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const s=t,a=Y6(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new ig(a,Ur(i)):t}{const s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new ig(i))),s.forEachChild(Er,(a,l)=>{const c=vM(l,e.getImmediateChild(a),n);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}class yM{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function JC(t,e){let n=e instanceof Xn?e:new Xn(e),r=t,i=yn(n);for(;null!==i;){const o=(0,A.yw)(r.node.children,i)||{children:{},childCount:0};r=new yM(i,r,o),n=fr(n),i=yn(n)}return r}function Xd(t){return t.node.value}function IM(t,e){t.node.value=e,EM(t)}function Z6(t){return t.node.childCount>0}function eb(t,e){Ui(t.node.children,(n,r)=>{e(new yM(n,t,r))})}function J6(t,e,n,r){n&&!r&&e(t),eb(t,i=>{J6(i,e,!0,r)}),n&&r&&e(t)}function Iy(t){return new Xn(null===t.parent?t.name:Iy(t.parent)+"/"+t.name)}function EM(t){null!==t.parent&&function zme(t,e,n){const r=function jme(t){return void 0===Xd(t)&&!Z6(t)}(n),i=(0,A.gR)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,EM(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,EM(t))}(t.parent,t.name,t)}const Gme=/[\[\].#$\/\u0000-\u001F\u007F]/,Wme=/[\[\].#$\u0000-\u001F\u007F]/,wM=10485760,tb=function(t){return"string"==typeof t&&0!==t.length&&!Gme.test(t)},eG=function(t){return"string"==typeof t&&0!==t.length&&!Wme.test(t)},Ey=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!SC(t)||t&&"object"==typeof t&&(0,A.gR)(t,".sv")},cl=function(t,e,n,r){r&&void 0===e||wy((0,A.dI)(t,"value"),e,n)},wy=function(t,e,n){const r=n instanceof Xn?new cge(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Wd(r));if("function"==typeof e)throw new Error(t+"contains a function "+Wd(r)+" with contents = "+e.toString());if(SC(e))throw new Error(t+"contains "+e.toString()+" "+Wd(r));if("string"==typeof e&&e.length>wM/3&&(0,A.OE)(e)>wM)throw new Error(t+"contains a string greater than "+wM+" utf8 bytes "+Wd(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(Ui(e,(s,a)=>{if(".value"===s)i=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!tb(s)))throw new Error(t+" contains an invalid key ("+s+") "+Wd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function uge(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,A.OE)(e),u6(t)})(r,s),wy(t,a,r),function dge(t){const e=t.parts_.pop();t.byteLength_-=(0,A.OE)(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&o)throw new Error(t+' contains ".value" child '+Wd(r)+" in addition to actual children.")}},tG=function(t,e,n,r){if(r&&void 0===e)return;const i=(0,A.dI)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];Ui(e,(s,a)=>{const l=new Xn(s);if(wy(i,a,kr(n,l)),".priority"===Vx(l)&&!Ey(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(l)}),function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const o=sy(r);for(let s=0;s<o.length;s++)if((".priority"!==o[s]||s!==o.length-1)&&!tb(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(lge);let i=null;for(n=0;n<e.length;n++){if(r=e[n],null!==i&&Ks(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},CM=function(t,e,n){if(!n||void 0!==e){if(SC(e))throw new Error((0,A.dI)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ey(e))throw new Error((0,A.dI)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Cy=function(t,e,n,r){if(!(r&&void 0===n||tb(n)))throw new Error((0,A.dI)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},by=function(t,e,n,r){if(!(r&&void 0===n||eG(n)))throw new Error((0,A.dI)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Qme=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),by(t,e,n,r)},Qs=function(t,e){if(".info"===yn(e))throw new Error(t+" failed = Can't modify data under /.info/")},nG=function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!tb(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),eG(t)}(n))throw new Error((0,A.dI)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Yme{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function nb(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==n&&!Bx(o,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function rG(t,e,n){nb(t,n),iG(t,r=>Bx(r,e))}function Es(t,e,n){nb(t,n),iG(t,r=>Ks(r,e)||Ks(e,r))}function iG(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(Xme(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Xme(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();zd&&$i("event: "+n.toString()),ng(r)}}}const oG="repo_interrupt",Zme=25;class Jme{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Yme,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=BC(),this.transactionQueueTree_=new yM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function sG(t){const n=t.infoData_.getNode(new Xn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function Ty(t){return Bme({timestamp:sG(t)})}function aG(t,e,n,r,i){t.dataUpdateCount++;const o=new Xn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){const l=(0,A.kH)(n,c=>Ur(c));s=function Nme(t,e,n,r){const i=hM(t,r);if(i){const o=fM(i),s=o.path,a=o.queryId,l=Fo(s,e),c=wr.fromObject(n);return pM(t,s,new lg(Jx(a),l,c))}return[]}(t.serverSyncTree_,o,l,i)}else{const l=Ur(n);s=W6(t.serverSyncTree_,o,l,i)}else if(r){const l=(0,A.kH)(n,c=>Ur(c));s=function Pme(t,e,n){const r=wr.fromObject(n);return ug(t,new lg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,o,l)}else{const l=Ur(n);s=_y(t.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=hg(t,o)),Es(t.eventQueue_,a,s)}function lG(t,e){bM(t,"connected",e),!1===e&&function i_e(t){dg(t,"onDisconnectEvents");const e=Ty(t),n=BC();Yx(t.onDisconnect_,jn(),(i,o)=>{const s=X6(i,o,t.serverSyncTree_,e);ag(n,i,s)});let r=[];Yx(n,jn(),(i,o)=>{r=r.concat(_y(t.serverSyncTree_,i,o));const s=SM(t,i);hg(t,s)}),t.onDisconnect_=BC(),Es(t.eventQueue_,jn(),r)}(t)}function bM(t,e,n){const r=new Xn("/.info/"+e),i=Ur(n);t.infoData_.updateSnapshot(r,i);const o=_y(t.infoSyncTree_,r,i);Es(t.eventQueue_,r,o)}function rb(t){return t.nextWriteId_++}function TM(t,e,n,r,i){dg(t,"set",{path:e.toString(),value:n,priority:r});const o=Ty(t),s=Ur(n,r),a=XC(t.serverSyncTree_,e),l=_M(s,a,o),c=rb(t),h=uM(t.serverSyncTree_,e,l,c,!0);nb(t.eventQueue_,h),t.server_.put(e.toString(),s.val(!0),(m,_)=>{const w="ok"===m;w||mo("set at "+e+" failed: "+m);const T=yu(t.serverSyncTree_,c,!w);Es(t.eventQueue_,e,T),Iu(0,i,m,_)});const p=SM(t,e);hg(t,p),Es(t.eventQueue_,p,[])}function o_e(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Qx(t.onDisconnect_,e),Iu(0,n,r,i)})}function cG(t,e,n,r){const i=Ur(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(o,s)=>{"ok"===o&&ag(t.onDisconnect_,e,i),Iu(0,r,o,s)})}function AM(t,e,n){let r;r=".info"===yn(e._path)?YC(t.infoSyncTree_,e,n):YC(t.serverSyncTree_,e,n),rG(t.eventQueue_,e._path,r)}function uG(t){t.persistentConnection_&&t.persistentConnection_.interrupt(oG)}function dg(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),$i(n,...e)}function Iu(t,e,n,r){e&&ng(()=>{if("ok"===n)e(null);else{const i=(n||"error").toUpperCase();let o=i;r&&(o+=": "+r);const s=new Error(o);s.code=i,e(s)}})}function DM(t,e,n){return XC(t.serverSyncTree_,e,n)||hn.EMPTY_NODE}function ib(t,e=t.transactionQueueTree_){if(e||ob(t,e),Xd(e)){const n=hG(t,e);(0,A.vA)(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function d_e(t,e,n){const r=n.map(c=>c.currentWriteId),i=DM(t,e,r);let o=i;const s=i.hash();for(let c=0;c<n.length;c++){const h=n[c];(0,A.vA)(0===h.status,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const p=Fo(e,h.path);o=o.updateChild(p,h.currentOutputSnapshotRaw)}const a=o.val(!0),l=e;t.server_.put(l.toString(),a,c=>{dg(t,"transaction put response",{path:l.toString(),status:c});let h=[];if("ok"===c){const p=[];for(let m=0;m<n.length;m++)n[m].status=2,h=h.concat(yu(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&p.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();ob(t,JC(t.transactionQueueTree_,e)),ib(t,t.transactionQueueTree_),Es(t.eventQueue_,e,h);for(let m=0;m<p.length;m++)ng(p[m])}else{if("datastale"===c)for(let p=0;p<n.length;p++)n[p].status=3===n[p].status?4:0;else{mo("transaction at "+l.toString()+" failed: "+c);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=c}hg(t,e)}},s)}(t,Iy(e),n)}else Z6(e)&&eb(e,n=>{ib(t,n)})}function hg(t,e){const n=dG(t,e),r=Iy(n);return function h_e(t,e,n){if(0===e.length)return;const r=[];let i=[];const s=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Fo(n,l.path);let p,h=!1;if((0,A.vA)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,p=l.abortReason,i=i.concat(yu(t.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=Zme)h=!0,p="maxretry",i=i.concat(yu(t.serverSyncTree_,l.currentWriteId,!0));else{const m=DM(t,l.path,s);l.currentInputSnapshot=m;const _=e[a].update(m.val());if(void 0!==_){wy("transaction failed: Data returned ",_,l.path);let w=Ur(_);"object"==typeof _&&null!=_&&(0,A.gR)(_,".priority")||(w=w.updatePriority(m.getPriority()));const S=l.currentWriteId,j=Ty(t),H=_M(w,m,j);l.currentOutputSnapshotRaw=w,l.currentOutputSnapshotResolved=H,l.currentWriteId=rb(t),s.splice(s.indexOf(S),1),i=i.concat(uM(t.serverSyncTree_,l.path,H,l.currentWriteId,l.applyLocally)),i=i.concat(yu(t.serverSyncTree_,S,!0))}else h=!0,p="nodata",i=i.concat(yu(t.serverSyncTree_,l.currentWriteId,!0))}Es(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===p?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(p),!1,null)))}ob(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ng(r[a]);ib(t,t.transactionQueueTree_)}(t,hG(t,n),r),r}function dG(t,e){let n,r=t.transactionQueueTree_;for(n=yn(e);null!==n&&void 0===Xd(r);)r=JC(r,n),n=yn(e=fr(e));return r}function hG(t,e){const n=[];return fG(t,e,n),n.sort((r,i)=>r.order-i.order),n}function fG(t,e,n){const r=Xd(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);eb(e,i=>{fG(t,i,n)})}function ob(t,e){const n=Xd(e);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,IM(e,n.length>0?n:void 0)}eb(e,r=>{ob(t,r)})}function SM(t,e){const n=Iy(dG(t,e)),r=JC(t.transactionQueueTree_,e);return function Hme(t,e,n){let r=n?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{RM(t,i)}),RM(t,r),J6(r,i=>{RM(t,i)}),n}function RM(t,e){const n=Xd(e);if(n){const r=[];let i=[],o=-1;for(let s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?((0,A.vA)(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):((0,A.vA)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(yu(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?IM(e,void 0):n.length=o+1,Es(t.eventQueue_,Iy(e),i);for(let s=0;s<r.length;s++)ng(r[s])}}const PM=function(t,e){const n=g_e(t),r=n.namespace;return"firebase.com"===n.domain&&sl(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&sl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&mo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Mx(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,e,"",r!==n.subdomain),path:new Xn(n.pathString)}},g_e=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",l=443;if("string"==typeof t){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");-1===h&&(h=t.length);let p=t.indexOf("?");-1===p&&(p=t.length),e=t.substring(0,Math.min(h,p)),h<p&&(i=function f_e(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(t.substring(h,p)));const m=function p_e(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):mo(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,p)));c=e.indexOf(":"),c>=0?(s="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const _=e.slice(0,c);if("localhost"===_.toLowerCase())n="localhost";else if(_.split(".").length<=2)n=_;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),o=r}"ns"in m&&(o=m.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},pG="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",m_e=function(){let t=0;const e=[];return function(n){const r=n===t;let i;t=n;const o=new Array(8);for(i=7;i>=0;i--)o[i]=pG.charAt(n%64),n=Math.floor(n/64);(0,A.vA)(0===n,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)s+=pG.charAt(e[i]);return(0,A.vA)(20===s.length,"nextPushId: Length should be 20."),s}}();class gG{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,A.As)(this.snapshot.exportVal())}}class mG{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class xM{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return(0,A.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class _G{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new A.cY;return o_e(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Qs("OnDisconnect.remove",this._path);const e=new A.cY;return cG(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Qs("OnDisconnect.set",this._path),cl("OnDisconnect.set",e,this._path,!1);const n=new A.cY;return cG(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Qs("OnDisconnect.setWithPriority",this._path),cl("OnDisconnect.setWithPriority",e,this._path,!1),CM("OnDisconnect.setWithPriority",n,!1);const r=new A.cY;return function s_e(t,e,n,r,i){const o=Ur(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(s,a)=>{"ok"===s&&ag(t.onDisconnect_,e,o),Iu(0,i,s,a)})}(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Qs("OnDisconnect.update",this._path),tG("OnDisconnect.update",e,this._path,!1);const n=new A.cY;return function a_e(t,e,n,r){if((0,A.Im)(n))return $i("onDisconnect().update() called with empty data.  Don't do anything."),void Iu(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(i,o)=>{"ok"===i&&Ui(n,(s,a)=>{const l=Ur(a);ag(t.onDisconnect_,kr(e,s),l)}),Iu(0,r,i,o)})}(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}class ts{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return In(this._path)?null:Vx(this._path)}get ref(){return new Ys(this._repo,this._path)}get _queryIdentifier(){const e=E6(this._queryParams),n=Px(e);return"{}"===n?"default":n}get _queryObject(){return E6(this._queryParams)}isEqual(e){if(!((e=(0,A.Ku)(e))instanceof ts))return!1;const n=this._repo===e._repo,r=Bx(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function age(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}function sb(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Eu(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===al){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==hu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Yl)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Er){if(null!=e&&!Ey(e)||null!=n&&!Ey(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,A.vA)(t.getIndex()instanceof zx||t.getIndex()===Gx,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ab(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ys extends ts{constructor(e,n){super(e,n,new FC,!1)}get parent(){const e=c6(this._path);return null===e?null:new Ys(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Zd{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Xn(e),r=Jd(this.ref,e);return new Zd(this._node.getChild(n),r,Er)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Zd(i,Jd(this.ref,r),Er)))}hasChild(e){const n=new Xn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function vG(t,e){return(t=(0,A.Ku)(t))._checkNotDeleted("ref"),void 0!==e?Jd(t._root,e):t._root}function yG(t,e){(t=(0,A.Ku)(t))._checkNotDeleted("refFromURL");const n=PM(e,t._repo.repoInfo_.nodeAdmin);nG("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&sl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),vG(t,n.path.toString())}function Jd(t,e){return null===yn((t=(0,A.Ku)(t))._path)?Qme("child","path",e,!1):by("child","path",e,!1),new Ys(t._repo,kr(t._path,e))}function MM(t,e){t=(0,A.Ku)(t),Qs("set",t._path),cl("set",e,t._path,!1);const n=new A.cY;return TM(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function E_e(t,e){tG("update",e,t._path,!1);const n=new A.cY;return function r_e(t,e,n,r){dg(t,"update",{path:e.toString(),value:n});let i=!0;const o=Ty(t),s={};if(Ui(n,(a,l)=>{i=!1,s[a]=X6(kr(e,a),Ur(l),t.serverSyncTree_,o)}),i)$i("update() called with empty data.  Don't do anything."),Iu(0,r,"ok",void 0);else{const a=rb(t),l=function Rme(t,e,n,r){!function Wge(t,e,n,r){(0,A.vA)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=tM(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);const i=wr.fromObject(n);return ug(t,new lg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,s,a);nb(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,h)=>{const p="ok"===c;p||mo("update at "+e+" failed: "+c);const m=yu(t.serverSyncTree_,a,!p),_=m.length>0?hg(t,e):e;Es(t.eventQueue_,_,m),Iu(0,r,c,h)}),Ui(n,c=>{const h=SM(t,kr(e,c));hg(t,h)}),Es(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function w_e(t){t=(0,A.Ku)(t);const e=new xM(()=>{}),n=new Ay(e);return function n_e(t,e,n){const r=function kme(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,h)=>{const p=Fo(c,n);r=r||_u(h,p)});let i=t.syncPointTree_.get(n);i?r=r||_u(i,jn()):(i=new $6,t.syncPointTree_=t.syncPointTree_.set(n,i));const o=null!=r,s=o?new gu(r,!0,!1):null;return function _me(t){return jC(t.viewCache_)}(U6(i,e,HC(t.pendingWriteTree_,e._path),o?s.getNode():hn.EMPTY_NODE,o))}(t.serverSyncTree_,e);return null!=r?Promise.resolve(r):t.server_.get(e).then(i=>{const o=Ur(i).withIndex(e._queryParams.getIndex());let s;if(dM(t.serverSyncTree_,e,n,!0),e._queryParams.loadsAllData())s=_y(t.serverSyncTree_,e._path,o);else{const a=vy(t.serverSyncTree_,e);s=W6(t.serverSyncTree_,e._path,o,a)}return Es(t.eventQueue_,e._path,s),YC(t.serverSyncTree_,e,n,null,!0),o},i=>(dg(t,"get for query "+(0,A.As)(e)+" failed: "+i),Promise.reject(new Error(i))))}(t._repo,t,n).then(r=>new Zd(r,new Ys(t._repo,t._path),t._queryParams.getIndex()))}class Ay{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,n){const r=n._queryParams.getIndex();return new gG("value",this,new Zd(e.snapshotNode,new Ys(n._repo,n._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new mG(this,e,n):null}matches(e){return e instanceof Ay&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class lb{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n="children_added"===e?"child_added":e;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new mG(this,e,n):null}createEvent(e,n){(0,A.vA)(null!=e.childName,"Child events should have a childName.");const r=Jd(new Ys(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new gG(e.type,this,new Zd(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof lb&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Dy(t,e,n,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const l=n,c=(h,p)=>{AM(t._repo,t,a),l(h,p)};c.userCallback=n.userCallback,c.context=n.context,n=c}const s=new xM(n,o||void 0),a="value"===e?new Ay(s):new lb(e,s);return function l_e(t,e,n){let r;r=".info"===yn(e._path)?dM(t.infoSyncTree_,e,n):dM(t.serverSyncTree_,e,n),rG(t.eventQueue_,e._path,r)}(t._repo,t,a),()=>AM(t._repo,t,a)}function NM(t,e,n,r){return Dy(t,"value",e,n,r)}function IG(t,e,n,r){return Dy(t,"child_added",e,n,r)}function EG(t,e,n,r){return Dy(t,"child_changed",e,n,r)}function wG(t,e,n,r){return Dy(t,"child_moved",e,n,r)}function CG(t,e,n,r){return Dy(t,"child_removed",e,n,r)}function bG(t,e,n){let r=null;const i=n?new xM(n):null;"value"===e?r=new Ay(i):e&&(r=new lb(e,i)),AM(t._repo,t,r)}class Sa{}class TG extends Sa{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){cl("endAt",this._value,e._path,!0);const n=Kx(e._queryParams,this._value,this._key);if(ab(n),Eu(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ts(e._repo,e._path,n,e._orderByCalled)}}class b_e extends Sa{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){cl("endBefore",this._value,e._path,!1);const n=function Nge(t,e,n){let r;return r=Kx(t,e,t.index_===al||n?n:hu),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(ab(n),Eu(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ts(e._repo,e._path,n,e._orderByCalled)}}class AG extends Sa{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){cl("startAt",this._value,e._path,!0);const n=qx(e._queryParams,this._value,this._key);if(ab(n),Eu(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ts(e._repo,e._path,n,e._orderByCalled)}}class D_e extends Sa{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){cl("startAfter",this._value,e._path,!1);const n=function Mge(t,e,n){let r;return r=qx(t,e,t.index_===al||n?n:Yl),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(ab(n),Eu(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ts(e._repo,e._path,n,e._orderByCalled)}}class R_e extends Sa{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ts(e._repo,e._path,function Pge(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class x_e extends Sa{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ts(e._repo,e._path,function xge(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class N_e extends Sa{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){sb(e,"orderByChild");const n=new Xn(this._path);if(In(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new zx(n),i=LC(e._queryParams,r);return Eu(i),new ts(e._repo,e._path,i,!0)}}class O_e extends Sa{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){sb(e,"orderByKey");const n=LC(e._queryParams,al);return Eu(n),new ts(e._repo,e._path,n,!0)}}class L_e extends Sa{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){sb(e,"orderByPriority");const n=LC(e._queryParams,Er);return Eu(n),new ts(e._repo,e._path,n,!0)}}class B_e extends Sa{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){sb(e,"orderByValue");const n=LC(e._queryParams,Gx);return Eu(n),new ts(e._repo,e._path,n,!0)}}class U_e extends Sa{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(cl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new TG(this._value,this._key)._apply(new AG(this._value,this._key)._apply(e))}}function Ra(t,...e){let n=(0,A.Ku)(t);for(const r of e)n=r._apply(n);return n}(function Eme(t){(0,A.vA)(!qC,"__referenceConstructor has already been defined"),qC=t})(Ys),function Ame(t){(0,A.vA)(!QC,"__referenceConstructor has already been defined"),QC=t}(Ys);const kM={};function OM(t,e,n,r,i){let o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||sl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$i("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l,c,s=PM(o,i),a=s.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=PM(o,i),a=s.repoInfo):l=!s.repoInfo.secure;const h=i&&l?new oy(oy.OWNER):new Fpe(t.name,t.options,e);nG("Invalid Firebase Database URL",s),In(s.path)||sl("Database URL must point to the root of a Firebase Database (not including a child path).");const p=function W_e(t,e,n,r){let i=kM[e.name];i||(i={},kM[e.name]=i);let o=i[t.toURLString()];return o&&sl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Jme(t,false,n,r),i[t.toURLString()]=o,o}(a,t,h,new Ope(t.name,n));return new K_e(p,t)}class K_e{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function e_e(t,e,n){if(t.stats_=Ox(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new VC(t.repoInfo_,(r,i,o,s)=>{aG(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>lG(t,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,A.As)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new qd(t.repoInfo_,e,(r,i,o,s)=>{aG(t,r,i,o,s)},r=>{lG(t,r)},r=>{!function t_e(t,e){Ui(e,(n,r)=>{bM(t,n,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function Bpe(t,e){const n=t.toString();return kx[n]||(kx[n]=e()),kx[n]}(t.repoInfo_,()=>new Bge(t.stats_,t.server_)),t.infoData_=new kge,t.infoSyncTree_=new G6({startListening:(r,i,o,s)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=_y(t.infoSyncTree_,r._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),bM(t,"connected",!1),t.serverSyncTree_=new G6({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,l)=>{const c=s(a,l);Es(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ys(this._repo,jn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function G_e(t,e){const n=kM[e];(!n||n[t.key]!==t)&&sl(`Database ${e}(${t.repoInfo_}) has already been deleted.`),uG(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&sl("Cannot call "+e+" on a deleted database.")}}function SG(){Xz.IS_TRANSPORT_INITIALIZED&&mo("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Q_e(){SG(),fu.forceDisallow()}function Y_e(){SG(),rg.forceDisallow(),fu.forceAllow()}function J_e(t,e){xz(t,e)}const tve={".sv":"timestamp"};class ive{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}qd.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},qd.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function eve(t){Dx(Yo.SDK_VERSION),(0,Yo._registerComponent)(new Ca.uA("database",(e,{instanceIdentifier:n})=>OM(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),(0,Yo.registerVersion)(Tz,"1.0.3",t),(0,Yo.registerVersion)(Tz,"1.0.3","esm2017")}();const lve=new _s.Vy("@firebase/database-compat"),PG=function(t){lve.warn("FIREBASE WARNING: "+t)};class dve{constructor(e){this._delegate=e}cancel(e){(0,A.od)("OnDisconnect.cancel",0,1,arguments.length),(0,A.oD)("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){(0,A.od)("OnDisconnect.remove",0,1,arguments.length),(0,A.oD)("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){(0,A.od)("OnDisconnect.set",1,2,arguments.length),(0,A.oD)("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){(0,A.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,A.oD)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,n){if((0,A.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,PG("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,A.oD)("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}}class hve{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return(0,A.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class wu{constructor(e,n){this._database=e,this._delegate=n}val(){return(0,A.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,A.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,A.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,A.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,A.od)("DataSnapshot.child",0,1,arguments.length),e=String(e),by("DataSnapshot.child","path",e,!1),new wu(this._database,this._delegate.child(e))}hasChild(e){return(0,A.od)("DataSnapshot.hasChild",1,1,arguments.length),by("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,A.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,A.od)("DataSnapshot.forEach",1,1,arguments.length),(0,A.oD)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new wu(this._database,n)))}hasChildren(){return(0,A.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,A.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,A.od)("DataSnapshot.ref",0,0,arguments.length),new ws(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class to{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var o;(0,A.od)("Query.on",2,4,arguments.length),(0,A.oD)("Query.on","callback",n,!1);const s=to.getCancelAndContextArgs_("Query.on",r,i),a=(c,h)=>{n.call(s.context,new wu(this.database,c),h)};a.userCallback=n,a.context=s.context;const l=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(e){case"value":return NM(this._delegate,a,l),n;case"child_added":return IG(this._delegate,a,l),n;case"child_removed":return CG(this._delegate,a,l),n;case"child_changed":return EG(this._delegate,a,l),n;case"child_moved":return wG(this._delegate,a,l),n;default:throw new Error((0,A.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if((0,A.od)("Query.off",0,3,arguments.length),function(t,e,n){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,A.dI)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,A.oD)("Query.off","callback",n,!0),(0,A.HN)("Query.off","context",r,!0),n){const i=()=>{};i.userCallback=n,i.context=r,bG(this._delegate,e,i)}else bG(this._delegate,e)}get(){return w_e(this._delegate).then(e=>new wu(this.database,e))}once(e,n,r,i){(0,A.od)("Query.once",1,4,arguments.length),(0,A.oD)("Query.once","callback",n,!0);const o=to.getCancelAndContextArgs_("Query.once",r,i),s=new A.cY,a=(c,h)=>{const p=new wu(this.database,c);n&&n.call(o.context,p,h),s.resolve(p)};a.userCallback=n,a.context=o.context;const l=c=>{o.cancel&&o.cancel.call(o.context,c),s.reject(c)};switch(e){case"value":NM(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":IG(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":CG(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":EG(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":wG(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,A.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return(0,A.od)("Query.limitToFirst",1,1,arguments.length),new to(this.database,Ra(this._delegate,function P_e(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new R_e(t)}(e)))}limitToLast(e){return(0,A.od)("Query.limitToLast",1,1,arguments.length),new to(this.database,Ra(this._delegate,function M_e(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new x_e(t)}(e)))}orderByChild(e){return(0,A.od)("Query.orderByChild",1,1,arguments.length),new to(this.database,Ra(this._delegate,function k_e(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return by("orderByChild","path",t,!1),new N_e(t)}(e)))}orderByKey(){return(0,A.od)("Query.orderByKey",0,0,arguments.length),new to(this.database,Ra(this._delegate,function F_e(){return new O_e}()))}orderByPriority(){return(0,A.od)("Query.orderByPriority",0,0,arguments.length),new to(this.database,Ra(this._delegate,function V_e(){return new L_e}()))}orderByValue(){return(0,A.od)("Query.orderByValue",0,0,arguments.length),new to(this.database,Ra(this._delegate,function $_e(){return new B_e}()))}startAt(e=null,n){return(0,A.od)("Query.startAt",0,2,arguments.length),new to(this.database,Ra(this._delegate,function A_e(t=null,e){return Cy("startAt","key",e,!0),new AG(t,e)}(e,n)))}startAfter(e=null,n){return(0,A.od)("Query.startAfter",0,2,arguments.length),new to(this.database,Ra(this._delegate,function S_e(t,e){return Cy("startAfter","key",e,!0),new D_e(t,e)}(e,n)))}endAt(e=null,n){return(0,A.od)("Query.endAt",0,2,arguments.length),new to(this.database,Ra(this._delegate,function C_e(t,e){return Cy("endAt","key",e,!0),new TG(t,e)}(e,n)))}endBefore(e=null,n){return(0,A.od)("Query.endBefore",0,2,arguments.length),new to(this.database,Ra(this._delegate,function T_e(t,e){return Cy("endBefore","key",e,!0),new b_e(t,e)}(e,n)))}equalTo(e,n){return(0,A.od)("Query.equalTo",1,2,arguments.length),new to(this.database,Ra(this._delegate,function j_e(t,e){return Cy("equalTo","key",e,!0),new U_e(t,e)}(e,n)))}toString(){return(0,A.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,A.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,A.od)("Query.isEqual",1,1,arguments.length),!(e instanceof to))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,(0,A.oD)(e,"cancel",i.cancel,!0),i.context=r,(0,A.HN)(e,"context",i.context,!0);else if(n)if("object"==typeof n&&null!==n)i.context=n;else{if("function"!=typeof n)throw new Error((0,A.dI)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=n}return i}get ref(){return new ws(this.database,new Ys(this._delegate._repo,this._delegate._path))}}class ws extends to{constructor(e,n){super(e,new ts(n._repo,n._path,new FC,!1)),this.database=e,this._delegate=n}getKey(){return(0,A.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,A.od)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ws(this.database,Jd(this._delegate,e))}getParent(){(0,A.od)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ws(this.database,e):null}getRoot(){return(0,A.od)("Reference.root",0,0,arguments.length),new ws(this.database,this._delegate.root)}set(e,n){(0,A.od)("Reference.set",1,2,arguments.length),(0,A.oD)("Reference.set","onComplete",n,!0);const r=MM(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if((0,A.od)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,PG("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Qs("Reference.update",this._delegate._path),(0,A.oD)("Reference.update","onComplete",n,!0);const r=E_e(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){(0,A.od)("Reference.setWithPriority",2,3,arguments.length),(0,A.oD)("Reference.setWithPriority","onComplete",r,!0);const i=function I_e(t,e,n){if(Qs("setWithPriority",t._path),cl("setWithPriority",e,t._path,!1),CM("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new A.cY;return TM(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,n);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,A.od)("Reference.remove",0,1,arguments.length),(0,A.oD)("Reference.remove","onComplete",e,!0);const n=function v_e(t){return Qs("remove",t._path),MM(t,null)}(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){(0,A.od)("Reference.transaction",1,3,arguments.length),(0,A.oD)("Reference.transaction","transactionUpdate",e,!1),(0,A.oD)("Reference.transaction","onComplete",n,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error((0,A.dI)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function ove(t,e,n){var r;if(t=(0,A.Ku)(t),Qs("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new A.cY,a=NM(t,()=>{});return function u_e(t,e,n,r,i,o){dg(t,"transaction on "+e);const s={path:e,update:n,onComplete:r,status:null,order:Sz(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=DM(t,e,void 0);s.currentInputSnapshot=a;const l=s.update(a.val());if(void 0===l)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{wy("transaction failed: Data returned ",l,s.path),s.status=0;const c=JC(t.transactionQueueTree_,e),h=Xd(c)||[];let p;h.push(s),IM(c,h),"object"==typeof l&&null!==l&&(0,A.gR)(l,".priority")?(p=(0,A.yw)(l,".priority"),(0,A.vA)(Ey(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(XC(t.serverSyncTree_,e)||hn.EMPTY_NODE).getPriority().val();const m=Ty(t),_=Ur(l,p),w=_M(_,a,m);s.currentOutputSnapshotRaw=_,s.currentOutputSnapshotResolved=w,s.currentWriteId=rb(t);const T=uM(t.serverSyncTree_,e,w,s.currentWriteId,s.applyLocally);Es(t.eventQueue_,e,T),ib(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(l,c,h)=>{let p=null;l?o.reject(l):(p=new Zd(h,new Ys(t._repo,t._path),Er),o.resolve(new ive(c,p)))},a,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new hve(o.committed,new wu(this.database,o.snapshot)));return n&&i.then(o=>n(null,o.committed,o.snapshot),o=>n(o,!1,null)),i}setPriority(e,n){(0,A.od)("Reference.setPriority",1,2,arguments.length),(0,A.oD)("Reference.setPriority","onComplete",n,!0);const r=function y_e(t,e){t=(0,A.Ku)(t),Qs("setPriority",t._path),CM("setPriority",e,!1);const n=new A.cY;return TM(t._repo,kr(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){(0,A.od)("Reference.push",0,2,arguments.length),(0,A.oD)("Reference.push","onComplete",n,!0);const r=function __e(t,e){t=(0,A.Ku)(t),Qs("push",t._path),cl("push",e,t._path,!0);const n=sG(t._repo),r=m_e(n),i=Jd(t,r),o=Jd(t,r);let s;return s=null!=e?MM(o,e).then(()=>o):Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}(this._delegate,e),i=r.then(s=>new ws(this.database,s));n&&i.then(()=>n(null),s=>n(s));const o=new ws(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return Qs("Reference.onDisconnect",this._delegate._path),new dve(new _G(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Sy{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Q_e,forceLongPolling:Y_e}}useEmulator(e,n,r={}){!function RG(t,e,n,r={}){(t=(0,A.Ku)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&sl("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&sl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new oy(oy.OWNER);else if(r.mockUserToken){const s="string"==typeof r.mockUserToken?r.mockUserToken:(0,A.Fy)(r.mockUserToken,t.app.options.projectId);o=new oy(s)}!function z_e(t,e,n,r){t.repoInfo_=new Mx(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}(i,e,n,o)}(this._delegate,e,n,r)}ref(e){if((0,A.od)("database.ref",0,1,arguments.length),e instanceof ws){const n=yG(this._delegate,e.toString());return new ws(this,n)}{const n=vG(this._delegate,e);return new ws(this,n)}}refFromURL(e){(0,A.od)("database.refFromURL",1,1,arguments.length);const r=yG(this._delegate,e);return new ws(this,r)}goOffline(){return(0,A.od)("database.goOffline",0,0,arguments.length),function X_e(t){(t=(0,A.Ku)(t))._checkNotDeleted("goOffline"),uG(t._repo)}(this._delegate)}goOnline(){return(0,A.od)("database.goOnline",0,0,arguments.length),function Z_e(t){(t=(0,A.Ku)(t))._checkNotDeleted("goOnline"),function c_e(t){t.persistentConnection_&&t.persistentConnection_.resume(oG)}(t._repo)}(this._delegate)}}Sy.ServerValue={TIMESTAMP:function nve(){return tve}(),increment:t=>function rve(t){return{".sv":{increment:t}}}(t)};var pve=Object.freeze({__proto__:null,initStandalone:function fve({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:o,nodeAdmin:s=!1}){Dx(n);const a=new Ca.h1("database-standalone"),l=new Ca.Kq("auth-internal",a);let c;return l.setComponent(new Ca.uA("auth-internal",()=>r,"PRIVATE")),i&&(c=new Ca.Kq("app-check-internal",a),c.setComponent(new Ca.uA("app-check-internal",()=>i,"PRIVATE"))),{instance:new Sy(OM(t,l,c,e,s),t),namespace:o}}});const gve=Sy.ServerValue;!function mve(t){t.INTERNAL.registerComponent(new Ca.uA("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Sy(i,r)},"PUBLIC").setServiceProps({Reference:ws,Query:to,Database:Sy,DataSnapshot:wu,enableLogging:J_e,INTERNAL:pve,ServerValue:gve}).setMultipleInstances(!0)),t.registerVersion("@firebase/database-compat","1.0.3")}(Qi.A);const xG="firebasestorage.googleapis.com",MG="storageBucket";class jr extends A.g{constructor(e,n,r=0){super(FM(e),`Firebase Storage: ${n} (${FM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return FM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Or=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Or||{});function FM(t){return"storage/"+t}function LM(){return new jr(Or.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function NG(){return new jr(Or.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kG(){return new jr(Or.CANCELED,"User canceled the upload/download.")}function OG(){return new jr(Or.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fg(t){return new jr(Or.INVALID_ARGUMENT,t)}function FG(){return new jr(Or.APP_DELETED,"The Firebase app was deleted.")}function LG(t){return new jr(Or.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ry(t,e){return new jr(Or.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Py(t){throw new jr(Or.INTERNAL_ERROR,"Internal error: "+t)}class _o{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=_o.makeFromUrl(e,n)}catch{return new _o(e,"")}if(""===r.path)return r;throw function Ave(t){return new jr(Or.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function c(ve){ve.path_=decodeURIComponent(ve.path)}const p=n.replace(/[.]/g,"\\."),ge=[{regex:a,indices:{bucket:1,path:3},postModify:function o(ve){"/"===ve.path.charAt(ve.path.length-1)&&(ve.path_=ve.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${p}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${n===xG?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let ve=0;ve<ge.length;ve++){const Xe=ge[ve],At=Xe.regex.exec(e);if(At){let Hn=At[Xe.indices.path];Hn||(Hn=""),r=new _o(At[Xe.indices.bucket],Hn),Xe.postModify(r);break}}if(null==r)throw function Tve(t){return new jr(Or.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return r}}class xve{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function cb(t){return"string"==typeof t||t instanceof String}function VG(t){return VM()&&t instanceof Blob}function VM(){return typeof Blob<"u"}function BM(t,e,n,r){if(r<e)throw fg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw fg(`Invalid value for '${t}'. Expected ${n} or less.`)}function Zl(t,e,n){let r=e;return null==n&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function BG(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}var pg=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(pg||{});function $G(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),o=-1!==e.indexOf(t);return n||i||o}class Lve{constructor(e,n,r,i,o,s,a,l,c,h,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,w)=>{this.resolve_=_,this.reject_=w,this.start_()})}start_(){const n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function kve(t){return void 0!==t}(l)?o():o(l)}catch(l){s(l)}else if(null!==a){const l=LM();l.serverResponse=a.getErrorText(),s(this.errorCallback_?this.errorCallback_(a,l):l)}else s(i.canceled?this.appDelete_?FG():kG():NG())};this.canceled_?n(0,new ub(!1,null,!0)):this.backoffId_=function Mve(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function h(...S){c||(c=!0,e.apply(null,S))}function p(S){i=setTimeout(()=>{i=null,t(_,l())},S)}function m(){o&&clearTimeout(o)}function _(S,...j){if(c)return void m();if(S)return m(),void h.call(null,S,...j);if(l()||s)return m(),void h.call(null,S,...j);let ge;r<64&&(r*=2),1===a?(a=2,ge=0):ge=1e3*(r+Math.random()),p(ge)}let w=!1;function T(S){w||(w=!0,m(),!c&&(null!==i?(S||(a=2),clearTimeout(i),p(0)):S||(a=1)))}return p(0),o=setTimeout(()=>{s=!0,T(!0)},n),T}((r,i)=>{if(i)return void r(!1,new ub(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===pg.NO_ERROR,l=o.getStatus();if(!a||$G(l,this.additionalRetryCodes_)&&this.retry){const h=o.getErrorCode()===pg.ABORT;return void r(!1,new ub(!1,null,h))}const c=-1!==this.successCodes_.indexOf(l);r(!0,new ub(c,o))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Nve(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ub{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function zve(...t){const e=function Hve(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}if(VM())return new Blob(t);throw new jr(Or.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Cs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $M{constructor(e,n){this.data=e,this.contentType=n||null}}function UM(t,e){switch(t){case Cs.RAW:return new $M(UG(e));case Cs.BASE64:case Cs.BASE64URL:return new $M(jG(t,e));case Cs.DATA_URL:return new $M(function Kve(t){const e=new HG(t);return e.base64?jG(Cs.BASE64,e.rest):function qve(t){let e;try{e=decodeURIComponent(t)}catch{throw Ry(Cs.DATA_URL,"Malformed data URL.")}return UG(e)}(e.rest)}(e),function Qve(t){return new HG(t).contentType}(e))}throw LM()}function UG(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function jG(t,e){switch(t){case Cs.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw Ry(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Cs.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Ry(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function Wve(t){if(typeof atob>"u")throw function Pve(t){return new jr(Or.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(t)}(e)}catch(i){throw i.message.includes("polyfill")?i:Ry(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class HG{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw Ry(Cs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;null!=r&&(this.base64=function Yve(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ul{constructor(e,n){let r=0,i="";VG(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(VG(this.data_)){const i=function Gve(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===i?null:new ul(i)}{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ul(r,!0)}}static getBlob(...e){if(VM()){const n=e.map(r=>r instanceof ul?r.data_:r);return new ul(zve.apply(null,n))}{const n=e.map(s=>cb(s)?UM(Cs.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new ul(i,!0)}}uploadData(){return this.data_}}function jM(t){let e;try{e=JSON.parse(t)}catch{return null}return function Fve(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function zG(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Jve(t,e){return e}class Lo{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Jve}}let db=null;function xy(){if(db)return db;const t=[];t.push(new Lo("bucket")),t.push(new Lo("generation")),t.push(new Lo("metageneration")),t.push(new Lo("name","fullPath",!0));const n=new Lo("name");n.xform=function e(o,s){return function eye(t){return!cb(t)||t.length<2?t:zG(t)}(s)},t.push(n);const i=new Lo("size");return i.xform=function r(o,s){return void 0!==s?Number(s):s},t.push(i),t.push(new Lo("timeCreated")),t.push(new Lo("updated")),t.push(new Lo("md5Hash",null,!0)),t.push(new Lo("cacheControl",null,!0)),t.push(new Lo("contentDisposition",null,!0)),t.push(new Lo("contentEncoding",null,!0)),t.push(new Lo("contentLanguage",null,!0)),t.push(new Lo("contentType",null,!0)),t.push(new Lo("metadata","customMetadata",!0)),db=t,db}function GG(t,e,n){const r=jM(e);return null===r?null:function nye(t,e,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return function tye(t,e){Object.defineProperty(t,"ref",{get:function n(){const o=new _o(t.bucket,t.fullPath);return e._makeStorageReference(o)}})}(r,t),r}(t,r,n)}function HM(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}const WG="prefixes",qG="items";class dl{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function hl(t){if(!t)throw LM()}function hb(t,e){return function n(r,i){const o=GG(t,i,e);return hl(null!==o),o}}function gg(t){return function e(n,r){let i;return i=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function Cve(){return new jr(Or.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function wve(){return new jr(Or.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function Eve(t){return new jr(Or.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===n.getStatus()?function bve(t){return new jr(Or.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}(t.path):r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}}function My(t){const e=gg(t);return function n(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function Ive(t){return new jr(Or.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}(t.path)),o.serverResponse=i.serverResponse,o}}function KG(t,e,n){const i=Zl(e.fullServerUrl(),t.host,t._protocol),s=t.maxOperationRetryTime,a=new dl(i,"GET",hb(t,n),s);return a.errorHandler=My(e),a}function lye(t,e,n,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const a=Zl(e.bucketOnlyServerUrl(),t.host,t._protocol),c=t.maxOperationRetryTime,h=new dl(a,"GET",function sye(t,e){return function n(r,i){const o=function oye(t,e,n){const r=jM(n);return null===r?null:function iye(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[WG])for(const i of n[WG]){const o=i.replace(/\/$/,""),s=t._makeStorageReference(new _o(e,o));r.prefixes.push(s)}if(n[qG])for(const i of n[qG]){const o=t._makeStorageReference(new _o(e,i.name));r.items.push(o)}return r}(t,e,r)}(t,e,i);return hl(null!==o),o}}(t,e.bucket),c);return h.urlParams=o,h.errorHandler=gg(e),h}function YG(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function hye(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class fb{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function zM(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{hl(!1)}return hl(!!n&&-1!==(e||["active"]).indexOf(n)),n}const mye={STATE_CHANGED:"state_changed"},Vo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function GM(t){switch(t){case"running":case"pausing":case"canceling":return Vo.RUNNING;case"paused":return Vo.PAUSED;case"success":return Vo.SUCCESS;case"canceled":return Vo.CANCELED;default:return Vo.ERROR}}class _ye{constructor(e,n,r){if(function Ove(t){return"function"==typeof t}(e)||null!=n||null!=r)this.next=e,this.error=null!=n?n:void 0,this.complete=null!=r?r:void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function mg(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}let JG=null;class vye{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pg.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pg.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pg.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Py("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Py("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Py("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Py("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Py("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class yye extends vye{initXhr(){this.xhr_.responseType="text"}}function Pa(){return JG?JG():new yye}class eW{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=xy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Or.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if($G(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=NG()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Or.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,n)=>{const r=function fye(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s=YG(e,r,i),a={name:s.fullPath},l=Zl(o,t.host,t._protocol),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},p=HM(s,n),w=new dl(l,"POST",function _(T){let S;zM(T);try{S=T.getResponseHeader("X-Goog-Upload-URL")}catch{hl(!1)}return hl(cb(S)),S},t.maxUploadRetryTime);return w.urlParams=a,w.headers=h,w.body=p,w.errorHandler=gg(e),w}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pa,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=function pye(t,e,n,r){const l=new dl(n,"POST",function o(c){const h=zM(c,["active","final"]);let p=null;try{p=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{hl(!1)}p||hl(!1);const m=Number(p);return hl(!isNaN(m)),new fb(m,r.size(),"final"===h)},t.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=gg(e),l}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Pa,n,r);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,n=new fb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=function gye(t,e,n,r,i,o,s,a){const l=new fb(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw function Sve(){return new jr(Or.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const c=l.total-l.current;let h=c;i>0&&(h=Math.min(h,i));const p=l.current;let _="";_=0===h?"finalize":c===h?"upload, finalize":"upload";const w={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${l.current}`},T=r.slice(p,p+h);if(null===T)throw OG();const ge=new dl(n,"POST",function S(ve,Xe){const At=zM(ve,["active","final"]),En=l.current+h,Hn=r.size();let bs;return bs="final"===At?hb(e,o)(ve,Xe):null,new fb(En,Hn,"final"===At,bs)},e.maxUploadRetryTime);return ge.headers=w,ge.body=T.uploadData(),ge.progressCallback=a||null,ge.errorHandler=gg(t),ge}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(s,Pa,i,o,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=KG(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Pa,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=function XG(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let ge="";for(let ve=0;ve<2;ve++)ge+=Math.random().toString().slice(2);return ge}();s["Content-Type"]="multipart/related; boundary="+l;const c=YG(e,r,i),h=HM(c,n),_=ul.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+h+"\r\n--"+l+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",r,"\r\n--"+l+"--");if(null===_)throw OG();const w={name:c.fullPath},T=Zl(o,t.host,t._protocol),j=t.maxUploadRetryTime,H=new dl(T,"POST",hb(t,n),j);return H.urlParams=w,H.headers=s,H.body=_.uploadData(),H.errorHandler=gg(e),H}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pa,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n="paused"===this._state;this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=kG(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=GM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const o=new _ye(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);-1!==n&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(GM(this._state)){case Vo.SUCCESS:mg(this._resolve.bind(null,this.snapshot))();break;case Vo.CANCELED:case Vo.ERROR:mg(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(GM(this._state)){case Vo.RUNNING:case Vo.PAUSED:e.next&&mg(e.next.bind(e,this.snapshot))();break;case Vo.SUCCESS:e.complete&&mg(e.complete.bind(e))();break;default:e.error&&mg(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class eh{constructor(e,n){this._service=e,this._location=n instanceof _o?n:_o.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new eh(e,n)}get root(){const e=new _o(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zG(this._location.path)}get storage(){return this._service}get parent(){const e=function Xve(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;const n=new _o(this._location.bucket,e);return new eh(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw LG(e)}}function nW(t,e,n){return WM.apply(this,arguments)}function WM(){return WM=(0,y.A)(function*(t,e,n){const i=yield rW(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield nW(t,e,i.nextPageToken))}),WM.apply(this,arguments)}function rW(t,e){null!=e&&"number"==typeof e.maxResults&&BM("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=lye(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Pa)}function xye(t){t._throwIfRoot("getDownloadURL");const e=function cye(t,e,n){const i=Zl(e.fullServerUrl(),t.host,t._protocol),s=t.maxOperationRetryTime,a=new dl(i,"GET",function aye(t,e){return function n(r,i){const o=GG(t,i,e);return hl(null!==o),function rye(t,e,n,r){const i=jM(e);if(null===i||!cb(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const p=t.fullPath;return Zl("/b/"+s(t.bucket)+"/o/"+s(p),n,r)+BG({alt:"media",token:c})})[0]}(o,i,t.host,t._protocol)}}(t,n),s);return a.errorHandler=My(e),a}(t.storage,t._location,xy());return t.storage.makeRequestWithTokens(e,Pa).then(n=>{if(null===n)throw function Rve(){return new jr(Or.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return n})}function iW(t,e){const n=function Zve(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new _o(t._location.bucket,n);return new eh(t.storage,r)}function oW(t,e){if(t instanceof qM){const n=t;if(null==n._bucket)throw function Dve(){return new jr(Or.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+MG+"' property when initializing the app?")}();const r=new eh(n,n._bucket);return null!=e?oW(r,e):r}return void 0!==e?iW(t,e):t}function Oye(t,e){if(e&&function Nye(t){return/^[A-Za-z]+:\/\//.test(t)}(e)){if(t instanceof qM)return function kye(t,e){return new eh(t,e)}(t,e);throw fg("To use ref(service, url), the first argument must be a Storage instance.")}return oW(t,e)}function sW(t,e){const n=null==e?void 0:e[MG];return null==n?null:_o.makeFromBucketSpec(n,t)}class qM{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=xG,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?_o.makeFromBucketSpec(i,this._host):sW(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?_o.makeFromBucketSpec(this._url,e):sW(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,y.A)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const r=yield n.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,y.A)(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new eh(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new xve(FG());{const s=function jve(t,e,n,r,i,o,s=!0){const a=BG(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return function $ve(t,e){e&&(t["X-Firebase-GMPID"]=e)}(c,e),function Vve(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(c,n),function Bve(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(c,o),function Uve(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(c,r),new Lve(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){var r=this;return(0,y.A)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,n,i,o).getPromise()})()}}const aW="@firebase/storage";function uW(t,e){return Oye(t=(0,A.Ku)(t),e)}function Gye(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new qM(n,r,i,e,Yo.SDK_VERSION)}!function Wye(){(0,Yo._registerComponent)(new Ca.uA("storage",Gye,"PUBLIC").setMultipleInstances(!0)),(0,Yo.registerVersion)(aW,"0.12.2",""),(0,Yo.registerVersion)(aW,"0.12.2","esm2017")}();class pb{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class hW{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new pb(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new pb(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(o="function"==typeof n?s=>n(new pb(s,this,this._ref)):{next:n.next?s=>n.next(new pb(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class fW{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Jl(e,this._service))}get items(){return this._delegate.items.map(e=>new Jl(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Jl{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=function zye(t,e){return iW(t,e)}(this._delegate,e);return new Jl(n,this.storage)}get root(){return new Jl(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Jl(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new hW(function Lye(t,e,n){return function Aye(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new eW(t,new ul(e),n)}(t=(0,A.Ku)(t),e,n)}(this._delegate,e,n),this)}putString(e,n=Cs.RAW,r){this._throwIfRoot("putString");const i=UM(n,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new hW(new eW(this._delegate,new ul(i.data,!0),o),this)}listAll(){return function Uye(t){return function Sye(t){const e={prefixes:[],items:[]};return nW(t,e).then(()=>e)}(t=(0,A.Ku)(t))}(this._delegate).then(e=>new fW(e,this.storage))}list(e){return function $ye(t,e){return rW(t=(0,A.Ku)(t),e)}(this._delegate,e||void 0).then(n=>new fW(n,this.storage))}getMetadata(){return function Vye(t){return function Rye(t){t._throwIfRoot("getMetadata");const e=KG(t.storage,t._location,xy());return t.storage.makeRequestWithTokens(e,Pa)}(t=(0,A.Ku)(t))}(this._delegate)}updateMetadata(e){return function Bye(t,e){return function Pye(t,e){t._throwIfRoot("updateMetadata");const n=function uye(t,e,n,r){const o=Zl(e.fullServerUrl(),t.host,t._protocol),a=HM(n,r),c=t.maxOperationRetryTime,h=new dl(o,"PATCH",hb(t,r),c);return h.headers={"Content-Type":"application/json; charset=utf-8"},h.body=a,h.errorHandler=My(e),h}(t.storage,t._location,e,xy());return t.storage.makeRequestWithTokens(n,Pa)}(t=(0,A.Ku)(t),e)}(this._delegate,e)}getDownloadURL(){return function jye(t){return xye(t=(0,A.Ku)(t))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Hye(t){return function Mye(t){t._throwIfRoot("deleteObject");const e=function dye(t,e){const r=Zl(e.fullServerUrl(),t.host,t._protocol),a=new dl(r,"DELETE",function s(l,c){},t.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=My(e),a}(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Pa)}(t=(0,A.Ku)(t))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw LG(e)}}class pW{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(gW(e))throw fg("ref() expected a child path but got a URL, use refFromURL instead.");return new Jl(uW(this._delegate,e),this)}refFromURL(e){if(!gW(e))throw fg("refFromURL() expected a full URL but got a child path, use ref() instead.");try{_o.makeFromUrl(e,this._delegate.host)}catch{throw fg("refFromUrl() expected a valid full URL but got an invalid one.")}return new Jl(uW(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){!function dW(t,e,n,r={}){!function Fye(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken="string"==typeof i?i:(0,A.Fy)(i,t.app.options.projectId))}(t,e,n,r)}(this._delegate,e,n,r)}}function gW(t){return/^[A-Za-z]+:\/\//.test(t)}function Yye(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new pW(n,r)}!function Xye(t){const e={TaskState:Vo,TaskEvent:mye,StringFormat:Cs,Storage:pW,Reference:Jl};t.INTERNAL.registerComponent(new Ca.uA("storage-compat",Yye,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage-compat","0.3.5")}(Qi.A);let th=(()=>{var t;class e{constructor(r,i,o){this.firestore=r,this.afAuth=i,this.router=o}initialize(){this.afAuth.authState.subscribe(r=>{r?this.firestore.collection("users_data",i=>i.where("uid","==",r.uid)).get().subscribe(i=>{if(i.empty)this.router.navigate(["/splash"]);else{const o=i.docs[0].data();this.user_data=o,this.canGoOn="true"}}):this.router.navigate(["/log"])})}confirmPartecipation(r,i,o){"yes"==o&&this.firestore.collection("events").doc(r).set({people_coming:Qi.A.firestore.FieldValue.increment(1)},{merge:!0})}addLikeToSpot(r){this.firestore.collection("spots").doc(r).set({likes:Qi.A.firestore.FieldValue.increment(1)},{merge:!0})}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(du),Be(wa),Be(hr))},t.\u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Cu=(()=>{var t;class e{constructor(){}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Ke({type:t,selectors:[["app-footer"]],decls:6,vars:0,consts:[["id","under_bar"],["routerLink","/spot","name","people",2,"font-size","1.8rem"],["routerLink","/home","name","albums",2,"font-size","1.8rem"],["routerLink","/add","name","add-circle",2,"font-size","1.8rem"],["routerLink","/car-pooling","name","car",2,"font-size","1.8rem"],["routerLink","/account","name","person-circle",2,"font-size","1.8rem"]],template:function(r,i){1&r&&(M(0,"div",0),Ne(1,"ion-icon",1)(2,"ion-icon",2)(3,"ion-icon",3)(4,"ion-icon",4)(5,"ion-icon",5),B())},dependencies:[Bl,rw,Bc]}),e})();function Zye(t,e){if(1&t&&(M(0,"div",8)(1,"p"),ye(2),B()()),2&t){const n=e.$implicit;un(2),Pl(n.text)}}let Jye=(()=>{var t;class e{constructor(){this.comments=[],this.newComment=""}ngOnInit(){}loadComments(){Qi.A.database().ref("comments").once("value").then(i=>{i.forEach(o=>{const s=o.val();this.comments.push(s)})})}addComment(){Qi.A.database().ref("comments").push({text:this.newComment,timestamp:(new Date).getTime()}),this.comments.push({text:this.newComment}),this.newComment=""}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Ke({type:t,selectors:[["app-comment-section"]],decls:12,vars:2,consts:[[2,"width","100%","min-height","25rem","border-start-end-radius","1.5rem","border-start-start-radius","1.5rem","background","black","display","flex","flex-direction","column","align-items","center","border-top","1px solid rgba(255, 255, 255, 0.084)"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","1rem","padding-bottom","0rem","padding-left","1rem"],["onclick","document.getElementById('comments').style.display = 'none';","name","close-outline",2,"font-size","2rem"],[2,"padding-left","1rem","padding-right","1rem"],["style","width: 100%; border-bottom: 1px solid rgba(255, 255, 255, 0.226); padding-left: 1rem;",4,"ngFor","ngForOf"],[1,"input1",2,"margin-top","1rem","width","95%","padding-left","0.5rem","padding-right","0.5rem","margin-bottom","0.5rem"],["type","text","id","comment-input","placeholder","Cosa ne pensi?",1,"field1",2,"border-radius","2rem","height","4rem",3,"ngModelChange","ngModel"],[1,"material-symbols-outlined","notranslate",3,"click"],[2,"width","100%","border-bottom","1px solid rgba(255, 255, 255, 0.226)","padding-left","1rem"]],template:function(r,i){1&r&&(M(0,"div",0)(1,"div",1)(2,"h3"),ye(3,"Commenti"),B(),Ne(4,"ion-icon",2),B(),M(5,"p",3),ye(6,"Ricorda di mantenere un tono educato quando pubblichi un commento"),B(),ei(7,Zye,3,1,"div",4),M(8,"div",5)(9,"input",6),JA("ngModelChange",function(s){return function ZL(t,e){const n=MO(t);return n&&t.set(e),n}(i.newComment,s)||(i.newComment=s),s}),B(),M(10,"span",7),Ft("click",function(){return i.addComment()}),ye(11,"send"),B()()()),2&r&&(un(7),ur("ngForOf",i.comments),un(2),ZA("ngModel",i.newComment))},dependencies:[cd,Bl,HE,gU,XS]}),e})();function eIe(t,e){if(1&t){const n=H0();M(0,"div",41)(1,"div",42)(2,"ion-icon",43),Ft("click",function(){const i=la(n).$implicit;return ca(qi().goToPostAccount(i))}),B(),Ne(3,"ion-icon",44),B(),M(4,"img",45),Ft("click",function(){const i=la(n).$implicit;return ca(qi().showDetails(i))}),B(),M(5,"div",46)(6,"div",47)(7,"ion-icon",48),Ft("click",function(){return la(n),ca(qi().showComments())}),B(),Ne(8,"div",6),M(9,"p",49),ye(10,"Parteciperai?"),B(),M(11,"span",50),Ft("click",function(){const i=la(n).$implicit;return ca(qi().confirmPartecipation(i.id,i,"yes"))}),ye(12,"done"),B(),M(13,"ion-icon",51),Ft("click",function(){const i=la(n).$implicit;return ca(qi().confirmPartecipation(i.id,i,"no"))}),B()(),M(14,"h5",52),ye(15),B(),M(16,"p",53),ye(17),B()()()}if(2&t){const n=e.$implicit;un(4),i_("src",n.imageUrl,Dl),un(11),Pl(n.title),un(2),Pl(n.description)}}let tIe=(()=>{var t;class e{constructor(r,i,o){this.firestore=r,this.firebaseService=i,this.router=o}ngOnInit(){this.documents=this.firestore.collection("events").valueChanges({idField:"id"}).pipe(Et(r=>r.map(i=>({id:i.id,...i}))))}showComments(){document.getElementById("comments").style.display="flex"}goToPostAccount(r){this.router.navigate(["/seeprofile",r.creator_id])}showDetails(r){document.getElementById("post-details").style.display="flex",document.getElementById("post-img-details").src=r.imageUrl,document.getElementById("post-title-details").innerHTML=r.title,document.getElementById("post-description-details").innerHTML=r.description}getPrivateEvents(){this.documents=this.firestore.collection("events",r=>r.where("type","==","private")).valueChanges({idField:"id"}).pipe(Et(r=>r.map(i=>({id:i.id,...i}))))}getPublicEvents(){this.documents=this.firestore.collection("events",r=>r.where("type","==","public")).valueChanges({idField:"id"}).pipe(Et(r=>r.map(i=>({id:i.id,...i}))))}confirmPartecipation(r,i,o){this.firebaseService.confirmPartecipation(r,i,o)}}return(t=e).\u0275fac=function(r){return new(r||t)(E(du),E(th),E(hr))},t.\u0275cmp=Ke({type:t,selectors:[["app-home"]],decls:74,vars:3,consts:[[1,"body1"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","padding-bottom","3.5rem","overflow-y","auto"],[1,"up_bar",2,"width","100%","min-height","6.5rem","display","flex","flex-direction","column","align-items","center","overflow","hidden"],[2,"width","100%","padding-left","0.5rem","margin-top","0.5rem","margin-bottom","0rem","display","flex","flex-direction","row","align-items","center"],["src","assets\\img\\icon-logo.jpg","alt","",2,"width","2.5rem","height","2.5rem","object-fit","contain"],[2,"font-size","1.6rem","padding-top","0.4rem","padding-left","0.2rem"],[2,"flex","1"],["routerLink","/search","name","search",2,"font-size","1.8rem"],["routerLink","/notifications","name","notifications",2,"font-size","1.8rem","padding-right","0.5rem","padding-left","0.5rem"],[2,"width","100%","height","3rem","display","flex","flex-direction","row","align-items","center","justify-content","space-evenly"],[3,"click"],[2,"background","rgba(255, 255, 255, 0.082)","width","1px","height","70%"],["style","width: 100%; border-bottom: 1px solid rgba(255, 255, 255, 0.068);",4,"ngFor","ngForOf"],[1,"overflow1"],["id","spacer"],["id","weekly-questions",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column-reverse","overflow-y","auto","overflow-x","hidden","background","rgba(0, 0, 0, 0.498)"],[2,"width","100%","min-height","25rem","border-start-end-radius","1.5rem","border-start-start-radius","1.5rem","background","black","display","flex","flex-direction","column","align-items","center","border-top","1px solid rgba(255, 255, 255, 0.084)"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","1rem","padding-bottom","0rem","padding-left","1rem"],["onclick","document.getElementById('weekly-questions').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],[2,"padding-left","1rem","padding-right","1rem"],[1,"input1",2,"margin-top","1rem","width","95%","padding-left","0.5rem"],[1,"material-symbols-outlined","notranslate"],["type","text","id","login-password","placeholder","Tipologia di evento?",1,"field1",2,"border-radius","2rem","height","4rem"],["type","text","id","login-password","placeholder","Tipologia di musica?",1,"field1",2,"border-radius","2rem","height","4rem"],["type","text","id","login-password","placeholder","Dove?",1,"field1",2,"border-radius","2rem","height","4rem"],["type","text","id","login-password","placeholder","Con quale artista/celebrit\xe0?",1,"field1",2,"border-radius","2rem","height","4rem"],[2,"width","100%","display","flex","flex-direction","column","align-items","center","margin-bottom","1rem","margin-top","1rem"],["onclick","document.getElementById('reserve-details').style.display = 'flex'; ",1,"button2",2,"width","95%","height","2.5rem"],["id","comments",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column-reverse","overflow-y","auto","overflow-x","hidden","background","rgba(0, 0, 0, 0.498)"],["id","post-details",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["id","post-title-details"],["onclick","document.getElementById('post-details').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],[2,"width","100%","display","flex","align-items","center","justify-content","center","padding-left","1rem","padding-right","1rem"],["id","post-img-details",2,"width","100%"],[2,"width","100%","display","flex","padding-left","1rem"],["id","post-description-details"],[2,"width","100%","display","flex","flex-direction","column","align-items","center","margin-bottom","2rem"],["id","reserve-details",2,"position","absolute","z-index","1000","height","100%","width","100%","display","none","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black"],["onclick","document.getElementById('reserve-details').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],[1,"button2",2,"width","95%","height","2.5rem"],[2,"width","100%","border-bottom","1px solid rgba(255, 255, 255, 0.068)"],[2,"width","100%","height","2.8rem","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["name","person-circle-outline",2,"font-size","1.8rem","padding-left","0.5rem",3,"click"],["name","ellipsis-vertical",2,"font-size","1.8rem","padding-right","0.5rem"],[2,"width","100%","object-fit","cover",3,"click","src"],[2,"padding-left","0.5rem","padding-top","0.5rem"],[2,"width","100%","height","2rem","display","flex","flex-direction","row","gap","0.8rem","margin-bottom","0.5rem","align-items","center"],["name","chatbubble-outline",2,"font-size","1.8rem",3,"click"],[2,"margin-top","0rem","margin-bottom","0rem"],[1,"material-symbols-outlined","notranslate",2,"font-size","1.8rem",3,"click"],["name","close-outline",2,"font-size","1.8rem","padding-right","1rem",3,"click"],[2,"margin-bottom","0.5rem","margin-top","0rem"],[2,"margin-top","0rem","font-weight","200","max-height","5rem","overflow","hidden"]],template:function(r,i){1&r&&(M(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3),Ne(4,"img",4),M(5,"strong",5),ye(6,"Eventi"),B(),Ne(7,"div",6)(8,"ion-icon",7)(9,"ion-icon",8),B(),M(10,"div",9)(11,"strong",10),Ft("click",function(){return i.getPublicEvents()}),ye(12,"Pubblici"),B(),Ne(13,"div",11),M(14,"strong",10),Ft("click",function(){return i.getPrivateEvents()}),ye(15,"Privati"),B()()(),ei(16,eIe,18,3,"div",12),Mf(17,"async"),B(),M(18,"div",13),Ne(19,"div",14)(20,"app-footer"),B(),M(21,"div",15)(22,"div",16)(23,"div",17)(24,"h3"),ye(25,"Sondaggio"),B(),Ne(26,"ion-icon",18),B(),M(27,"p",19),ye(28,"In questo sondaggio ti viene richiesto di rispondere a queste domande per migliorare la qualit\xe0 e la quantit\xe0 degli eventi proposti e offerti da ClubO e dai suoi utenti"),B(),M(29,"div",20)(30,"span",21),ye(31,"celebration"),B(),Ne(32,"input",22),B(),M(33,"div",20)(34,"span",21),ye(35,"play_circle"),B(),Ne(36,"input",23),B(),M(37,"div",20)(38,"span",21),ye(39,"location_on"),B(),Ne(40,"input",24),B(),M(41,"div",20)(42,"span",21),ye(43,"artist"),B(),Ne(44,"input",25),B(),Ne(45,"div",6),M(46,"div",26)(47,"button",27),ye(48,"Invia"),B()()()(),M(49,"div",28),Ne(50,"app-comment-section"),B(),M(51,"div",29)(52,"div",30),Ne(53,"h3",31)(54,"ion-icon",32),B(),M(55,"div",33),Ne(56,"img",34),B(),M(57,"div",35),Ne(58,"p",36),B(),M(59,"div",37)(60,"button",27),ye(61,"Prenota"),B()()(),M(62,"div",38)(63,"div",30)(64,"h3"),ye(65,"Prenota l'evento"),B(),Ne(66,"ion-icon",39),B(),M(67,"div",33),Ne(68,"img",34),B(),M(69,"div",35),Ne(70,"p",36),B(),M(71,"div",37)(72,"button",40),ye(73,"Conferma"),B()()()()),2&r&&(un(16),ur("ngForOf",Nf(17,1,i.documents)))},dependencies:[cd,Bl,rw,Bc,Cu,Jye,Uf]}),e})(),nIe=(()=>{var t;class e{constructor(r,i,o){this.afAuth=r,this.router=i,this.firebaseService=o,this.afAuth.authState.subscribe(s=>{this.router.navigate(s?["/home"]:["/log"])})}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)(E(wa),E(hr),E(th))},t.\u0275cmp=Ke({type:t,selectors:[["app-splash"]],decls:3,vars:0,consts:[[2,"height","100%","width","100%","display","flex","flex-direction","column","align-items","center","justify-content","center"],["src","assets\\img\\trasparent_logo.png"]],template:function(r,i){1&r&&(M(0,"body")(1,"div",0),Ne(2,"img",1),B()())}}),e})(),rIe=(()=>{var t;class e{constructor(r){this.router=r}ngOnInit(){}toLogin(){this.router.navigate(["/login"])}toRegister(){this.router.navigate(["/register"])}}return(t=e).\u0275fac=function(r){return new(r||t)(E(hr))},t.\u0275cmp=Ke({type:t,selectors:[["app-log"]],decls:18,vars:0,consts:[["src","assets/img/extended_logo.jpg",2,"width","90%","height","20rem","object-fit","contain"],[1,"card1",2,"width","90%"],[1,"button1",2,"width","90%","margin-top","1rem",3,"click"],[1,"div1"],["src","assets/img/Vector.png"],[1,"general_paragraph1",2,"margin-left","0.5rem"],[1,"button1",2,"width","90%","margin-top","1rem","margin-bottom","1rem","background","white",3,"click"],["src","assets/img/Vector (1).png"],[1,"general_paragraph1",2,"margin-left","0.5rem","color","black"]],template:function(r,i){1&r&&(M(0,"body"),Ne(1,"img",0),M(2,"div",1)(3,"button",2),Ft("click",function(){return i.toLogin()}),M(4,"div",3),Ne(5,"img",4),M(6,"p",5),ye(7,"Accedi al tuo account"),B()()(),M(8,"button",2),Ft("click",function(){return i.toRegister()}),M(9,"div",3),Ne(10,"img",4),M(11,"p",5),ye(12,"Iscriviti come utente"),B()()(),M(13,"button",6),Ft("click",function(){return i.toRegister()}),M(14,"div",3),Ne(15,"img",7),M(16,"p",8),ye(17,"Iscriviti come organizzatore"),B()()()()())},styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:start;font-family:Public Sans;background:#000;overflow-x:hidden;overflow-y:auto}.button1[_ngcontent-%COMP%]{font-family:Public Sans;background:#000;padding:.5rem;border-radius:.5rem;display:flex;flex-direction:row;align-items:center;justify-content:start}.div1[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-items:start;margin-left:2rem;height:100%}.card1[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background:#474747;border-radius:1rem}"]}),e})();function mW(t){const e=function oIe(t){return new $n(e=>{const n=s=>e.next(s);n(t.snapshot);const o=t.on("state_changed",n);return t.then(s=>{n(s),e.complete()},s=>{n(t.snapshot),(s=>{e.error(s)})(s)}),function(){o()}}).pipe(function iIe(t,e=xS){return bt((n,r)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=o;o=null,r.next(c)}};function l(){const c=s+t,h=e.now();if(h<c)return i=this.schedule(void 0,c-h),void r.add(i);a()}n.subscribe(kt(r,c=>{o=c,s=e.now(),i||(i=e.schedule(l,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Et(n=>n.bytesTransferred/n.totalBytes*100))}}function gb(t){return{getDownloadURL:()=>Gt(void 0).pipe(x$,$r(()=>t.getDownloadURL()),Ro),getMetadata:()=>Gt(void 0).pipe(x$,$r(()=>t.getMetadata()),Ro),delete:()=>er(t.delete()),child:e=>gb(t.child(e)),updateMetadata:e=>er(t.updateMetadata(e)),put:(e,n)=>mW(t.put(e,n)),putString:(e,n,r)=>mW(t.putString(e,n,r)),list:e=>er(t.list(e)),listAll:()=>er(t.listAll())}}const sIe=new lt("angularfire2.storageBucket"),aIe=new lt("angularfire2.storage.maxUploadRetryTime"),lIe=new lt("angularfire2.storage.maxOperationRetryTime"),cIe=new lt("angularfire2.storage.use-emulator");let KM=(()=>{var t;class e{constructor(r,i,o,s,a,l,c,h,p,m){An(this,"storage",void 0);const _=jE(r,a,i);this.storage=OS(`${_.name}.storage.${o}`,"AngularFireStorage",_.name,()=>{const w=a.runOutsideAngular(()=>_.storage(o||void 0)),T=p;return T&&w.useEmulator(...T),c&&w.setMaxUploadRetryTime(c),h&&w.setMaxOperationRetryTime(h),w},[c,h])}ref(r){return gb(this.storage.ref(r))}refFromURL(r){return gb(this.storage.refFromURL(r))}upload(r,i,o){return gb(this.storage.ref(r)).put(i,o)}}return t=e,An(e,"\u0275fac",function(r){return new(r||t)(Be(F_),Be(L_,8),Be(sIe,8),Be(fa),Be(xe),Be(kS),Be(aIe,8),Be(lIe,8),Be(cIe,8),Be(NS,8))}),An(e,"\u0275prov",je({token:t,factory:t.\u0275fac,providedIn:"any"})),e})();function uIe(t,e){1&t&&Ne(0,"img",35),2&t&&ur("src",qi().imageSrc,Dl)}function dIe(t,e){if(1&t&&(M(0,"div",36),Ne(1,"progress",37),M(2,"span"),ye(3),B()()),2&t){const n=qi();un(),ur("value",n.uploadProgress),un(2),Ao("",n.uploadProgress,"%")}}function hIe(t,e){if(1&t&&(M(0,"div",36),Ne(1,"progress",37),M(2,"span"),ye(3),B()()),2&t){const n=qi();un(),ur("value",n.uploadProgress),un(2),Ao("",n.uploadProgress,"%")}}function fIe(t,e){if(1&t&&(M(0,"div",36),Ne(1,"progress",37),M(2,"span"),ye(3),B()()),2&t){const n=qi();un(),ur("value",n.uploadProgress),un(2),Ao("",n.uploadProgress,"%")}}function pIe(t,e){1&t&&Ne(0,"img",35),2&t&&ur("src",qi().imageSrc,Dl)}function gIe(t,e){if(1&t&&(M(0,"div",36),Ne(1,"progress",37),M(2,"span"),ye(3),B()()),2&t){const n=qi();un(),ur("value",n.uploadProgress),un(2),Ao("",n.uploadProgress,"%")}}let mIe=(()=>{var t;class e{constructor(r,i,o,s,a){this.firestore=r,this.afAuth=i,this.storage=o,this.router=s,this.firebaseService=a,this.selectedImage=null,this.imageUrl=null,this.uploadProgress=null}ngOnInit(){"pro"==this.firebaseService.user_data.account_type?(document.getElementById("pro-add-selection").style.display="flex",document.getElementById("normal-add-selection").style.display="none"):(document.getElementById("pro-add-selection").style.display="none",document.getElementById("normal-add-selection").style.display="flex")}goBack(){"flex"==document.getElementById("add-selection").style.display?this.router.navigate(["/home"]):(document.getElementById("add-selection").style.display="flex",document.getElementById("add-spot").style.display="none",document.getElementById("add-car-pooling").style.display="none",document.getElementById("add-drink").style.display="none",document.getElementById("add-event").style.display="none")}showEventCreation(){document.getElementById("add-selection").style.display="none",document.getElementById("add-spot").style.display="none",document.getElementById("add-car-pooling").style.display="none",document.getElementById("add-drink").style.display="none",document.getElementById("add-event").style.display="flex"}showSpotCreation(){document.getElementById("add-selection").style.display="none",document.getElementById("add-event").style.display="none",document.getElementById("add-car-pooling").style.display="none",document.getElementById("add-drink").style.display="none",document.getElementById("add-spot").style.display="flex"}showDrinkCreation(){document.getElementById("add-selection").style.display="none",document.getElementById("add-event").style.display="none",document.getElementById("add-car-pooling").style.display="none",document.getElementById("add-drink").style.display="flex",document.getElementById("add-spot").style.display="none"}showTablesCreation(){document.getElementById("add-selection").style.display="none",document.getElementById("add-event").style.display="none",document.getElementById("add-car-pooling").style.display="none",document.getElementById("add-drink").style.display="none",document.getElementById("add-spot").style.display="none"}showCarPoolingCreation(){document.getElementById("add-selection").style.display="none",document.getElementById("add-car-pooling").style.display="flex",document.getElementById("add-drink").style.display="none",document.getElementById("add-event").style.display="none",document.getElementById("add-spot").style.display="none"}onFileSelected(r){const i=r.target.files[0];if(i){const o=new FileReader;o.onload=s=>{this.imageSrc=s.target.result},o.readAsDataURL(i)}this.selectedImage=i}addEvent(){var r=this;return(0,y.A)(function*(){var i=document.getElementById("event-title-input").value,o=document.getElementById("event-description-input").value;if("pro"==r.firebaseService.user_data.account_type)var a="private";else a="public";r.afAuth.authState.subscribe(function(){var l=(0,y.A)(function*(c){if(c)if(r.selectedImage)try{const m=r.storage.ref("event-images/").child(r.selectedImage.name).put(r.selectedImage);m.percentageChanges().subscribe(S=>{r.uploadProgress=S});const w=yield(yield m).ref.getDownloadURL(),T={creator_id:c.uid,title:i,description:o,imageUrl:w,type:a,timestamp:Qi.A.firestore.FieldValue.serverTimestamp()};r.firestore.collection("events").add(T).then(()=>{alert("Evento aggiunto con successo")}).catch(S=>{alert("Errore durante l'aggiunta dell'evento: "+S.message.toString())})}catch(h){console.error("Errore durante il caricamento dell'immagine:",h)}else alert("Nessuna immagine selezionata");else alert("Per pubblicare un evento \xe8 necessario effettuare il login o la registrazione")});return function(c){return l.apply(this,arguments)}}())})()}addDrink(){var r=this;return(0,y.A)(function*(){var i=document.getElementById("drink-title-input").value,o=document.getElementById("drink-description-input").value;"pro"==r.firebaseService.user_data.account_type?r.afAuth.authState.subscribe(function(){var a=(0,y.A)(function*(l){if(l)if(r.selectedImage)try{const p=r.storage.ref("drink-images/").child(r.selectedImage.name).put(r.selectedImage);p.percentageChanges().subscribe(T=>{r.uploadProgress=T});const _=yield(yield p).ref.getDownloadURL(),w={creator_id:l.uid,title:i,description:o,imageUrl:_,timestamp:Qi.A.firestore.FieldValue.serverTimestamp()};r.firestore.collection("drinks").add(w).then(()=>{alert("Drink aggiunto con successo")}).catch(T=>{alert("Errore durante l'aggiunta del drink: "+T.message.toString())})}catch(c){console.error("Errore durante il caricamento dell'immagine:",c)}else alert("Nessuna immagine selezionata");else alert("Per pubblicare un drink \xe8 necessario effettuare il login o la registrazione")});return function(l){return a.apply(this,arguments)}}()):alert("Per aggiungere un drink \xe8 neccessario possedere un account di tipo professionale")})()}addSpot(){var r=this;return(0,y.A)(function*(){var i=document.getElementById("spot-datetime-input").value,o=document.getElementById("spot-where-input").value,s=document.getElementById("spot-description-input").value;r.afAuth.authState.subscribe(function(){var l=(0,y.A)(function*(c){if(c)try{const h={creator_id:c.uid,datetime:i,description:s,where:o,privacy:"null",timestamp:Qi.A.firestore.FieldValue.serverTimestamp()};r.firestore.collection("spots").add(h).then(()=>{alert("Spot aggiunto con successo")}).catch(p=>{alert("Errore durante l'aggiunta dello spot: "+p.message.toString())})}catch(h){console.error("Errore durante il caricamento dell'immagine:",h)}else alert("Per pubblicare uno spot \xe8 necessario effettuare il login o la registrazione")});return function(c){return l.apply(this,arguments)}}())})()}}return(t=e).\u0275fac=function(r){return new(r||t)(E(du),E(wa),E(KM),E(hr),E(th))},t.\u0275cmp=Ke({type:t,selectors:[["app-add"]],decls:85,vars:6,consts:[[2,"height","100%","overflow-y","hidden"],[2,"width","100%","display","flex","align-items","center","padding-top","1rem","padding-left","1rem","pointer-events","all"],[2,"background","#950DE8","padding","0.5rem","border-radius","50%","display","flex","flex-direction","column","align-items","center",3,"click"],[1,"material-symbols-outlined","notranslate",2,"width","100","text-align","center"],["id","add-selection",2,"width","100%","height","100%","display","flex","flex-direction","column"],["id","normal-add-selection",2,"width","100%","display","flex","flex-direction","column"],[2,"width","100%","padding-left","0.5rem"],[1,"button3",2,"border-top","1px solid rgba(255, 255, 255, 0.062)",3,"click"],["id","pro-add-selection",2,"width","100%","display","flex","flex-direction","column"],["id","add-drink",2,"width","100%","height","100%","display","none","flex-direction","column","align-items","center","padding-top","1rem","padding-bottom","4rem","overflow-y","auto"],[1,"card1",2,"width","95%"],[2,"color","#FFFFFF80","margin-bottom","0rem","width","100%","padding-left","1rem","margin-top","1rem"],["style","width: 90%; height: 8rem; object-fit: contain; margin-top: 1rem;",3,"src",4,"ngIf"],["for","event-image-input",1,"card3",2,"width","90%","display","flex","flex-direction","row","align-items","center","justify-content","center","overflow","hidden","height","4rem"],["src","assets\\img\\material-symbols_perm-media.svg",2,"width","1.5rem","height","1.5rem","margin-right","0.2rem"],["id","event-image-input","type","file","accept","image/*",2,"display","none","position","relative","width","100%","height","100%","pointer-events","all","z-index","1",3,"change"],[2,"color","#FFFFFF80"],["id","drink-title-input","type","text","placeholder","Titolo",1,"card3","field2",2,"width","90%","height","2.5rem"],["id","drink-description-input","type","text","placeholder","Descrizione",1,"card3","field2",2,"width","90%","min-height","8rem","resize","vertical"],["style","height: 4rem; display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: -1rem;",4,"ngIf"],[1,"button2",2,"width","90%","margin-top","1rem","margin-bottom","1rem","height","3rem",3,"click"],["id","add-car-pooling",2,"width","100%","height","100%","display","none","flex-direction","column","align-items","center","padding-top","1rem","padding-bottom","4rem","overflow-y","auto"],["for","spot-datetime-input",2,"color","#FFFFFF80","margin-bottom","0rem","width","100%","padding-left","1rem","margin-top","1rem"],["id","spot-datetime-input","type","datetime-local",1,"card3","field2",2,"width","90%","height","2.5rem","padding-right","0.5rem","margin-top","0.2rem"],["id","spot-description-input","type","text","placeholder","Descrizione",1,"card3","field2",2,"width","90%","min-height","8rem","resize","vertical"],["for","spot-where-input",2,"color","#FFFFFF80","margin-bottom","0rem","width","100%","padding-left","1rem","margin-top","1rem"],["id","spot-where-input","type","text",1,"card3","field2",2,"width","90%","height","2.5rem","padding-right","0.5rem","margin-top","0.2rem"],["id","add-spot",2,"width","100%","height","100%","display","none","flex-direction","column","align-items","center","padding-top","1rem","padding-bottom","4rem","overflow-y","auto"],["id","add-event",2,"width","100%","height","100%","display","none","flex-direction","column","align-items","center","padding-top","1rem","padding-bottom","4rem","overflow-y","auto"],["id","event-title-input","type","text","placeholder","Titolo",1,"card3","field2",2,"width","90%","height","2.5rem"],["id","event-description-input","type","text","placeholder","Descrizione",1,"card3","field2",2,"width","90%","min-height","8rem","resize","vertical"],[1,"card3",2,"width","90%","display","flex","flex-direction","row","align-items","center","justify-content","center","overflow","hidden","height","3rem"],["src","assets\\img\\material-symbols_location-on-rounded.svg",2,"width","1.5rem","height","1.5rem","margin-right","0.2rem"],[1,"overflow1"],["id","spacer"],[2,"width","90%","height","8rem","object-fit","contain","margin-top","1rem",3,"src"],[2,"height","4rem","display","flex","align-items","center","justify-content","center","gap","0.5rem","margin-bottom","-1rem"],["max","100",3,"value"]],template:function(r,i){1&r&&(M(0,"body",0)(1,"div",1)(2,"button",2),Ft("click",function(){return i.goBack()}),M(3,"span",3),ye(4,"arrow_back_ios_new"),B()()(),M(5,"div",4)(6,"div",5)(7,"h3",6),ye(8,"Cosa vuoi pubblicare"),B(),M(9,"button",7),Ft("click",function(){return i.showEventCreation()}),ye(10,"Evento"),B(),M(11,"button",7),Ft("click",function(){return i.showSpotCreation()}),ye(12,"Spot"),B()(),M(13,"div",8)(14,"h3",6),ye(15,"Cosa vuoi pubblicare | Pro"),B(),M(16,"button",7),Ft("click",function(){return i.showEventCreation()}),ye(17,"Evento"),B(),M(18,"button",7),Ft("click",function(){return i.showDrinkCreation()}),ye(19,"Drink o bottiglia"),B()()(),M(20,"div",9)(21,"div",10)(22,"h3",11),ye(23,"Nuovo drink"),B(),ei(24,uIe,1,1,"img",12),M(25,"label",13),Ne(26,"img",14),M(27,"input",15),Ft("change",function(s){return i.onFileSelected(s)}),B(),M(28,"p",16),ye(29,"Seleziona foto drink"),B()(),Ne(30,"input",17)(31,"textarea",18),ei(32,dIe,4,2,"div",19),M(33,"button",20),Ft("click",function(){return i.addDrink()}),ye(34,"Aggiungi drink"),B()()(),M(35,"div",21)(36,"div",10)(37,"h3",11),ye(38,"Aggiungi car pooling"),B(),M(39,"label",22),ye(40,"Data e ora"),B(),Ne(41,"input",23)(42,"textarea",24),M(43,"label",25),ye(44,"Luogo"),B(),Ne(45,"input",26),ei(46,hIe,4,2,"div",19),M(47,"button",20),Ft("click",function(){return i.addSpot()}),ye(48,"Pubblica"),B()()(),M(49,"div",27)(50,"div",10)(51,"h3",11),ye(52,"Nuovo spot"),B(),M(53,"label",22),ye(54,"Data e ora"),B(),Ne(55,"input",23)(56,"textarea",24),M(57,"label",25),ye(58,"Luogo"),B(),Ne(59,"input",26),ei(60,fIe,4,2,"div",19),M(61,"button",20),Ft("click",function(){return i.addSpot()}),ye(62,"Pubblica"),B()()(),M(63,"div",28)(64,"div",10)(65,"h3",11),ye(66,"Nuovo evento"),B(),ei(67,pIe,1,1,"img",12),M(68,"label",13),Ne(69,"img",14),M(70,"input",15),Ft("change",function(s){return i.onFileSelected(s)}),B(),M(71,"p",16),ye(72,"Seleziona media"),B()(),Ne(73,"input",29)(74,"textarea",30),M(75,"button",31),Ne(76,"img",32),M(77,"p",16),ye(78,"Aggiungi posizione"),B()(),ei(79,gIe,4,2,"div",19),M(80,"button",20),Ft("click",function(){return i.addEvent()}),ye(81,"Pubblica"),B()()(),M(82,"div",33),Ne(83,"div",34)(84,"app-footer"),B()()),2&r&&(un(24),ur("ngIf",i.imageSrc),un(8),ur("ngIf",null!==i.uploadProgress),un(14),ur("ngIf",null!==i.uploadProgress),un(14),ur("ngIf",null!==i.uploadProgress),un(7),ur("ngIf",i.imageSrc),un(12),ur("ngIf",null!==i.uploadProgress))},dependencies:[$f,Cu]}),e})();function _Ie(t,e){if(1&t&&(M(0,"div",72),Ne(1,"img",73),M(2,"p",74),ye(3),B(),M(4,"p",75),ye(5),B()()),2&t){const n=e.$implicit;un(),i_("src",n.imageUrl,Dl),un(2),Pl(n.title),un(2),Ao(" ",n.description," ")}}function vIe(t,e){1&t&&Ne(0,"img",76),2&t&&ur("src",qi().imageSrc,Dl)}let yIe=(()=>{var t;class e{constructor(r,i,o,s,a,l){this.firestore=r,this.afAuth=i,this.firebaseService=o,this.storage=s,this.router=a,this.locationStrategy=l,this.isIntersecting=!1,this.selectedImage=null,this.imageUrl=null,this.uploadProgress=null,this.data$=new K([]),this.nextPageAvailable=!0}ngOnInit(){this.afAuth.authState.subscribe(r=>{if(r){this.documents=this.firestore.collection("posts",m=>m.where("creator_id","==",r.uid)).valueChanges();const a=this.firebaseService.user_data;"pro"==a.account_type?(document.getElementById("spots-toggle").style.display="flex",document.getElementById("events-toggle").style.display="flex",document.getElementById("car-pooling-toggle").style.display="none",document.getElementById("seat-toggle").style.display="flex",document.getElementById("drink-toggle").style.display="flex"):(document.getElementById("spots-toggle").style.display="flex",document.getElementById("events-toggle").style.display="flex",document.getElementById("car-pooling-toggle").style.display="flex",document.getElementById("seat-toggle").style.display="none",document.getElementById("drink-toggle").style.display="none");var i=document.getElementById("account-image"),o=document.getElementById("account-image-change");null!=i&&(i.src=a.imageUrl),null!=o&&(o.src=a.imageUrl),document.getElementById("name-and-surname").innerHTML=a.name,document.getElementById("description").innerHTML=a.description,document.getElementById("username").innerHTML="@"+a.username;const l=document.getElementById("account-name-and-surname-change"),c=document.getElementById("account-username-change"),h=document.getElementById("account-phone-number-change"),p=document.getElementById("account-description-change");l.value=a.name,c.value=a.username,h.value=a.phone,p.value=a.description,document.getElementById("account-car-pooling-phone-input").value=a.phone}else alert("Impossibile mostrare i dati del profilo se non si possiede un account")}),this.get3OfMyEvents()}saveCarPooling(){var r=document.getElementById("account-car-pooling-seats-input"),i=document.getElementById("account-car-pooling-location-input"),o=document.getElementById("account-car-pooling-brand-model-input"),s=document.getElementById("account-car-pooling-color-input"),a=document.getElementById("account-car-pooling-type-input"),l=document.getElementById("account-car-pooling-car-signature-input"),c=document.getElementById("account-car-pooling-money-input"),h=document.getElementById("account-car-pooling-phone-input"),p=document.getElementById("car-pooling-available-selector");const m={seats:r.value,location:i.value,brand_model:o.value,color:s.value,type:a.value,signature:l.value,money:c.value,phone:h.value,available:p.value};this.afAuth.authState.subscribe(_=>{_&&this.firestore.collection("car-pooling").doc(_.uid).set(m,{merge:!0}).then(()=>{alert("Car pooling salvato con successo")}).catch(w=>{console.error("Errore durante il salvataggio del car pooling:",w)})})}onFileSelected(r){document.getElementById("changed-image-preview").style.display="flex";const i=r.target.files[0];if(i){const o=new FileReader;o.onload=s=>{this.imageSrc=s.target.result},o.readAsDataURL(i)}this.selectedImage=i}updateAccountDatas(){var r=this;return(0,y.A)(function*(){const i=document.getElementById("account-name-and-surname-change").value,o=document.getElementById("account-username-change").value,s=document.getElementById("account-description-change").value,a=document.getElementById("account-phone-number-change").value;r.afAuth.authState.subscribe(function(){var l=(0,y.A)(function*(c){if(c)try{if(r.selectedImage){const m=r.storage.ref("account-images/").child(r.selectedImage.name).put(r.selectedImage);m.percentageChanges().subscribe(S=>{r.uploadProgress=S});const w=yield(yield m).ref.getDownloadURL(),T={name:i,username:o,description:s,phone:a,imageUrl:w};yield r.firestore.collection("users_data").doc(c.uid).update(T)}else{const h={name:i,description:s,username:o,phone:a};yield r.firestore.collection("users_data").doc(c.uid).update(h)}r.firebaseService.initialize(),alert("Dati dell'account aggiornati con successo")}catch(h){console.error("Si \xe8 verificato un errore durante l'aggiornamento dei dati dell'account:",h),alert("Si \xe8 verificato un errore durante l'aggiornamento dei dati dell'account"+h)}else alert("Per aggiornare i dati dell'account \xe8 necessario effettuare il login")});return function(c){return l.apply(this,arguments)}}())})()}refresh(){this.ngOnInit(),document.getElementById("change-account-data").style.display="none"}get3OfMyEvents(){var r=this;this.afAuth.authState.subscribe(function(){var i=(0,y.A)(function*(o){o&&r.firestore.collection("events",s=>s.limit(3).where("creator_id","==",o.uid)).get().subscribe(s=>{const a=s.docs.map(l=>({id:l.id,...l.data()}));3===a.length?r.lastVisible=s.docs[s.docs.length-1]:r.nextPageAvailable=!1,r.data$.next(a)})});return function(o){return i.apply(this,arguments)}}())}getMoreOfMyEvents(){var r=this;this.afAuth.authState.subscribe(function(){var i=(0,y.A)(function*(o){if(o){if(!r.lastVisible)return;r.firestore.collection("events",s=>s.limit(3).where("creator_id","==",o.uid).startAfter(r.lastVisible)).get().subscribe(s=>{const a=s.docs.map(l=>({id:l.id,...l.data()}));if(a.length>0){const c=[...r.data$.getValue(),...a];r.data$.next(c),3===a.length?r.lastVisible=s.docs[s.docs.length-1]:r.nextPageAvailable=!1}else r.nextPageAvailable=!1})}});return function(o){return i.apply(this,arguments)}}())}}return(t=e).\u0275fac=function(r){return new(r||t)(E(du),E(wa),E(th),E(KM),E(hr),E(js))},t.\u0275cmp=Ke({type:t,selectors:[["app-account"]],decls:124,vars:4,consts:[[1,"body1"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","padding-bottom","3.5rem","pointer-events","all","overflow-x","hidden","overflow-y","auto"],[1,"up_bar",2,"width","100%","min-height","3.5rem","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["id","username",2,"margin-left","1rem"],[2,"display","flex","flex-direction","row","align-items","center","height","100%"],["onclick","document.getElementById('change-account-data').style.display = 'flex'; ","name","pencil",2,"font-size","1.8rem","margin-right","1rem"],[2,"width","100%","height","auto"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","justify-content","start","gap","1rem","margin-top","1rem","margin-bottom","1rem","padding-left","1rem"],["id","account-image","src","assets\\icon\\favicon.png",2,"width","5rem","height","5rem","object-fit","cover","border-radius","50%"],[2,"height","100%","display","flex","flex-direction","column"],["id","name-and-surname",2,"font-size","1.2rem"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","gap","0.8rem","overflow-y","hidden","overflow-x","auto","margin-top","1rem"],["id","followers",2,"margin-bottom","0rem","margin-top","0rem"],[2,"margin-top","0.3rem","font-weight","200","color","#FFFFFF80","margin-bottom","0rem"],["id","followings",2,"margin-bottom","0rem","margin-top","0rem"],["id","post-number",2,"margin-bottom","0rem","margin-top","0rem"],[2,"flex","1"],["id","description",2,"width","100%","padding-left","1rem","font-weight","200","color","#FFFFFF80","padding-right","0.5rem"],[1,"card1",2,"width","95%","border-radius","2rem","min-height","2.5rem","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["id","events-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem",3,"click"],["name","id-card-outline",2,"font-size","1.8rem"],["id","spots-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem"],["name","pricetags-outline",2,"font-size","1.8rem"],["onclick","document.getElementById('my-car-pooling-container').style.display = 'flex'; ","id","car-pooling-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem"],["name","car",2,"font-size","1.8rem"],["id","seat-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem"],[1,"material-symbols-outlined","notranslate"],["id","drink-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem"],["id","my-events-container",2,"width","100%","height","100%","display","flex","flex-direction","column"],["id","watching-now-indicator",2,"width","100%","padding-left","1rem","margin-bottom","1rem"],[2,"display","flex","flex-direction","unset","flex-wrap","wrap","justify-content","space-between","width","100%","height","100%","padding-left","1rem","padding-right","1rem"],["style","width: 48%; height: 15rem; border-radius: 0.5rem; object-fit: cover; margin-bottom: 1rem; overflow: hidden; display: flex; flex-direction: column; border: 1px solid rgba(255, 255, 255, 0.144)",4,"ngFor","ngForOf"],[2,"position","relative","width","48%","height","15rem","border-radius","0.5rem","margin-bottom","4rem",3,"click"],["id","my-car-pooling-container",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","rgba(0, 0, 0, 0.292)","align-items","center"],[1,"card1",2,"width","95%","padding-top","0.5rem","padding-bottom","1rem","margin-top","3rem"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","0rem","padding-bottom","1rem","padding-left","1rem"],["onclick","document.getElementById('my-car-pooling-container').style.display = 'none';","name","close-outline",2,"font-size","2rem"],[1,"input1",2,"margin-top","0rem","width","95%","padding-left","0.5rem"],["type","number","id","account-car-pooling-seats-input","placeholder","Posti disponibili",1,"field1"],[1,"input1",2,"margin-top","0rem","width","95%","padding-left","0.5rem","margin-top","0.5rem"],["type","text","id","account-car-pooling-location-input","placeholder","Zona",1,"field1"],["type","text","id","account-car-pooling-brand-model-input","placeholder","Marchio/modello",1,"field1"],["type","text","id","account-car-pooling-color-input","placeholder","Colore",1,"field1"],["type","text","id","account-car-pooling-type-input","placeholder","Tipologia",1,"field1"],["type","text","id","account-car-pooling-car-signature-input","placeholder","Targa",1,"field1"],["type","number","id","account-car-pooling-phone-input","placeholder","Numero di telefono contatto",1,"field1"],["type","number","id","account-car-pooling-money-input","placeholder","Quota",1,"field1"],["id","car-pooling-available-selector",1,"input1",2,"width","95%","margin-top","0.5rem"],["value","not-available"],["value","available"],[1,"button2",2,"width","95%","height","2.5rem","margin-top","1rem",3,"click"],["id","change-account-data",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["name","close-outline",2,"font-size","2rem",3,"click"],[2,"width","100%","display","flex","flex-direction","column","align-items","center","margin-bottom","2rem"],["for","spot-image-input",2,"width","100%","display","flex","flex-direction","row","align-items","center","justify-content","center","padding-left","1rem","padding-right","1rem","margin-bottom","1rem"],["id","account-image-change",2,"width","8rem","height","8rem","object-fit","cover","border-radius","50%"],["id","changed-image-preview",2,"display","none","flex-direction","row","align-items","center"],["name","chevron-forward-outline",2,"font-size","2rem","margin-left","1rem"],["style","width: 8rem; height: 8rem; border-radius: 50%; margin-left: 1rem;",3,"src",4,"ngIf"],["id","spot-image-input","type","file","accept","image/*",2,"display","none","position","relative","width","100%","height","100%","z-index","1",3,"change"],[1,"input1",2,"margin-top","1rem","width","95%"],["src","assets\\img\\octicon_person-24 (1).png",1,"input1_img1"],["type","text","id","account-name-and-surname-change","placeholder","Nome e cognome",1,"field1"],["name","at-outline",2,"color","rgb(190, 190, 190)","font-size","1.5rem","margin-left","0.5rem","margin-right","0.5rem"],["type","text","id","account-username-change","placeholder","Username",1,"field1"],["name","call-outline",2,"color","rgb(190, 190, 190)","font-size","1.3rem","margin-left","0.5rem","margin-right","0.5rem"],["type","number","id","account-phone-number-change","placeholder","Numero di telefono",1,"field1"],["id","account-description-change","type","text","placeholder","Descrizione",1,"card3","field2",2,"width","95%","min-height","8rem","resize","vertical","background","rgb(114, 114, 114)","border-radius","1rem"],[1,"button2",2,"width","95%","height","3rem","margin-top","1rem",3,"click"],[1,"overflow1"],["id","spacer"],[2,"width","48%","height","15rem","border-radius","0.5rem","object-fit","cover","margin-bottom","1rem","overflow","hidden","display","flex","flex-direction","column","border","1px solid rgba(255, 255, 255, 0.144)"],[2,"position","relative","width","100%","height","65%","object-fit","cover",3,"src"],[2,"width","100%","padding-left","0.5rem","margin-top","0.5rem","margin-bottom","0.2rem"],[2,"width","100%","padding-left","0.5rem","margin-top","0rem","margin-bottom","0rem"],[2,"width","8rem","height","8rem","border-radius","50%","margin-left","1rem",3,"src"]],template:function(r,i){1&r&&(M(0,"body",0)(1,"div",1)(2,"div",2)(3,"strong",3),ye(4,"username"),B(),M(5,"div",4),Ne(6,"ion-icon",5),B()(),M(7,"div",6)(8,"div",7),Ne(9,"img",8),M(10,"div",9)(11,"strong",10),ye(12,"Name and surname"),B(),M(13,"div",11)(14,"div",9)(15,"p",12),ye(16,"0"),B(),M(17,"p",13),ye(18,"Followers"),B()(),M(19,"div",9)(20,"p",14),ye(21,"0"),B(),M(22,"p",13),ye(23,"Followings"),B()(),M(24,"div",9)(25,"p",15),ye(26,"0"),B(),M(27,"p",13),ye(28,"Post"),B()(),Ne(29,"div",16),B()()(),Ne(30,"p",17),B(),M(31,"div",18)(32,"div",19),Ft("click",function(){return i.get3OfMyEvents()}),Ne(33,"ion-icon",20),B(),M(34,"div",21),Ne(35,"ion-icon",22),B(),M(36,"div",23),Ne(37,"ion-icon",24),B(),M(38,"div",25)(39,"span",26),ye(40,"chair"),B()(),M(41,"div",27)(42,"span",26),ye(43,"liquor"),B()()(),M(44,"div",28)(45,"h3",29),ye(46,"I miei eventi"),B(),M(47,"div",30),ei(48,_Ie,6,3,"div",31),Mf(49,"async"),M(50,"button",32),Ft("click",function(){return i.getMoreOfMyEvents()}),ye(51,"Carica altri"),B()()()(),M(52,"div",33)(53,"div",34)(54,"div",35)(55,"h3"),ye(56,"La mia auto"),B(),Ne(57,"ion-icon",36),B(),M(58,"div",37)(59,"span",26),ye(60,"airline_seat_recline_extra"),B(),Ne(61,"input",38),B(),M(62,"div",39)(63,"span",26),ye(64,"location_on"),B(),Ne(65,"input",40),B(),M(66,"div",39)(67,"span",26),ye(68,"directions_car"),B(),Ne(69,"input",41),B(),M(70,"div",39)(71,"span",26),ye(72,"palette"),B(),Ne(73,"input",42),B(),M(74,"div",39)(75,"span",26),ye(76,"blur_short"),B(),Ne(77,"input",43),B(),M(78,"div",39)(79,"span",26),ye(80,"more_horiz"),B(),Ne(81,"input",44),B(),M(82,"div",39)(83,"span",26),ye(84,"phone"),B(),Ne(85,"input",45),B(),M(86,"div",39)(87,"span",26),ye(88,"euro_symbol"),B(),Ne(89,"input",46),B(),M(90,"select",47)(91,"option",48),ye(92,"Non disponibile"),B(),M(93,"option",49),ye(94,"Disponibile"),B()(),M(95,"button",50),Ft("click",function(){return i.saveCarPooling()}),ye(96,"Salva"),B()()(),M(97,"div",51)(98,"div",52)(99,"h3"),ye(100,"Il mio account"),B(),M(101,"ion-icon",53),Ft("click",function(){return i.refresh()}),B()(),M(102,"div",54)(103,"label",55),Ne(104,"img",56),M(105,"div",57),Ne(106,"ion-icon",58),ei(107,vIe,1,1,"img",59),B(),M(108,"input",60),Ft("change",function(s){return i.onFileSelected(s)}),B()(),M(109,"div",61),Ne(110,"img",62)(111,"input",63),B(),M(112,"div",61),Ne(113,"ion-icon",64)(114,"input",65),B(),M(115,"div",61),Ne(116,"ion-icon",66)(117,"input",67),B(),Ne(118,"textarea",68),M(119,"button",69),Ft("click",function(){return i.updateAccountDatas()}),ye(120,"Applica"),B()()(),M(121,"div",70),Ne(122,"div",71)(123,"app-footer"),B()()),2&r&&(un(48),ur("ngForOf",Nf(49,2,i.data$)),un(59),ur("ngIf",i.imageSrc))},dependencies:[cd,$f,Bl,FU,VU,Cu,Uf]}),e})(),IIe=(()=>{var t;class e{constructor(){}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Ke({type:t,selectors:[["app-search"]],decls:11,vars:0,consts:[[1,"up_bar",2,"width","100%","min-height","3.5rem","display","flex","flex-direction","row","align-items","center","justify-content","center"],[1,"input1",2,"width","95%"],["type","text","id","","placeholder","Cerca",1,"field1"],["name","search",2,"color","rgb(190, 190, 190)","font-size","1.5rem","margin-left","0.5rem","margin-right","0.5rem"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","justify-content","center"],[1,"overflow1"],["id","spacer"]],template:function(r,i){1&r&&(M(0,"body")(1,"div",0)(2,"div",1),Ne(3,"input",2)(4,"ion-icon",3),B()(),M(5,"div",4)(6,"p"),ye(7,"In fase di sviluppo"),B()(),M(8,"div",5),Ne(9,"div",6)(10,"app-footer"),B()())},dependencies:[Bl,Cu]}),e})();function EIe(t,e){if(1&t&&(M(0,"div",28)(1,"div",29),Ne(2,"ion-icon",30)(3,"ion-icon",31),B(),M(4,"strong",32),ye(5,"Dove:"),B(),M(6,"p",33),ye(7),B(),M(8,"strong",32),ye(9,"Quando:"),B(),M(10,"p",33),ye(11),B(),M(12,"strong",32),ye(13,"Descrizione:"),B(),M(14,"p",33),ye(15),B(),M(16,"div",34)(17,"div",35),Ne(18,"ion-icon",36),B()()()),2&t){const n=e.$implicit,r=qi();un(7),Pl(n.where),un(4),Pl(r.formatDate(n.datetime)),un(4),Pl(n.description)}}let wIe=(()=>{var t;class e{constructor(r,i){this.firestore=r,this.firebaseService=i}ngOnInit(){this.documents=this.firestore.collection("spots").valueChanges({idField:"id"}).pipe(Et(r=>r.map(i=>({id:i.id,...i}))))}formatDate(r){const i=new Date(r);return`${i.getDate()}/${i.getMonth()+1}/${i.getFullYear()} alle ${i.getHours()}:${i.getMinutes()}`}showDetails(r){document.getElementById("post-details").style.display="flex",document.getElementById("post-img-details").src=r.imageUrl,document.getElementById("post-title-details").innerHTML=r.title,document.getElementById("post-description-details").innerHTML=r.description}getAllSpots(){this.documents=this.firestore.collection("spots").valueChanges({idField:"id"}).pipe(Et(r=>r.map(i=>({id:i.id,...i}))))}getTodaySpots(){const r=new Date;r.setHours(0,0,0,0),this.firestore.collection("spots",i=>i.where("datetime",">=",r).where("datetime","<=",r)).get().subscribe(i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));this.documents=Gt(o)})}addLikeToSpot(r){this.firebaseService.addLikeToSpot(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(E(du),E(th))},t.\u0275cmp=Ke({type:t,selectors:[["app-spot"]],decls:44,vars:3,consts:[[1,"body1"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","padding-bottom","3.5rem","overflow-y","auto"],[1,"up_bar",2,"width","100%","min-height","6.5rem","display","flex","flex-direction","column","align-items","center","overflow","hidden"],[2,"width","100%","padding-left","0.5rem","margin-top","0.5rem","margin-bottom","0rem","display","flex","flex-direction","row","align-items","center"],["src","assets\\img\\icon-logo.jpg","alt","",2,"width","2.5rem","height","2.5rem","object-fit","contain"],[1,"notranslate",2,"font-size","1.6rem","padding-top","0.4rem","padding-left","0.2rem"],[2,"flex","1"],["routerLink","/search","name","search",2,"font-size","1.8rem"],["routerLink","/notifications","name","notifications",2,"font-size","1.8rem","padding-right","0.5rem","padding-left","0.5rem"],[2,"width","100%","height","3rem","display","flex","flex-direction","row","align-items","center","justify-content","space-evenly"],[3,"click"],[2,"background","rgba(255, 255, 255, 0.082)","width","1px","height","70%"],["style","width: 100%; border-bottom: 1px solid rgba(255, 255, 255, 0.082);",4,"ngFor","ngForOf"],[1,"overflow1"],["id","spacer"],["id","post-details",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["id","post-title-details"],["onclick","document.getElementById('post-details').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],[2,"width","100%","display","flex","align-items","center","justify-content","center","padding-left","1rem","padding-right","1rem"],["id","post-img-details",2,"width","100%"],[2,"width","100%","display","flex","padding-left","1rem"],["id","post-description-details"],[2,"width","100%","display","flex","flex-direction","column","align-items","center","margin-bottom","2rem"],["onclick","document.getElementById('reserve-details').style.display = 'flex'; ",1,"button2",2,"width","95%","height","2.5rem"],["id","reserve-details",2,"position","absolute","z-index","1000","height","100%","width","100%","display","none","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black"],["onclick","document.getElementById('reserve-details').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],[1,"button2",2,"width","95%","height","2.5rem"],[2,"width","100%","border-bottom","1px solid rgba(255, 255, 255, 0.082)"],[2,"width","100%","height","2.8rem","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["name","person-circle-outline",2,"font-size","1.8rem","padding-left","0.5rem"],["name","ellipsis-vertical",2,"font-size","1.8rem","padding-right","0.5rem"],[2,"width","100%","padding-left","0.5rem"],[2,"margin-top","0rem","font-weight","200","max-height","5rem","overflow","hidden","padding-left","0.5rem"],[2,"padding-left","0.5rem","padding-top","0.5rem"],[2,"width","100%","height","2rem","display","flex","flex-direction","row","gap","0.8rem","margin-bottom","0.3rem"],["name","chatbubble-outline",2,"font-size","1.8rem"]],template:function(r,i){1&r&&(M(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3),Ne(4,"img",4),M(5,"strong",5),ye(6,"Spot"),B(),Ne(7,"div",6)(8,"ion-icon",7)(9,"ion-icon",8),B(),M(10,"div",9)(11,"strong",10),Ft("click",function(){return i.getAllSpots()}),ye(12,"Tutti"),B(),Ne(13,"div",11),M(14,"strong",10),Ft("click",function(){return i.getTodaySpots()}),ye(15,"Oggi"),B()()(),ei(16,EIe,19,3,"div",12),Mf(17,"async"),B(),M(18,"div",13),Ne(19,"div",14)(20,"app-footer"),B(),M(21,"div",15)(22,"div",16),Ne(23,"h3",17)(24,"ion-icon",18),B(),M(25,"div",19),Ne(26,"img",20),B(),M(27,"div",21),Ne(28,"p",22),B(),M(29,"div",23)(30,"button",24),ye(31,"Prenota"),B()()(),M(32,"div",25)(33,"div",16)(34,"h3"),ye(35,"Prenota l'evento"),B(),Ne(36,"ion-icon",26),B(),M(37,"div",19),Ne(38,"img",20),B(),M(39,"div",21),Ne(40,"p",22),B(),M(41,"div",23)(42,"button",27),ye(43,"Conferma"),B()()()()),2&r&&(un(16),ur("ngForOf",Nf(17,1,i.documents)))},dependencies:[cd,Bl,rw,Bc,Cu,Uf]}),e})(),CIe=(()=>{var t;class e{constructor(){}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Ke({type:t,selectors:[["app-notifications"]],decls:11,vars:0,consts:[[1,"body1"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","padding-bottom","3.5rem","overflow-y","auto"],[1,"up_bar",2,"width","100%","min-height","3rem","display","flex","flex-direction","row","align-items","center","overflow","hidden"],[2,"width","100%","font-size","1.6rem","padding-left","0.5rem"],[2,"width","100%","height","100%","display","flex","flex-direction","column","justify-content","center","overflow-y","auto","overflow-x","hidden"],[2,"width","100%","text-align","center"],[1,"overflow1"],["id","spacer"]],template:function(r,i){1&r&&(M(0,"body",0)(1,"div",1)(2,"div",2)(3,"strong",3),ye(4,"Tutte le notifiche"),B()(),M(5,"div",4)(6,"p",5),ye(7,"Nessuna notifica"),B()()(),M(8,"div",6),Ne(9,"div",7)(10,"app-footer"),B()())},dependencies:[Cu]}),e})();function bIe(t,e){1&t&&Ne(0,"img",39),2&t&&i_("src",e.$implicit.imageUrl,Dl)}let _W=(()=>{var t;class e{constructor(r,i,o,s,a,l,c,h){this.firestore=r,this.afAuth=i,this.firebaseService=o,this.storage=s,this.router=a,this.locationStrategy=l,this.route=c,this.elementRef=h,this.isIntersecting=!1,this.selectedImage=null,this.imageUrl=null,this.uploadProgress=null}loadMore(r){console.log("are you serius?")}ngOnInit(){this.getMyEvents(),this.route.params.subscribe(r=>{this.see_uid=r.uid,this.firestore.collection("users_data").doc(this.see_uid).get().subscribe(o=>{if(o.exists){const l=o.data();"pro"==l.account_type?(document.getElementById("spots-toggle").style.display="flex",document.getElementById("events-toggle").style.display="flex",document.getElementById("car-pooling-toggle").style.display="none",document.getElementById("seat-toggle").style.display="flex",document.getElementById("drink-toggle").style.display="flex"):(document.getElementById("spots-toggle").style.display="flex",document.getElementById("events-toggle").style.display="flex",document.getElementById("car-pooling-toggle").style.display="flex",document.getElementById("seat-toggle").style.display="none",document.getElementById("drink-toggle").style.display="none");var s=document.getElementById("account-image");null!=s&&(s.src=l.imageUrl),document.getElementById("name-and-surname").innerHTML=l.name,document.getElementById("description").innerHTML=l.description,document.getElementById("username").innerHTML="@"+l.username,document.getElementById("send-message-button").href="https://wa.me/"+l.phone}else alert("Account non trovato")})})}getMyEvents(){this.afAuth.authState.subscribe(r=>{r&&(this.events=this.firestore.collection("events",i=>i.where("creator_id","==",this.see_uid).limit(4)).valueChanges({idField:"id"}).pipe(Et(i=>i.map(o=>({id:o.id,...o})))))})}}return(t=e).\u0275fac=function(r){return new(r||t)(E(du),E(wa),E(th),E(KM),E(hr),E(js),E(Ea),E(He))},t.\u0275cmp=Ke({type:t,selectors:[["app-seeprofile"]],decls:61,vars:3,consts:[[1,"body1"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","padding-bottom","3.5rem","pointer-events","all","overflow-x","hidden","overflow-y","auto"],[1,"up_bar",2,"width","100%","min-height","3.5rem","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["id","username",2,"margin-left","1rem"],[2,"width","100%","height","auto"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","justify-content","start","gap","1rem","margin-top","1rem","margin-bottom","1rem","padding-left","1rem"],["id","account-image","src","assets\\icon\\favicon.png",2,"width","5rem","height","5rem","object-fit","cover","border-radius","50%"],[2,"height","100%","display","flex","flex-direction","column"],["id","name-and-surname",2,"font-size","1.2rem"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","gap","0.8rem","overflow-y","hidden","overflow-x","auto","margin-top","1rem"],["id","followers",2,"margin-bottom","0rem","margin-top","0rem"],[2,"margin-top","0.3rem","font-weight","200","color","#FFFFFF80","margin-bottom","0rem"],["id","followings",2,"margin-bottom","0rem","margin-top","0rem"],["id","post-number",2,"margin-bottom","0rem","margin-top","0rem"],[2,"flex","1"],["id","description",2,"width","100%","padding-left","1rem","font-weight","200","color","#FFFFFF80","padding-right","0.5rem"],[2,"width","95%","display","flex","flex-direction","row","align-items","center","justify-content","space-between","margin-bottom","1rem","margin-top","1rem"],[1,"button2",2,"width","48%","height","2rem","border-radius","1rem","gap","0.5rem"],["name","add-outline",2,"font-size","1.8rem"],["id","send-message-button","target","_blank",1,"button2",2,"width","48%","height","2rem","border-radius","1rem","gap","0.5rem","color","white","cursor","pointer","text-decoration","none"],["name","send",2,"font-size","1.2rem"],[1,"card1",2,"width","95%","border-radius","2rem","min-height","2.5rem","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["id","events-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem"],["name","id-card-outline",2,"font-size","1.8rem"],["id","spots-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem"],["name","pricetags-outline",2,"font-size","1.8rem"],["id","car-pooling-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem"],["name","car",2,"font-size","1.8rem"],["id","seat-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem"],[1,"material-symbols-outlined","notranslate"],["id","drink-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem"],["id","my-events-container",2,"width","100%","height","100%","display","flex","flex-direction","column"],[2,"width","100%","padding-left","1rem","margin-bottom","0rem"],[2,"width","100%","height","100%","overflow-x","hidden","overflow-y","auto"],[2,"display","flex","flex-direction","unset","flex-wrap","wrap","justify-content","space-between","width","100%","height","100%","padding-left","1rem","padding-right","1rem"],["style","width: 48%; height: 15rem; border-radius: 0.5rem; object-fit: cover; margin-top: 1rem; object-fit: cover;",3,"src",4,"ngFor","ngForOf"],[2,"width","48%","height","15rem","border-radius","0.5rem","object-fit","cover","margin-top","1rem","object-fit","cover",3,"click"],[1,"overflow1"],["id","spacer"],[2,"width","48%","height","15rem","border-radius","0.5rem","object-fit","cover","margin-top","1rem","object-fit","cover",3,"src"]],template:function(r,i){1&r&&(M(0,"body",0)(1,"div",1)(2,"div",2)(3,"strong",3),ye(4,"username"),B()(),M(5,"div",4)(6,"div",5),Ne(7,"img",6),M(8,"div",7)(9,"strong",8),ye(10,"Name and surname"),B(),M(11,"div",9)(12,"div",7)(13,"p",10),ye(14,"0"),B(),M(15,"p",11),ye(16,"Followers"),B()(),M(17,"div",7)(18,"p",12),ye(19,"0"),B(),M(20,"p",11),ye(21,"Followings"),B()(),M(22,"div",7)(23,"p",13),ye(24,"0"),B(),M(25,"p",11),ye(26,"Post"),B()(),Ne(27,"div",14),B()()(),Ne(28,"p",15),B(),M(29,"div",16)(30,"button",17),Ne(31,"ion-icon",18),ye(32,"Segui"),B(),M(33,"a",19),Ne(34,"ion-icon",20),ye(35,"Messaggio"),B()(),M(36,"div",21)(37,"div",22),Ne(38,"ion-icon",23),B(),M(39,"div",24),Ne(40,"ion-icon",25),B(),M(41,"div",26),Ne(42,"ion-icon",27),B(),M(43,"div",28)(44,"span",29),ye(45,"airline_seat_recline_normal"),B()(),M(46,"div",30)(47,"span",29),ye(48,"liquor"),B()()(),M(49,"div",31)(50,"h3",32),ye(51,"Eventi"),B(),M(52,"div",33)(53,"div",34),ei(54,bIe,1,1,"img",35),Mf(55,"async"),M(56,"button",36),Ft("click",function(){return i.loadMore("events")}),ye(57,"Carica altri"),B()()()()(),M(58,"div",37),Ne(59,"div",38)(60,"app-footer"),B()()),2&r&&(un(54),ur("ngForOf",Nf(55,1,i.events)))},dependencies:[cd,Bl,Cu,Uf]}),e})();function TIe(t,e){if(1&t&&(M(0,"div",10)(1,"strong"),ye(2,"Giacomo Verde"),B(),M(3,"div",11)(4,"span",12),ye(5,"airline_seat_recline_extra"),B(),M(6,"p",13),ye(7),B()(),M(8,"div",14)(9,"span",12),ye(10,"location_on"),B(),M(11,"p",13),ye(12),B()(),M(13,"div",14)(14,"span",12),ye(15,"directions_car"),B(),M(16,"p",13),ye(17),B()(),M(18,"div",14)(19,"span",12),ye(20,"palette"),B(),M(21,"p",13),ye(22),B()(),M(23,"div",14)(24,"span",12),ye(25,"blur_short"),B(),M(26,"p",13),ye(27),B()(),M(28,"div",14)(29,"span",12),ye(30,"more_horiz"),B(),M(31,"p",13),ye(32),B()(),M(33,"div",14)(34,"span",12),ye(35,"euro_symbol"),B(),M(36,"p",13),ye(37),B()(),M(38,"div",15)(39,"a",16),ye(40,"Contatta"),B()()()),2&t){const n=e.$implicit;un(7),Ao("Posti disponibili: ",n.seats,""),un(5),Ao("Zona: ",n.location,""),un(5),Ao("Marchio/modello: ",n.brand_model,""),un(5),Ao("Colore: ",n.color,""),un(5),Ao("Tipologia: ",n.type,""),un(5),Ao("Targa: ",n.signature,""),un(5),Ao("Quota: ",n.money,"\u20ac"),un(2),K0("href","https://wa.me/",n.phone,"",Dl)}}function AIe(t,e){if(1&t){const n=H0();M(0,"button",17),Ft("click",function(){return la(n),ca(qi().loadOtherCarPoolers())}),ye(1,"Carica altri"),B()}}const DIe=[{path:"",redirectTo:"splash",pathMatch:"full"},{path:"login",component:Hle},{path:"register",component:wpe},{path:"home",component:tIe},{path:"splash",component:nIe},{path:"log",component:rIe},{path:"add",component:mIe},{path:"account",component:yIe},{path:"search",component:IIe},{path:"car-pooling",component:(()=>{var t;class e{constructor(r){this.firestore=r,this.data$=new K([]),this.nextPageAvailable=!0}ngOnInit(){this.load3CarPoolers()}load3CarPoolers(){this.firestore.collection("car-pooling",r=>r.limit(3).where("available","==","available")).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));3===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1,this.data$.next(i)})}loadOtherCarPoolers(){this.lastVisible&&this.firestore.collection("car-pooling",r=>r.limit(3).where("available","==","available").startAfter(this.lastVisible)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));if(i.length>0){const s=[...this.data$.getValue(),...i];this.data$.next(s),3===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}}return(t=e).\u0275fac=function(r){return new(r||t)(E(du))},t.\u0275cmp=Ke({type:t,selectors:[["app-car-pooling"]],decls:14,vars:4,consts:[[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","overflow-y","auto","padding-bottom","4rem"],[1,"up_bar",2,"width","100%","min-height","3.5rem","display","flex","flex-direction","row","align-items","center","justify-content","center"],[2,"width","100%","padding-left","1rem","font-size","1.6rem"],[1,"input1",2,"width","95%","margin-top","1rem","margin-bottom","1rem","min-height","2.5rem"],["type","text","id","","placeholder","Cerca",1,"field1"],["name","search",2,"color","rgb(190, 190, 190)","font-size","1.5rem","margin-left","0.5rem","margin-right","0.5rem"],["style","width: 100%; flex-direction: column; border-bottom: 1px solid rgba(255, 255, 255, 0.148); padding-left: 0.5rem; padding-bottom: 0.5rem; padding-top: 0.2rem;",4,"ngFor","ngForOf"],["class","button3",3,"click",4,"ngIf"],[1,"overflow1"],["id","spacer"],[2,"width","100%","flex-direction","column","border-bottom","1px solid rgba(255, 255, 255, 0.148)","padding-left","0.5rem","padding-bottom","0.5rem","padding-top","0.2rem"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","margin-top","0.5rem"],[1,"material-symbols-outlined","notranslate"],[2,"margin-top","0.2rem","margin-bottom","0.2rem"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","margin-top","0.2rem"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","padding-top","0.5rem","gap","0.5rem"],["target","_blank",1,"button2",2,"padding-left","-0.5rem","height","2rem","text-decoration","none","color","white",3,"href"],[1,"button3",3,"click"]],template:function(r,i){1&r&&(M(0,"body")(1,"div",0)(2,"div",1)(3,"strong",2),ye(4,"Car Pooling"),B()(),M(5,"div",3),Ne(6,"input",4)(7,"ion-icon",5),B(),ei(8,TIe,41,9,"div",6),Mf(9,"async"),ei(10,AIe,2,0,"button",7),B(),M(11,"div",8),Ne(12,"div",9)(13,"app-footer"),B()()),2&r&&(un(8),ur("ngForOf",Nf(9,2,i.data$)),un(2),ur("ngIf",i.nextPageAvailable))},dependencies:[cd,$f,Bl,Cu,Uf]}),e})()},{path:"spot",component:wIe},{path:"notifications",component:CIe},{path:"seeprofile",component:_W},{path:"seeprofile/:uid",component:_W}];let SIe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Uo({type:t}),t.\u0275inj=On({imports:[RS.forRoot(DIe,{preloadingStrategy:Jre}),RS]}),e})(),RIe=(()=>{var t;class e{constructor(r,i){this.afAuth=r,this.router=i}ngOnInit(){}logout(){this.afAuth.signOut().then(()=>{alert("Disconnesso con successo"),this.router.navigate(["/splash"])})}}return(t=e).\u0275fac=function(r){return new(r||t)(E(wa),E(hr))},t.\u0275cmp=Ke({type:t,selectors:[["app-sidebar"]],decls:32,vars:0,consts:[["side","start","contentId","main-content",1,"custom-sidebar"],[1,"sidebar-style"],[2,"width","100%","display","flex","flex-direction","column","align-items","center"],["src","assets\\img\\trasparent_logo.png",2,"width","80%","margin-top","2rem","margin-bottom","1rem"],[1,"sidebar-button",2,"margin-top","1rem"],["src","assets\\img\\mdi_map-marker.svg",2,"width","2rem","margin-left","1rem"],[2,"margin-left","0.5rem"],["src","assets\\img\\fa-brands_hubspot.svg",2,"width","2rem","margin-left","1rem"],["src","assets\\img\\solar_ticker-star-bold.svg",2,"width","2rem","margin-left","1rem"],["src","assets\\img\\material-symbols_event.svg",2,"width","2rem","margin-left","1rem"],["src","assets\\img\\material-symbols_bookmark.svg",2,"width","2rem","margin-left","1rem"],["src","assets\\img\\material-symbols_settings-rounded.svg",2,"width","2rem","margin-left","1rem"],[1,"sidebar-button",2,"margin-top","1rem","margin-bottom","2rem",3,"click"],["src","assets\\img\\solar_logout-2-bold.svg",2,"width","2rem"],[2,"color","red","margin-left","0.5rem"]],template:function(r,i){1&r&&(M(0,"ion-menu",0)(1,"div",1)(2,"div",2),Ne(3,"img",3),M(4,"button",4),Ne(5,"img",5),M(6,"p",6),ye(7,"Mappa"),B()(),M(8,"button",4),Ne(9,"img",7),M(10,"p",6),ye(11,"Spot"),B()(),M(12,"button",4),Ne(13,"img",8),M(14,"p",6),ye(15,"Biglietti"),B()(),M(16,"button",4),Ne(17,"img",9),M(18,"p",6),ye(19,"I miei eventi"),B()(),M(20,"button",4),Ne(21,"img",10),M(22,"p",6),ye(23,"Salvati"),B()(),M(24,"button",4),Ne(25,"img",11),M(26,"p",6),ye(27,"Impostazioni"),B()()(),M(28,"button",12),Ft("click",function(){return i.logout()}),Ne(29,"img",13),M(30,"p",14),ye(31,"Disconnettiti"),B()()()())},dependencies:[Ij]}),e})(),PIe=(()=>{var t;class e{constructor(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Ke({type:t,selectors:[["app-root"]],decls:2,vars:0,consts:[["id","main-content"]],template:function(r,i){1&r&&Ne(0,"app-sidebar")(1,"ion-router-outlet",0)},dependencies:[G_,RIe],styles:["ion-menu[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: var(--ion-item-background, var(--ion-background-color, #fff))}ion-menu.md[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--padding-top: 20px;--padding-bottom: 20px}ion-menu.md[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0}ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:30px}ion-menu.md[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:10px}ion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]{border-bottom:1px solid var(--ion-color-step-150, #d7d8da)}ion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:22px;font-weight:600;min-height:20px}ion-menu.md[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:16px;margin-bottom:18px;color:#757575;min-height:26px}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;border-radius:4px}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]{--background: rgba(var(--ion-color-primary-rgb), .14)}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#616e7e}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:500}ion-menu.ios[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 20px}ion-menu.ios[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0 0}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{line-height:24px;margin-bottom:20px}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--min-height: 50px}ion-menu.ios[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#73849a}ion-menu.ios[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{margin-bottom:8px}ion-menu.ios[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:8px}ion-note[_ngcontent-%COMP%]{display:inline-block;font-size:16px;color:var(--ion-color-medium-shade)}ion-item.selected[_ngcontent-%COMP%]{--color: var(--ion-color-primary)}"]}),e})(),xIe=(()=>{var t;class e{constructor(r){this.firebaseService=r,this.firebaseService.initialize()}}return(t=e).\u0275fac=function(r){return new(r||t)(Be(th))},t.\u0275mod=Uo({type:t,bootstrap:[PIe]}),t.\u0275inj=On({providers:[{provide:js,useClass:C2}],imports:[ute,jle.forRoot(),SIe,Oie.initializeApp(H$_firebaseConfig),jie,RS,Boe]}),e})();lte().bootstrapModule(xIe).catch(t=>console.log(t))},8996:(zn,Vt,le)=>{var y={"./ion-accordion_2.entry.js":[2375,2076,2375],"./ion-action-sheet.entry.js":[8814,2076,8814],"./ion-alert.entry.js":[5222,2076,5222],"./ion-app_8.entry.js":[7720,2076,7720],"./ion-avatar_3.entry.js":[1049,1049],"./ion-back-button.entry.js":[3162,2076,3162],"./ion-backdrop.entry.js":[7240,7240],"./ion-breadcrumb_2.entry.js":[8314,2076,8314],"./ion-button_2.entry.js":[4591,4591],"./ion-card_5.entry.js":[8584,8584],"./ion-checkbox.entry.js":[3511,2076,3511],"./ion-chip.entry.js":[6024,6024],"./ion-col_3.entry.js":[5100,5100],"./ion-datetime-button.entry.js":[7428,771,7428],"./ion-datetime_3.entry.js":[5266,771,2076,2885],"./ion-fab_3.entry.js":[4463,2076,4463],"./ion-img.entry.js":[4183,4183],"./ion-infinite-scroll_2.entry.js":[4171,2076,4171],"./ion-input.entry.js":[9344,2076,9344],"./ion-item-option_3.entry.js":[5949,2076,5949],"./ion-item_8.entry.js":[3506,2076,3506],"./ion-loading.entry.js":[7372,2076,7372],"./ion-menu_3.entry.js":[2075,2076,2075],"./ion-modal.entry.js":[441,2076,441],"./ion-nav_2.entry.js":[5712,2076,5712],"./ion-picker-column-internal.entry.js":[1433,2076,1433],"./ion-picker-internal.entry.js":[2628,2628],"./ion-popover.entry.js":[6433,2076,6433],"./ion-progress-bar.entry.js":[9977,9977],"./ion-radio_2.entry.js":[8066,2076,8066],"./ion-range.entry.js":[8477,2076,8477],"./ion-refresher_2.entry.js":[5197,2076,5197],"./ion-reorder_2.entry.js":[7030,2076,7030],"./ion-ripple-effect.entry.js":[964,964],"./ion-route_4.entry.js":[8970,8970],"./ion-searchbar.entry.js":[8193,2076,8193],"./ion-segment_2.entry.js":[2560,2076,2560],"./ion-select_3.entry.js":[7076,2076,7076],"./ion-spinner.entry.js":[8805,2076,8805],"./ion-split-pane.entry.js":[5887,5887],"./ion-tab-bar_2.entry.js":[4406,2076,4406],"./ion-tab_2.entry.js":[1102,1102],"./ion-text.entry.js":[1577,1577],"./ion-textarea.entry.js":[2348,2076,2348],"./ion-toast.entry.js":[2415,2076,2415],"./ion-toggle.entry.js":[3814,2076,3814]};function Le(G){if(!le.o(y,G))return Promise.resolve().then(()=>{var Ze=new Error("Cannot find module '"+G+"'");throw Ze.code="MODULE_NOT_FOUND",Ze});var We=y[G],Pt=We[0];return Promise.all(We.slice(1).map(le.e)).then(()=>le(Pt))}Le.keys=()=>Object.keys(y),Le.id=8996,zn.exports=Le},3345:(zn,Vt,le)=>{"use strict";le.d(Vt,{A:()=>be});var y=le(1076),Le=le(1362),G=le(7852),We=le(8041);class Pt{constructor(J,Q){this._delegate=J,this.firebase=Q,(0,G._addComponent)(J,new Le.uA("app-compat",()=>this,"PUBLIC")),this.container=J.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this._delegate.automaticDataCollectionEnabled=J}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(J=>{this._delegate.checkDestroyed(),J()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(J,Q=G._DEFAULT_ENTRY_NAME){var Z;this._delegate.checkDestroyed();const Fe=this._delegate.container.getProvider(J);return!Fe.isInitialized()&&"EXPLICIT"===(null===(Z=Fe.getComponent())||void 0===Z?void 0:Z.instantiationMode)&&Fe.initialize(),Fe.getImmediate({identifier:Q})}_removeServiceInstance(J,Q=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(J).clearInstance(Q)}_addComponent(J){(0,G._addComponent)(this._delegate,J)}_addOrOverwriteComponent(J){(0,G._addOrOverwriteComponent)(this._delegate,J)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const q=new y.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ne=function ot(){const Pe=function Je(Pe){const J={},Q={__esModule:!0,initializeApp:function ke(P,k={}){const D=G.initializeApp(P,k);if((0,y.gR)(J,D.name))return J[D.name];const U=new Pe(D,Q);return J[D.name]=U,U},app:Fe,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function Oe(P){const k=P.name,D=k.replace("-compat","");if(G._registerComponent(P)&&"PUBLIC"===P.type){const U=(ee=Fe())=>{if("function"!=typeof ee[D])throw q.create("invalid-app-argument",{appName:k});return ee[D]()};void 0!==P.serviceProps&&(0,y.zw)(U,P.serviceProps),Q[D]=U,Pe.prototype[D]=function(...ee){return this._getService.bind(this,k).apply(this,P.multipleInstances?ee:[])}}return"PUBLIC"===P.type?Q[D]:null},removeApp:function Z(P){delete J[P]},useAsService:function nt(P,k){return"serverAuth"===k?null:k},modularAPIs:G}};function Fe(P){if(!(0,y.gR)(J,P=P||G._DEFAULT_ENTRY_NAME))throw q.create("no-app",{appName:P});return J[P]}return Q.default=Q,Object.defineProperty(Q,"apps",{get:function ze(){return Object.keys(J).map(P=>J[P])}}),Fe.App=Pe,Q}(Pt);return Pe.INTERNAL=Object.assign(Object.assign({},Pe.INTERNAL),{createFirebaseNamespace:ot,extendNamespace:function J(Q){(0,y.zw)(Pe,Q)},createSubscribe:y.tD,ErrorFactory:y.FA,deepExtend:y.zw}),Pe}(),X=new We.Vy("@firebase/app-compat");if((0,y.Bd)()&&void 0!==self.firebase){X.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pe=self.firebase.SDK_VERSION;Pe&&Pe.indexOf("LITE")>=0&&X.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=ne;!function Ie(Pe){(0,G.registerVersion)("@firebase/app-compat","0.2.29",Pe)}()},7852:(zn,Vt,le)=>{"use strict";le.r(Vt),le.d(Vt,{FirebaseError:()=>We.g,SDK_VERSION:()=>Hi,_DEFAULT_ENTRY_NAME:()=>Kt,_addComponent:()=>Ci,_addOrOverwriteComponent:()=>Fr,_apps:()=>Nn,_clearComponents:()=>_i,_components:()=>Hr,_getProvider:()=>bi,_registerComponent:()=>no,_removeServiceInstance:()=>ji,deleteApp:()=>Ti,getApp:()=>rs,getApps:()=>Ts,initializeApp:()=>ns,onLog:()=>$o,registerVersion:()=>Bo,setLogLevel:()=>$n});var y=le(467),Le=le(1362),G=le(8041),We=le(1076);const Pt=(Ee,se)=>se.some(Ve=>Ee instanceof Ve);let Ze,q;const ne=new WeakMap,X=new WeakMap,we=new WeakMap,ue=new WeakMap,Ie=new WeakMap;let J={get(Ee,se,Ve){if(Ee instanceof IDBTransaction){if("done"===se)return X.get(Ee);if("objectStoreNames"===se)return Ee.objectStoreNames||we.get(Ee);if("store"===se)return Ve.objectStoreNames[1]?void 0:Ve.objectStore(Ve.objectStoreNames[0])}return ke(Ee[se])},set:(Ee,se,Ve)=>(Ee[se]=Ve,!0),has:(Ee,se)=>Ee instanceof IDBTransaction&&("done"===se||"store"===se)||se in Ee};function Fe(Ee){return"function"==typeof Ee?function Z(Ee){return Ee!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ot(){return q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ee)?function(...se){return Ee.apply(ze(this),se),ke(ne.get(this))}:function(...se){return ke(Ee.apply(ze(this),se))}:function(se,...Ve){const _t=Ee.call(ze(this),se,...Ve);return we.set(_t,se.sort?se.sort():[se]),ke(_t)}}(Ee):(Ee instanceof IDBTransaction&&function Pe(Ee){if(X.has(Ee))return;const se=new Promise((Ve,_t)=>{const Ht=()=>{Ee.removeEventListener("complete",Ot),Ee.removeEventListener("error",sn),Ee.removeEventListener("abort",sn)},Ot=()=>{Ve(),Ht()},sn=()=>{_t(Ee.error||new DOMException("AbortError","AbortError")),Ht()};Ee.addEventListener("complete",Ot),Ee.addEventListener("error",sn),Ee.addEventListener("abort",sn)});X.set(Ee,se)}(Ee),Pt(Ee,function Je(){return Ze||(Ze=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ee,J):Ee)}function ke(Ee){if(Ee instanceof IDBRequest)return function be(Ee){const se=new Promise((Ve,_t)=>{const Ht=()=>{Ee.removeEventListener("success",Ot),Ee.removeEventListener("error",sn)},Ot=()=>{Ve(ke(Ee.result)),Ht()},sn=()=>{_t(Ee.error),Ht()};Ee.addEventListener("success",Ot),Ee.addEventListener("error",sn)});return se.then(Ve=>{Ve instanceof IDBCursor&&ne.set(Ve,Ee)}).catch(()=>{}),Ie.set(se,Ee),se}(Ee);if(ue.has(Ee))return ue.get(Ee);const se=Fe(Ee);return se!==Ee&&(ue.set(Ee,se),Ie.set(se,Ee)),se}const ze=Ee=>Ie.get(Ee),P=["get","getKey","getAll","getAllKeys","count"],k=["put","add","delete","clear"],D=new Map;function U(Ee,se){if(!(Ee instanceof IDBDatabase)||se in Ee||"string"!=typeof se)return;if(D.get(se))return D.get(se);const Ve=se.replace(/FromIndex$/,""),_t=se!==Ve,Ht=k.includes(Ve);if(!(Ve in(_t?IDBIndex:IDBObjectStore).prototype)||!Ht&&!P.includes(Ve))return;const Ot=function(){var sn=(0,y.A)(function*(pr,...Un){const Yn=this.transaction(pr,Ht?"readwrite":"readonly");let is=Yn.store;return _t&&(is=is.index(Un.shift())),(yield Promise.all([is[Ve](...Un),Ht&&Yn.done]))[0]});return function(Un){return sn.apply(this,arguments)}}();return D.set(se,Ot),Ot}!function Q(Ee){J=Ee(J)}(Ee=>({...Ee,get:(se,Ve,_t)=>U(se,Ve)||Ee.get(se,Ve,_t),has:(se,Ve)=>!!U(se,Ve)||Ee.has(se,Ve)}));class ee{constructor(se){this.container=se}getPlatformInfoString(){return this.container.getProviders().map(Ve=>{if(function re(Ee){const se=Ee.getComponent();return"VERSION"===(null==se?void 0:se.type)}(Ve)){const _t=Ve.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(Ve=>Ve).join(" ")}}const fe="@firebase/app",Dt=new G.Vy("@firebase/app"),Kt="[DEFAULT]",cr={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Nn=new Map,Hr=new Map;function Ci(Ee,se){try{Ee.container.addComponent(se)}catch(Ve){Dt.debug(`Component ${se.name} failed to register with FirebaseApp ${Ee.name}`,Ve)}}function Fr(Ee,se){Ee.container.addOrOverwriteComponent(se)}function no(Ee){const se=Ee.name;if(Hr.has(se))return Dt.debug(`There were multiple attempts to register component ${se}.`),!1;Hr.set(se,Ee);for(const Ve of Nn.values())Ci(Ve,Ee);return!0}function bi(Ee,se){const Ve=Ee.container.getProvider("heartbeat").getImmediate({optional:!0});return Ve&&Ve.triggerHeartbeat(),Ee.container.getProvider(se)}function ji(Ee,se,Ve=Kt){bi(Ee,se).clearInstance(Ve)}function _i(){Hr.clear()}const Yr=new We.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Bn{constructor(se,Ve,_t){this._isDeleted=!1,this._options=Object.assign({},se),this._config=Object.assign({},Ve),this._name=Ve.name,this._automaticDataCollectionEnabled=Ve.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new Le.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(se){this.checkDestroyed(),this._automaticDataCollectionEnabled=se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(se){this._isDeleted=se}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}const Hi="10.9.0";function ns(Ee,se={}){let Ve=Ee;"object"!=typeof se&&(se={name:se});const _t=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},se),Ht=_t.name;if("string"!=typeof Ht||!Ht)throw Yr.create("bad-app-name",{appName:String(Ht)});if(Ve||(Ve=(0,We.T9)()),!Ve)throw Yr.create("no-options");const Ot=Nn.get(Ht);if(Ot){if((0,We.bD)(Ve,Ot.options)&&(0,We.bD)(_t,Ot.config))return Ot;throw Yr.create("duplicate-app",{appName:Ht})}const sn=new Le.h1(Ht);for(const Un of Hr.values())sn.addComponent(Un);const pr=new Bn(Ve,_t,sn);return Nn.set(Ht,pr),pr}function rs(Ee=Kt){const se=Nn.get(Ee);if(!se&&Ee===Kt&&(0,We.T9)())return ns();if(!se)throw Yr.create("no-app",{appName:Ee});return se}function Ts(){return Array.from(Nn.values())}function Ti(Ee){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,y.A)(function*(Ee){const se=Ee.name;Nn.has(se)&&(Nn.delete(se),yield Promise.all(Ee.container.getProviders().map(Ve=>Ve.delete())),Ee.isDeleted=!0)})).apply(this,arguments)}function Bo(Ee,se,Ve){var _t;let Ht=null!==(_t=cr[Ee])&&void 0!==_t?_t:Ee;Ve&&(Ht+=`-${Ve}`);const Ot=Ht.match(/\s|\//),sn=se.match(/\s|\//);if(Ot||sn){const pr=[`Unable to register library "${Ht}" with version "${se}":`];return Ot&&pr.push(`library name "${Ht}" contains illegal characters (whitespace or "/")`),Ot&&sn&&pr.push("and"),sn&&pr.push(`version name "${se}" contains illegal characters (whitespace or "/")`),void Dt.warn(pr.join(" "))}no(new Le.uA(`${Ht}-version`,()=>({library:Ht,version:se}),"VERSION"))}function $o(Ee,se){if(null!==Ee&&"function"!=typeof Ee)throw Yr.create("invalid-log-argument");(0,G.Ey)(Ee,se)}function $n(Ee){(0,G.He)(Ee)}const As="firebase-heartbeat-database",Xs=1,V="firebase-heartbeat-store";let x=null;function $(){return x||(x=function Oe(Ee,se,{blocked:Ve,upgrade:_t,blocking:Ht,terminated:Ot}={}){const sn=indexedDB.open(Ee,se),pr=ke(sn);return _t&&sn.addEventListener("upgradeneeded",Un=>{_t(ke(sn.result),Un.oldVersion,Un.newVersion,ke(sn.transaction),Un)}),Ve&&sn.addEventListener("blocked",Un=>Ve(Un.oldVersion,Un.newVersion,Un)),pr.then(Un=>{Ot&&Un.addEventListener("close",()=>Ot()),Ht&&Un.addEventListener("versionchange",Yn=>Ht(Yn.oldVersion,Yn.newVersion,Yn))}).catch(()=>{}),pr}(As,Xs,{upgrade:(Ee,se)=>{if(0===se)try{Ee.createObjectStore(V)}catch(Ve){console.warn(Ve)}}}).catch(Ee=>{throw Yr.create("idb-open",{originalErrorMessage:Ee.message})})),x}function K(){return(K=(0,y.A)(function*(Ee){try{const Ve=(yield $()).transaction(V),_t=yield Ve.objectStore(V).get(kt(Ee));return yield Ve.done,_t}catch(se){if(se instanceof We.g)Dt.warn(se.message);else{const Ve=Yr.create("idb-get",{originalErrorMessage:null==se?void 0:se.message});Dt.warn(Ve.message)}}})).apply(this,arguments)}function ut(Ee,se){return bt.apply(this,arguments)}function bt(){return(bt=(0,y.A)(function*(Ee,se){try{const _t=(yield $()).transaction(V,"readwrite");yield _t.objectStore(V).put(se,kt(Ee)),yield _t.done}catch(Ve){if(Ve instanceof We.g)Dt.warn(Ve.message);else{const _t=Yr.create("idb-set",{originalErrorMessage:null==Ve?void 0:Ve.message});Dt.warn(_t.message)}}})).apply(this,arguments)}function kt(Ee){return`${Ee.name}!${Ee.options.appId}`}class Lr{constructor(se){this.container=se,this._heartbeatsCache=null;const Ve=this.container.getProvider("app").getImmediate();this._storage=new ai(Ve),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var se=this;return(0,y.A)(function*(){var Ve,_t;const Ot=se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),sn=rn();if((null!=(null===(Ve=se._heartbeatsCache)||void 0===Ve?void 0:Ve.heartbeats)||(se._heartbeatsCache=yield se._heartbeatsCachePromise,null!=(null===(_t=se._heartbeatsCache)||void 0===_t?void 0:_t.heartbeats)))&&se._heartbeatsCache.lastSentHeartbeatDate!==sn&&!se._heartbeatsCache.heartbeats.some(pr=>pr.date===sn))return se._heartbeatsCache.heartbeats.push({date:sn,agent:Ot}),se._heartbeatsCache.heartbeats=se._heartbeatsCache.heartbeats.filter(pr=>{const Un=new Date(pr.date).valueOf();return Date.now()-Un<=2592e6}),se._storage.overwrite(se._heartbeatsCache)})()}getHeartbeatsHeader(){var se=this;return(0,y.A)(function*(){var Ve;if(null===se._heartbeatsCache&&(yield se._heartbeatsCachePromise),null==(null===(Ve=se._heartbeatsCache)||void 0===Ve?void 0:Ve.heartbeats)||0===se._heartbeatsCache.heartbeats.length)return"";const _t=rn(),{heartbeatsToSend:Ht,unsentEntries:Ot}=function Se(Ee,se=1024){const Ve=[];let _t=Ee.slice();for(const Ht of Ee){const Ot=Ve.find(sn=>sn.agent===Ht.agent);if(Ot){if(Ot.dates.push(Ht.date),zi(Ve)>se){Ot.dates.pop();break}}else if(Ve.push({agent:Ht.agent,dates:[Ht.date]}),zi(Ve)>se){Ve.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:Ve,unsentEntries:_t}}(se._heartbeatsCache.heartbeats),sn=(0,We.Uj)(JSON.stringify({version:2,heartbeats:Ht}));return se._heartbeatsCache.lastSentHeartbeatDate=_t,Ot.length>0?(se._heartbeatsCache.heartbeats=Ot,yield se._storage.overwrite(se._heartbeatsCache)):(se._heartbeatsCache.heartbeats=[],se._storage.overwrite(se._heartbeatsCache)),sn})()}}function rn(){return(new Date).toISOString().substring(0,10)}class ai{constructor(se){this.app=se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.A)(function*(){return!!(0,We.zW)()&&(0,We.eX)().then(()=>!0).catch(()=>!1)})()}read(){var se=this;return(0,y.A)(function*(){if(yield se._canUseIndexedDBPromise){const _t=yield function Ce(Ee){return K.apply(this,arguments)}(se.app);return null!=_t&&_t.heartbeats?_t:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(se){var Ve=this;return(0,y.A)(function*(){var _t;if(yield Ve._canUseIndexedDBPromise){const Ot=yield Ve.read();return ut(Ve.app,{lastSentHeartbeatDate:null!==(_t=se.lastSentHeartbeatDate)&&void 0!==_t?_t:Ot.lastSentHeartbeatDate,heartbeats:se.heartbeats})}})()}add(se){var Ve=this;return(0,y.A)(function*(){var _t;if(yield Ve._canUseIndexedDBPromise){const Ot=yield Ve.read();return ut(Ve.app,{lastSentHeartbeatDate:null!==(_t=se.lastSentHeartbeatDate)&&void 0!==_t?_t:Ot.lastSentHeartbeatDate,heartbeats:[...Ot.heartbeats,...se.heartbeats]})}})()}}function zi(Ee){return(0,We.Uj)(JSON.stringify({version:2,heartbeats:Ee})).length}!function Ds(Ee){no(new Le.uA("platform-logger",se=>new ee(se),"PRIVATE")),no(new Le.uA("heartbeat",se=>new Lr(se),"PRIVATE")),Bo(fe,"0.9.29",Ee),Bo(fe,"0.9.29","esm2017"),Bo("fire-js","")}("")},1362:(zn,Vt,le)=>{"use strict";le.d(Vt,{Kq:()=>Pt,h1:()=>Je,uA:()=>G});var y=le(467),Le=le(1076);class G{constructor(ne,X,we){this.name=ne,this.instanceFactory=X,this.type=we,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ne){return this.instantiationMode=ne,this}setMultipleInstances(ne){return this.multipleInstances=ne,this}setServiceProps(ne){return this.serviceProps=ne,this}setInstanceCreatedCallback(ne){return this.onInstanceCreated=ne,this}}const We="[DEFAULT]";class Pt{constructor(ne,X){this.name=ne,this.container=X,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ne){const X=this.normalizeInstanceIdentifier(ne);if(!this.instancesDeferred.has(X)){const we=new Le.cY;if(this.instancesDeferred.set(X,we),this.isInitialized(X)||this.shouldAutoInitialize())try{const ue=this.getOrInitializeService({instanceIdentifier:X});ue&&we.resolve(ue)}catch{}}return this.instancesDeferred.get(X).promise}getImmediate(ne){var X;const we=this.normalizeInstanceIdentifier(null==ne?void 0:ne.identifier),ue=null!==(X=null==ne?void 0:ne.optional)&&void 0!==X&&X;if(!this.isInitialized(we)&&!this.shouldAutoInitialize()){if(ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:we})}catch(Ie){if(ue)return null;throw Ie}}getComponent(){return this.component}setComponent(ne){if(ne.name!==this.name)throw Error(`Mismatching Component ${ne.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ne,this.shouldAutoInitialize()){if(function q(ot){return"EAGER"===ot.instantiationMode}(ne))try{this.getOrInitializeService({instanceIdentifier:We})}catch{}for(const[X,we]of this.instancesDeferred.entries()){const ue=this.normalizeInstanceIdentifier(X);try{const Ie=this.getOrInitializeService({instanceIdentifier:ue});we.resolve(Ie)}catch{}}}}clearInstance(ne=We){this.instancesDeferred.delete(ne),this.instancesOptions.delete(ne),this.instances.delete(ne)}delete(){var ne=this;return(0,y.A)(function*(){const X=Array.from(ne.instances.values());yield Promise.all([...X.filter(we=>"INTERNAL"in we).map(we=>we.INTERNAL.delete()),...X.filter(we=>"_delete"in we).map(we=>we._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ne=We){return this.instances.has(ne)}getOptions(ne=We){return this.instancesOptions.get(ne)||{}}initialize(ne={}){const{options:X={}}=ne,we=this.normalizeInstanceIdentifier(ne.instanceIdentifier);if(this.isInitialized(we))throw Error(`${this.name}(${we}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ue=this.getOrInitializeService({instanceIdentifier:we,options:X});for(const[Ie,be]of this.instancesDeferred.entries())we===this.normalizeInstanceIdentifier(Ie)&&be.resolve(ue);return ue}onInit(ne,X){var we;const ue=this.normalizeInstanceIdentifier(X),Ie=null!==(we=this.onInitCallbacks.get(ue))&&void 0!==we?we:new Set;Ie.add(ne),this.onInitCallbacks.set(ue,Ie);const be=this.instances.get(ue);return be&&ne(be,ue),()=>{Ie.delete(ne)}}invokeOnInitCallbacks(ne,X){const we=this.onInitCallbacks.get(X);if(we)for(const ue of we)try{ue(ne,X)}catch{}}getOrInitializeService({instanceIdentifier:ne,options:X={}}){let we=this.instances.get(ne);if(!we&&this.component&&(we=this.component.instanceFactory(this.container,{instanceIdentifier:(ot=ne,ot===We?void 0:ot),options:X}),this.instances.set(ne,we),this.instancesOptions.set(ne,X),this.invokeOnInitCallbacks(we,ne),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ne,we)}catch{}var ot;return we||null}normalizeInstanceIdentifier(ne=We){return this.component?this.component.multipleInstances?ne:We:ne}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Je{constructor(ne){this.name=ne,this.providers=new Map}addComponent(ne){const X=this.getProvider(ne.name);if(X.isComponentSet())throw new Error(`Component ${ne.name} has already been registered with ${this.name}`);X.setComponent(ne)}addOrOverwriteComponent(ne){this.getProvider(ne.name).isComponentSet()&&this.providers.delete(ne.name),this.addComponent(ne)}getProvider(ne){if(this.providers.has(ne))return this.providers.get(ne);const X=new Pt(ne,this);return this.providers.set(ne,X),X}getProviders(){return Array.from(this.providers.values())}}},8041:(zn,Vt,le)=>{"use strict";le.d(Vt,{$b:()=>Le,Ey:()=>ot,He:()=>Je,Vy:()=>q});const y=[];var Le=function(ne){return ne[ne.DEBUG=0]="DEBUG",ne[ne.VERBOSE=1]="VERBOSE",ne[ne.INFO=2]="INFO",ne[ne.WARN=3]="WARN",ne[ne.ERROR=4]="ERROR",ne[ne.SILENT=5]="SILENT",ne}(Le||{});const G={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},We=Le.INFO,Pt={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},Ze=(ne,X,...we)=>{if(X<ne.logLevel)return;const ue=(new Date).toISOString(),Ie=Pt[X];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${X})`);console[Ie](`[${ue}]  ${ne.name}:`,...we)};class q{constructor(X){this.name=X,this._logLevel=We,this._logHandler=Ze,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(X){if(!(X in Le))throw new TypeError(`Invalid value "${X}" assigned to \`logLevel\``);this._logLevel=X}setLogLevel(X){this._logLevel="string"==typeof X?G[X]:X}get logHandler(){return this._logHandler}set logHandler(X){if("function"!=typeof X)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=X}get userLogHandler(){return this._userLogHandler}set userLogHandler(X){this._userLogHandler=X}debug(...X){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...X),this._logHandler(this,Le.DEBUG,...X)}log(...X){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...X),this._logHandler(this,Le.VERBOSE,...X)}info(...X){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...X),this._logHandler(this,Le.INFO,...X)}warn(...X){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...X),this._logHandler(this,Le.WARN,...X)}error(...X){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...X),this._logHandler(this,Le.ERROR,...X)}}function Je(ne){y.forEach(X=>{X.setLogLevel(ne)})}function ot(ne,X){for(const we of y){let ue=null;X&&X.level&&(ue=G[X.level]),we.userLogHandler=null===ne?null:(Ie,be,...Pe)=>{const J=Pe.map(Q=>{if(null==Q)return null;if("string"==typeof Q)return Q;if("number"==typeof Q||"boolean"==typeof Q)return Q.toString();if(Q instanceof Error)return Q.message;try{return JSON.stringify(Q)}catch{return null}}).filter(Q=>Q).join(" ");be>=(null!=ue?ue:Ie.logLevel)&&ne({level:Le[be].toLowerCase(),message:J,args:Pe,type:Ie.name})}}}},6020:(zn,Vt,le)=>{"use strict";le.r(Vt);var y=le(467),Le=le(3345),G=le(1076),We=le(7852),Pt=le(8041),Ze=le(1635),q=le(1362);const ot={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const be=function ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Pe=function Ie(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},J=new G.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Z=new Pt.Vy("@firebase/auth");function ke(f,...u){Z.logLevel<=Pt.$b.ERROR&&Z.error(`Auth (${We.SDK_VERSION}): ${f}`,...u)}function ze(f,...u){throw k(f,...u)}function Oe(f,...u){return k(f,...u)}function nt(f,u,d){const g=Object.assign(Object.assign({},Pe()),{[u]:d});return new G.FA("auth","Firebase",g).create(u,{appName:f.name})}function P(f,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&ze(f,"argument-error"),nt(f,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function k(f,...u){if("string"!=typeof f){const d=u[0],g=[...u.slice(1)];return g[0]&&(g[0].appName=f.name),f._errorFactory.create(d,...g)}return J.create(f,...u)}function D(f,u,...d){if(!f)throw k(u,...d)}function U(f){const u="INTERNAL ASSERTION FAILED: "+f;throw ke(u),new Error(u)}function ee(f,u){f||U(u)}function re(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function fe(){return"http:"===et()||"https:"===et()}function et(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Te{constructor(u,d){this.shortDelay=u,this.longDelay=d,ee(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,G.jZ)()||(0,G.lV)()}get(){return function Dt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(fe()||(0,G.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function F(f,u){ee(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class R{static initialize(u,d,g){this.fetchImpl=u,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void U("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void U("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void U("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const N={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},W=new Te(3e4,6e4);function ae(f,u){return f.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:f.tenantId}):u}function Y(f,u,d,g){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,y.A)(function*(f,u,d,g,v={}){return dt(f,v,(0,y.A)(function*(){let C={},O={};g&&("GET"===u?O=g:C={body:JSON.stringify(g)});const te=(0,G.Am)(Object.assign({key:f.config.apiKey},O)).slice(1),Me=yield f._getAdditionalHeaders();return Me["Content-Type"]="application/json",f.languageCode&&(Me["X-Firebase-Locale"]=f.languageCode),R.fetch()(pn(f,f.config.apiHost,d,te),Object.assign({method:u,headers:Me,referrerPolicy:"no-referrer"},C))}))})).apply(this,arguments)}function dt(f,u,d){return rt.apply(this,arguments)}function rt(){return(rt=(0,y.A)(function*(f,u,d){f._canInitEmulator=!1;const g=Object.assign(Object.assign({},N),u);try{const v=new cn(f),C=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const O=yield C.json();if("needConfirmation"in O)throw jt(f,"account-exists-with-different-credential",O);if(C.ok&&!("errorMessage"in O))return O;{const te=C.ok?O.errorMessage:O.error.message,[Me,pt]=te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Me)throw jt(f,"credential-already-in-use",O);if("EMAIL_EXISTS"===Me)throw jt(f,"email-already-in-use",O);if("USER_DISABLED"===Me)throw jt(f,"user-disabled",O);const Rt=g[Me]||Me.toLowerCase().replace(/[_\s]+/g,"-");if(pt)throw nt(f,Rt,pt);ze(f,Rt)}}catch(v){if(v instanceof G.g)throw v;ze(f,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function ft(f,u,d,g){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,y.A)(function*(f,u,d,g,v={}){const C=yield Y(f,u,d,g,v);return"mfaPendingCredential"in C&&ze(f,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function pn(f,u,d,g){const v=`${u}${d}?${g}`;return f.config.emulator?F(f.config,v):`${f.config.apiScheme}://${v}`}function wt(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cn{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(Oe(this.auth,"network-request-failed")),W.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jt(f,u,d){const g={appName:f.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=Oe(f,u,g);return v.customData._tokenResponse=d,v}function Ae(f){return void 0!==f&&void 0!==f.getResponse}function ce(f){return void 0!==f&&void 0!==f.enterprise}class _e{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return wt(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function Wt(){return(Wt=(0,y.A)(function*(f){return(yield Y(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function gn(f,u){return en.apply(this,arguments)}function en(){return(en=(0,y.A)(function*(f,u){return Y(f,"GET","/v2/recaptchaConfig",ae(f,u))})).apply(this,arguments)}function Kt(){return(Kt=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function Nn(){return(Nn=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Ci(){return(Ci=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function Fr(f){if(f)try{const u=new Date(Number(f));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function ji(){return(ji=(0,y.A)(function*(f,u=!1){const d=(0,G.Ku)(f),g=yield d.getIdToken(u),v=oi(g);D(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const C="object"==typeof v.firebase?v.firebase:void 0,O=null==C?void 0:C.sign_in_provider;return{claims:v,token:g,authTime:Fr(_i(v.auth_time)),issuedAtTime:Fr(_i(v.iat)),expirationTime:Fr(_i(v.exp)),signInProvider:O||null,signInSecondFactor:(null==C?void 0:C.sign_in_second_factor)||null}})).apply(this,arguments)}function _i(f){return 1e3*Number(f)}function oi(f){const[u,d,g]=f.split(".");if(void 0===u||void 0===d||void 0===g)return ke("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,G.u)(d);return v?JSON.parse(v):(ke("Failed to decode base64 JWT payload"),null)}catch(v){return ke("Caught error parsing JWT payload as JSON",null==v?void 0:v.toString()),null}}function Bn(f,u){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,y.A)(function*(f,u,d=!1){if(d)return u;try{return yield u}catch(g){throw g instanceof G.g&&function ns({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(g)&&f.auth.currentUser===f&&(yield f.auth.signOut()),g}})).apply(this,arguments)}class rs{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(u);this.timerId=setTimeout((0,y.A)(function*(){yield d.iteration()}),g)}iteration(){var u=this;return(0,y.A)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===(null==d?void 0:d.code)&&u.schedule(!0))}u.schedule()})()}}class Ts{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fr(this.lastLoginAt),this.creationTime=Fr(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ti(f){return Cr.apply(this,arguments)}function Cr(){return Cr=(0,y.A)(function*(f){var u;const d=f.auth,g=yield f.getIdToken(),v=yield Bn(f,function Hr(f,u){return Ci.apply(this,arguments)}(d,{idToken:g}));D(null==v?void 0:v.users.length,d,"internal-error");const C=v.users[0];f._notifyReloadListener(C);const O=null!==(u=C.providerUserInfo)&&void 0!==u&&u.length?function As(f){return f.map(u=>{var{providerId:d}=u,g=(0,Ze.Tt)(u,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}(C.providerUserInfo):[],te=function $n(f,u){return[...f.filter(g=>!u.some(v=>v.providerId===g.providerId)),...u]}(f.providerData,O),Rt=!!f.isAnonymous&&!(f.email&&C.passwordHash||null!=te&&te.length),tt={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:te,metadata:new Ts(C.createdAt,C.lastLoginAt),isAnonymous:Rt};Object.assign(f,tt)}),Cr.apply(this,arguments)}function $o(){return($o=(0,y.A)(function*(f){const u=(0,G.Ku)(f);yield Ti(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function V(){return(V=(0,y.A)(function*(f,u){const d=yield dt(f,{},(0,y.A)(function*(){const g=(0,G.Am)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:v,apiKey:C}=f.config,O=pn(f,v,"/v1/token",`key=${C}`),te=yield f._getAdditionalHeaders();return te["Content-Type"]="application/x-www-form-urlencoded",R.fetch()(O,{method:"POST",headers:te,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function $(){return($=(0,y.A)(function*(f,u){return Y(f,"POST","/v2/accounts:revokeToken",ae(f,u))})).apply(this,arguments)}class Ce{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){D(u.idToken,"internal-error"),D(typeof u.idToken<"u","internal-error"),D(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):function Yr(f){const u=oi(f);return D(u,"internal-error"),D(typeof u.exp<"u","internal-error"),D(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}getToken(u,d=!1){var g=this;return(0,y.A)(function*(){return D(!g.accessToken||g.refreshToken,u,"user-token-expired"),d||!g.accessToken||g.isExpired?g.refreshToken?(yield g.refresh(u,g.refreshToken),g.accessToken):null:g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var g=this;return(0,y.A)(function*(){const{accessToken:v,refreshToken:C,expiresIn:O}=yield function Xs(f,u){return V.apply(this,arguments)}(u,d);g.updateTokensAndExpiration(v,C,Number(O))})()}updateTokensAndExpiration(u,d,g){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(u,d){const{refreshToken:g,accessToken:v,expirationTime:C}=d,O=new Ce;return g&&(D("string"==typeof g,"internal-error",{appName:u}),O.refreshToken=g),v&&(D("string"==typeof v,"internal-error",{appName:u}),O.accessToken=v),C&&(D("number"==typeof C,"internal-error",{appName:u}),O.expirationTime=C),O}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new Ce,this.toJSON())}_performRefresh(){return U("not implemented")}}function K(f,u){D("string"==typeof f||typeof f>"u","internal-error",{appName:u})}class ut{constructor(u){var{uid:d,auth:g,stsTokenManager:v}=u,C=(0,Ze.Tt)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new Ts(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,y.A)(function*(){const g=yield Bn(d,d.stsTokenManager.getToken(d.auth,u));return D(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(u){return function bi(f){return ji.apply(this,arguments)}(this,u)}reload(){return function Bo(f){return $o.apply(this,arguments)}(this)}_assign(u){this!==u&&(D(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new ut(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){D(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var g=this;return(0,y.A)(function*(){let v=!1;u.idToken&&u.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(u),v=!0),d&&(yield Ti(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var u=this;return(0,y.A)(function*(){const d=yield u.getIdToken();return yield Bn(u,function Cn(f,u){return Kt.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var g,v,C,O,te,Me,pt,Rt;const tt=null!==(g=d.displayName)&&void 0!==g?g:void 0,xr=null!==(v=d.email)&&void 0!==v?v:void 0,Ho=null!==(C=d.phoneNumber)&&void 0!==C?C:void 0,pm=null!==(O=d.photoURL)&&void 0!==O?O:void 0,Xh=null!==(te=d.tenantId)&&void 0!==te?te:void 0,zo=null!==(Me=d._redirectEventId)&&void 0!==Me?Me:void 0,gm=null!==(pt=d.createdAt)&&void 0!==pt?pt:void 0,Tl=null!==(Rt=d.lastLoginAt)&&void 0!==Rt?Rt:void 0,{uid:mm,emailVerified:GI,isAnonymous:_m,providerData:WI,stsTokenManager:dT}=d;D(mm&&dT,u,"internal-error");const pN=Ce.fromJSON(this.name,dT);D("string"==typeof mm,u,"internal-error"),K(tt,u.name),K(xr,u.name),D("boolean"==typeof GI,u,"internal-error"),D("boolean"==typeof _m,u,"internal-error"),K(Ho,u.name),K(pm,u.name),K(Xh,u.name),K(zo,u.name),K(gm,u.name),K(Tl,u.name);const qI=new ut({uid:mm,auth:u,email:xr,emailVerified:GI,displayName:tt,isAnonymous:_m,photoURL:pm,phoneNumber:Ho,tenantId:Xh,stsTokenManager:pN,createdAt:gm,lastLoginAt:Tl});return WI&&Array.isArray(WI)&&(qI.providerData=WI.map(gN=>Object.assign({},gN))),zo&&(qI._redirectEventId=zo),qI}static _fromIdTokenResponse(u,d,g=!1){return(0,y.A)(function*(){const v=new Ce;v.updateFromServerResponse(d);const C=new ut({uid:d.localId,auth:u,stsTokenManager:v,isAnonymous:g});return yield Ti(C),C})()}}const bt=new Map;function kt(f){ee(f instanceof Function,"Expected a class definition");let u=bt.get(f);return u?(ee(u instanceof f,"Instance stored in cache mismatched with class"),u):(u=new f,bt.set(f,u),u)}const Et=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.A)(function*(){return!0})()}_set(d,g){var v=this;return(0,y.A)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,y.A)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,y.A)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return f.type="NONE",f})();function Lr(f,u,d){return`firebase:${f}:${u}:${d}`}class rn{constructor(u,d,g){this.persistence=u,this.auth=d,this.userKey=g;const{config:v,name:C}=this.auth;this.fullUserKey=Lr(this.userKey,v.apiKey,C),this.fullPersistenceKey=Lr("persistence",v.apiKey,C),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,y.A)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?ut._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,y.A)(function*(){if(d.persistence===u)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,g="authUser"){return(0,y.A)(function*(){if(!d.length)return new rn(kt(Et),u,g);const v=(yield Promise.all(d.map(function(){var pt=(0,y.A)(function*(Rt){if(yield Rt._isAvailable())return Rt});return function(Rt){return pt.apply(this,arguments)}}()))).filter(pt=>pt);let C=v[0]||kt(Et);const O=Lr(g,u.config.apiKey,u.name);let te=null;for(const pt of d)try{const Rt=yield pt._get(O);if(Rt){const tt=ut._fromJSON(u,Rt);pt!==C&&(te=tt),C=pt;break}}catch{}const Me=v.filter(pt=>pt._shouldAllowMigration);return C._shouldAllowMigration&&Me.length?(C=Me[0],te&&(yield C._set(O,te.toJSON())),yield Promise.all(d.map(function(){var pt=(0,y.A)(function*(Rt){if(Rt!==C)try{yield Rt._remove(O)}catch{}});return function(Rt){return pt.apply(this,arguments)}}())),new rn(C,u,g)):new rn(C,u,g)})()}}function Se(f){const u=f.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(Ee(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(ai(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(Ve(u))return"Blackberry";if(_t(u))return"Webos";if(zi(u))return"Safari";if((u.includes("chrome/")||Ds(u))&&!u.includes("edge/"))return"Chrome";if(se(u))return"Android";{const g=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==g?void 0:g.length))return g[1]}return"Other"}function ai(f=(0,G.ZQ)()){return/firefox\//i.test(f)}function zi(f=(0,G.ZQ)()){const u=f.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function Ds(f=(0,G.ZQ)()){return/crios\//i.test(f)}function Ee(f=(0,G.ZQ)()){return/iemobile/i.test(f)}function se(f=(0,G.ZQ)()){return/android/i.test(f)}function Ve(f=(0,G.ZQ)()){return/blackberry/i.test(f)}function _t(f=(0,G.ZQ)()){return/webos/i.test(f)}function Ht(f=(0,G.ZQ)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function Un(f=(0,G.ZQ)()){return Ht(f)||se(f)||_t(f)||Ve(f)||/windows phone/i.test(f)||Ee(f)}function is(f,u=[]){let d;switch(f){case"Browser":d=Se((0,G.ZQ)());break;case"Worker":d=`${Se((0,G.ZQ)())}-${f}`;break;default:d=f}const g=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${We.SDK_VERSION}/${g}`}class bn{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const g=C=>new Promise((O,te)=>{try{O(u(C))}catch(Me){te(Me)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,y.A)(function*(){if(d.auth.currentUser===u)return;const g=[];try{for(const v of d.queue)yield v(u),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const C of g)try{C()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:null==v?void 0:v.message})}})()}}function fl(){return(fl=(0,y.A)(function*(f,u={}){return Y(f,"GET","/v2/passwordPolicy",ae(f,u))})).apply(this,arguments)}class br{constructor(u){var d,g,v,C;const O=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=O.minPasswordLength)&&void 0!==d?d:6,O.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=O.maxPasswordLength),void 0!==O.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=O.containsLowercaseCharacter),void 0!==O.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=O.containsUppercaseCharacter),void 0!==O.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=O.containsNumericCharacter),void 0!==O.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=O.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=u.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(C=u.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,g,v,C,O,te;const Me={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,Me),this.validatePasswordCharacterOptions(u,Me),Me.isValid&&(Me.isValid=null===(d=Me.meetsMinPasswordLength)||void 0===d||d),Me.isValid&&(Me.isValid=null===(g=Me.meetsMaxPasswordLength)||void 0===g||g),Me.isValid&&(Me.isValid=null===(v=Me.containsLowercaseLetter)||void 0===v||v),Me.isValid&&(Me.isValid=null===(C=Me.containsUppercaseLetter)||void 0===C||C),Me.isValid&&(Me.isValid=null===(O=Me.containsNumericCharacter)||void 0===O||O),Me.isValid&&(Me.isValid=null===(te=Me.containsNonAlphanumericCharacter)||void 0===te||te),Me}validatePasswordLengthOptions(u,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=u.length>=g),v&&(d.meetsMaxPasswordLength=u.length<=v)}validatePasswordCharacterOptions(u,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<u.length;v++)g=u.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(u,d,g,v,C){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=C))}}class qt{constructor(u,d,g,v){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bu(this),this.idTokenSubscription=new bu(this),this.beforeStateQueue=new bn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(u,d){var g=this;return d&&(this._popupRedirectResolver=kt(d)),this._initializationPromise=this.queue((0,y.A)(function*(){var v,C;if(!g._deleted&&(g.persistenceManager=yield rn.create(g,u),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(C=g.currentUser)||void 0===C?void 0:C.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,y.A)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUser(u){var d=this;return(0,y.A)(function*(){var g;const v=yield d.assertedPersistence.getCurrentUser();let C=v,O=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const te=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,Me=null==C?void 0:C._redirectEventId,pt=yield d.tryRedirectSignIn(u);(!te||te===Me)&&null!=pt&&pt.user&&(C=pt.user,O=!0)}if(!C)return d.directlySetCurrentUser(null);if(!C._redirectEventId){if(O)try{yield d.beforeStateQueue.runMiddleware(C)}catch(te){C=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(te))}return C?d.reloadAndSetCurrentUserOrClear(C):d.directlySetCurrentUser(null)}return D(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===C._redirectEventId?d.directlySetCurrentUser(C):d.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(u){var d=this;return(0,y.A)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,y.A)(function*(){try{yield Ti(u)}catch(g){if("auth/network-request-failed"!==(null==g?void 0:g.code))return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function Jt(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var u=this;return(0,y.A)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,y.A)(function*(){const g=u?(0,G.Ku)(u):null;return g&&D(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(u,d=!1){var g=this;return(0,y.A)(function*(){if(!g._deleted)return u&&D(g.tenantId===u.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(u)),g.queue((0,y.A)(function*(){yield g.directlySetCurrentUser(u),g.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,y.A)(function*(){return yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0)})()}setPersistence(u){var d=this;return this.queue((0,y.A)(function*(){yield d.assertedPersistence.setPersistence(kt(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,y.A)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,y.A)(function*(){const d=yield function li(f){return fl.apply(this,arguments)}(u),g=new br(d);null===u.tenantId?u._projectPasswordPolicy=g:u._tenantPasswordPolicies[u.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new G.FA("auth","Firebase",u())}onAuthStateChanged(u,d,g){return this.registerStateListener(this.authStateSubscription,u,d,g)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,g){return this.registerStateListener(this.idTokenSubscription,u,d,g)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const g=this.onAuthStateChanged(()=>{g(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,y.A)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function x(f,u){return $.apply(this,arguments)}(d,v)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var g=this;return(0,y.A)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===u?v.removeCurrentUser():v.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,y.A)(function*(){if(!d.redirectPersistenceManager){const g=u&&kt(u)||d._popupRedirectResolver;D(g,d,"argument-error"),d.redirectPersistenceManager=yield rn.create(d,[kt(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,y.A)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,y.A)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===u?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,y.A)(function*(){if(u===d.currentUser)return d.queue((0,y.A)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,g,v){if(this._deleted)return()=>{};const C="function"==typeof d?d:d.next.bind(d);let O=!1;const te=this._isInitialized?Promise.resolve():this._initializationPromise;if(D(te,this,"internal-error"),te.then(()=>{O||C(this.currentUser)}),"function"==typeof d){const Me=u.addObserver(d,g,v);return()=>{O=!0,Me()}}{const Me=u.addObserver(d);return()=>{O=!0,Me()}}}directlySetCurrentUser(u){var d=this;return(0,y.A)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return D(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=is(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,y.A)(function*(){var d;const g={"X-Client-Version":u.clientVersion};u.app.options.appId&&(g["X-Firebase-gmpid"]=u.app.options.appId);const v=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const C=yield u._getAppCheckToken();return C&&(g["X-Firebase-AppCheck"]=C),g})()}_getAppCheckToken(){var u=this;return(0,y.A)(function*(){var d;const g=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return null!=g&&g.error&&function Fe(f,...u){Z.logLevel<=Pt.$b.WARN&&Z.warn(`Auth (${We.SDK_VERSION}): ${f}`,...u)}(`Error while retrieving App Check token: ${g.error}`),null==g?void 0:g.token})()}}function Ln(f){return(0,G.Ku)(f)}class bu{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,G.tD)(d=>this.observer=d)}get next(){return D(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let os={loadJS:()=>(0,y.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zt(f){return os.loadJS(f)}function pl(f){return`__${f}${Math.floor(1e6*Math.random())}`}class nh{constructor(u){this.type="recaptcha-enterprise",this.auth=Ln(u)}verify(u="verify",d=!1){var g=this;return(0,y.A)(function*(){function C(){return C=(0,y.A)(function*(te){if(!d){if(null==te.tenantId&&null!=te._agentRecaptchaConfig)return te._agentRecaptchaConfig.siteKey;if(null!=te.tenantId&&void 0!==te._tenantRecaptchaConfigs[te.tenantId])return te._tenantRecaptchaConfigs[te.tenantId].siteKey}return new Promise(function(){var Me=(0,y.A)(function*(pt,Rt){gn(te,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tt=>{if(void 0!==tt.recaptchaKey){const xr=new _e(tt);return null==te.tenantId?te._agentRecaptchaConfig=xr:te._tenantRecaptchaConfigs[te.tenantId]=xr,pt(xr.siteKey)}Rt(new Error("recaptcha Enterprise site key undefined"))}).catch(tt=>{Rt(tt)})});return function(pt,Rt){return Me.apply(this,arguments)}}())}),C.apply(this,arguments)}function O(te,Me,pt){const Rt=window.grecaptcha;ce(Rt)?Rt.enterprise.ready(()=>{Rt.enterprise.execute(te,{action:u}).then(tt=>{Me(tt)}).catch(()=>{Me("NO_RECAPTCHA")})}):pt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((te,Me)=>{(function v(te){return C.apply(this,arguments)})(g.auth).then(pt=>{if(!d&&ce(window.grecaptcha))O(pt,te,Me);else{if(typeof window>"u")return void Me(new Error("RecaptchaVerifier is only supported in browser"));let Rt=function ci(){return os.recaptchaEnterpriseScript}();0!==Rt.length&&(Rt+=pt),zt(Rt).then(()=>{O(pt,te,Me)}).catch(tt=>{Me(tt)})}}).catch(pt=>{Me(pt)})})})()}}function de(f,u,d){return I.apply(this,arguments)}function I(){return(I=(0,y.A)(function*(f,u,d,g=!1){const v=new nh(f);let C;try{C=yield v.verify(d)}catch{C=yield v.verify(d,!0)}const O=Object.assign({},u);return Object.assign(O,g?{captchaResp:C}:{captchaResponse:C}),Object.assign(O,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(O,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),O})).apply(this,arguments)}function b(f,u,d,g){return L.apply(this,arguments)}function L(){return L=(0,y.A)(function*(f,u,d,g){var v;if(null!==(v=f._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield de(f,u,d,"getOobCode"===d);return g(f,C)}return g(f,u).catch(function(){var C=(0,y.A)(function*(O){if("auth/missing-recaptcha-token"===O.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const te=yield de(f,u,d,"getOobCode"===d);return g(f,te)}return Promise.reject(O)});return function(O){return C.apply(this,arguments)}}())}),L.apply(this,arguments)}function Qe(f){const u=f.indexOf(":");return u<0?"":f.substr(0,u+1)}function st(f){if(!f)return null;const u=Number(f);return isNaN(u)?null:u}class Nt{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return U("not implemented")}_getIdTokenResponse(u){return U("not implemented")}_linkToIdToken(u,d){return U("not implemented")}_getReauthenticationResolver(u){return U("not implemented")}}function je(f,u){return rr.apply(this,arguments)}function rr(){return(rr=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:resetPassword",ae(f,u))})).apply(this,arguments)}function Zn(){return(Zn=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function ui(f,u){return xa.apply(this,arguments)}function xa(){return(xa=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function ss(){return(ss=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:update",ae(f,u))})).apply(this,arguments)}function tc(f,u){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signInWithPassword",ae(f,u))})).apply(this,arguments)}function Tu(f,u){return vg.apply(this,arguments)}function vg(){return(vg=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:sendOobCode",ae(f,u))})).apply(this,arguments)}function Au(){return(Au=(0,y.A)(function*(f,u){return Tu(f,u)})).apply(this,arguments)}function yg(f,u){return rh.apply(this,arguments)}function rh(){return(rh=(0,y.A)(function*(f,u){return Tu(f,u)})).apply(this,arguments)}function Ig(f,u){return Eg.apply(this,arguments)}function Eg(){return(Eg=(0,y.A)(function*(f,u){return Tu(f,u)})).apply(this,arguments)}function Ny(){return(Ny=(0,y.A)(function*(f,u){return Tu(f,u)})).apply(this,arguments)}function ky(){return(ky=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signInWithEmailLink",ae(f,u))})).apply(this,arguments)}function Du(){return(Du=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signInWithEmailLink",ae(f,u))})).apply(this,arguments)}class Zs extends Nt{constructor(u,d,g,v=null){super("password",g),this._email=u,this._password=d,this._tenantId=v}static _fromEmailAndPassword(u,d){return new Zs(u,d,"password")}static _fromEmailAndCode(u,d,g=null){return new Zs(u,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(null!=d&&d.email&&null!=d&&d.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,y.A)(function*(){switch(d.signInMethod){case"password":return b(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",tc);case"emailLink":return function QM(f,u){return ky.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:ze(u,"internal-error")}})()}_linkToIdToken(u,d){var g=this;return(0,y.A)(function*(){switch(g.signInMethod){case"password":return b(u,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ui);case"emailLink":return function YM(f,u){return Du.apply(this,arguments)}(u,{idToken:d,email:g._email,oobCode:g._password});default:ze(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function as(f,u){return Su.apply(this,arguments)}function Su(){return(Su=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signInWithIdp",ae(f,u))})).apply(this,arguments)}class di extends Nt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new di(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):ze("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:v}=d,C=(0,Ze.Tt)(d,["providerId","signInMethod"]);if(!g||!v)return null;const O=new di(g,v);return O.idToken=C.idToken||void 0,O.accessToken=C.accessToken||void 0,O.secret=C.secret,O.nonce=C.nonce,O.pendingToken=C.pendingToken||null,O}_getIdTokenResponse(u){return as(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,as(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,as(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,G.Am)(d)}return u}}function ih(){return(ih=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:sendVerificationCode",ae(f,u))})).apply(this,arguments)}function Pn(){return(Pn=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signInWithPhoneNumber",ae(f,u))})).apply(this,arguments)}function Cg(){return(Cg=(0,y.A)(function*(f,u){const d=yield ft(f,"POST","/v1/accounts:signInWithPhoneNumber",ae(f,u));if(d.temporaryProof)throw jt(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const mb={USER_NOT_FOUND:"user-not-found"};function bg(){return(bg=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signInWithPhoneNumber",ae(f,Object.assign(Object.assign({},u),{operation:"REAUTH"})),mb)})).apply(this,arguments)}class Js extends Nt{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new Js({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new Js({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function Xt(f,u){return Pn.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function XM(f,u){return Cg.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function ZM(f,u){return bg.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}=u;return g||d||v||C?new Js({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}):null}}class nc{constructor(u){var d,g,v,C,O,te;const Me=(0,G.I9)((0,G.hp)(u)),pt=null!==(d=Me.apiKey)&&void 0!==d?d:null,Rt=null!==(g=Me.oobCode)&&void 0!==g?g:null,tt=function _n(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=Me.mode)&&void 0!==v?v:null);D(pt&&Rt&&tt,"argument-error"),this.apiKey=pt,this.operation=tt,this.code=Rt,this.continueUrl=null!==(C=Me.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==(O=Me.languageCode)&&void 0!==O?O:null,this.tenantId=null!==(te=Me.tenantId)&&void 0!==te?te:null}static parseLink(u){const d=function Tg(f){const u=(0,G.I9)((0,G.hp)(f)).link,d=u?(0,G.I9)((0,G.hp)(u)).deep_link_id:null,g=(0,G.I9)((0,G.hp)(f)).deep_link_id;return(g?(0,G.I9)((0,G.hp)(g)).link:null)||g||d||u||f}(u);try{return new nc(d)}catch{return null}}}let oh=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,g){return Zs._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=nc.parseLink(g);return D(v,"argument-error"),Zs._fromEmailAndCode(d,v.code,v.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class Ma{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class Pu extends Ma{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class Ps extends Pu{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return D("providerId"in d&&"signInMethod"in d,"argument-error"),di._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return D(u.idToken||u.accessToken,"argument-error"),di._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return Ps.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return Ps.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:C,nonce:O,providerId:te}=u;if(!g&&!v&&!d&&!C||!te)return null;try{return new Ps(te)._credential({idToken:d,accessToken:g,nonce:O,pendingToken:C})}catch{return null}}}let sh=(()=>{class f extends Pu{constructor(){super("facebook.com")}static credential(d){return di._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),xu=(()=>{class f extends Pu{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return di._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return f.credential(g,v)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),Fy=(()=>{class f extends Pu{constructor(){super("github.com")}static credential(d){return di._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class rc extends Nt{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return as(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,as(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,as(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:v,pendingToken:C}=d;return g&&v&&C&&g===v?new rc(g,C):null}static _create(u,d){return new rc(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ea extends Ma{constructor(u){D(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return ea.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return ea.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=rc.fromJSON(u);return D(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:g}=u;if(!d||!g)return null;try{return rc._create(g,d)}catch{return null}}}let Vy=(()=>{class f extends Pu{constructor(){super("twitter.com")}static credential(d,g){return di._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return f.credential(g,v)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function ta(f,u){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signUp",ae(f,u))})).apply(this,arguments)}class Be{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,g,v=!1){return(0,y.A)(function*(){const C=yield ut._fromIdTokenResponse(u,g,v),O=Dg(g);return new Be({user:C,providerId:O,_tokenResponse:g,operationType:d})})()}static _forOperation(u,d,g){return(0,y.A)(function*(){yield u._updateTokensIfNecessary(g,!0);const v=Dg(g);return new Be({user:u,providerId:v,_tokenResponse:g,operationType:d})})()}}function Dg(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function ic(){return(ic=(0,y.A)(function*(f){var u;const d=Ln(f);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new Be({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield ta(d,{returnSecureToken:!0}),v=yield Be._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class oc extends G.g{constructor(u,d,g,v){var C;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,oc.prototype),this.customData={appName:u.name,tenantId:null!==(C=u.tenantId)&&void 0!==C?C:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(u,d,g,v){return new oc(u,d,g,v)}}function sc(f,u,d,g){return("reauthenticate"===u?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?oc._fromErrorAndOperation(f,C,u,g):C})}function By(f){return new Set(f.map(({providerId:u})=>u).filter(u=>!!u))}function Sg(){return Sg=(0,y.A)(function*(f,u){const d=(0,G.Ku)(f);yield ah(!0,d,u);const{providerUserInfo:g}=yield function cr(f,u){return Nn.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),v=By(g||[]);return d.providerData=d.providerData.filter(C=>v.has(C.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Sg.apply(this,arguments)}function Rg(f,u){return ml.apply(this,arguments)}function ml(){return(ml=(0,y.A)(function*(f,u,d=!1){const g=yield Bn(f,u._linkToIdToken(f.auth,yield f.getIdToken()),d);return Be._forOperation(f,"link",g)})).apply(this,arguments)}function ah(f,u,d){return ac.apply(this,arguments)}function ac(){return(ac=(0,y.A)(function*(f,u,d){yield Ti(u);const v=!1===f?"provider-already-linked":"no-such-provider";D(By(u.providerData).has(d)===f,u.auth,v)})).apply(this,arguments)}function $y(f,u){return na.apply(this,arguments)}function na(){return(na=(0,y.A)(function*(f,u,d=!1){const{auth:g}=f,v="reauthenticate";try{const C=yield Bn(f,sc(g,v,u,f),d);D(C.idToken,g,"internal-error");const O=oi(C.idToken);D(O,g,"internal-error");const{sub:te}=O;return D(f.uid===te,g,"user-mismatch"),Be._forOperation(f,v,C)}catch(C){throw"auth/user-not-found"===(null==C?void 0:C.code)&&ze(g,"user-mismatch"),C}})).apply(this,arguments)}function Uy(f,u){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,y.A)(function*(f,u,d=!1){const g="signIn",v=yield sc(f,g,u),C=yield Be._fromIdTokenResponse(f,g,v);return d||(yield f._updateCurrentUser(C.user)),C})).apply(this,arguments)}function ra(f,u){return lh.apply(this,arguments)}function lh(){return(lh=(0,y.A)(function*(f,u){return Uy(Ln(f),u)})).apply(this,arguments)}function Mu(f,u){return lc.apply(this,arguments)}function lc(){return(lc=(0,y.A)(function*(f,u){const d=(0,G.Ku)(f);return yield ah(!1,d,u.providerId),Rg(d,u)})).apply(this,arguments)}function ch(f,u){return jy.apply(this,arguments)}function jy(){return(jy=(0,y.A)(function*(f,u){return $y((0,G.Ku)(f),u)})).apply(this,arguments)}function zy(){return(zy=(0,y.A)(function*(f,u){return ft(f,"POST","/v1/accounts:signInWithCustomToken",ae(f,u))})).apply(this,arguments)}function Nu(){return Nu=(0,y.A)(function*(f,u){const d=Ln(f),g=yield function Hy(f,u){return zy.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),v=yield Be._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),Nu.apply(this,arguments)}class xs{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?Gy._fromServerResponse(u,d):"totpInfo"in d?uh._fromServerResponse(u,d):ze(u,"internal-error")}}class Gy extends xs{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new Gy(d)}}class uh extends xs{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new uh(d)}}function wo(f,u,d){var g;D((null===(g=d.url)||void 0===g?void 0:g.length)>0,f,"invalid-continue-uri"),D(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(D(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(D(d.android.packageName.length>0,f,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function Tn(f){return ia.apply(this,arguments)}function ia(){return(ia=(0,y.A)(function*(f){const u=Ln(f);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function ku(){return(ku=(0,y.A)(function*(f,u,d){const g=Ln(f),v={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&wo(g,v,d),yield b(g,v,"getOobCode",yg)})).apply(this,arguments)}function cc(){return cc=(0,y.A)(function*(f,u,d){yield je((0,G.Ku)(f),{oobCode:u,newPassword:d}).catch(function(){var g=(0,y.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Tn(f),v});return function(v){return g.apply(this,arguments)}}())}),cc.apply(this,arguments)}function Jn(){return Jn=(0,y.A)(function*(f,u){yield function yo(f,u){return ss.apply(this,arguments)}((0,G.Ku)(f),{oobCode:u})}),Jn.apply(this,arguments)}function qy(f,u){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,y.A)(function*(f,u){const d=(0,G.Ku)(f),g=yield je(d,{oobCode:u}),v=g.requestType;switch(D(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":D(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":D(g.mfaInfo,d,"internal-error");default:D(g.email,d,"internal-error")}let C=null;return g.mfaInfo&&(C=xs._fromServerResponse(Ln(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:C},operation:v}})).apply(this,arguments)}function hh(){return(hh=(0,y.A)(function*(f,u){const{data:d}=yield qy((0,G.Ku)(f),u);return d.email})).apply(this,arguments)}function fh(){return(fh=(0,y.A)(function*(f,u,d){const g=Ln(f),O=yield b(g,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ta).catch(Me=>{throw"auth/password-does-not-meet-requirements"===Me.code&&Tn(f),Me}),te=yield Be._fromIdTokenResponse(g,"signIn",O);return yield g._updateCurrentUser(te.user),te})).apply(this,arguments)}function Lu(){return(Lu=(0,y.A)(function*(f,u,d){const g=Ln(f),v={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function C(O,te){D(te.handleCodeInApp,g,"argument-error"),te&&wo(g,O,te)})(v,d),yield b(g,v,"getOobCode",Ig)})).apply(this,arguments)}function Co(){return(Co=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f),v=oh.credentialWithLink(u,d||re());return D(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),ra(g,v)})).apply(this,arguments)}function ph(){return(ph=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:createAuthUri",ae(f,u))})).apply(this,arguments)}function Pg(){return Pg=(0,y.A)(function*(f,u){const g={identifier:u,continueUri:fe()?re():"http://localhost"},{signinMethods:v}=yield function wb(f,u){return ph.apply(this,arguments)}((0,G.Ku)(f),g);return v||[]}),Pg.apply(this,arguments)}function xg(){return xg=(0,y.A)(function*(f,u){const d=(0,G.Ku)(f),v={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};u&&wo(d.auth,v,u);const{email:C}=yield function lt(f,u){return Au.apply(this,arguments)}(d.auth,v);C!==f.email&&(yield f.reload())}),xg.apply(this,arguments)}function Mg(){return Mg=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:u};d&&wo(g.auth,C,d);const{email:O}=yield function wg(f,u){return Ny.apply(this,arguments)}(g.auth,C);O!==f.email&&(yield f.reload())}),Mg.apply(this,arguments)}function Ng(){return(Ng=(0,y.A)(function*(f,u){return Y(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function kg(){return kg=(0,y.A)(function*(f,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const g=(0,G.Ku)(f),C={idToken:yield g.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},O=yield Bn(g,function Tb(f,u){return Ng.apply(this,arguments)}(g.auth,C));g.displayName=O.displayName||null,g.photoURL=O.photoUrl||null;const te=g.providerData.find(({providerId:Me})=>"password"===Me);te&&(te.displayName=g.displayName,te.photoURL=g.photoURL),yield g._updateTokensIfNecessary(O)}),kg.apply(this,arguments)}function Og(f,u,d){return xt.apply(this,arguments)}function xt(){return xt=(0,y.A)(function*(f,u,d){const{auth:g}=f,C={idToken:yield f.getIdToken(),returnSecureToken:!0};u&&(C.email=u),d&&(C.password=d);const O=yield Bn(f,function On(f,u){return Zn.apply(this,arguments)}(g,C));yield f._updateTokensIfNecessary(O,!0)}),xt.apply(this,arguments)}class tn{constructor(u,d,g={}){this.isNewUser=u,this.providerId=d,this.profile=g}}class zr extends tn{constructor(u,d,g,v){super(u,d,g),this.username=v}}class vi extends tn{constructor(u,d){super(u,"facebook.com",d)}}class Na extends zr{constructor(u,d){super(u,"github.com",d,"string"==typeof(null==d?void 0:d.login)?null==d?void 0:d.login:null)}}class Di extends tn{constructor(u,d){super(u,"google.com",d)}}class Xy extends zr{constructor(u,d,g){super(u,"twitter.com",d,g)}}function Zy(f){const{user:u,_tokenResponse:d}=f;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function ro(f){var u,d;if(!f)return null;const{providerId:g}=f,v=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},C=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!g&&null!=f&&f.idToken){const O=null===(d=null===(u=oi(f.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(O)return new tn(C,"anonymous"!==O&&"custom"!==O?O:null)}if(!g)return null;switch(g){case"facebook.com":return new vi(C,v);case"github.com":return new Na(C,v);case"google.com":return new Di(C,v);case"twitter.com":return new Xy(C,v,f.screenName||null);case"custom":case"anonymous":return new tn(C,null);default:return new tn(C,g,v)}}(d)}class ka{constructor(u,d,g){this.type=u,this.credential=d,this.user=g}static _fromIdtoken(u,d){return new ka("enroll",u,d)}static _fromMfaPendingCredential(u){return new ka("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,g;if(null!=u&&u.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return ka._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(g=u.multiFactorSession)&&void 0!==g&&g.idToken)return ka._fromIdtoken(u.multiFactorSession.idToken)}return null}}class oa{constructor(u,d,g){this.session=u,this.hints=d,this.signInResolver=g}static _fromError(u,d){const g=Ln(u),v=d.customData._serverResponse,C=(v.mfaInfo||[]).map(te=>xs._fromServerResponse(g,te));D(v.mfaPendingCredential,g,"internal-error");const O=ka._fromMfaPendingCredential(v.mfaPendingCredential);return new oa(O,C,function(){var te=(0,y.A)(function*(Me){const pt=yield Me._process(g,O);delete v.mfaInfo,delete v.mfaPendingCredential;const Rt=Object.assign(Object.assign({},v),{idToken:pt.idToken,refreshToken:pt.refreshToken});switch(d.operationType){case"signIn":const tt=yield Be._fromIdTokenResponse(g,d.operationType,Rt);return yield g._updateCurrentUser(tt.user),tt;case"reauthenticate":return D(d.user,g,"internal-error"),Be._forOperation(d.user,d.operationType,Rt);default:ze(g,"internal-error")}});return function(Me){return te.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,y.A)(function*(){return d.signInResolver(u)})()}}class Gr{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>xs._fromServerResponse(u.auth,g)))})}static _fromUser(u){return new Gr(u)}getSession(){var u=this;return(0,y.A)(function*(){return ka._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var g=this;return(0,y.A)(function*(){const v=u,C=yield g.getSession(),O=yield Bn(g.user,v._process(g.user.auth,C,d));return yield g.user._updateTokensIfNecessary(O),g.user.reload()})()}unenroll(u){var d=this;return(0,y.A)(function*(){const g="string"==typeof u?u:u.uid,v=yield d.user.getIdToken();try{const C=yield Bn(d.user,function _h(f,u){return Y(f,"POST","/v2/accounts/mfaEnrollment:withdraw",ae(f,u))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:O})=>O!==g),yield d.user._updateTokensIfNecessary(C),yield d.user.reload()}catch(C){throw C}})()}}const Oa=new WeakMap,vh="__sak";class tI{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(vh,"1"),this.storage.removeItem(vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const yh=(()=>{class f extends tI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function nI(){const f=(0,G.ZQ)();return zi(f)||Ht(f)}()&&function Yn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Un(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),C=this.localCache[g];v!==C&&d(g,C,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((te,Me,pt)=>{this.notifyListeners(te,pt)});const v=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const te=this.storage.getItem(v);if(d.newValue!==te)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!g)return}const C=()=>{const te=this.storage.getItem(v);!g&&this.localCache[v]===te||this.notifyListeners(v,te)},O=this.storage.getItem(v);!function pr(){return(0,G.lT)()&&10===document.documentMode}()||O===d.newValue||d.newValue===d.oldValue?C():setTimeout(C,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,C=this;return(0,y.A)(function*(){yield v().call(C,d,g),C.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,y.A)(function*(){const C=yield g().call(v,d);return v.localCache[d]=JSON.stringify(C),C})()}_remove(d){var g=()=>super._remove,v=this;return(0,y.A)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return f.type="LOCAL",f})(),Si=(()=>{class f extends tI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return f.type="SESSION",f})();let Ih=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(C=>C.isListeningto(d));if(g)return g;const v=new f(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,y.A)(function*(){const v=d,{eventId:C,eventType:O,data:te}=v.data,Me=g.handlersMap[O];if(null==Me||!Me.size)return;v.ports[0].postMessage({status:"ack",eventId:C,eventType:O});const pt=Array.from(Me).map(function(){var tt=(0,y.A)(function*(xr){return xr(v.origin,te)});return function(xr){return tt.apply(this,arguments)}}()),Rt=yield function iI(f){return Promise.all(f.map(function(){var u=(0,y.A)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return u.apply(this,arguments)}}()))}(pt);v.ports[0].postMessage({status:"done",eventId:C,eventType:O,response:Rt})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function Ms(f="",u=10){let d="";for(let g=0;g<u;g++)d+=Math.floor(10*Math.random());return f+d}class xb{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,g=50){var v=this;return(0,y.A)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let O,te;return new Promise((Me,pt)=>{const Rt=Ms("",20);C.port1.start();const tt=setTimeout(()=>{pt(new Error("unsupported_event"))},g);te={messageChannel:C,onMessage(xr){const Ho=xr;if(Ho.data.eventId===Rt)switch(Ho.data.status){case"ack":clearTimeout(tt),O=setTimeout(()=>{pt(new Error("timeout"))},3e3);break;case"done":clearTimeout(O),Me(Ho.data.response);break;default:clearTimeout(tt),clearTimeout(O),pt(new Error("invalid_response"))}}},v.handlers.add(te),C.port1.addEventListener("message",te.onMessage),v.target.postMessage({eventType:u,eventId:Rt,data:d},[C.port2])}).finally(()=>{te&&v.removeMessageHandler(te)})})()}}function Wr(){return window}function Eh(){return typeof Wr().WorkerGlobalScope<"u"&&"function"==typeof Wr().importScripts}function _l(){return(_l=(0,y.A)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const oI="firebaseLocalStorageDb",wh="firebaseLocalStorage",sI="fbase_key";class vl{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function yl(f,u){return f.transaction([wh],u?"readwrite":"readonly").objectStore(wh)}function it(){const f=indexedDB.open(oI,1);return new Promise((u,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const g=f.result;try{g.createObjectStore(wh,{keyPath:sI})}catch(v){d(v)}}),f.addEventListener("success",(0,y.A)(function*(){const g=f.result;g.objectStoreNames.contains(wh)?u(g):(g.close(),yield function gr(){const f=indexedDB.deleteDatabase(oI);return new vl(f).toPromise()}(),u(yield it()))}))})}function $t(f,u,d){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,y.A)(function*(f,u,d){const g=yl(f,!0).put({[sI]:u,value:d});return new vl(g).toPromise()})).apply(this,arguments)}function hi(){return(hi=(0,y.A)(function*(f,u){const d=yl(f,!1).get(u),g=yield new vl(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function io(f,u){const d=yl(f,!0).delete(u);return new vl(d).toPromise()}const Pi=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,y.A)(function*(){return d.db||(d.db=yield it()),d.db})()}_withRetries(d){var g=this;return(0,y.A)(function*(){let v=0;for(;;)try{const C=yield g._openDb();return yield d(C)}catch(C){if(v++>3)throw C;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,y.A)(function*(){return Eh()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,y.A)(function*(){d.receiver=Ih._getInstance(function kb(){return Eh()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,y.A)(function*(v,C){return{keyProcessed:(yield d._poll()).includes(C.key)}});return function(v,C){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,y.A)(function*(v,C){return["keyChanged"]});return function(v,C){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,y.A)(function*(){var g,v;if(d.activeServiceWorker=yield function Mb(){return _l.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new xb(d.activeServiceWorker);const C=yield d.sender._send("ping",{},800);C&&null!==(g=C[0])&&void 0!==g&&g.fulfilled&&null!==(v=C[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,y.A)(function*(){if(g.sender&&g.activeServiceWorker&&function Nb(){var f;return(null===(f=null==navigator?void 0:navigator.serviceWorker)||void 0===f?void 0:f.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.A)(function*(){try{if(!indexedDB)return!1;const d=yield it();return yield $t(d,vh,"1"),yield io(d,vh),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,y.A)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,y.A)(function*(){return v._withPendingWrite((0,y.A)(function*(){return yield v._withRetries(C=>$t(C,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,y.A)(function*(){const v=yield g._withRetries(C=>function cs(f,u){return hi.apply(this,arguments)}(C,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,y.A)(function*(){return g._withPendingWrite((0,y.A)(function*(){return yield g._withRetries(v=>io(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,y.A)(function*(){const g=yield d._withRetries(O=>{const te=yl(O,!1).getAll();return new vl(te).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],C=new Set;if(0!==g.length)for(const{fbase_key:O,value:te}of g)C.add(O),JSON.stringify(d.localCache[O])!==JSON.stringify(te)&&(d.notifyListeners(O,te),v.push(O));for(const O of Object.keys(d.localCache))d.localCache[O]&&!C.has(O)&&(d.notifyListeners(O,null),v.push(O));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,y.A)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),Fa=1e12;class pc{constructor(u){this.auth=u,this.counter=Fa,this._widgets=new Map}render(u,d){const g=this.counter;return this._widgets.set(g,new Ns(u,this.auth.name,d||{})),this.counter++,g}reset(u){var d;const g=u||Fa;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(u){var d;return(null===(d=this._widgets.get(u||Fa))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,y.A)(function*(){var g;return null===(g=d._widgets.get(u||Fa))||void 0===g||g.execute(),""})()}}class Ns{constructor(u,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof u?document.getElementById(u):u;D(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Bu(f){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<f;g++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ch=pl("rcb"),La=new Te(3e4,6e4);class $u{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=Wr().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return D(function Il(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&Ae(Wr().grecaptcha)?Promise.resolve(Wr().grecaptcha):new Promise((g,v)=>{const C=Wr().setTimeout(()=>{v(Oe(u,"network-request-failed"))},La.get());Wr()[Ch]=()=>{Wr().clearTimeout(C),delete Wr()[Ch];const te=Wr().grecaptcha;if(!te||!Ae(te))return void v(Oe(u,"internal-error"));const Me=te.render;te.render=(pt,Rt)=>{const tt=Me(pt,Rt);return this.counter++,tt},this.hostLanguage=d,g(te)},zt(`${function Ss(){return os.recaptchaV2Script}()}?${(0,G.Am)({onload:Ch,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(C),v(Oe(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=Wr().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Zt{load(u){return(0,y.A)(function*(){return new pc(u)})()}clearedOneInstance(){}}const bh="recaptcha",Uu={theme:"light",type:"image"};class ks{constructor(u,d,g=Object.assign({},Uu)){this.parameters=g,this.type=bh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ln(u),this.isInvisible="invisible"===this.parameters.size,D(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;D(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Zt:new $u,this.validateStartingState()}verify(){var u=this;return(0,y.A)(function*(){u.assertNotDestroyed();const d=yield u.render(),g=u.getAssertedRecaptcha();return g.getResponse(d)||new Promise(C=>{const O=te=>{te&&(u.tokenChangeListeners.delete(O),C(te))};u.tokenChangeListeners.add(O),u.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){D(!this.parameters.sitekey,this.auth,"argument-error"),D(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),D(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof u)u(d);else if("string"==typeof u){const g=Wr()[u];"function"==typeof g&&g(d)}}}assertNotDestroyed(){D(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,y.A)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,y.A)(function*(){D(fe()&&!Eh(),u.auth,"internal-error"),yield function Th(){let f=null;return new Promise(u=>{"complete"!==document.readyState?(f=()=>u(),window.addEventListener("load",f)):u()}).catch(u=>{throw f&&window.removeEventListener("load",f),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function It(f){return Wt.apply(this,arguments)}(u.auth);D(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return D(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Va{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=Js._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function ju(){return(ju=(0,y.A)(function*(f,u,d){const g=Ln(f),v=yield El(g,u,(0,G.Ku)(d));return new Va(v,C=>ra(g,C))})).apply(this,arguments)}function fi(){return(fi=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f);yield ah(!1,g,"phone");const v=yield El(g.auth,u,(0,G.Ku)(d));return new Va(v,C=>Mu(g,C))})).apply(this,arguments)}function sa(){return(sa=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f),v=yield El(g.auth,u,(0,G.Ku)(d));return new Va(v,C=>ch(g,C))})).apply(this,arguments)}function El(f,u,d){return bo.apply(this,arguments)}function bo(){return bo=(0,y.A)(function*(f,u,d){var g;const v=yield d.verify();try{let C;if(D("string"==typeof v,f,"argument-error"),D(d.type===bh,f,"argument-error"),C="string"==typeof u?{phoneNumber:u}:u,"session"in C){const O=C.session;if("phoneNumber"in C)return D("enroll"===O.type,f,"internal-error"),(yield function Bg(f,u){return Y(f,"POST","/v2/accounts/mfaEnrollment:start",ae(f,u))}(f,{idToken:O.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{D("signin"===O.type,f,"internal-error");const te=(null===(g=C.multiFactorHint)||void 0===g?void 0:g.uid)||C.multiFactorUid;return D(te,f,"missing-multi-factor-info"),(yield function Qt(f,u){return Y(f,"POST","/v2/accounts/mfaSignIn:start",ae(f,u))}(f,{mfaPendingCredential:O.credential,mfaEnrollmentId:te,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:O}=yield function Ru(f,u){return ih.apply(this,arguments)}(f,{phoneNumber:C.phoneNumber,recaptchaToken:v});return O}}finally{d._reset()}}),bo.apply(this,arguments)}function zg(){return(zg=(0,y.A)(function*(f,u){yield Rg((0,G.Ku)(f),u)})).apply(this,arguments)}let Hu=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=Ln(d)}verifyPhoneNumber(d,g){return El(this.auth,d,(0,G.Ku)(g))}static credential(d,g){return Js._fromVerification(d,g)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?Js._fromTokenResponse(g,v):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function aa(f,u){return u?kt(u):(D(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class Ah extends Nt{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return as(u,this._buildIdpRequest())}_linkToIdToken(u,d){return as(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return as(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function Fb(f){return Uy(f.auth,new Ah(f),f.bypassAuthState)}function Gg(f){const{auth:u,user:d}=f;return D(d,u,"internal-error"),$y(d,new Ah(f),f.bypassAuthState)}function iN(f){return lI.apply(this,arguments)}function lI(){return(lI=(0,y.A)(function*(f){const{auth:u,user:d}=f;return D(d,u,"internal-error"),Rg(d,new Ah(f),f.bypassAuthState)})).apply(this,arguments)}class Lb{constructor(u,d,g,v,C=!1){this.auth=u,this.resolver=g,this.user=v,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,y.A)(function*(g,v){u.pendingPromise={resolve:g,reject:v};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(C){u.reject(C)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,y.A)(function*(){const{urlResponse:g,sessionId:v,postBody:C,tenantId:O,error:te,type:Me}=u;if(te)return void d.reject(te);const pt={auth:d.auth,requestUri:g,sessionId:v,tenantId:O||void 0,postBody:C||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(Me)(pt))}catch(Rt){d.reject(Rt)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return Fb;case"linkViaPopup":case"linkViaRedirect":return iN;case"reauthViaPopup":case"reauthViaRedirect":return Gg;default:ze(this.auth,"internal-error")}}resolve(u){ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oN=new Te(2e3,1e4);function cI(){return(cI=(0,y.A)(function*(f,u,d){const g=Ln(f);P(f,u,Ma);const v=aa(g,d);return new hI(g,"signInViaPopup",u,v).executeNotNull()})).apply(this,arguments)}function uI(){return(uI=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f);P(g.auth,u,Ma);const v=aa(g.auth,d);return new hI(g.auth,"reauthViaPopup",u,v,g).executeNotNull()})).apply(this,arguments)}function dI(){return(dI=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f);P(g.auth,u,Ma);const v=aa(g.auth,d);return new hI(g.auth,"linkViaPopup",u,v,g).executeNotNull()})).apply(this,arguments)}let hI=(()=>{class f extends Lb{constructor(d,g,v,C,O){super(d,g,C,O),this.provider=v,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,y.A)(function*(){const g=yield d.execute();return D(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,y.A)(function*(){ee(1===d.filter.length,"Popup operations only handle one event");const g=Ms();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(Oe(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Oe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Oe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,oN.get())};d()}}return f.currentPopupAction=null,f})();const cN="pendingRedirect",gc=new Map;class fI extends Lb{constructor(u,d,g=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,y.A)(function*(){let g=gc.get(d.auth._key());if(!g){try{const C=(yield function uN(f,u){return pI.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;g=()=>Promise.resolve(C)}catch(v){g=()=>Promise.reject(v)}gc.set(d.auth._key(),g)}return d.bypassAuthState||gc.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,g=this;return(0,y.A)(function*(){if("signInViaRedirect"===u.type)return d().call(g,u);if("unknown"!==u.type){if(u.eventId){const v=yield g.auth._redirectUserForId(u.eventId);if(v)return g.user=v,d().call(g,u);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,y.A)(function*(){})()}cleanUp(){}}function pI(){return(pI=(0,y.A)(function*(f,u){const d=Wg(u),g=Gi(f);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function gI(f,u){return mI.apply(this,arguments)}function mI(){return(mI=(0,y.A)(function*(f,u){return Gi(f)._set(Wg(u),"true")})).apply(this,arguments)}function Dh(f,u){gc.set(f._key(),u)}function Gi(f){return kt(f._redirectPersistence)}function Wg(f){return Lr(cN,f.config.apiKey,f.name)}function Bb(f,u,d){return function $b(f,u,d){return Sh.apply(this,arguments)}(f,u,d)}function Sh(){return(Sh=(0,y.A)(function*(f,u,d){const g=Ln(f);P(f,u,Ma),yield g._initializationPromise;const v=aa(g,d);return yield gI(v,g),v._openRedirect(g,u,"signInViaRedirect")})).apply(this,arguments)}function _I(f,u,d){return function Ub(f,u,d){return zu.apply(this,arguments)}(f,u,d)}function zu(){return(zu=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f);P(g.auth,u,Ma),yield g.auth._initializationPromise;const v=aa(g.auth,d);yield gI(v,g.auth);const C=yield Gn(g);return v._openRedirect(g.auth,u,"reauthViaRedirect",C)})).apply(this,arguments)}function jb(f,u,d){return function Os(f,u,d){return Rh.apply(this,arguments)}(f,u,d)}function Rh(){return(Rh=(0,y.A)(function*(f,u,d){const g=(0,G.Ku)(f);P(g.auth,u,Ma),yield g.auth._initializationPromise;const v=aa(g.auth,d);yield ah(!1,g,u.providerId),yield gI(v,g.auth);const C=yield Gn(g);return v._openRedirect(g.auth,u,"linkViaRedirect",C)})).apply(this,arguments)}function Ph(){return(Ph=(0,y.A)(function*(f,u){return yield Ln(f)._initializationPromise,xh(f,u,!1)})).apply(this,arguments)}function xh(f,u){return yI.apply(this,arguments)}function yI(){return(yI=(0,y.A)(function*(f,u,d=!1){const g=Ln(f),v=aa(g,u),O=yield new fI(g,v,d).execute();return O&&!d&&(delete O.user._redirectEventId,yield g._persistUserIfCurrent(O.user),yield g._setRedirectUser(null,u)),O})).apply(this,arguments)}function Gn(f){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,y.A)(function*(f){const u=Ms(`${f.uid}:::`);return f._redirectEventId=u,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),u})).apply(this,arguments)}class Mi{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(u,g)&&(d=!0,this.sendToConsumer(u,g),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function _c(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mc(f);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var g;if(u.error&&!mc(u)){const v=(null===(g=u.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(Oe(this.auth,v))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const g=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&g}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(II(u))}saveEventToCache(u){this.cachedEventUids.add(II(u)),this.lastProcessedEventTime=Date.now()}}function II(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(u=>u).join("-")}function mc({type:f,error:u}){return"unknown"===f&&"auth/no-auth-event"===(null==u?void 0:u.code)}function oo(f){return qg.apply(this,arguments)}function qg(){return(qg=(0,y.A)(function*(f,u={}){return Y(f,"GET","/v1/projects",u)})).apply(this,arguments)}const Kg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hb=/^https?/;function Mh(){return(Mh=(0,y.A)(function*(f){if(f.config.emulator)return;const{authorizedDomains:u}=yield oo(f);for(const d of u)try{if(zb(d))return}catch{}ze(f,"unauthorized-domain")})).apply(this,arguments)}function zb(f){const u=re(),{protocol:d,hostname:g}=new URL(u);if(f.startsWith("chrome-extension://")){const O=new URL(f);return""===O.hostname&&""===g?"chrome-extension:"===d&&f.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&O.hostname===g}if(!Hb.test(d))return!1;if(Kg.test(f))return g===f;const v=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const EI=new Te(3e4,6e4);function Nh(){const f=Wr().___jsl;if(null!=f&&f.H)for(const u of Object.keys(f.H))if(f.H[u].r=f.H[u].r||[],f.H[u].L=f.H[u].L||[],f.H[u].r=[...f.H[u].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let Ba=null;const Yg=new Te(5e3,15e3),wl="__/auth/iframe",Yt="emulator/auth/iframe",wI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gb(f){const u=f.config;D(u.authDomain,f,"auth-domain-config-required");const d=u.emulator?F(u,Yt):`https://${f.config.authDomain}/${wl}`,g={apiKey:u.apiKey,appName:f.name,v:We.SDK_VERSION},v=dN.get(f.config.apiHost);v&&(g.eid=v);const C=f._getFrameworks();return C.length&&(g.fw=C.join(",")),`${d}?${(0,G.Am)(g).slice(1)}`}function Xg(){return Xg=(0,y.A)(function*(f){const u=yield function kh(f){return Ba=Ba||function Qg(f){return new Promise((u,d)=>{var g,v,C;function O(){Nh(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{Nh(),d(Oe(f,"network-request-failed"))},timeout:EI.get()})}if(null!==(v=null===(g=Wr().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)u(gapi.iframes.getContext());else{if(null===(C=Wr().gapi)||void 0===C||!C.load){const te=pl("iframefcb");return Wr()[te]=()=>{gapi.load?O():d(Oe(f,"network-request-failed"))},zt(`${function ec(){return os.gapiScript}()}?onload=${te}`).catch(Me=>d(Me))}O()}}).catch(u=>{throw Ba=null,u})}(f),Ba}(f),d=Wr().gapi;return D(d,f,"internal-error"),u.open({where:document.body,url:Gb(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wI,dontclear:!0},g=>new Promise(function(){var v=(0,y.A)(function*(C,O){yield g.restyle({setHideOnLeave:!1});const te=Oe(f,"network-request-failed"),Me=Wr().setTimeout(()=>{O(te)},Yg.get());function pt(){Wr().clearTimeout(Me),C(g)}g.ping(pt).then(pt,()=>{O(te)})});return function(C,O){return v.apply(this,arguments)}}()))}),Xg.apply(this,arguments)}const CI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bI{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const vn="__/auth/handler",la="emulator/auth/handler",ca=encodeURIComponent("fac");function Vn(f,u,d,g,v,C){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,y.A)(function*(f,u,d,g,v,C){D(f.config.authDomain,f,"auth-domain-config-required"),D(f.config.apiKey,f,"invalid-api-key");const O={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:g,v:We.SDK_VERSION,eventId:v};if(u instanceof Ma){u.setDefaultLanguage(f.languageCode),O.providerId=u.providerId||"",(0,G.Im)(u.getCustomParameters())||(O.customParameters=JSON.stringify(u.getCustomParameters()));for(const[Rt,tt]of Object.entries(C||{}))O[Rt]=tt}if(u instanceof Pu){const Rt=u.getScopes().filter(tt=>""!==tt);Rt.length>0&&(O.scopes=Rt.join(","))}f.tenantId&&(O.tid=f.tenantId);const te=O;for(const Rt of Object.keys(te))void 0===te[Rt]&&delete te[Rt];const Me=yield f._getAppCheckToken(),pt=Me?`#${ca}=${encodeURIComponent(Me)}`:"";return`${function qu({config:f}){return f.emulator?F(f,la):`https://${f.authDomain}/${vn}`}(f)}?${(0,G.Am)(te).slice(1)}${pt}`})).apply(this,arguments)}const jo="webStorageSupport",Fh=class Zg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Si,this._completeRedirectFn=xh,this._overrideRedirectResult=Dh}_openPopup(u,d,g,v){var C=this;return(0,y.A)(function*(){var O;ee(null===(O=C.eventManagers[u._key()])||void 0===O?void 0:O.manager,"_initialize() not called before _openPopup()");const te=yield Vn(u,d,g,re(),v);return function Yb(f,u,d,g=500,v=600){const C=Math.max((window.screen.availHeight-v)/2,0).toString(),O=Math.max((window.screen.availWidth-g)/2,0).toString();let te="";const Me=Object.assign(Object.assign({},CI),{width:g.toString(),height:v.toString(),top:C,left:O}),pt=(0,G.ZQ)().toLowerCase();d&&(te=Ds(pt)?"_blank":d),ai(pt)&&(u=u||"http://localhost",Me.scrollbars="yes");const Rt=Object.entries(Me).reduce((xr,[Ho,pm])=>`${xr}${Ho}=${pm},`,"");if(function sn(f=(0,G.ZQ)()){var u;return Ht(f)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(pt)&&"_self"!==te)return function De(f,u){const d=document.createElement("a");d.href=f,d.target=u;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(u||"",te),new bI(null);const tt=window.open(u||"",te,Rt);D(tt,f,"popup-blocked");try{tt.focus()}catch{}return new bI(tt)}(u,te,Ms())})()}_openRedirect(u,d,g,v){var C=this;return(0,y.A)(function*(){return yield C._originValidation(u),function Xr(f){Wr().location.href=f}(yield Vn(u,d,g,re(),v)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:v,promise:C}=this.eventManagers[d];return v?Promise.resolve(v):(ee(C,"If manager is not set, promise should be"),C)}const g=this.initAndGetManager(u);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(u){var d=this;return(0,y.A)(function*(){const g=yield function Wb(f){return Xg.apply(this,arguments)}(u),v=new Mi(u);return g.register("authEvent",C=>(D(null==C?void 0:C.authEvent,u,"invalid-auth-event"),{status:v.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:v},d.iframes[u._key()]=g,v})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send(jo,{type:jo},v=>{var C;const O=null===(C=null==v?void 0:v[0])||void 0===C?void 0:C[jo];void 0!==O&&d(!!O),ze(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Fs(f){return Mh.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return Un()||zi()||Ht()}};class TI{constructor(u){this.factorId=u}_process(u,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,g);case"signin":return this._finalizeSignIn(u,d.credential);default:return U("unexpected MultiFactorSessionType")}}}class AI extends TI{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new AI(u)}_finalizeEnroll(u,d,g){return function mh(f,u){return Y(f,"POST","/v2/accounts/mfaEnrollment:finalize",ae(f,u))}(u,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function Vu(f,u){return Y(f,"POST","/v2/accounts/mfaSignIn:finalize",ae(f,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let DI=(()=>{class f{constructor(){}static assertion(d){return AI._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var Ls="@firebase/auth";class RI{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,y.A)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(g=>{u((null==g?void 0:g.stsTokenManager.accessToken)||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){D(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ua(){return window}(0,G.XA)("authIdTokenMaxAge"),function kn(f){os=f}({loadJS:f=>new Promise((u,d)=>{const g=document.createElement("script");g.setAttribute("src",f),g.onload=u,g.onerror=v=>{const C=Oe("internal-error");C.customData=v,d(C)},g.type="text/javascript",g.charset="UTF-8",function PI(){var f,u;return null!==(u=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==u?u:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Zb(f){(0,We._registerComponent)(new q.uA("auth",(u,{options:d})=>{const g=u.getProvider("app").getImmediate(),v=u.getProvider("heartbeat"),C=u.getProvider("app-check-internal"),{apiKey:O,authDomain:te}=g.options;D(O&&!O.includes(":"),"invalid-api-key",{appName:g.name});const Me={apiKey:O,authDomain:te,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:is(f)},pt=new qt(g,v,C,Me);return function Re(f,u){const d=(null==u?void 0:u.persistence)||[],g=(Array.isArray(d)?d:[d]).map(kt);null!=u&&u.errorMap&&f._updateErrorMap(u.errorMap),f._initializeWithPersistence(g,null==u?void 0:u.popupRedirectResolver)}(pt,d),pt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,g)=>{u.getProvider("auth-internal").initialize()})),(0,We._registerComponent)(new q.uA("auth-internal",u=>{const d=Ln(u.getProvider("auth").getImmediate());return new RI(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,We.registerVersion)(Ls,"1.6.2",function Xb(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,We.registerVersion)(Ls,"1.6.2","esm2017")}("Browser");function Bh(){return Bh=(0,y.A)(function*(f,u,d){var g;const{BuildInfo:v}=ua();ee(u.sessionId,"AuthEvent did not contain a session ID");const C=yield function eT(f){return nm.apply(this,arguments)}(u.sessionId),O={};return Ht()?O.ibi=v.packageName:se()?O.apn=v.packageName:ze(f,"operation-not-supported-in-this-environment"),v.displayName&&(O.appDisplayName=v.displayName),O.sessionId=C,Vn(f,d,u.type,void 0,null!==(g=u.eventId)&&void 0!==g?g:void 0,O)}),Bh.apply(this,arguments)}function Ku(){return(Ku=(0,y.A)(function*(f){const{BuildInfo:u}=ua(),d={};Ht()?d.iosBundleId=u.packageName:se()?d.androidPackageName=u.packageName:ze(f,"operation-not-supported-in-this-environment"),yield oo(f,d)})).apply(this,arguments)}function da(){return(da=(0,y.A)(function*(f,u,d){const{cordova:g}=ua();let v=()=>{};try{yield new Promise((C,O)=>{let te=null;function Me(){var tt;C();const xr=null===(tt=g.plugins.browsertab)||void 0===tt?void 0:tt.close;"function"==typeof xr&&xr(),"function"==typeof(null==d?void 0:d.close)&&d.close()}function pt(){te||(te=window.setTimeout(()=>{O(Oe(f,"redirect-cancelled-by-user"))},2e3))}function Rt(){"visible"===(null==document?void 0:document.visibilityState)&&pt()}u.addPassiveListener(Me),document.addEventListener("resume",pt,!1),se()&&document.addEventListener("visibilitychange",Rt,!1),v=()=>{u.removePassiveListener(Me),document.removeEventListener("resume",pt,!1),document.removeEventListener("visibilitychange",Rt,!1),te&&window.clearTimeout(te)}})}finally{v()}})).apply(this,arguments)}function nm(){return(nm=(0,y.A)(function*(f){const u=function tT(f){if(ee(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const u=new ArrayBuffer(f.length),d=new Uint8Array(u);for(let g=0;g<f.length;g++)d[g]=f.charCodeAt(g);return d}(f),d=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(d)).map(v=>v.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class kI extends Mi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInialized(),this.passiveListeners.forEach(d=>d(u)),super.onEvent(u)}initialized(){var u=this;return(0,y.A)(function*(){yield u.initPromise})()}}function ds(f){return rm.apply(this,arguments)}function rm(){return(rm=(0,y.A)(function*(f){const u=yield yc()._get(Yu(f));return u&&(yield yc()._remove(Yu(f))),u})).apply(this,arguments)}function Uh(){const f=[];for(let d=0;d<20;d++){const g=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(g))}return f.join("")}function yc(){return kt(yh)}function Yu(f){return Lr("authEvent",f.config.apiKey,f.name)}function jh(f){if(null==f||!f.includes("?"))return{};const[u,...d]=f.split("?");return(0,G.I9)(d.join("?"))}const rT=class Xu{constructor(){this._redirectPersistence=Si,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=xh,this._overrideRedirectResult=Dh}_initialize(u){var d=this;return(0,y.A)(function*(){const g=u._key();let v=d.eventManagers.get(g);return v||(v=new kI(u),d.eventManagers.set(g,v),d.attachCallbackListeners(u,v)),v})()}_openPopup(u){ze(u,"operation-not-supported-in-this-environment")}_openRedirect(u,d,g,v){var C=this;return(0,y.A)(function*(){!function or(f){var u,d,g,v,C,O,te,Me,pt,Rt;const tt=ua();D("function"==typeof(null===(u=null==tt?void 0:tt.universalLinks)||void 0===u?void 0:u.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),D(typeof(null===(d=null==tt?void 0:tt.BuildInfo)||void 0===d?void 0:d.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),D("function"==typeof(null===(C=null===(v=null===(g=null==tt?void 0:tt.cordova)||void 0===g?void 0:g.plugins)||void 0===v?void 0:v.browsertab)||void 0===C?void 0:C.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),D("function"==typeof(null===(Me=null===(te=null===(O=null==tt?void 0:tt.cordova)||void 0===O?void 0:O.plugins)||void 0===te?void 0:te.browsertab)||void 0===Me?void 0:Me.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),D("function"==typeof(null===(Rt=null===(pt=null==tt?void 0:tt.cordova)||void 0===pt?void 0:pt.InAppBrowser)||void 0===Rt?void 0:Rt.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const O=yield C._initialize(u);yield O.initialized(),O.resetRedirect(),function Vb(){gc.clear()}(),yield C._originValidation(u);const te=function OI(f,u,d=null){return{type:u,eventId:d,urlResponse:null,sessionId:Uh(),postBody:null,tenantId:f.tenantId,error:Oe(f,"no-auth-event")}}(u,g,v);yield function Qu(f,u){return yc()._set(Yu(f),u)}(u,te);const Me=yield function MI(f,u,d){return Bh.apply(this,arguments)}(u,te,d),pt=yield function Jb(f){const{cordova:u}=ua();return new Promise(d=>{u.plugins.browsertab.isAvailable(g=>{let v=null;g?u.plugins.browsertab.openUrl(f):v=u.InAppBrowser.open(f,function Ot(f=(0,G.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),d(v)})})}(Me);return function Ni(f,u,d){return da.apply(this,arguments)}(u,O,pt)})()}_isIframeWebStorageSupported(u,d){throw new Error("Method not implemented.")}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function NI(f){return Ku.apply(this,arguments)}(u)),this.originValidationPromises[d]}attachCallbackListeners(u,d){const{universalLinks:g,handleOpenURL:v,BuildInfo:C}=ua(),O=setTimeout((0,y.A)(function*(){yield ds(u),d.onEvent(Hh())}),500),te=function(){var Rt=(0,y.A)(function*(tt){clearTimeout(O);const xr=yield ds(u);let Ho=null;xr&&null!=tt&&tt.url&&(Ho=function $h(f,u){var d,g;const v=function LI(f){const u=jh(f),d=u.link?decodeURIComponent(u.link):void 0,g=jh(d).link,v=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return jh(v).link||v||g||d||f}(u);if(v.includes("/__/auth/callback")){const C=jh(v),O=C.firebaseError?function FI(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(C.firebaseError)):null,te=null===(g=null===(d=null==O?void 0:O.code)||void 0===d?void 0:d.split("auth/"))||void 0===g?void 0:g[1],Me=te?Oe(te):null;return Me?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:Me,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:v,postBody:null}}return null}(xr,tt.url)),d.onEvent(Ho||Hh())});return function(xr){return Rt.apply(this,arguments)}}();typeof g<"u"&&"function"==typeof g.subscribe&&g.subscribe(null,te);const Me=v,pt=`${C.packageName.toLowerCase()}://`;ua().handleOpenURL=function(){var Rt=(0,y.A)(function*(tt){if(tt.toLowerCase().startsWith(pt)&&te({url:tt}),"function"==typeof Me)try{Me(tt)}catch(xr){console.error(xr)}});return function(tt){return Rt.apply(this,arguments)}}()}};function Hh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Oe("no-auth-event")}}function zh(){var f;return(null===(f=null==self?void 0:self.location)||void 0===f?void 0:f.protocol)||null}function Ec(f=(0,G.ZQ)()){return!("file:"!==zh()&&"ionic:"!==zh()&&"capacitor:"!==zh()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function lT(){try{const f=self.localStorage,u=Ms();if(f)return f.setItem(u,"1"),f.removeItem(u),!function Gh(f=(0,G.ZQ)()){return function Zu(){return(0,G.lT)()&&11===(null==document?void 0:document.documentMode)}()||function om(f=(0,G.ZQ)()){return/Edge\/\d+/.test(f)}(f)}()||(0,G.zW)()}catch{return Wh()&&(0,G.zW)()}return!1}function Wh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function qh(){return(function im(){return"http:"===zh()||"https:"===zh()}()||(0,G.sr)()||Ec())&&!function aT(){return(0,G.lV)()||(0,G.Ll)()}()&&lT()&&!Wh()}function VI(){return Ec()&&typeof document<"u"}function sm(){return(sm=(0,y.A)(function*(){return!!VI()&&new Promise(f=>{const u=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),f(!0)})})})).apply(this,arguments)}const Wi={LOCAL:"local",NONE:"none",SESSION:"session"},wc=D,Ju="persistence";function lm(f){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,y.A)(function*(f){yield f._initializationPromise;const u=cm(),d=Lr(Ju,f.config.apiKey,f.name);u&&u.setItem(d,f._getPersistence())})).apply(this,arguments)}function cm(){var f;try{return(null===(f=function Kh(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const $I=D;class $a{constructor(){this.browserResolver=kt(Fh),this.cordovaResolver=kt(rT),this.underlyingResolver=null,this._redirectPersistence=Si,this._completeRedirectFn=xh,this._overrideRedirectResult=Dh}_initialize(u){var d=this;return(0,y.A)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,d,g,v){var C=this;return(0,y.A)(function*(){return yield C.selectUnderlyingResolver(),C.assertedUnderlyingResolver._openPopup(u,d,g,v)})()}_openRedirect(u,d,g,v){var C=this;return(0,y.A)(function*(){return yield C.selectUnderlyingResolver(),C.assertedUnderlyingResolver._openRedirect(u,d,g,v)})()}_isIframeWebStorageSupported(u,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,d)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return VI()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $I(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,y.A)(function*(){if(u.underlyingResolver)return;const d=yield function Vs(){return sm.apply(this,arguments)}();u.underlyingResolver=d?u.cordovaResolver:u.browserResolver})()}}function ed(f){return f.unwrap()}function cT(f){return um(f)}function um(f){const{_tokenResponse:u}=f instanceof G.g?f.customData:f;if(!u)return null;if(!(f instanceof G.g)&&"temporaryProof"in u&&"phoneNumber"in u)return Hu.credentialFromResult(f);const d=u.providerId;if(!d||d===ot.PASSWORD)return null;let g;switch(d){case ot.GOOGLE:g=xu;break;case ot.FACEBOOK:g=sh;break;case ot.GITHUB:g=Fy;break;case ot.TWITTER:g=Vy;break;default:const{oauthIdToken:v,oauthAccessToken:C,oauthTokenSecret:O,pendingToken:te,nonce:Me}=u;return C||O||v||te?te?d.startsWith("saml.")?rc._create(d,te):di._fromParams({providerId:d,signInMethod:d,pendingToken:te,idToken:v,accessToken:C}):new Ps(d).credential({idToken:v,accessToken:C,rawNonce:Me}):null}return f instanceof G.g?g.credentialFromError(f):g.credentialFromResult(f)}function Zr(f,u){return u.catch(d=>{throw d instanceof G.g&&function UI(f,u){var d;const g=null===(d=u.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===(null==u?void 0:u.code))u.resolver=new uT(f,function Rb(f,u){var d;const g=(0,G.Ku)(f),v=u;return D(u.customData.operationType,g,"argument-error"),D(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),oa._fromError(g,v)}(f,u));else if(g){const v=um(u),C=u;v&&(C.credential=v,C.tenantId=g.tenantId||void 0,C.email=g.email||void 0,C.phoneNumber=g.phoneNumber||void 0)}}(f,d),d}).then(d=>{const v=d.user;return{operationType:d.operationType,credential:cT(d),additionalUserInfo:Zy(d),user:xn.getOrCreate(v)}})}function Ua(f,u){return Br.apply(this,arguments)}function Br(){return(Br=(0,y.A)(function*(f,u){const d=yield u;return{verificationId:d.verificationId,confirm:g=>Zr(f,d.confirm(g))}})).apply(this,arguments)}class uT{constructor(u,d){this.resolver=d,this.auth=function Cl(f){return f.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return Zr(ed(this.auth),this.resolver.resolveSignIn(u))}}class xn{constructor(u){this._delegate=u,this.multiFactor=function Ug(f){const u=(0,G.Ku)(f);return Oa.has(u)||Oa.set(u,Gr._fromUser(u)),Oa.get(u)}(u)}static getOrCreate(u){return xn.USER_MAP.has(u)||xn.USER_MAP.set(u,new xn(u)),xn.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var d=this;return(0,y.A)(function*(){return Zr(d.auth,Mu(d._delegate,u))})()}linkWithPhoneNumber(u,d){var g=this;return(0,y.A)(function*(){return Ua(g.auth,function xi(f,u,d){return fi.apply(this,arguments)}(g._delegate,u,d))})()}linkWithPopup(u){var d=this;return(0,y.A)(function*(){return Zr(d.auth,function lN(f,u,d){return dI.apply(this,arguments)}(d._delegate,u,$a))})()}linkWithRedirect(u){var d=this;return(0,y.A)(function*(){return yield lm(Ln(d.auth)),jb(d._delegate,u,$a)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var d=this;return(0,y.A)(function*(){return Zr(d.auth,ch(d._delegate,u))})()}reauthenticateWithPhoneNumber(u,d){return Ua(this.auth,function jg(f,u,d){return sa.apply(this,arguments)}(this._delegate,u,d))}reauthenticateWithPopup(u){return Zr(this.auth,function aN(f,u,d){return uI.apply(this,arguments)}(this._delegate,u,$a))}reauthenticateWithRedirect(u){var d=this;return(0,y.A)(function*(){return yield lm(Ln(d.auth)),_I(d._delegate,u,$a)})()}sendEmailVerification(u){return function bb(f,u){return xg.apply(this,arguments)}(this._delegate,u)}unlink(u){var d=this;return(0,y.A)(function*(){return yield function vb(f,u){return Sg.apply(this,arguments)}(d._delegate,u),d})()}updateEmail(u){return function Ab(f,u){return Og((0,G.Ku)(f),u,null)}(this._delegate,u)}updatePassword(u){return function Uo(f,u){return Og((0,G.Ku)(f),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function Hg(f,u){return zg.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function Ke(f,u){return kg.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,d){return function Yy(f,u,d){return Mg.apply(this,arguments)}(this._delegate,u,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}xn.USER_MAP=new WeakMap;const bl=D;let jI=(()=>{class f{constructor(d,g){if(this.app=d,g.isInitialized())return this._delegate=g.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:v}=d.options;bl(v,"invalid-api-key",{appName:d.name}),bl(v,"invalid-api-key",{appName:d.name});const C=typeof window<"u"?$a:void 0;this._delegate=g.initialize({options:{persistence:ha(v,d.name),popupRedirectResolver:C}}),this._delegate._updateErrorMap(be),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?xn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,g){!function he(f,u,d){const g=Ln(f);D(g._canInitEmulator,g,"emulator-config-failed"),D(/^https?:\/\//.test(u),g,"invalid-emulator-scheme");const v=!(null==d||!d.disableWarnings),C=Qe(u),{host:O,port:te}=function qe(f){const u=Qe(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(u.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const C=v[1];return{host:C,port:st(g.substr(C.length+1))}}{const[C,O]=g.split(":");return{host:C,port:st(O)}}}(u);g.config.emulator={url:`${C}//${O}${null===te?"":`:${te}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:O,port:te,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function St(){function f(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,d,g)}applyActionCode(d){return function ls(f,u){return Jn.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return qy(this._delegate,d)}confirmPasswordReset(d,g){return function dh(f,u,d){return cc.apply(this,arguments)}(this._delegate,d,g)}createUserWithEmailAndPassword(d,g){var v=this;return(0,y.A)(function*(){return Zr(v._delegate,function Fu(f,u,d){return fh.apply(this,arguments)}(v._delegate,d,g))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function Cb(f,u){return Pg.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function Ib(f,u){const d=nc.parseLink(u);return"EMAIL_SIGNIN"===(null==d?void 0:d.operation)}(0,d)}getRedirectResult(){var d=this;return(0,y.A)(function*(){bl(qh(),d._delegate,"operation-not-supported-in-this-environment");const g=yield function vI(f,u){return Ph.apply(this,arguments)}(d._delegate,$a);return g?Zr(d._delegate,Promise.resolve(g)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function iT(f,u){Ln(f)._logFramework(u)}(this._delegate,d)}onAuthStateChanged(d,g,v){const{next:C,error:O,complete:te}=dm(d,g,v);return this._delegate.onAuthStateChanged(C,O,te)}onIdTokenChanged(d,g,v){const{next:C,error:O,complete:te}=dm(d,g,v);return this._delegate.onIdTokenChanged(C,O,te)}sendSignInLinkToEmail(d,g){return function yb(f,u,d){return Lu.apply(this,arguments)}(this._delegate,d,g)}sendPasswordResetEmail(d,g){return function Wy(f,u,d){return ku.apply(this,arguments)}(this._delegate,d,g||void 0)}setPersistence(d){var g=this;return(0,y.A)(function*(){let v;switch(function am(f,u){wc(Object.values(Wi).includes(u),f,"invalid-persistence-type"),(0,G.lV)()?wc(u!==Wi.SESSION,f,"unsupported-persistence-type"):(0,G.Ll)()?wc(u===Wi.NONE,f,"unsupported-persistence-type"):Wh()?wc(u===Wi.NONE||u===Wi.LOCAL&&(0,G.zW)(),f,"unsupported-persistence-type"):wc(u===Wi.NONE||lT(),f,"unsupported-persistence-type")}(g._delegate,d),d){case Wi.SESSION:v=Si;break;case Wi.LOCAL:v=(yield kt(Pi)._isAvailable())?Pi:yh;break;case Wi.NONE:v=Et;break;default:return ze("argument-error",{appName:g._delegate.name})}return g._delegate.setPersistence(v)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return Zr(this._delegate,function $e(f){return ic.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return Zr(this._delegate,ra(this._delegate,d))}signInWithCustomToken(d){return Zr(this._delegate,function Eo(f,u){return Nu.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,g){return Zr(this._delegate,function Qy(f,u,d){return ra((0,G.Ku)(f),oh.credential(u,d)).catch(function(){var g=(0,y.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Tn(f),v});return function(v){return g.apply(this,arguments)}}())}(this._delegate,d,g))}signInWithEmailLink(d,g){return Zr(this._delegate,function Eb(f,u,d){return Co.apply(this,arguments)}(this._delegate,d,g))}signInWithPhoneNumber(d,g){return Ua(this._delegate,function Vr(f,u,d){return ju.apply(this,arguments)}(this._delegate,d,g))}signInWithPopup(d){var g=this;return(0,y.A)(function*(){return bl(qh(),g._delegate,"operation-not-supported-in-this-environment"),Zr(g._delegate,function sN(f,u,d){return cI.apply(this,arguments)}(g._delegate,d,$a))})()}signInWithRedirect(d){var g=this;return(0,y.A)(function*(){return bl(qh(),g._delegate,"operation-not-supported-in-this-environment"),yield lm(g._delegate),Bb(g._delegate,d,$a)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function Ky(f,u){return hh.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=Wi,f})();function dm(f,u,d){let g=f;"function"!=typeof f&&({next:g,error:u,complete:d}=f);const v=g;return{next:O=>v(O&&xn.getOrCreate(O)),error:u,complete:d}}function ha(f,u){const d=function BI(f,u){const d=cm();if(!d)return[];const g=Lr(Ju,f,u);switch(d.getItem(g)){case Wi.NONE:return[Et];case Wi.LOCAL:return[Pi,Si];case Wi.SESSION:return[Si];default:return[]}}(f,u);if(typeof self<"u"&&!d.includes(Pi)&&d.push(Pi),typeof window<"u")for(const g of[yh,Si])d.includes(g)||d.push(g);return d.includes(Et)||d.push(Et),d}class hm{constructor(){this.providerId="phone",this._delegate=new Hu(ed(Le.A.auth()))}static credential(u,d){return Hu.credential(u,d)}verifyPhoneNumber(u,d){return this._delegate.verifyPhoneNumber(u,d)}unwrap(){return this._delegate}}hm.PHONE_SIGN_IN_METHOD=Hu.PHONE_SIGN_IN_METHOD,hm.PROVIDER_ID=Hu.PROVIDER_ID;const HI=D;class fm{constructor(u,d,g=Le.A.app()){var v;HI(null===(v=g.options)||void 0===v?void 0:v.apiKey,"invalid-api-key",{appName:g.name}),this._delegate=new ks(g.auth(),u,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function zI(f){f.INTERNAL.registerComponent(new q.uA("auth-compat",u=>{const d=u.getProvider("app-compat").getImmediate(),g=u.getProvider("auth");return new jI(d,g)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:oh,FacebookAuthProvider:sh,GithubAuthProvider:Fy,GoogleAuthProvider:xu,OAuthProvider:Ps,SAMLAuthProvider:ea,PhoneAuthProvider:hm,PhoneMultiFactorGenerator:DI,RecaptchaVerifier:fm,TwitterAuthProvider:Vy,Auth:jI,AuthCredential:Nt,Error:G.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.4")}(Le.A)},467:(zn,Vt,le)=>{"use strict";function y(G,We,Pt,Ze,q,Je,ot){try{var ne=G[Je](ot),X=ne.value}catch(we){return void Pt(we)}ne.done?We(X):Promise.resolve(X).then(Ze,q)}function Le(G){return function(){var We=this,Pt=arguments;return new Promise(function(Ze,q){var Je=G.apply(We,Pt);function ot(X){y(Je,Ze,q,ot,ne,"next",X)}function ne(X){y(Je,Ze,q,ot,ne,"throw",X)}ot(void 0)})}}le.d(Vt,{A:()=>Le})},1635:(zn,Vt,le)=>{"use strict";function We(F,R){var N={};for(var W in F)Object.prototype.hasOwnProperty.call(F,W)&&R.indexOf(W)<0&&(N[W]=F[W]);if(null!=F&&"function"==typeof Object.getOwnPropertySymbols){var ae=0;for(W=Object.getOwnPropertySymbols(F);ae<W.length;ae++)R.indexOf(W[ae])<0&&Object.prototype.propertyIsEnumerable.call(F,W[ae])&&(N[W[ae]]=F[W[ae]])}return N}function Pt(F,R,N,W){var Ye,ae=arguments.length,Y=ae<3?R:null===W?W=Object.getOwnPropertyDescriptor(R,N):W;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Y=Reflect.decorate(F,R,N,W);else for(var dt=F.length-1;dt>=0;dt--)(Ye=F[dt])&&(Y=(ae<3?Ye(Y):ae>3?Ye(R,N,Y):Ye(R,N))||Y);return ae>3&&Y&&Object.defineProperty(R,N,Y),Y}function we(F,R,N,W){return new(N||(N=Promise))(function(Y,Ye){function dt(Bt){try{ft(W.next(Bt))}catch(pn){Ye(pn)}}function rt(Bt){try{ft(W.throw(Bt))}catch(pn){Ye(pn)}}function ft(Bt){Bt.done?Y(Bt.value):function ae(Y){return Y instanceof N?Y:new N(function(Ye){Ye(Y)})}(Bt.value).then(dt,rt)}ft((W=W.apply(F,R||[])).next())})}function ke(F){return this instanceof ke?(this.v=F,this):new ke(F)}function ze(F,R,N){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,W=N.apply(F,R||[]),Y=[];return ae={},Ye("next"),Ye("throw"),Ye("return"),ae[Symbol.asyncIterator]=function(){return this},ae;function Ye(wt){W[wt]&&(ae[wt]=function(cn){return new Promise(function(jt,Ae){Y.push([wt,cn,jt,Ae])>1||dt(wt,cn)})})}function dt(wt,cn){try{!function rt(wt){wt.value instanceof ke?Promise.resolve(wt.value.v).then(ft,Bt):pn(Y[0][2],wt)}(W[wt](cn))}catch(jt){pn(Y[0][3],jt)}}function ft(wt){dt("next",wt)}function Bt(wt){dt("throw",wt)}function pn(wt,cn){wt(cn),Y.shift(),Y.length&&dt(Y[0][0],Y[0][1])}}function nt(F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,R=F[Symbol.asyncIterator];return R?R.call(F):(F=function Pe(F){var R="function"==typeof Symbol&&Symbol.iterator,N=R&&F[R],W=0;if(N)return N.call(F);if(F&&"number"==typeof F.length)return{next:function(){return F&&W>=F.length&&(F=void 0),{value:F&&F[W++],done:!F}}};throw new TypeError(R?"Object is not iterable.":"Symbol.iterator is not defined.")}(F),N={},W("next"),W("throw"),W("return"),N[Symbol.asyncIterator]=function(){return this},N);function W(Y){N[Y]=F[Y]&&function(Ye){return new Promise(function(dt,rt){!function ae(Y,Ye,dt,rt){Promise.resolve(rt).then(function(ft){Y({value:ft,done:dt})},Ye)}(dt,rt,(Ye=F[Y](Ye)).done,Ye.value)})}}}le.d(Vt,{AQ:()=>ze,Cg:()=>Pt,N3:()=>ke,Tt:()=>We,sH:()=>we,xN:()=>nt}),"function"==typeof SuppressedError&&SuppressedError}},zn=>{zn(zn.s=4493)}]);